{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/system/group/list.vue?vue&type=style&index=0&id=f568dd8c&scoped=true&lang=stylus&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/system/group/list.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi9kZWVwLyAuaXZ1LW1lbnUtdmVydGljYWwgLml2dS1tZW51LWl0ZW0tZ3JvdXAtdGl0bGV7CiAgICBkaXNwbGF5OiBub25lOwp9Ci9kZWVwLyAuaXZ1LW1lbnUtdmVydGljYWwuaXZ1LW1lbnUtbGlnaHQ6YWZ0ZXJ7CiAgICBkaXNwbGF5IG5vbmUKfQoKLmxlZnQtd3JhcHBlcgogICAgaGVpZ2h0IDkwNHB4CiAgICBiYWNrZ3JvdW5kICNmZmYKICAgIGJvcmRlci1yaWdodCAxcHggc29saWQgI2RjZGVlMgoubWVudS1pdGVtCiAgICB6LWluZGV4IDUwCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBkaXNwbGF5IGZsZXgKICAgIGp1c3RpZnktY29udGVudCBzcGFjZS1iZXR3ZWVuCiAgICB3b3JkLWJyZWFrIGJyZWFrLWFsbAogICAgLmljb24tYm94CiAgICAgICAgei1pbmRleCAzCiAgICAgICAgcG9zaXRpb24gYWJzb2x1dGUKICAgICAgICByaWdodCAyMHB4CiAgICAgICAgdG9wIDUwJQogICAgICAgIHRyYW5zZm9ybSB0cmFuc2xhdGVZKC01MCUpCiAgICAgICAgZGlzcGxheSBub25lCiAgICAmOmhvdmVyIC5pY29uLWJveAogICAgICAgIGRpc3BsYXkgYmxvY2sKICAgIC5yaWdodC1tZW51CiAgICAgICAgei1pbmRleCAxMAogICAgICAgIHBvc2l0aW9uIGFic29sdXRlCiAgICAgICAgcmlnaHQ6IC0xMDZweDsKICAgICAgICB0b3A6IC0xMXB4OwogICAgICAgIHdpZHRoIGF1dG8KICAgICAgICBtaW4td2lkdGg6IDEyMXB4OwoudGFiQm94X2ltZwogICAgd2lkdGggMzZweAogICAgaGVpZ2h0IDM2cHgKICAgIGJvcmRlci1yYWRpdXM6NHB4CiAgICBjdXJzb3IgcG9pbnRlcgogICAgaW1nCiAgICAgICAgd2lkdGggMTAwJQogICAgICAgIGhlaWdodCAxMDAlCg=="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8RA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/pages/system/group","sourcesContent":["<template>\n    <div>\n        <div class=\"i-layout-page-header\">\n            <div class=\"i-layout-page-header\">\n                <Button icon=\"ios-arrow-back\" size=\"small\"  @click=\"back\" class=\"mr20\" v-if=\"$route.meta.auth[0] === 'system-config-system_config-list'\">返回</Button>\n                <span class=\"ivu-page-header-title mr20\" v-text=\"$route.meta.title\"></span>\n            </div>\n        </div>\n        <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n            <Row class=\"ivu-mt box-wrapper\">\n                <Col :xs=\"24\" :sm=\"24\" :md=\"6\" :lg=\"4\" class=\"left-wrapper\" v-if=\"!$route.params.id && groupAll.length\">\n                    <Menu :theme=\"theme3\" :active-name=\"sortName\" width=\"auto\" >\n                        <MenuGroup>\n                            <MenuItem :name=\"item.id\" class=\"menu-item\" v-for=\"(item,index) in groupAll\" :key=\"index\" @click.native=\"bindMenuItem(item,index)\">\n                                {{item.name}}\n                            </MenuItem>\n                        </MenuGroup>\n                    </Menu>\n                </Col>\n                <Col :xs=\"24\" :sm=\"24\" :md=\"$route.params.id?24:17\" :lg=\"$route.params.id?24:20\" ref=\"rightBox\">\n                    <Card :bordered=\"false\" dis-hover >\n                        <Form ref=\"formValidate\" :model=\"formValidate\"  :label-width=\"labelWidth\" :label-position=\"labelPosition\" @submit.native.prevent>\n                            <Row type=\"flex\" :gutter=\"24\">\n                                <Col v-bind=\"grid\">\n                                    <FormItem label=\"是否显示：\">\n                                        <Select v-model=\"formValidate.status\" placeholder=\"请选择\" clearable  @on-change=\"userSearchs\">\n                                            <Option value=\"1\">显示</Option>\n                                            <Option value=\"0\">不显示</Option>\n                                        </Select>\n                                    </FormItem>\n                                </Col>\n                            </Row>\n                            <Row type=\"flex\">\n                                <Col v-bind=\"grid\">\n                                    <Button type=\"primary\" icon=\"md-add\" @click=\"groupAdd('添加数据')\" class=\"mr20\">添加数据</Button>\n                                </Col>\n                            </Row>\n                        </Form>\n                        <Table :columns=\"columns1\" :data=\"tabList\" ref=\"table\" class=\"mt25\"\n                               :loading=\"loading\" highlight-row\n                               no-userFrom-text=\"暂无数据\"\n                               no-filtered-userFrom-text=\"暂无筛选结果\">\n                            <template slot-scope=\"{ row, index }\" slot=\"status\">\n                                <i-switch v-model=\"row.status\" :value=\"row.status\" :true-value=\"1\" :false-value=\"0\" @on-change=\"onchangeIsShow(row)\" size=\"large\">\n                                    <span slot=\"open\">显示</span>\n                                    <span slot=\"close\">隐藏</span>\n                                </i-switch>\n                            </template>\n                            <template slot-scope=\"{ row, index }\" slot=\"action\">\n                                <a @click=\"edit(row, '编辑')\">编辑</a>\n                                <Divider type=\"vertical\"/>\n                                <a @click=\"del(row,'删除这条信息',index)\">删除</a>\n                            </template>\n                        </Table>\n                        <div class=\"acea-row row-right page\">\n                            <Page :total=\"total\" :current=\"formValidate.page\" show-elevator show-total @on-change=\"pageChange\"\n                                  :page-size=\"formValidate.limit\"/>\n                        </div>\n                    </Card>\n                </Col>\n            </Row>\n        </Card>\n    </div>\n</template>\n\n<script>\n    import { mapState } from 'vuex'\n    import editFrom from '@/components/from/from'\n    import { groupDataListApi, groupDataAddApi, groupDataEditApi, groupDataHeaderApi, groupDataSetApi,groupAllApi } from '@/api/system'\n    export default {\n        name: 'list',\n        components: { editFrom },\n        data () {\n            return {\n                grid: {\n                    xl: 7,\n                    lg: 7,\n                    md: 12,\n                    sm: 24,\n                    xs: 24\n                },\n                formValidate: {\n                    status: '',\n                    page: 1,\n                    limit: 20,\n                    gid: 0\n                },\n                total: 0,\n                tabList: [],\n                columns1: [],\n                FromData: null,\n                loading: false,\n                titleType: 'group',\n                groupAll: [],\n                theme3:'light',\n                labelSort:[],\n                sortName: null,\n                current: 0\n            }\n        },\n        computed: {\n            ...mapState('media', [\n                'isMobile'\n            ]),\n            labelWidth () {\n                return this.isMobile ? undefined : 75\n            },\n            labelPosition () {\n                return this.isMobile ? 'top' : 'right'\n            }\n        },\n        watch: {\n            $route (to, from) {\n                if(this.$route.params.id){\n                    this.getList();\n                    this.getListHeader()\n                }else{\n                    this.getGroupAll();\n                }\n            }\n        },\n        mounted () {\n            if(this.$route.params.id){\n                this.getList();\n                this.getListHeader()\n            }else {\n                this.getGroupAll();\n            }\n        },\n        methods: {\n            bindMenuItem(name,index){\n                this.current = index;\n                this.formValidate.gid = name.id\n                this.getListHeader();\n                this.getList();\n            },\n            getGroupAll () {\n                groupAllApi().then(async res => {\n                    this.groupAll = res.data;\n                    this.sortName = res.data[0].id\n                    this.formValidate.gid = res.data[0].id\n                    this.getListHeader()\n                    this.getList()\n                }).catch(res => {\n                    this.$Message.error(res.msg)\n                })\n            },\n            // 返回\n            back () {\n                this.$router.push({ path: '/admin/system/config/system_group/index' })\n            },\n            getUrl (type) {\n                let url = 'setting/group_data'+type;\n                if(this.$route.params.id){\n                    let arr = {\n                        'setting_groupDataSign': \"setting/sign_data\"+type,\n                        'setting_groupDataOrder': \"setting/order_data\"+type,\n                        'setting_groupDataUser': \"setting/usermenu_data\"+type,\n                        'setting_groupDataPoster': \"setting/poster_data\"+type,\n                        'marketing_storeSeckillData': \"setting/seckill_data\"+type,\n                    };\n                    if(arr[this.$route.name] === undefined) return url\n                    return arr[this.$route.name]\n                }else{\n                    return url\n                }\n            },\n            // 列表\n            getList () {\n                this.loading = true\n                this.formValidate.gid = this.$route.params.id?this.$route.params.id:this.formValidate.gid\n                this.formValidate.status = this.formValidate.status || ''\n                console.log(this.getUrl())\n                groupDataListApi(this.formValidate,this.getUrl('')).then(async res => {\n                    let data = res.data\n                    this.tabList = data.list\n                    this.total = data.count\n                    this.loading = false\n                }).catch(res => {\n                    console.log(res)\n                    this.loading = false\n                    this.$Message.error(res.msg)\n                })\n            },\n            // 表格头部\n            getListHeader () {\n                this.loading = true\n                let data = {\n                    gid: this.$route.params.id?this.$route.params.id:this.formValidate.gid\n                }\n                groupDataHeaderApi(data,this.getUrl('/header')).then(async res => {\n                    let data = res.data\n                    let header = data.header\n                    let index = []\n                    header.forEach(function (item, i) {\n                        if (item.type === 'img') {\n                            index.push(i)\n                        }\n                    })\n                    index.forEach(function (item) {\n                        header[item].render = (h, params) => {\n                            let arr = params.row[header[item].key]\n                            let newArr = []\n                            if (arr !== undefined && arr.length) {\n                                arr.forEach(function (e, i) {\n                                    newArr.push(h('div', {\n                                        style: {\n                                            width: '36px',\n                                            height: '36px',\n                                            'border-radius': '4px',\n                                            cursor: 'pointer',\n                                            display: 'inline-block'\n                                        }\n                                    }, [\n                                        h('img', {\n                                            attrs: {\n                                                src: params.row[header[item].key][i]\n                                            },\n                                            style: {\n                                                width: '100%',\n                                                height: '100%'\n                                            }\n                                        })\n                                    ]))\n                                })\n                            }\n                            return h('viewer', newArr)\n                        }\n                    })\n                    this.columns1 = header\n                    this.loading = false\n                }).catch(res => {\n                    this.loading = false\n                    this.$Message.error(res.msg)\n                })\n            },\n            pageChange (index) {\n                this.formValidate.page = index\n                this.getList()\n            },\n            // 表格搜索\n            userSearchs () {\n                this.formValidate.page = 1\n                this.getList()\n            },\n            // 添加表单\n            groupAdd () {\n                this.$modalForm(groupDataAddApi({ gid: this.$route.params.id?this.$route.params.id:this.formValidate.gid },this.getUrl('/create'))).then(() => this.getList())\n            },\n            // 修改是否显示\n            onchangeIsShow (row) {\n                groupDataSetApi(this.getUrl(`/set_status/${row.id}/${row.status}`)).then(async res => {\n                    this.$Message.success(res.msg)\n                    this.getList()\n                }).catch(res => {\n                    this.$Message.error(res.msg)\n                })\n            },\n            // 编辑\n            edit (row) {\n                let data = {\n                    gid: row.gid\n                }\n                this.$modalForm(groupDataEditApi(data,this.getUrl(`/${row.id}/edit`))).then(() => this.getList())\n            },\n            // 删除\n            del (row, tit, num) {\n                let delfromData = {\n                    title: tit,\n                    num: num,\n                    url: this.getUrl(`/${row.id}`),\n                    method: 'DELETE',\n                    ids: ''\n                }\n                this.$modalSure(delfromData).then((res) => {\n                    this.$Message.success(res.msg)\n                    this.tabList.splice(num, 1)\n                }).catch(res => {\n                    this.$Message.error(res.msg)\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n    /deep/ .ivu-menu-vertical .ivu-menu-item-group-title{\n        display: none;\n    }\n    /deep/ .ivu-menu-vertical.ivu-menu-light:after{\n        display none\n    }\n\n    .left-wrapper\n        height 904px\n        background #fff\n        border-right 1px solid #dcdee2\n    .menu-item\n        z-index 50\n        position: relative;\n        display flex\n        justify-content space-between\n        word-break break-all\n        .icon-box\n            z-index 3\n            position absolute\n            right 20px\n            top 50%\n            transform translateY(-50%)\n            display none\n        &:hover .icon-box\n            display block\n        .right-menu\n            z-index 10\n            position absolute\n            right: -106px;\n            top: -11px;\n            width auto\n            min-width: 121px;\n    .tabBox_img\n        width 36px\n        height 36px\n        border-radius:4px\n        cursor pointer\n        img\n            width 100%\n            height 100%\n</style>\n"]}]}