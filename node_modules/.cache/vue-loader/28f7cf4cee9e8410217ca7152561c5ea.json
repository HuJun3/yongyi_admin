{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/marketing/live/creat_live.vue?vue&type=style&index=0&id=16a54e28&scoped=true&lang=stylus&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/marketing/live/creat_live.vue","mtime":1610681878000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLlFScGljIHsKICAgIHdpZHRoOiAxODBweDsKICAgIGhlaWdodDogMTgwcHg7CgogICAgaW1nIHsKICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICB9Cn0KLnVwbG9hZC1ib3gKICAgIGRpc3BsYXkgZmxleAogICAgYWxpZ24taXRlbXMgY2VudGVyCiAgICBqdXN0aWZ5LWNvbnRlbnQgY2VudGVyCiAgICB3aWR0aCA2MHB4CiAgICBoZWlnaHQgNjBweAogICAgYmFja2dyb3VuZCAjY2NjCi5ib3gKICAgIHdpZHRoIDYwcHgKICAgIGhlaWdodCA2MHB4CiAgICBtYXJnaW4tYm90dG9tIDEwcHgKICAgIGltZwogICAgICAgIHdpZHRoIDEwMCUKICAgICAgICBoZWlnaHQgMTAwJQo="},{"version":3,"sources":["creat_live.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiUA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"creat_live.vue","sourceRoot":"src/pages/marketing/live","sourcesContent":["<template>\n    <div>\n        <div class=\"i-layout-page-header\">\n            <router-link :to=\"{path:'/admin/marketing/live/live_room'}\"><Button icon=\"ios-arrow-back\" size=\"small\"  class=\"mr20\">返回</Button></router-link>\n            <span class=\"ivu-page-header-title\">{{$route.meta.title}}</span>\n        </div>\n        <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n            <Form ref=\"formValidate\" :model=\"formValidate\" :label-width=\"labelWidth\" :label-position=\"labelPosition\" class=\"tabform\" @submit.native.prevent>\n                <Col span=\"24\">\n                    <Alert type=\"warning\" show-icon style=\"width: 550px;margin-left: 17px;margin-bottom: 25px;\">必须前往微信小程序官方后台开通直播权限，关注<span style=\"color: red;cursor: pointer;\" @click=\"codeImg\">【小程序直播】</span>须知直播状态</Alert>\n                </Col>\n                <Col span=\"24\">\n                    <FormItem label=\"选择主播：\">\n                        <Select v-model=\"formValidate.anchor_wechat\" filterable clearable style=\"width: 300px;\" @on-change=\"anchorName\">\n                            <Option v-for=\"(item,index) in liveList\" :value=\"item.wechat\" :key=\"index\">{{ item.wechat }}</Option>\n                        </Select>\n                    </FormItem>\n                </Col>\n                <Row :gutter=\"24\" type=\"flex\">\n                    <Col span=\"24\">\n                        <FormItem label=\"直播间名称：\">\n                            <Input enter-button  placeholder=\"请输入直播间名称\" element-id=\"name\" v-model=\"formValidate.name\" style=\"width: 300px;\"/>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <div style=\"display: flex\">\n                            <FormItem label=\"背景图：\">\n                                <div @click=\"modalPicTap(0)\" class=\"box\">\n                                    <img :src=\"formValidate.cover_img\" alt=\"\" v-if=\"formValidate.cover_img\">\n                                    <div class=\"upload-box\" v-else><Icon type=\"ios-camera-outline\" size=\"36\" /></div>\n                                </div>\n                            </FormItem>\n                            <span style=\"margin-left: 20px;color:#b0bac5;\">尺寸：1080*1920px</span>\n                        </div>\n\n                    </Col>\n                    <Col span=\"24\">\n                        <div style=\"display: flex\">\n                            <FormItem label=\"分享图：\">\n                                <div @click=\"modalPicTap(1)\" class=\"box\">\n                                    <img :src=\"formValidate.share_img\" alt=\"\" v-if=\"formValidate.share_img\">\n                                    <div class=\"upload-box\" v-else><Icon type=\"ios-camera-outline\" size=\"36\" /></div>\n                                </div>\n                            </FormItem>\n                            <span style=\"margin-left: 20px;color:#b0bac5;\">尺寸：800*640px</span>\n                        </div>\n                    </Col>\n                    <!--<Col span=\"24\">-->\n                        <!--<FormItem label=\"主播昵称：\">-->\n                            <!--<Input enter-button  placeholder=\"请输入主播昵称\" element-id=\"anchor_name\" v-model=\"formValidate.anchor_name\" style=\"width: 60%;\"/>-->\n                        <!--</FormItem>-->\n                    <!--</Col>-->\n                    <Col span=\"24\">\n                        <FormItem label=\"联系电话：\">\n                            <Input enter-button  placeholder=\"请输入主播联系电话\" element-id=\"phone\" v-model=\"formValidate.phone\" style=\"width: 300px;\"/>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"直播时间：\">\n                            <DatePicker type=\"datetimerange\" format=\"yyyy-MM-dd HH:mm\" placeholder=\"请选择直播时间\" style=\"width: 300px;\" :value=\"timeVal\" @on-change=\"selectDate\"></DatePicker>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"排序：\">\n                            <Input type=\"number\" enter-button  placeholder=\"0\" element-id=\"phone\" v-model=\"formValidate.sort\" style=\"width: 300px;\"/>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"显示样式：\">\n                            <RadioGroup v-model=\"formValidate.screen_type\">\n                                <Radio :label=\"item.label\" v-for=\"item in screen_type\">\n                                    <span>{{item.value}}</span>\n                                </Radio>\n                            </RadioGroup>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"直播间类型：\">\n                            <RadioGroup v-model=\"formValidate.type\">\n                                <Radio :label=\"item.label\" v-for=\"item in type\">\n                                    <span>{{item.value}}</span>\n                                </Radio>\n                            </RadioGroup>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"直播间点赞：\">\n                            <RadioGroup v-model=\"formValidate.close_like\">\n                                <Radio :label=\"item.label\" v-for=\"item in close_like\">\n                                    <span>{{item.value}}</span>\n                                </Radio>\n                            </RadioGroup>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"直播卖货：\">\n                            <RadioGroup v-model=\"formValidate.close_goods\">\n                                <Radio :label=\"item.label\" v-for=\"item in close_goods\">\n                                    <span>{{item.value}}</span>\n                                </Radio>\n                            </RadioGroup>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"直播间评论：\">\n                            <RadioGroup v-model=\"formValidate.close_comment\">\n                                <Radio :label=\"item.label\" v-for=\"item in close_comment\">\n                                    <span>{{item.value}}</span>\n                                </Radio>\n                            </RadioGroup>\n                        </FormItem>\n                    </Col>\n                </Row>\n                <Row :gutter=\"24\" type=\"flex\">\n                    <Col v-bind=\"grid\" span=\"24\">\n                        <Button type=\"primary\" @click=\"handleSubmit('formItem')\" style=\"width:19%;margin-left: 99px;\">提交</Button>\n                    </Col>\n                </Row>\n            </Form>\n        </Card>\n        <div>\n            <Modal v-model=\"modalPic\" width=\"950px\" scrollable  footer-hide closable title='上传商品图' :mask-closable=\"false\" :z-index=\"888\">\n                <uploadPictures :isChoice=\"isChoice\" @getPic=\"getPic\" :gridBtn=\"gridBtn\" :gridPic=\"gridPic\" v-if=\"modalPic\"></uploadPictures>\n            </Modal>\n        </div>\n        <Modal v-model=\"modal3\" title=\"二维码\" @on-cancel=\"cancel\" footer-hide>\n            <div class=\"acea-row row-around\">\n                <div v-viewer class=\"QRpic\">\n                    <img src=\"https://res.wx.qq.com/op_res/9rSix1dhHfK4rR049JL0PHJ7TpOvkuZ3mE0z7Ou_Etvjf-w1J_jVX0rZqeStLfwh\" />\n                </div>\n            </div>\n            <Spin fix v-if=\"spin\"></Spin>\n        </Modal>\n    </div>\n</template>\n\n<script>\n    import {mapState} from \"vuex\";\n    import uploadPictures from '@/components/uploadPictures';\n    import { liveAdd, liveAuchorList } from '@/api/live'\n    export default {\n        name: \"creat_live\",\n        components: {\n            uploadPictures\n        },\n        computed: {\n            ...mapState('media', [\n                'isMobile'\n            ]),\n            labelWidth () {\n                return this.isMobile ? undefined : 100;\n            },\n            labelPosition () {\n                return this.isMobile ? 'top' : 'right';\n            }\n        },\n        data(){\n            return {\n                gridBtn: {\n                    xl: 4,\n                    lg: 8,\n                    md: 8,\n                    sm: 8,\n                    xs: 8\n                },\n                gridPic: {\n                    xl: 6,\n                    lg: 8,\n                    md: 12,\n                    sm: 12,\n                    xs: 12\n                },\n                grid: {\n                    xl: 10,\n                    lg: 16,\n                    md: 18,\n                    sm: 24,\n                    xs: 24\n                },\n                formValidate:{\n                    name:'',\n                    anchor_name:'',\n                    anchor_wechat:'',\n                    phone:'',\n                    screen_type:0,\n                    close_like:1,\n                    close_goods:1,\n                    close_comment:1,\n                    cover_img:'',\n                    share_img:'',\n                    sort:0,\n                    type:0,\n                    start_time:''\n                },\n                screen_type:[\n                    {\n                        value:'竖屏',\n                        label:0\n                    },\n                    {\n                        value:'横屏',\n                        label:1\n                    }\n                ],\n                type:[\n                    // {\n                    //     value:'推流',\n                    //     label:1\n                    // },\n                    {\n                        value:'手机直播',\n                        label:0\n                    }\n                ],\n                close_like:[\n                    {\n                        value:'开启',\n                        label:1\n                    },\n                    {\n                        value:'关闭',\n                        label:0\n                    }\n                ],\n                close_goods:[\n                    {\n                        value:'开启',\n                        label:1\n                    },\n                    {\n                        value:'关闭',\n                        label:0\n                    }\n                ],\n                close_comment:[\n                    {\n                        value:'开启',\n                        label:1\n                    },\n                    {\n                        value:'关闭',\n                        label:0\n                    }\n                ],\n                timeVal:'',\n                modalPic: false,\n                isChoice: '单选',\n                activeIndex:0,\n                liveList: [],\n                modal3:false\n            }\n        },\n        mounted(){\n            this.getLive();\n        },\n        methods:{\n            cancel () {\n                this.modal3 = false\n            },\n            codeImg () {\n                this.modal3 = true\n            },\n            anchorName (e) {\n                this.liveList.filter((el,index)=>{\n                    if(el.wechat === e){\n                        this.formValidate.anchor_name = el.name\n                    }\n                });\n            },\n            //主播列表；\n            getLive () {\n                let formValidate = {\n                        kerword: '',\n                        page: '',\n                        limit: ''\n                    };\n                liveAuchorList(formValidate).then(res=>{\n                    this.liveList = res.data.list;\n                }).catch(error=>{\n                    this.$Message.error(error.msg);\n                })\n            },\n            // 点击图文封面\n            modalPicTap (type) {\n                this.activeIndex = type\n                this.modalPic = true;\n            },\n            // 选择日期\n            selectDate(e){\n                this.formValidate.start_time = e\n            },\n            // 获取图片信息\n            getPic (pc) {\n                this.$nextTick(() => {\n                    if(this.activeIndex == 0){\n                        this.formValidate.cover_img = pc.att_dir;\n                    }else{\n                        this.formValidate.share_img = pc.att_dir;\n                    }\n                    this.modalPic = false;\n                })\n            },\n            // 保存\n            handleSubmit(name){\n                console.log('name',this.formValidate)\n                liveAdd(this.formValidate).then(res=>{\n                    console.log(res,'res')\n                }).then(res=>{\n                    this.$Message.success('添加成功');\n                    setTimeout(() => {\n                        this.$router.push({ path: '/admin/marketing/live/live_room' });\n                    }, 500);\n                }).catch(error=>{\n                    this.$Message.error(error.msg)\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n    .QRpic {\n        width: 180px;\n        height: 180px;\n\n        img {\n            width: 100%;\n            height: 100%;\n        }\n    }\n    .upload-box\n        display flex\n        align-items center\n        justify-content center\n        width 60px\n        height 60px\n        background #ccc\n    .box\n        width 60px\n        height 60px\n        margin-bottom 10px\n        img\n            width 100%\n            height 100%\n</style>\n"]}]}