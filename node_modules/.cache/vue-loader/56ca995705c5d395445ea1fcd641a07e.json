{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/order/offline/index.vue?vue&type=style&index=0&id=7b648b51&lang=less&scoped=true&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/order/offline/index.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/less-loader/dist/cjs.js","mtime":1625101332743},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY29kZXsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQouUVJwaWMgewogICAgd2lkdGg6IDE4MHB4OwogICAgaGVpZ2h0OiAyNTlweDsKCiAgICBpbWcgewogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIGhlaWdodDogMTAwJTsKICAgIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqSA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/order/offline","sourcesContent":["<template>\n    <div>\n        <div class=\"i-layout-page-header\">\n            <div class=\"i-layout-page-header\">\n                <span class=\"ivu-page-header-title\">{{ $route.meta.title }}</span>\n            </div>\n        </div>\n        <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n            <Form ref=\"pagination\" :model=\"pagination\" :label-width=\"labelWidth\" :label-position=\"labelPosition\" @submit.native.prevent>\n                <Row type=\"flex\" :gutter=\"24\">\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"订单号：\" label-for=\"title\">\n                            <Input\n                                search\n                                enter-button\n                                v-model=\"pagination.order_id\"\n                                placeholder=\"请输入订单号\"\n                                @on-search=\"orderSearch\"\n                            />\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"用户名：\" label-for=\"title\">\n                            <Input\n                                    search\n                                    enter-button\n                                    v-model=\"pagination.name\"\n                                    placeholder=\"请输入用户名\"\n                                    @on-search=\"nameSearch\"\n                            />\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\" class=\"ivu-text-left\">\n                        <FormItem label=\"创建时间：\">\n                            <DatePicker :editable=\"false\" @on-change=\"onchangeTime\" :value=\"timeVal\" format=\"yyyy/MM/dd\"\n                                        type=\"datetimerange\" placement=\"bottom-start\" placeholder=\"自定义时间\"\n                                        style=\"width: 300px;\" class=\"mr20\" :options=\"options\"></DatePicker>\n                        </FormItem>\n                    </Col>\n                </Row>\n                <Row type=\"flex\">\n                    <Col v-bind=\"grid\">\n                        <Button type=\"primary\" @click=\"qrcodeShow\">查看二维码</Button>\n                    </Col>\n                </Row>\n            </Form>\n            <Table\n                :columns=\"thead\"\n                :data=\"tbody\"\n                ref=\"table\"\n                class=\"mt25\"\n                :loading=\"loading\"\n                highlight-row\n                no-userFrom-text=\"暂无数据\"\n                no-filtered-userFrom-text=\"暂无筛选结果\"\n            >\n            </Table>\n            <div class=\"acea-row row-right page\">\n                <Page\n                    :total=\"total\"\n                    :current=\"pagination.page\"\n                    show-elevator\n                    show-total\n                    @on-change=\"pageChange\"\n                    :page-size=\"pagination.limit\"\n                />\n            </div>\n        </Card>\n        <Modal v-model=\"modal\" title=\"收款码\" footer-hide>\n            <div>\n                <!--<div class=\"acea-row row-around mb10\">-->\n                    <!--<RadioGroup v-model=\"animal\" @on-change=\"onchangeCode(animal)\" style=\"width: 180px;\">-->\n                        <!--<Radio :label=\"0\">二维码</Radio>-->\n                        <!--<Radio :label=\"1\">收款码</Radio>-->\n                    <!--</RadioGroup>-->\n                    <!--<div style=\"width: 180px;\"></div>-->\n                <!--</div>-->\n                <div v-viewer class=\"acea-row row-around code\">\n                    <Spin fix v-if=\"spin\"></Spin>\n                    <div class=\"acea-row row-column-around row-between-wrapper\">\n                        <div class=\"QRpic\">\n                            <img v-lazy=\"qrcode && qrcode.wechat\" />\n                        </div>\n                        <span class=\"mt10\">{{animal?'公众号收款码':'公众号二维码'}}</span>\n                    </div>\n                    <div class=\"acea-row row-column-around row-between-wrapper\">\n                        <div class=\"QRpic\">\n                            <img v-lazy=\"qrcode && qrcode.routine\" />\n                        </div>\n                        <span class=\"mt10\">{{animal?'小程序收款码':'小程序二维码'}}</span>\n                    </div>\n                </div>\n            </div>\n        </Modal>\n    </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport { orderScanList, orderOfflineScan } from \"@/api/order\";\n\nexport default {\n    data() {\n        return {\n            grid: {\n                xl: 7,\n                lg: 7,\n                md: 12,\n                sm: 24,\n                xs: 24\n            },\n            thead: [\n                {\n                    title: \"订单号\",\n                    key: \"order_id\"\n                },\n                // {\n                //     title: \"订单类型\",\n                //     render: (h, params) => {\n                //         return h(\"span\", \"线下支付\");\n                //     }\n                // },\n                {\n                    title: \"用户信息\",\n                    key: \"nickname\"\n                },\n                {\n                    title: \"实际支付\",\n                    key: \"pay_price\"\n                },\n                {\n                    title: \"优惠价格\",\n                    key: \"true_price\"\n                },\n                // {\n                //     title: \"订单状态\",\n                //     render: (h, params) => {\n                //         return h(\"span\", \"已支付\");\n                //     }\n                // },\n                {\n                    title: \"支付时间\",\n                    key: \"pay_time\"\n                },\n            ],\n            tbody: [],\n            loading: false,\n            total: 0,\n            animal:1,\n            pagination: {\n                page: 1,\n                limit: 30,\n                order_id:'',\n                add_time:''\n            },\n            options: {\n                shortcuts: [\n                    {\n                        text: '今天',\n                        value () {\n                            const end = new Date()\n                            const start = new Date()\n                            start.setTime(new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate()))\n                            return [start, end]\n                        }\n                    },\n                    {\n                        text: '昨天',\n                        value () {\n                            const end = new Date()\n                            const start = new Date()\n                            start.setTime(start.setTime(new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate() - 1)))\n                            end.setTime(end.setTime(new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate() -1)))\n                            return [start, end]\n                        }\n                    },\n                    {\n                        text: '最近7天',\n                        value () {\n                            const end = new Date()\n                            const start = new Date()\n                            start.setTime(start.setTime(new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate() - 6)))\n                            return [start, end]\n                        }\n                    },\n                    {\n                        text: '最近30天',\n                        value () {\n                            const end = new Date()\n                            const start = new Date()\n                            start.setTime(start.setTime(new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate() - 29)))\n                            return [start, end]\n                        }\n                    },\n                    {\n                        text: '本月',\n                        value () {\n                            const end = new Date()\n                            const start = new Date()\n                            start.setTime(start.setTime(new Date(new Date().getFullYear(), new Date().getMonth(), 1)))\n                            return [start, end]\n                        }\n                    },\n                    {\n                        text: '本年',\n                        value () {\n                            const end = new Date()\n                            const start = new Date()\n                            start.setTime(start.setTime(new Date(new Date().getFullYear(), 0, 1)))\n                            return [start, end]\n                        }\n                    }\n                ]\n            },\n            timeVal:[],\n            modal: false,\n            qrcode: null,\n            name: '',\n            spin:false\n        };\n    },\n    computed: {\n        ...mapState(\"media\", [\"isMobile\"]),\n        labelWidth() {\n            return this.isMobile ? undefined : 75;\n        },\n        labelPosition() {\n            return this.isMobile ? \"top\" : \"right\";\n        }\n    },\n    created() {\n        this.getOrderList();\n    },\n    methods: {\n        onchangeCode (e) {\n            this.animal = e;\n            this.qrcodeShow();\n        },\n        // 具体日期搜索()；\n        onchangeTime (e) {\n            this.pagination.page = 1;\n            this.timeVal = e;\n            this.pagination.add_time = this.timeVal[0] ? this.timeVal.join('-') : '';\n            this.getOrderList();\n        },\n        // 订单列表\n        getOrderList() {\n            this.loading = true;\n            orderScanList(this.pagination)\n                .then(res => {\n                    this.loading = false;\n                    const { count, list } = res.data;\n                    this.total = count;\n                    this.tbody = list;\n                })\n                .catch(err => {\n                    this.loading = false;\n                    this.$Message.error(err.msg);\n                });\n        },\n        // 分页\n        pageChange(index) {\n            this.pagination.page = index;\n            this.getOrderList();\n        },\n        nameSearch() {\n            this.pagination.page = 1;\n            this.getOrderList();\n        },\n        // 订单搜索\n        orderSearch() {\n            this.pagination.page = 1;\n            this.getOrderList();\n        },\n        // 查看二维码\n        qrcodeShow() {\n            this.spin = true;\n            orderOfflineScan({type:this.animal})\n                .then(res => {\n                    this.spin = false;\n                    this.qrcode = res.data;\n                    this.modal = true;\n                })\n                .catch(err => {\n                    this.spin = false;\n                    this.$Message.error(err.msg);\n                });\n        }\n    }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.code{\n    position: relative;\n}\n.QRpic {\n    width: 180px;\n    height: 259px;\n\n    img {\n        width: 100%;\n        height: 100%;\n    }\n}\n</style>\n"]}]}