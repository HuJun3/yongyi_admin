{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/marketing/storeCouponIssue/create.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/marketing/storeCouponIssue/create.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmltcG9ydCBnb29kc0xpc3QgZnJvbSAiQC9jb21wb25lbnRzL2dvb2RzTGlzdC9pbmRleCI7CmltcG9ydCB7IGNvdXBvbkNhdGVnb3J5QXBpLCBjb3Vwb25TYXZlQXBpLCBjb3Vwb25EZXRhaWxBcGkgfSBmcm9tICJAL2FwaS9tYXJrZXRpbmciOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAic3RvcmVDb3Vwb25DcmVhdGUiLAogICAgY29tcG9uZW50czogewogICAgICAgIGdvb2RzTGlzdAogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAgICAgICBmb3JtRGF0YTogewogICAgICAgICAgICAgICAgY291cG9uX3RpdGxlOiAiIiwKICAgICAgICAgICAgICAgIGNvdXBvbl9wcmljZTogMCwKICAgICAgICAgICAgICAgIHR5cGU6IDAsCiAgICAgICAgICAgICAgICB1c2VfbWluX3ByaWNlOiAwLAogICAgICAgICAgICAgICAgY291cG9uX3RpbWU6IDEsCiAgICAgICAgICAgICAgICBzdGFydF91c2VfdGltZTogMCwKICAgICAgICAgICAgICAgIGVuZF91c2VfdGltZTogMCwKICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IDAsCiAgICAgICAgICAgICAgICBlbmRfdGltZTogMCwKICAgICAgICAgICAgICAgIHJlY2VpdmVfdHlwZTogMSwKICAgICAgICAgICAgICAgIGlzX3Blcm1hbmVudDogMSwKICAgICAgICAgICAgICAgIHRvdGFsX2NvdW50OiAxLAogICAgICAgICAgICAgICAgc29ydDogMCwKICAgICAgICAgICAgICAgIHN0YXR1czogMSwKICAgICAgICAgICAgICAgIHByb2R1Y3RfaWQ6ICIiLAogICAgICAgICAgICAgICAgY2F0ZWdvcnlfaWQ6IDAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2F0ZWdvcnlMaXN0OiBbXSwKICAgICAgICAgICAgcHJvZHVjdExpc3Q6IFtdLAogICAgICAgICAgICBpc01pblByaWNlOiAwLAogICAgICAgICAgICBpc0NvdXBvblRpbWU6IDEsCiAgICAgICAgICAgIGlzUmVjZWl2ZVRpbWU6IDAsCiAgICAgICAgICAgIG1vZGFsczogZmFsc2UsCiAgICAgICAgICAgIGRhdGV0aW1lMTogW10sCiAgICAgICAgICAgIGRhdGV0aW1lMjogW10KICAgICAgICB9OwogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLi4ubWFwU3RhdGUoIm1lZGlhIiwgWyJpc01vYmlsZSJdKQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy5nZXRDYXRlZ29yeUxpc3QoKTsKICAgICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgICAgIHRoaXMuZ2V0Q291cG9uRGV0YWlsKCk7CiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAvLyDlk4HnsbsKICAgICAgICBnZXRDYXRlZ29yeUxpc3QoKSB7CiAgICAgICAgICAgIGNvdXBvbkNhdGVnb3J5QXBpKDEpLnRoZW4oYXN5bmMgcmVzID0+IHsKICAgICAgICAgICAgICAgIHJlcy5kYXRhLmZvckVhY2godmFsID0+IHsKICAgICAgICAgICAgICAgICAgICB2YWwuY2F0ZV9uYW1lID0gYCR7dmFsLmh0bWx9JHt2YWwuY2F0ZV9uYW1lfWA7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0ID0gcmVzLmRhdGE7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgLy8g5LyY5oOg5Yi4CiAgICAgICAgZ2V0Q291cG9uRGV0YWlsKCkgewogICAgICAgICAgICBjb3Vwb25EZXRhaWxBcGkodGhpcy4kcm91dGUucGFyYW1zLmlkKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEuY291cG9uX3RpdGxlID0gZGF0YS5jb3Vwb25fdGl0bGU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtRGF0YS50eXBlID0gZGF0YS50eXBlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEuY2F0ZWdvcnlfaWQgPSBkYXRhLmNhdGVnb3J5X2lkOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEuY291cG9uX3ByaWNlID0gcGFyc2VGbG9hdChkYXRhLmNvdXBvbl9wcmljZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtRGF0YS51c2VfbWluX3ByaWNlID0gcGFyc2VGbG9hdChkYXRhLnVzZV9taW5fcHJpY2UpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEuY291cG9uX3RpbWUgPSBkYXRhLmNvdXBvbl90aW1lOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEucmVjZWl2ZV90eXBlID0gZGF0YS5yZWNlaXZlX3R5cGU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtRGF0YS5pc19wZXJtYW5lbnQgPSBkYXRhLmlzX3Blcm1hbmVudDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhLnN0YXR1cyA9IGRhdGEuc3RhdHVzOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEucHJvZHVjdF9pZCA9IGRhdGEucHJvZHVjdF9pZDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhLnN0YXJ0X3RpbWUgPSBkYXRhLnN0YXJ0X3RpbWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtRGF0YS5lbmRfdGltZSA9IGRhdGEuZW5kX3RpbWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtRGF0YS50b3RhbF9jb3VudCA9IGRhdGEudG90YWxfY291bnQ7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtRGF0YS5zb3J0ID0gZGF0YS5zb3J0OwogICAgICAgICAgICAgICAgICAgIGlmICgicHJvZHVjdEluZm8iIGluIGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0TGlzdCA9IGRhdGEucHJvZHVjdEluZm87CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghZGF0YS5jb3Vwb25fdGltZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ291cG9uVGltZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZXRpbWUxID0gW2RhdGEuc3RhcnRfdXNlX3RpbWUgKiAxMDAwLCBkYXRhLmVuZF91c2VfdGltZSAqIDEwMDBdOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhLnN0YXJ0X3VzZV90aW1lID0gdGhpcy5tYWtlRGF0ZShkYXRhLnN0YXJ0X3VzZV90aW1lICogMTAwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEuZW5kX3VzZV90aW1lID0gdGhpcy5tYWtlRGF0ZShkYXRhLmVuZF91c2VfdGltZSAqIDEwMDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdGFydF90aW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZWNlaXZlVGltZSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZXRpbWUyID0gW2RhdGEuc3RhcnRfdGltZSAqIDEwMDAsIGRhdGEuZW5kX3RpbWUgKiAxMDAwXTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtRGF0YS5zdGFydF90aW1lID0gdGhpcy5tYWtlRGF0ZShkYXRhLnN0YXJ0X3RpbWUgKiAxMDAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtRGF0YS5lbmRfdGltZSA9IHRoaXMubWFrZURhdGUoZGF0YS5lbmRfdGltZSAqIDEwMDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKGVyci5tc2cpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBtYWtlRGF0ZShkYXRhKXsKICAgICAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZShkYXRhKTsKICAgICAgICAgICAgbGV0IFlZID0gZGF0ZS5nZXRGdWxsWWVhcigpICsgJy0nOwogICAgICAgICAgICBsZXQgTU0gPSAoZGF0ZS5nZXRNb250aCgpICsgMSA8IDEwID8gJzAnICsgKGRhdGUuZ2V0TW9udGgoKSArIDEpIDogZGF0ZS5nZXRNb250aCgpICsgMSkgKyAnLSc7CiAgICAgICAgICAgIGxldCBERCA9IChkYXRlLmdldERhdGUoKSA8IDEwID8gJzAnICsgKGRhdGUuZ2V0RGF0ZSgpKSA6IGRhdGUuZ2V0RGF0ZSgpKTsKICAgICAgICAgICAgbGV0IGhoID0gKGRhdGUuZ2V0SG91cnMoKSA8IDEwID8gJzAnICsgZGF0ZS5nZXRIb3VycygpIDogZGF0ZS5nZXRIb3VycygpKSArICc6JzsKICAgICAgICAgICAgbGV0IG1tID0gKGRhdGUuZ2V0TWludXRlcygpIDwgMTAgPyAnMCcgKyBkYXRlLmdldE1pbnV0ZXMoKSA6IGRhdGUuZ2V0TWludXRlcygpKSArICc6JzsKICAgICAgICAgICAgbGV0IHNzID0gKGRhdGUuZ2V0U2Vjb25kcygpIDwgMTAgPyAnMCcgKyBkYXRlLmdldFNlY29uZHMoKSA6IGRhdGUuZ2V0U2Vjb25kcygpKTsKICAgICAgICAgICAgcmV0dXJuIFlZICsgTU0gKyBERCArIiAiK2hoICsgbW0gKyBzczsKICAgICAgICB9LAogICAgICAgIC8vIOWIm+W7ugogICAgICAgIHNhdmUoKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5mb3JtRGF0YS5jb3Vwb25fdGl0bGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCLor7fovpPlhaXkvJjmg6DliLjlkI3np7AiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy5mb3JtRGF0YS50eXBlID09PSAyKSB7CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZm9ybURhdGEucHJvZHVjdF9pZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCLor7fpgInmi6nllYblk4EiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy5mb3JtRGF0YS50eXBlID09PSAxKSB7CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZm9ybURhdGEuY2F0ZWdvcnlfaWQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS5lcnJvcigi6K+36YCJ5oup5ZOB57G7Iik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRoaXMuZm9ybURhdGEuY291cG9uX3ByaWNlIDw9IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCLkvJjmg6DliLjpnaLlgLzkuI3og73lsI/kuo4wIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCF0aGlzLmlzTWluUHJpY2UpIHsKICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEudXNlX21pbl9wcmljZSA9IDA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5mb3JtRGF0YS51c2VfbWluX3ByaWNlIDwgMSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCLkvJjmg6DliLjmnIDkvY7mtojotLnkuI3og73lsI/kuo4wIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRoaXMuaXNDb3Vwb25UaW1lKSB7CiAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhLnN0YXJ0X3VzZV90aW1lID0gMDsKICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEuZW5kX3VzZV90aW1lID0gMDsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvcm1EYXRhLmNvdXBvbl90aW1lIDwgMSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCLkvb/nlKjmnInmlYjmnJ/pmZDkuI3og73lsI/kuo4x5aSpIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhLmNvdXBvbl90aW1lID0gMDsKICAgICAgICAgICAgICAgIGlmICghdGhpcy5mb3JtRGF0YS5zdGFydF91c2VfdGltZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCLor7fpgInmi6nkvb/nlKjmnInmlYjmnJ/pmZAiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy5pc1JlY2VpdmVUaW1lKSB7CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZm9ybURhdGEuc3RhcnRfdGltZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCLor7fpgInmi6npooblj5bml7bpl7QiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEuc3RhcnRfdGltZSA9IDA7CiAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhLmVuZF90aW1lID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy5mb3JtRGF0YS5pc19wZXJtYW5lbnQpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKDQ1Nik7CiAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhLnRvdGFsX2NvdW50ID0gMDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvcm1EYXRhLnRvdGFsX2NvdW50IDwgMSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCLlj5HluIPmlbDph4/kuI3og73lsI/kuo4xIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICBjb3Vwb25TYXZlQXBpKHRoaXMuZm9ybURhdGEpCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogIi9hZG1pbi9tYXJrZXRpbmcvc3RvcmVfY291cG9uX2lzc3VlL2luZGV4IgogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKGVyci5tc2cpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICAvLyDkvb/nlKjmnInmlYjmnJ8tLeaXtumXtOautQogICAgICAgIGRhdGVDaGFuZ2UodGltZSkgewogICAgICAgICAgICB0aGlzLmZvcm1EYXRhLnN0YXJ0X3VzZV90aW1lID0gdGltZVswXTsKICAgICAgICAgICAgdGhpcy5mb3JtRGF0YS5lbmRfdXNlX3RpbWUgPSB0aW1lWzFdOwogICAgICAgIH0sCiAgICAgICAgLy8g6ZmQ5pe2CiAgICAgICAgdGltZUNoYW5nZSh0aW1lKSB7CiAgICAgICAgICAgIHRoaXMuZm9ybURhdGEuc3RhcnRfdGltZSA9IHRpbWVbMF07CiAgICAgICAgICAgIHRoaXMuZm9ybURhdGEuZW5kX3RpbWUgPSB0aW1lWzFdOwogICAgICAgIH0sCiAgICAgICAgLy/lr7nosaHmlbDnu4Tljrvph43vvJsKICAgICAgICB1bmlxdWUoYXJyKSB7CiAgICAgICAgICAgIGNvbnN0IHJlcyA9IG5ldyBNYXAoKTsKICAgICAgICAgICAgcmV0dXJuIGFyci5maWx0ZXIoKGFycikgPT4gIXJlcy5oYXMoYXJyLnByb2R1Y3RfaWQpICYmIHJlcy5zZXQoYXJyLnByb2R1Y3RfaWQsIDEpKQogICAgICAgIH0sCiAgICAgICAgLy8g6YCJ5oup55qE5ZWG5ZOBCiAgICAgICAgZ2V0UHJvZHVjdElkKHByb2R1Y3RMaXN0KSB7CiAgICAgICAgICAgIHRoaXMubW9kYWxzID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMucHJvZHVjdExpc3QgPSB0aGlzLnVuaXF1ZSh0aGlzLnByb2R1Y3RMaXN0LmNvbmNhdChwcm9kdWN0TGlzdCkpOwogICAgICAgICAgICB0aGlzLmZvcm1EYXRhLnByb2R1Y3RfaWQgPSAiIjsKICAgICAgICAgICAgdGhpcy5wcm9kdWN0TGlzdC5mb3JFYWNoKHZhbHVlID0+IHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvcm1EYXRhLnByb2R1Y3RfaWQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhLnByb2R1Y3RfaWQgKz0gYCwke3ZhbHVlLnByb2R1Y3RfaWR9YDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtRGF0YS5wcm9kdWN0X2lkICs9IGAke3ZhbHVlLnByb2R1Y3RfaWR9YDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBjYW5jZWwoKSB7CiAgICAgICAgICAgIHRoaXMubW9kYWxzID0gZmFsc2U7CiAgICAgICAgfSwKICAgICAgICAvLyDliKDpmaTllYblk4EKICAgICAgICByZW1vdmUocHJvZHVjdElkKSB7CiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnByb2R1Y3RMaXN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvZHVjdExpc3RbaW5kZXhdLnByb2R1Y3RfaWQgPT0gcHJvZHVjdElkKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0TGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuZm9ybURhdGEucHJvZHVjdF9pZCA9ICIiOwogICAgICAgICAgICB0aGlzLnByb2R1Y3RMaXN0LmZvckVhY2godmFsdWUgPT4gewogICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9ybURhdGEucHJvZHVjdF9pZCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEucHJvZHVjdF9pZCArPSBgLCR7dmFsdWUucHJvZHVjdF9pZH1gOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhLnByb2R1Y3RfaWQgKz0gYCR7dmFsdWUucHJvZHVjdF9pZH1gOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9Cn07Cg=="},{"version":3,"sources":["create.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"create.vue","sourceRoot":"src/pages/marketing/storeCouponIssue","sourcesContent":["<template>\n    <div>\n        <div class=\"i-layout-page-header\">\n            <div class=\"i-layout-page-header\">\n                <router-link :to=\"{ path: '/admin/marketing/store_coupon_issue/index' }\"\n                    ><Button icon=\"ios-arrow-back\" size=\"small\" class=\"mr20\"\n                        >返回</Button\n                    ></router-link\n                >\n                <span\n                    class=\"ivu-page-header-title mr20\"\n                    v-text=\"$route.params.id ? '编辑优惠券' : '添加优惠券'\"\n                ></span>\n            </div>\n        </div>\n        <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n            <Form :model=\"formData\" :label-width=\"150\">\n                <FormItem label=\"优惠券名称\">\n                    <Input v-model=\"formData.coupon_title\" placeholder=\"请输入优惠券名称\"></Input>\n                </FormItem>\n                <FormItem label=\"发送方式\">\n                    <RadioGroup v-model=\"formData.receive_type\">\n                        <Radio :label=\"1\">手动领取</Radio>\n                        <Radio :label=\"2\">新人券</Radio>\n                        <Radio :label=\"3\">赠送券</Radio>\n                    </RadioGroup>\n                </FormItem>\n                <FormItem label=\"优惠劵类型\">\n                    <RadioGroup v-model=\"formData.type\">\n                        <Radio :label=\"0\">通用券</Radio>\n                        <Radio :label=\"1\">品类券</Radio>\n                        <Radio :label=\"2\">商品券</Radio>\n                    </RadioGroup>\n                </FormItem>\n                <FormItem v-show=\"formData.type === 2\">\n                    <template>\n                        <div class=\"upload-list\" v-for=\"item in productList\" :key=\"item.product_id\">\n                            <img :src=\"item.image\" />\n                            <Icon\n                                type=\"ios-close-circle\"\n                                size=\"16\"\n                                @click=\"remove(item.product_id)\"\n                            />\n                        </div>\n                    </template>\n                    <Icon type=\"ios-camera-outline\" size=\"26\" @click=\"modals = true\" />\n                    <div class=\"info\">选择商品</div>\n                </FormItem>\n                <FormItem v-show=\"formData.type === 1\">\n                    <Select v-model=\"formData.category_id\" style=\"width: 320px\">\n                        <Option v-for=\"item in categoryList\" :value=\"item.id\" :key=\"item.id\">{{\n                            item.cate_name\n                        }}</Option>\n                    </Select>\n                    <div class=\"info\">选择商品的品类</div>\n                </FormItem>\n                <FormItem label=\"优惠券面值\">\n                    <InputNumber\n                        :min=\"1\"\n                        :max=\"100000000\"\n                        v-model=\"formData.coupon_price\"\n                    ></InputNumber>\n                </FormItem>\n                <FormItem label=\"使用门槛\">\n                    <RadioGroup v-model=\"isMinPrice\">\n                        <Radio :label=\"0\">无门槛</Radio>\n                        <Radio :label=\"1\">有门槛</Radio>\n                    </RadioGroup>\n                </FormItem>\n                <FormItem v-show=\"isMinPrice\">\n                    <InputNumber\n                        :min=\"1\"\n                        :max=\"100000000\"\n                        v-model=\"formData.use_min_price\"\n                    ></InputNumber>\n                    <div class=\"info\">填写优惠券的最低消费金额</div>\n                </FormItem>\n                <FormItem label=\"使用时间\">\n                    <RadioGroup v-model=\"isCouponTime\">\n                        <Radio :label=\"1\">天数</Radio>\n                        <Radio :label=\"0\">时间段</Radio>\n                    </RadioGroup>\n                </FormItem>\n                <FormItem v-show=\"isCouponTime\" label=\"\">\n                    <InputNumber\n                        :min=\"1\"\n                        v-model=\"formData.coupon_time\"\n                        :precision=\"0\"\n                    ></InputNumber>\n                    <div class=\"info\">领取后多少天内有效</div>\n                </FormItem>\n                <FormItem v-show=\"!isCouponTime\" label=\"\">\n                    <DatePicker\n                        :value=\"datetime1\"\n                        :editable=\"false\"\n                        type=\"datetimerange\"\n                        placeholder=\"领取后在这个时间段内可以使用\"\n                        @on-change=\"dateChange\"\n                    ></DatePicker>\n                </FormItem>\n                <FormItem label=\"领取时间\">\n                    <RadioGroup v-model=\"isReceiveTime\">\n                        <Radio :label=\"1\">限时</Radio>\n                        <Radio :label=\"0\">不限时</Radio>\n                    </RadioGroup>\n                </FormItem>\n                <FormItem v-show=\"isReceiveTime\" label=\"\">\n                    <DatePicker\n                        :value=\"datetime2\"\n                        type=\"datetimerange\"\n                        placeholder=\"在这个时间段内可领取\"\n                        @on-change=\"timeChange\"\n                    ></DatePicker>\n                </FormItem>\n                <FormItem label=\"是否限量\">\n                    <RadioGroup v-model=\"formData.is_permanent\">\n                        <Radio :label=\"0\">限量</Radio>\n                        <Radio :label=\"1\">不限量</Radio>\n                    </RadioGroup>\n                </FormItem>\n                <FormItem v-show=\"!formData.is_permanent\" label=\"\">\n                    <InputNumber\n                        :min=\"1\"\n                        :max=\"100000000\"\n                        v-model=\"formData.total_count\"\n                        :precision=\"0\"\n                    ></InputNumber>\n                    <div class=\"info\">填写优惠券的发布数量</div>\n                </FormItem>\n<!--                <FormItem label=\"排序\">-->\n<!--                    <InputNumber-->\n<!--                        :min=\"0\"-->\n<!--                        :max=\"100000000\"-->\n<!--                        v-model=\"formData.sort\"-->\n<!--                        :precision=\"0\"-->\n<!--                    ></InputNumber>-->\n<!--                </FormItem>-->\n                <FormItem label=\"状态\">\n                    <RadioGroup v-model=\"formData.status\">\n                        <Radio :label=\"1\">开启</Radio>\n                        <Radio :label=\"0\">关闭</Radio>\n                    </RadioGroup>\n                </FormItem>\n                <FormItem>\n                    <Button type=\"primary\" @click=\"save\" :disabled=\"disabled\">立即创建</Button>\n                </FormItem>\n            </Form>\n        </Card>\n        <Modal\n            v-model=\"modals\"\n            title=\"商品列表\"\n            footerHide\n            class=\"paymentFooter\"\n            scrollable\n            width=\"900\"\n            @on-cancel=\"cancel\"\n        >\n            <goods-list\n                ref=\"goodslist\"\n                v-if=\"modals\"\n                :ischeckbox=\"true\"\n                @getProductId=\"getProductId\"\n            ></goods-list>\n        </Modal>\n    </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport goodsList from \"@/components/goodsList/index\";\nimport { couponCategoryApi, couponSaveApi, couponDetailApi } from \"@/api/marketing\";\nexport default {\n    name: \"storeCouponCreate\",\n    components: {\n        goodsList\n    },\n    data() {\n        return {\n            disabled: false,\n            formData: {\n                coupon_title: \"\",\n                coupon_price: 0,\n                type: 0,\n                use_min_price: 0,\n                coupon_time: 1,\n                start_use_time: 0,\n                end_use_time: 0,\n                start_time: 0,\n                end_time: 0,\n                receive_type: 1,\n                is_permanent: 1,\n                total_count: 1,\n                sort: 0,\n                status: 1,\n                product_id: \"\",\n                category_id: 0\n            },\n            categoryList: [],\n            productList: [],\n            isMinPrice: 0,\n            isCouponTime: 1,\n            isReceiveTime: 0,\n            modals: false,\n            datetime1: [],\n            datetime2: []\n        };\n    },\n    computed: {\n        ...mapState(\"media\", [\"isMobile\"])\n    },\n    created() {\n        this.getCategoryList();\n        if (this.$route.params.id) {\n            this.getCouponDetail();\n        }\n    },\n    methods: {\n        // 品类\n        getCategoryList() {\n            couponCategoryApi(1).then(async res => {\n                res.data.forEach(val => {\n                    val.cate_name = `${val.html}${val.cate_name}`;\n                });\n                this.categoryList = res.data;\n            });\n        },\n        // 优惠券\n        getCouponDetail() {\n            couponDetailApi(this.$route.params.id)\n                .then(res => {\n                    let data = res.data;\n                    this.formData.coupon_title = data.coupon_title;\n                    this.formData.type = data.type;\n                    this.formData.category_id = data.category_id;\n                    this.formData.coupon_price = parseFloat(data.coupon_price);\n                    this.formData.use_min_price = parseFloat(data.use_min_price);\n                    this.formData.coupon_time = data.coupon_time;\n                    this.formData.receive_type = data.receive_type;\n                    this.formData.is_permanent = data.is_permanent;\n                    this.formData.status = data.status;\n                    this.formData.product_id = data.product_id;\n                    this.formData.start_time = data.start_time;\n                    this.formData.end_time = data.end_time;\n                    this.formData.total_count = data.total_count;\n                    this.formData.sort = data.sort;\n                    if (\"productInfo\" in data) {\n                        this.productList = data.productInfo;\n                    }\n                    if (!data.coupon_time) {\n                        this.isCouponTime = 0;\n                        this.datetime1 = [data.start_use_time * 1000, data.end_use_time * 1000];\n                        this.formData.start_use_time = this.makeDate(data.start_use_time * 1000);\n                        this.formData.end_use_time = this.makeDate(data.end_use_time * 1000);\n                    }\n                    if (data.start_time) {\n                        this.isReceiveTime = 1;\n                        this.datetime2 = [data.start_time * 1000, data.end_time * 1000];\n                        this.formData.start_time = this.makeDate(data.start_time * 1000);\n                        this.formData.end_time = this.makeDate(data.end_time * 1000);\n                    }\n                })\n                .catch(err => {\n                    this.$Message.error(err.msg);\n                });\n        },\n        makeDate(data){\n            let date = new Date(data);\n            let YY = date.getFullYear() + '-';\n            let MM = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n            let DD = (date.getDate() < 10 ? '0' + (date.getDate()) : date.getDate());\n            let hh = (date.getHours() < 10 ? '0' + date.getHours() : date.getHours()) + ':';\n            let mm = (date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()) + ':';\n            let ss = (date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds());\n            return YY + MM + DD +\" \"+hh + mm + ss;\n        },\n        // 创建\n        save() {\n            if (!this.formData.coupon_title) {\n                return this.$Message.error(\"请输入优惠券名称\");\n            }\n            if (this.formData.type === 2) {\n                if (!this.formData.product_id) {\n                    return this.$Message.error(\"请选择商品\");\n                }\n            }\n            if (this.formData.type === 1) {\n                if (!this.formData.category_id) {\n                    return this.$Message.error(\"请选择品类\");\n                }\n            }\n            if (this.formData.coupon_price <= 0) {\n                return this.$Message.error(\"优惠券面值不能小于0\");\n            }\n            if (!this.isMinPrice) {\n                this.formData.use_min_price = 0;\n            } else {\n                if (this.formData.use_min_price < 1) {\n                    return this.$Message.error(\"优惠券最低消费不能小于0\");\n                }\n            }\n            if (this.isCouponTime) {\n                this.formData.start_use_time = 0;\n                this.formData.end_use_time = 0;\n                if (this.formData.coupon_time < 1) {\n                    return this.$Message.error(\"使用有效期限不能小于1天\");\n                }\n            } else {\n                this.formData.coupon_time = 0;\n                if (!this.formData.start_use_time) {\n                    return this.$Message.error(\"请选择使用有效期限\");\n                }\n            }\n            if (this.isReceiveTime) {\n                if (!this.formData.start_time) {\n                    return this.$Message.error(\"请选择领取时间\");\n                }\n            } else {\n                this.formData.start_time = 0;\n                this.formData.end_time = 0;\n            }\n            if (this.formData.is_permanent) {\n                console.log(456);\n                this.formData.total_count = 0;\n            } else {\n                if (this.formData.total_count < 1) {\n                    return this.$Message.error(\"发布数量不能小于1\");\n                }\n            }\n            this.disabled = false;\n            couponSaveApi(this.formData)\n                .then(res => {\n                    this.disabled = true;\n                    this.$Message.success(res.msg);\n                    setTimeout(() => {\n                        this.$router.push({\n                            path: \"/admin/marketing/store_coupon_issue/index\"\n                        });\n                    }, 1000);\n                })\n                .catch(err => {\n                    this.$Message.error(err.msg);\n                });\n        },\n        // 使用有效期--时间段\n        dateChange(time) {\n            this.formData.start_use_time = time[0];\n            this.formData.end_use_time = time[1];\n        },\n        // 限时\n        timeChange(time) {\n            this.formData.start_time = time[0];\n            this.formData.end_time = time[1];\n        },\n        //对象数组去重；\n        unique(arr) {\n            const res = new Map();\n            return arr.filter((arr) => !res.has(arr.product_id) && res.set(arr.product_id, 1))\n        },\n        // 选择的商品\n        getProductId(productList) {\n            this.modals = false;\n            this.productList = this.unique(this.productList.concat(productList));\n            this.formData.product_id = \"\";\n            this.productList.forEach(value => {\n                if (this.formData.product_id) {\n                    this.formData.product_id += `,${value.product_id}`;\n                } else {\n                    this.formData.product_id += `${value.product_id}`;\n                }\n            });\n        },\n        cancel() {\n            this.modals = false;\n        },\n        // 删除商品\n        remove(productId) {\n            for (let index = 0; index < this.productList.length; index++) {\n                if (this.productList[index].product_id == productId) {\n                    this.productList.splice(index, 1);\n                }\n            }\n            this.formData.product_id = \"\";\n            this.productList.forEach(value => {\n                if (this.formData.product_id) {\n                    this.formData.product_id += `,${value.product_id}`;\n                } else {\n                    this.formData.product_id += `${value.product_id}`;\n                }\n            });\n        }\n    }\n};\n</script>\n\n<style scoped>\n.info{\n    color: #888;\n    font-size: 12px;\n}\n.ivu-form >>> .ivu-form-item-label {\n    font-weight: 700;\n    font-size: 14px !important;\n}\n\n.ivu-input-wrapper {\n    width: 320px;\n}\n\n.ivu-radio-wrapper {\n    margin-right: 30px;\n    font-size: 14px !important;\n}\n\n.ivu-radio-wrapper >>> .ivu-radio {\n    margin-right: 10px;\n}\n\n.ivu-input-number {\n    width: 160px;\n}\n\n.ivu-date-picker {\n    width: 320px;\n}\n\n.ivu-icon-ios-camera-outline {\n    width: 58px;\n    height: 58px;\n    border: 1px dotted rgba(0, 0, 0, 0.1);\n    border-radius: 4px;\n    background-color: rgba(0, 0, 0, 0.02);\n    line-height: 58px;\n    cursor: pointer;\n    vertical-align: middle;\n}\n\n.upload-list {\n    width: 58px;\n    height: 58px;\n    border: 1px dotted rgba(0, 0, 0, 0.1);\n    border-radius: 4px;\n    margin-right: 15px;\n    display: inline-block;\n    position: relative;\n    cursor: pointer;\n    vertical-align: middle;\n}\n\n.upload-list img {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n.ivu-icon-ios-close-circle {\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(50%, -50%);\n}\n</style>\n"]}]}