{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/marketing/storeSeckill/create.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/marketing/storeSeckill/create.vue","mtime":1610682024000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCBnb29kc0xpc3QgZnJvbSAnQC9jb21wb25lbnRzL2dvb2RzTGlzdC9pbmRleCc7CmltcG9ydCBVZWRpdG9yV3JhcCBmcm9tICdAL2NvbXBvbmVudHMvdWVkaXRvckZyb20vaW5kZXgnOwppbXBvcnQgVnVlVWVkaXRvcldyYXAgZnJvbSAndnVlLXVlZGl0b3Itd3JhcCc7CmltcG9ydCB1cGxvYWRQaWN0dXJlcyBmcm9tICdAL2NvbXBvbmVudHMvdXBsb2FkUGljdHVyZXMnOwppbXBvcnQgeyBzZWNraWxsSW5mb0FwaSwgc2Vja2lsbEFkZEFwaSwgc2Vja2lsbFRpbWVMaXN0QXBpLCBwcm9kdWN0QXR0cnNBcGkgfSBmcm9tICdAL2FwaS9tYXJrZXRpbmcnOwppbXBvcnQgeyBwcm9kdWN0R2V0VGVtcGxhdGVBcGkgfSBmcm9tICdAL2FwaS9wcm9kdWN0JzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdzdG9yZVNlY2tpbGxDcmVhdGUnLAogICAgY29tcG9uZW50czogeyBVZWRpdG9yV3JhcCwgZ29vZHNMaXN0LCB1cGxvYWRQaWN0dXJlcywgVnVlVWVkaXRvcldyYXAgfSwKICAgIGRhdGEgKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHN1Ym1pdE9wZW46IGZhbHNlLAogICAgICAgICAgICBzcGluU2hvdzogZmFsc2UsCiAgICAgICAgICAgIGlzQ2hvaWNlOiAnJywKICAgICAgICAgICAgY3VycmVudDogMCwKICAgICAgICAgICAgbW9kYWxQaWM6IGZhbHNlLAogICAgICAgICAgICBncmlkOiB7CiAgICAgICAgICAgICAgICB4bDogMTIsCiAgICAgICAgICAgICAgICBsZzogMjAsCiAgICAgICAgICAgICAgICBtZDogMjQsCiAgICAgICAgICAgICAgICBzbTogMjQsCiAgICAgICAgICAgICAgICB4czogMjQKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ3JpZDI6IHsKICAgICAgICAgICAgICAgIHhsOiA4LAogICAgICAgICAgICAgICAgbGc6IDEyLAogICAgICAgICAgICAgICAgbWQ6IDEyLAogICAgICAgICAgICAgICAgc206IDI0LAogICAgICAgICAgICAgICAgeHM6IDI0CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdyaWRQaWM6IHsKICAgICAgICAgICAgICAgIHhsOiA2LAogICAgICAgICAgICAgICAgbGc6IDgsCiAgICAgICAgICAgICAgICBtZDogMTIsCiAgICAgICAgICAgICAgICBzbTogMTIsCiAgICAgICAgICAgICAgICB4czogMTIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ3JpZEJ0bjogewogICAgICAgICAgICAgICAgeGw6IDQsCiAgICAgICAgICAgICAgICBsZzogOCwKICAgICAgICAgICAgICAgIG1kOiA4LAogICAgICAgICAgICAgICAgc206IDgsCiAgICAgICAgICAgICAgICB4czogOAogICAgICAgICAgICB9LAogICAgICAgICAgICBteUNvbmZpZzogewogICAgICAgICAgICAgICAgYXV0b0hlaWdodEVuYWJsZWQ6IGZhbHNlLCAvLyDnvJbovpHlmajkuI3oh6rliqjooqvlhoXlrrnmkpHpq5gKICAgICAgICAgICAgICAgIGluaXRpYWxGcmFtZUhlaWdodDogNTAwLCAvLyDliJ3lp4vlrrnlmajpq5jluqYKICAgICAgICAgICAgICAgIGluaXRpYWxGcmFtZVdpZHRoOiAnMTAwJScsIC8vIOWIneWni+WuueWZqOWuveW6pgogICAgICAgICAgICAgICAgVUVESVRPUl9IT01FX1VSTDogJy9hZG1pbi9VRWRpdG9yLycsCiAgICAgICAgICAgICAgICBzZXJ2ZXJVcmw6ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1vZGFsczogZmFsc2UsCiAgICAgICAgICAgIG1vZGFsX2xvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICBpbWFnZXM6IFtdLAogICAgICAgICAgICBmb3JtVmFsaWRhdGU6IHsKICAgICAgICAgICAgICAgIGltYWdlczogW10sCiAgICAgICAgICAgICAgICBpbmZvOiAnJywKICAgICAgICAgICAgICAgIHRpdGxlOiAnJywKICAgICAgICAgICAgICAgIGltYWdlOiAnJywKICAgICAgICAgICAgICAgIHVuaXRfbmFtZTogJycsCiAgICAgICAgICAgICAgICBwcmljZTogMCwKICAgICAgICAgICAgICAgIG90X3ByaWNlOiAwLAogICAgICAgICAgICAgICAgY29zdDogMCwKICAgICAgICAgICAgICAgIHNhbGVzOiAwLAogICAgICAgICAgICAgICAgc3RvY2s6IDAsCiAgICAgICAgICAgICAgICBzb3J0OiAwLAogICAgICAgICAgICAgICAgbnVtOiAxLAogICAgICAgICAgICAgICAgb25jZV9udW06IDEsCiAgICAgICAgICAgICAgICBnaXZlX2ludGVncmFsOiAwLAogICAgICAgICAgICAgICAgcG9zdGFnZTogMCwKICAgICAgICAgICAgICAgIHNlY3Rpb25fdGltZTogW10sCiAgICAgICAgICAgICAgICBpc19wb3N0YWdlOiAwLAogICAgICAgICAgICAgICAgaXNfaG90OiAwLAogICAgICAgICAgICAgICAgc3RhdHVzOiAwLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgICAgICAgICAgaWQ6IDAsCiAgICAgICAgICAgICAgICBwcm9kdWN0X2lkOiAwLAogICAgICAgICAgICAgICAgdGVtcF9pZDogJycsCiAgICAgICAgICAgICAgICB0aW1lX2lkOiAnJywKICAgICAgICAgICAgICAgIGF0dHJzOiBbXSwKICAgICAgICAgICAgICAgIGl0ZW1zOiBbXQogICAgICAgICAgICB9LAogICAgICAgICAgICB0ZW1wbGF0ZUxpc3Q6IFtdLAogICAgICAgICAgICB0aW1lTGlzdDogW10sCiAgICAgICAgICAgIGNvbHVtbnM6IFtdLAogICAgICAgICAgICBzcGVjc0RhdGE6IFtdLAogICAgICAgICAgICBwaWNUaXQ6ICcnLAogICAgICAgICAgICB0YWJsZUluZGV4OiAwLAogICAgICAgICAgICBydWxlVmFsaWRhdGU6IHsKICAgICAgICAgICAgICAgIGltYWdlOiBbCiAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeS4u+WbvicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0KICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBpbWFnZXM6IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiAnYXJyYXknLCBtZXNzYWdlOiAn6K+36YCJ5oup5Li75Zu+JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwKICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdhcnJheScsIG1pbjogMSwgbWVzc2FnZTogJ0Nob29zZSB0d28gaG9iYmllcyBhdCBiZXN0JywgdHJpZ2dlcjogJ2NoYW5nZScgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHRpdGxlOiBbCiAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWVhuWTgeagh+mimCcsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgaW5mbzogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXnp5LmnYDmtLvliqjnroDku4snLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHNlY3Rpb25fdGltZTogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIHR5cGU6ICdhcnJheScsIG1lc3NhZ2U6ICfor7fpgInmi6nmtLvliqjml7bpl7QnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgdW5pdF9uYW1lOiBbCiAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWNleS9jScsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgcHJpY2U6IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiAnbnVtYmVyJywgbWVzc2FnZTogJ+ivt+i+k+WFpeenkuadgOS7tycsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgb3RfcHJpY2U6IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiAnbnVtYmVyJywgbWVzc2FnZTogJ+ivt+i+k+WFpeWOn+S7tycsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgY29zdDogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIHR5cGU6ICdudW1iZXInLCBtZXNzYWdlOiAn6K+36L6T5YWl5oiQ5pys5Lu3JywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBzdG9jazogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIHR5cGU6ICdudW1iZXInLCBtZXNzYWdlOiAn6K+36L6T5YWl5bqT5a2YJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBudW06IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiAnbnVtYmVyJywgbWVzc2FnZTogJ+ivt+i+k+WFpei0reS5sOaVsOmHj+mZkOWIticsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgb25jZV9udW06IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiAnbnVtYmVyJywgbWVzc2FnZTogJ+ivt+i+k+WFpeWNleasoei0reS5sOaVsOmHj+mZkOWIticsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgdGVtcF9pZDogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nov5DotLnmqKHmnb8nLCB0cmlnZ2VyOiAnY2hhbmdlJywgdHlwZTogJ251bWJlcicgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHRpbWVfaWQ6IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5byA5aeL5pe26Ze0JywgdHJpZ2dlcjogJ2NoYW5nZScsIHR5cGU6ICdudW1iZXInIH0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29weTowCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLi4ubWFwU3RhdGUoJ21lZGlhJywgWwogICAgICAgICAgICAnaXNNb2JpbGUnCiAgICAgICAgXSksCiAgICAgICAgbGFiZWxXaWR0aCAoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gdW5kZWZpbmVkIDogMTM1OwogICAgICAgIH0sCiAgICAgICAgbGFiZWxQb3NpdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gJ3RvcCcgOiAncmlnaHQnOwogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkICgpIHsKICAgICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgICAgIHRoaXMuY29weSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5jb3B5OwogICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSAxOwogICAgICAgICAgICB0aGlzLmdldEluZm8oKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5wcm9kdWN0R2V0VGVtcGxhdGUoKTsKICAgICAgICB0aGlzLnNlY2tpbGxUaW1lTGlzdCgpOwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAvLyDnp5LmnYDop4TmoLzvvJsKICAgICAgICBwcm9kdWN0QXR0cnMgKHJvd3MpIHsKICAgICAgICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAgICAgICBwcm9kdWN0QXR0cnNBcGkocm93cy5pZCwgMSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YS5pbmZvOwogICAgICAgICAgICAgICAgbGV0IHNlbGVjdGlvbiA9IHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2VsZWN0aW9uJywKICAgICAgICAgICAgICAgICAgICB3aWR0aDogNjAsCiAgICAgICAgICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhhdC5zcGVjc0RhdGEgPSBkYXRhLmF0dHJzOwogICAgICAgICAgICAgICAgdGhhdC5zcGVjc0RhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICB0aGF0LiRzZXQodGhhdC5zcGVjc0RhdGFbaW5kZXhdLCAnaWQnLCBpbmRleCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoYXQuZm9ybVZhbGlkYXRlLml0ZW1zID0gZGF0YS5pdGVtczsKICAgICAgICAgICAgICAgIHRoYXQuY29sdW1ucyA9IGRhdGEuaGVhZGVyOwogICAgICAgICAgICAgICAgdGhhdC5jb2x1bW5zLnVuc2hpZnQoc2VsZWN0aW9uKTsKICAgICAgICAgICAgICAgIHRoYXQuaW5wdXRDaGFuZ2UoZGF0YSk7CiAgICAgICAgICAgIH0pLmNhdGNoKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGF0LiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgaW5wdXRDaGFuZ2UgKGRhdGEpIHsKICAgICAgICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAgICAgICBsZXQgJGluZGV4ID0gW107CiAgICAgICAgICAgIGRhdGEuaGVhZGVyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgJGluZGV4LnB1c2goeyBpbmRleDogaW5kZXgsIGtleTogaXRlbS5rZXksIHRpdGxlOiBpdGVtLnRpdGxlIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJGluZGV4LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgICBsZXQgdGl0bGUgPSBpdGVtLnRpdGxlOwogICAgICAgICAgICAgICAgbGV0IGtleSA9IGl0ZW0ua2V5OwogICAgICAgICAgICAgICAgbGV0IHJvdyA9IHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICAgICAgICAgICAga2V5OiBrZXksCiAgICAgICAgICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgICAgICAgICAgIG1pbldpZHRoOiAxMjAsCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyOiAoaCwgcGFyYW1zKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKCdkaXYnLCBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoKCdJbnB1dE51bWJlcicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW46IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBrZXkgPT09ICdwcmljZScgPyBwYXJhbXMucm93LnByaWNlIDogcGFyYW1zLnJvdy5xdW90YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29uLWNoYW5nZSc6IGUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ID09PSAncHJpY2UnID8gcGFyYW1zLnJvdy5wcmljZSA9IGUgOiBwYXJhbXMucm93LnF1b3RhID0gZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc3BlY3NEYXRhW3BhcmFtcy5pbmRleF0gPSBwYXJhbXMucm93OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhhdC5mb3JtVmFsaWRhdGUuYXR0cnMgJiYgdGhhdC5mb3JtVmFsaWRhdGUuYXR0cnMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5mb3JtVmFsaWRhdGUuYXR0cnMuZm9yRWFjaCgodiwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYuaWQgPT09IHBhcmFtcy5yb3cuaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZm9ybVZhbGlkYXRlLmF0dHJzLnNwbGljZShpbmRleCwgMSwgcGFyYW1zLnJvdyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIF0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoYXQuY29sdW1ucy5zcGxpY2UoaXRlbS5pbmRleCwgMSwgcm93KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICAvLyDlpJrpgIkKICAgICAgICBjaGFuZ2VDaGVja2JveCAoc2VsZWN0aW9uKSB7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmF0dHJzID0gc2VsZWN0aW9uOwogICAgICAgIH0sCiAgICAgICAgc2Vja2lsbFRpbWVMaXN0ICgpIHsKICAgICAgICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAgICAgICBzZWNraWxsVGltZUxpc3RBcGkoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGF0LnRpbWVMaXN0ID0gcmVzLmRhdGEubGlzdC5kYXRhCiAgICAgICAgICAgIH0pLmNhdGNoKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGF0LiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgLy8g6I635Y+W6L+Q6LS55qih5p2/77ybCiAgICAgICAgcHJvZHVjdEdldFRlbXBsYXRlICgpIHsKICAgICAgICAgICAgcHJvZHVjdEdldFRlbXBsYXRlQXBpKCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUxpc3QgPSByZXMuZGF0YTsKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOihqOWNlemqjOivgQogICAgICAgIHZhbGlkYXRlIChwcm9wLCBzdGF0dXMsIGVycm9yKSB7CiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgLy8g5ZWG5ZOBaWQKICAgICAgICBnZXRQcm9kdWN0SWQgKHJvdykgewogICAgICAgICAgICB0aGlzLm1vZGFsX2xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5tb2RhbHMgPSBmYWxzZTsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZSA9IHsKICAgICAgICAgICAgICAgICAgICBpbWFnZXM6IHJvdy5zbGlkZXJfaW1hZ2UsCiAgICAgICAgICAgICAgICAgICAgaW5mbzogcm93LnN0b3JlX2luZm8sCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHJvdy5zdG9yZV9uYW1lLAogICAgICAgICAgICAgICAgICAgIGltYWdlOiByb3cuaW1hZ2UsCiAgICAgICAgICAgICAgICAgICAgdW5pdF9uYW1lOiByb3cudW5pdF9uYW1lLAogICAgICAgICAgICAgICAgICAgIHByaWNlOiAwLCAvLyDkuI3lj5bllYblk4HkuK3nmoTljp/ku7cKICAgICAgICAgICAgICAgICAgICBvdF9wcmljZTogcm93Lm90X3ByaWNlLAogICAgICAgICAgICAgICAgICAgIGNvc3Q6IHJvdy5jb3N0LAogICAgICAgICAgICAgICAgICAgIHNhbGVzOiByb3cuc2FsZXMsCiAgICAgICAgICAgICAgICAgICAgc3RvY2s6IHJvdy5zdG9jaywKICAgICAgICAgICAgICAgICAgICBzb3J0OiByb3cuc29ydCwKICAgICAgICAgICAgICAgICAgICBudW06IDEsCiAgICAgICAgICAgICAgICAgICAgb25jZV9udW06IDEsCiAgICAgICAgICAgICAgICAgICAgZ2l2ZV9pbnRlZ3JhbDogcm93LmdpdmVfaW50ZWdyYWwsCiAgICAgICAgICAgICAgICAgICAgcG9zdGFnZTogcm93LnBvc3RhZ2UsCiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbl90aW1lOiBbXSwKICAgICAgICAgICAgICAgICAgICBpc19wb3N0YWdlOiByb3cuaXNfcG9zdGFnZSwKICAgICAgICAgICAgICAgICAgICBpc19ob3Q6IHJvdy5pc19ob3QsCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAwLAogICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiByb3cuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgaWQ6IDAsCiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF9pZDogcm93LmlkLAogICAgICAgICAgICAgICAgICAgIHRlbXBfaWQ6IHJvdy50ZW1wX2lkCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0QXR0cnMocm93KTsKICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuZ29vZHNsaXN0LnByb2R1Y3RSb3cgPSBudWxsOwogICAgICAgICAgICB9LCA1MDApOwogICAgICAgIH0sCgogICAgICAgIGNhbmNlbCAoKSB7CiAgICAgICAgICAgIHRoaXMubW9kYWxzID0gZmFsc2U7CiAgICAgICAgfSwKICAgICAgICAvLyDlhbfkvZPml6XmnJ8KICAgICAgICBvbmNoYW5nZVRpbWUgKGUpIHsKICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuc2VjdGlvbl90aW1lID0gZTsKICAgICAgICB9LAogICAgICAgIC8vIOivpuaDhQogICAgICAgIGdldEluZm8gKCkgewogICAgICAgICAgICB0aGlzLnNwaW5TaG93ID0gdHJ1ZTsKICAgICAgICAgICAgc2Vja2lsbEluZm9BcGkodGhpcy4kcm91dGUucGFyYW1zLmlkKS50aGVuKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgICAgICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgICAgICAgICAgICBsZXQgaW5mbyA9IHJlcy5kYXRhLmluZm87CiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0aW9uID0gewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzZWxlY3Rpb24nLAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiA2MCwKICAgICAgICAgICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZSA9IGluZm87CiAgICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5mb3JtVmFsaWRhdGUsICdpdGVtcycsIGluZm8uYXR0cnMuaXRlbXMpOwogICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gaW5mby5hdHRycy5oZWFkZXI7CiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMudW5zaGlmdChzZWxlY3Rpb24pOwogICAgICAgICAgICAgICAgdGhpcy5zcGVjc0RhdGEgPSBpbmZvLmF0dHJzLnZhbHVlOwogICAgICAgICAgICAgICAgdGhhdC5zcGVjc0RhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICB0aGF0LiRzZXQodGhhdC5zcGVjc0RhdGFbaW5kZXhdLCAnaWQnLCBpbmRleCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gaW5mby5hdHRyczsKICAgICAgICAgICAgICAgIGxldCBhdHRyID0gW107CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCBpbiBpbmZvLmF0dHJzLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8uYXR0cnMudmFsdWVbaW5kZXhdLl9jaGVja2VkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHIucHVzaChpbmZvLmF0dHJzLnZhbHVlW2luZGV4XSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhhdC5mb3JtVmFsaWRhdGUuYXR0cnMgPSBhdHRyOwogICAgICAgICAgICAgICAgdGhhdC5pbnB1dENoYW5nZShkYXRhKTsKICAgICAgICAgICAgICAgIHRoaXMuc3BpblNob3cgPSBmYWxzZTsKICAgICAgICAgICAgfSkuY2F0Y2gocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuc3BpblNob3cgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICAvLyDkuIvkuIDmraUKICAgICAgICBuZXh0IChuYW1lKSB7CiAgICAgICAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudCA9PT0gMikgewogICAgICAgICAgICAgICAgdGhpcy4kcmVmc1tuYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29weSA9PSAxICl0aGlzLmZvcm1WYWxpZGF0ZS5jb3B5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaWQgPSBOdW1iZXIodGhpcy4kcm91dGUucGFyYW1zLmlkKSB8fCAwOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdE9wZW4gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBzZWNraWxsQWRkQXBpKHRoaXMuZm9ybVZhbGlkYXRlKS50aGVuKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdE9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy9hZG1pbi9tYXJrZXRpbmcvc3RvcmVfc2Vja2lsbC9pbmRleCcgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApOwogICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJtaXRPcGVuID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0gZWxzZSBpZih0aGlzLmN1cnJlbnQgPT09IDEpewogICAgICAgICAgICAgICAgdGhpcy4kcmVmc1tuYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZih2YWxpZCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhhdC5mb3JtVmFsaWRhdGUuYXR0cnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0LiRNZXNzYWdlLmVycm9yKCfor7fpgInmi6nlsZ7mgKfop4TmoLwnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGluZGV4IGluIHRoYXQuZm9ybVZhbGlkYXRlLmF0dHJzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuZm9ybVZhbGlkYXRlLmF0dHJzW2luZGV4XS5xdW90YSA8PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0LiRNZXNzYWdlLmVycm9yKCfnp5LmnYDpmZDph4/lv4XpobvlpKfkuo4wJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudCArPSAxOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn6K+35a6M5ZaE5oKo55qE5L+h5oGvJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLmltYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50ICs9IDE7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup5ZWG5ZOBJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8vIOS4iuS4gOatpQogICAgICAgIHN0ZXAgKCkgewogICAgICAgICAgICB0aGlzLmN1cnJlbnQtLTsKICAgICAgICB9LAogICAgICAgIC8vIOWGheWuuQogICAgICAgIGdldENvbnRlbnQgKHZhbCkgewogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5kZXNjcmlwdGlvbiA9IHZhbDsKICAgICAgICB9LAogICAgICAgIC8vIOeCueWHu+WVhuWTgeWbvgogICAgICAgIG1vZGFsUGljVGFwICh0aXQsIHBpY1RpdCwgaW5kZXgpIHsKICAgICAgICAgICAgdGhpcy5tb2RhbFBpYyA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuaXNDaG9pY2UgPSB0aXQgPT09ICdkYW4nID8gJ+WNlemAiScgOiAn5aSa6YCJJzsKICAgICAgICAgICAgdGhpcy5waWNUaXQgPSBwaWNUaXQ7CiAgICAgICAgICAgIHRoaXMudGFibGVJbmRleCA9IGluZGV4OwogICAgICAgIH0sCiAgICAgICAgLy8g6I635Y+W5Y2V5byg5Zu+54mH5L+h5oGvCiAgICAgICAgZ2V0UGljIChwYykgewogICAgICAgICAgICBzd2l0Y2ggKHRoaXMucGljVGl0KSB7CiAgICAgICAgICAgICAgICBjYXNlICdkYW5Gcm9tJzoKICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZSA9IHBjLmF0dF9kaXI7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAvLyBjYXNlICdkYW5UYWJsZSc6CiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5zcGVjc0RhdGFbdGhpcy50YWJsZUluZGV4XS5waWMgPSBwYy5hdHRfZGlyOwogICAgICAgICAgICAgICAgLy8gICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLmZvcm1WYWxpZGF0ZS5hdHRycyAmJiB0aGlzLmZvcm1WYWxpZGF0ZS5hdHRycy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuc3BlY3NEYXRhW3RoaXMudGFibGVJbmRleF0sICdfY2hlY2tlZCcsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNwZWNzRGF0YVt0aGlzLnRhYmxlSW5kZXhdLnBpYyA9IHBjLmF0dF9kaXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5tb2RhbFBpYyA9IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgLy8g6I635Y+W5aSa5byg5Zu+5L+h5oGvCiAgICAgICAgZ2V0UGljRCAocGMpIHsKICAgICAgICAgICAgdGhpcy5pbWFnZXMgPSBwYzsKICAgICAgICAgICAgdGhpcy5pbWFnZXMubWFwKChpdGVtKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZXMucHVzaChpdGVtLmF0dF9kaXIpCiAgICAgICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZXMgPSB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZXMuc3BsaWNlKDAsMTApOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5tb2RhbFBpYyA9IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgaGFuZGxlUmVtb3ZlIChpKSB7CiAgICAgICAgICAgIHRoaXMuaW1hZ2VzLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaW1hZ2VzLnNwbGljZShpLCAxKTsKICAgICAgICB9LAogICAgICAgIC8vIOmAieaLqeWVhuWTgQogICAgICAgIGNoYW5nZUdvb2RzICgpIHsKICAgICAgICAgICAgdGhpcy5tb2RhbHMgPSB0cnVlOwogICAgICAgIH0sIC8vIOenu+WKqAogICAgICAgIGhhbmRsZURyYWdTdGFydCAoZSwgaXRlbSkgewogICAgICAgICAgICB0aGlzLmRyYWdnaW5nID0gaXRlbTsKICAgICAgICB9LAogICAgICAgIGhhbmRsZURyYWdFbmQgKGUsIGl0ZW0pIHsKICAgICAgICAgICAgdGhpcy5kcmFnZ2luZyA9IG51bGwKICAgICAgICB9LAogICAgICAgIC8vIOmmluWFiOaKimRpduWPmOaIkOWPr+S7peaUvue9rueahOWFg+e0oO+8jOWNs+mHjeWGmWRyYWdlbnRlci9kcmFnb3ZlcgogICAgICAgIGhhbmRsZURyYWdPdmVyIChlKSB7CiAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnbW92ZScvLyBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0PSJtb3ZlIjsvL+WcqGRyYWdlbnRlcuS4remSiOWvueaUvue9ruebruagh+adpeiuvue9riEKICAgICAgICB9LAogICAgICAgIGhhbmRsZURyYWdFbnRlciAoZSwgaXRlbSkgewogICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ21vdmUnLy8g5Li66ZyA6KaB56e75Yqo55qE5YWD57Sg6K6+572uZHJhZ3N0YXJ05LqL5Lu2CiAgICAgICAgICAgIGlmIChpdGVtID09PSB0aGlzLmRyYWdnaW5nKSB7CiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBuZXdJdGVtcyA9IFsuLi50aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZXNdCiAgICAgICAgICAgIGNvbnN0IHNyYyA9IG5ld0l0ZW1zLmluZGV4T2YodGhpcy5kcmFnZ2luZykKICAgICAgICAgICAgY29uc3QgZHN0ID0gbmV3SXRlbXMuaW5kZXhPZihpdGVtKQogICAgICAgICAgICBuZXdJdGVtcy5zcGxpY2UoZHN0LCAwLCAuLi5uZXdJdGVtcy5zcGxpY2Uoc3JjLCAxKSkKICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaW1hZ2VzID0gbmV3SXRlbXM7CiAgICAgICAgfSwKICAgICAgICAvLyDmt7vliqDoh6rlrprkuYnlvLnnqpcKICAgICAgICBhZGRDdXN0b21EaWFsb2cgKGVkaXRvcklkKSB7CiAgICAgICAgICAgIHdpbmRvdy5VRS5yZWdpc3RlclVJKCd0ZXN0LWRpYWxvZycsIGZ1bmN0aW9uIChlZGl0b3IsIHVpTmFtZSkgewogICAgICAgICAgICAgICAgLy8g5Yib5bu6IGRpYWxvZwogICAgICAgICAgICAgICAgbGV0IGRpYWxvZyA9IG5ldyB3aW5kb3cuVUUudWkuRGlhbG9nKHsKICAgICAgICAgICAgICAgICAgICAvLyDmjIflrprlvLnlh7rlsYLkuK3pobXpnaLnmoTot6/lvoTvvIzov5nph4zlj6rog73mlK/mjIHpobXpnaLvvIzot6/lvoTlj4LogIPluLjop4Hpl67popggMgogICAgICAgICAgICAgICAgICAgIGlmcmFtZVVybDogJy9hZG1pbi93aWRnZXQuaW1hZ2VzL2luZGV4Lmh0bWw/Zm9kZGVyPWRpYWxvZycsCiAgICAgICAgICAgICAgICAgICAgLy8g6ZyA6KaB5oyH5a6a5b2T5YmN55qE57yW6L6R5Zmo5a6e5L6LCiAgICAgICAgICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsCiAgICAgICAgICAgICAgICAgICAgLy8g5oyH5a6aIGRpYWxvZyDnmoTlkI3lrZcKICAgICAgICAgICAgICAgICAgICBuYW1lOiB1aU5hbWUsCiAgICAgICAgICAgICAgICAgICAgLy8gZGlhbG9nIOeahOagh+mimAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5LiK5Lyg5Zu+54mHJywKICAgICAgICAgICAgICAgICAgICAvLyDmjIflrpogZGlhbG9nIOeahOWkluWbtOagt+W8jwogICAgICAgICAgICAgICAgICAgIGNzc1J1bGVzOiAnd2lkdGg6MTIwMHB4O2hlaWdodDo1MDBweDtwYWRkaW5nOjIwcHg7JwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZyA9IGRpYWxvZzsKICAgICAgICAgICAgICAgIC8vIOWPguiAg+S4iumdoueahOiHquWumuS5ieaMiemSrgogICAgICAgICAgICAgICAgdmFyIGJ0biA9IG5ldyB3aW5kb3cuVUUudWkuQnV0dG9uKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZGlhbG9nLWJ1dHRvbicsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfkuIrkvKDlm77niYcnLAogICAgICAgICAgICAgICAgICAgIGNzc1J1bGVzOiBgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uLy4uLy4uL2Fzc2V0cy9pbWFnZXMvaWNvbnMucG5nKTtiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNzI2cHggLTc3cHg7YCwKICAgICAgICAgICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOa4suafk2RpYWxvZwogICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2cucmVuZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZy5vcGVuKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gYnRuOwogICAgICAgICAgICB9LCAzNyAvKiDmjIflrprmt7vliqDliLDlt6XlhbfmoI/kuIrnmoTpgqPkuKrkvY3nva7vvIzpu5jorqTml7bov73liqDliLDmnIDlkI4gKi8sIGVkaXRvcklkIC8qIOaMh+Wumui/meS4qlVJ5piv5ZOq5Liq57yW6L6R5Zmo5a6e5L6L5LiK55qE77yM6buY6K6k5piv6aG16Z2i5LiK5omA5pyJ55qE57yW6L6R5Zmo6YO95Lya5re75Yqg6L+Z5Liq5oyJ6ZKuICovKTsKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["create.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsMA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"create.vue","sourceRoot":"src/pages/marketing/storeSeckill","sourcesContent":["<template>\n    <div>\n        <div class=\"i-layout-page-header\">\n            <div class=\"i-layout-page-header\">\n                <router-link :to=\"{path:'/admin/marketing/store_seckill/index'}\"><Button icon=\"ios-arrow-back\" size=\"small\"  class=\"mr20\">返回</Button></router-link>\n                <span class=\"ivu-page-header-title mr20\" v-text=\"$route.params.id?'编辑秒杀商品':'添加秒杀商品'\"></span>\n            </div>\n        </div>\n        <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n            <Row type=\"flex\" class=\"mt30 acea-row row-middle row-center\">\n                <Col span=\"20\">\n                    <Steps :current=\"current\">\n                        <Step title=\"选择秒杀商品\"></Step>\n                        <Step title=\"填写基础信息\"></Step>\n                        <Step title=\"修改商品详情\"></Step>\n                    </Steps>\n                </Col>\n                <Col span=\"23\">\n                    <Form class=\"form mt30\" ref=\"formValidate\" :model=\"formValidate\" :rules=\"ruleValidate\"  @on-validate=\"validate\"\n                          :label-width=\"labelWidth\" :label-position=\"labelPosition\" @submit.native.prevent>\n                        <FormItem label=\"选择商品：\" prop=\"image_input\" v-if=\"current === 0\">\n                            <div class=\"picBox\" @click=\"changeGoods\">\n                                <div class=\"pictrue\" v-if=\"formValidate.image\"><img\n                                        v-lazy=\"formValidate.image\"></div>\n                                <div class=\"upLoad acea-row row-center-wrapper\" v-else>\n                                    <Icon type=\"ios-camera-outline\" size=\"26\" class=\"iconfonts\"/>\n                                </div>\n                            </div>\n                        </FormItem>\n                        <Col v-show=\"current === 1\" type=\"flex\">\n                            <Col span=\"24\">\n                                <FormItem label=\"商品主图：\" prop=\"image\">\n                                    <div class=\"picBox\" @click=\"modalPicTap('dan','danFrom')\">\n                                        <div class=\"pictrue\" v-if=\"formValidate.image\"><img v-lazy=\"formValidate.image\"></div>\n                                        <div class=\"upLoad acea-row row-center-wrapper\" v-else>\n                                            <Icon type=\"ios-camera-outline\" size=\"26\" class=\"iconfont\"/>\n                                        </div>\n                                    </div>\n                                </FormItem>\n                            </Col>\n                            <Col span=\"24\">\n                                <FormItem label=\"商品轮播图：\" prop=\"images\">\n                                    <div class=\"acea-row\">\n                                        <div class=\"pictrue\" v-for=\"(item,index) in formValidate.images\" :key=\"index\"\n                                             draggable=\"true\"\n                                             @dragstart=\"handleDragStart($event, item)\"\n                                             @dragover.prevent=\"handleDragOver($event, item)\"\n                                             @dragenter=\"handleDragEnter($event, item)\"\n                                             @dragend=\"handleDragEnd($event, item)\">\n                                            <img v-lazy=\"item\">\n                                            <Button shape=\"circle\" icon=\"md-close\"  @click.native=\"handleRemove(index)\" class=\"btndel\"></Button>\n                                        </div>\n                                        <div v-if=\"formValidate.images.length<10\" class=\"upLoad acea-row row-center-wrapper\" @click=\"modalPicTap('duo')\">\n                                            <Icon type=\"ios-camera-outline\" size=\"26\" class=\"iconfonts\"/>\n                                        </div>\n                                    </div>\n                                </FormItem>\n                            </Col>\n                            <Col span=\"24\">\n                                <Col v-bind=\"grid\">\n                                    <FormItem label=\"商品标题：\" prop=\"title\" label-for=\"title\">\n                                        <Input placeholder=\"请输入商品标题\" element-id=\"title\" v-model=\"formValidate.title\"/>\n                                    </FormItem>\n                                </Col>\n                            </Col>\n                            <Col span=\"24\">\n                                <Col v-bind=\"grid\">\n                                    <FormItem label=\"秒杀活动简介：\" prop=\"info\" label-for=\"info\">\n                                        <Input placeholder=\"请输入秒杀活动简介\" type=\"textarea\" :rows=\"4\" element-id=\"info\" v-model=\"formValidate.info\"/>\n                                    </FormItem>\n                                </Col>\n                            </Col>\n                            <Col span=\"24\">\n                                <FormItem label=\"活动时间：\" prop=\"section_time\">\n                                    <div class=\"acea-row row-middle\">\n                                        <DatePicker :editable=\"false\" type=\"daterange\" format=\"yyyy-MM-dd\" placeholder=\"请选择活动时间\"\n                                                    @on-change=\"onchangeTime\" class=\"perW30\" :value=\"formValidate.section_time\" v-model=\"formValidate.section_time\"></DatePicker>\n                                        <div class=\"ml10 grey\">设置活动开启结束时间，用户可以在有效时间内参与秒杀</div>\n                                    </div>\n                                </FormItem>\n                            </Col>\n                            <Col span=\"24\">\n                                <FormItem label=\"运费模板：\" prop=\"temp_id\">\n                                    <div  class=\"acea-row row-middle\">\n                                        <Select v-model=\"formValidate.temp_id\" class=\"perW35\">\n                                            <Option v-for=\"item in templateList\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n                                        </Select>\n                                        <div class=\"ml10 grey\"><router-link :to=\"{path:'/admin/setting/freight/shipping_templates/list'}\">添加运费模板</router-link></div>\n                                    </div>\n                                </FormItem>\n                            </Col>\n\n                            <Col span=\"24\">\n                                <FormItem label=\"开始时间：\" prop=\"time_id\">\n                                    <div class=\"acea-row row-middle\">\n                                        <Select v-model=\"formValidate.time_id\" class=\"perW20\">\n                                            <Option v-for=\"item in timeList\" :value=\"item.id\" :key=\"item.id\">{{ item.time }}点开始,持续{{ item.continued }}小时</Option>\n                                        </Select>\n                                        <div class=\"ml10 grey\">选择产品开始时间段，该时间段内用户可参与购买；其它时间段会显示活动未开始或已结束。如活动超过一天，则活动期内，每天都会定时开启</div>\n                                    </div>\n                                </FormItem>\n                            </Col>\n                            <Col span=\"24\">\n                                <FormItem label=\"总购买数量限制：\" prop=\"num\">\n                                    <div class=\"acea-row row-middle\">\n                                        <InputNumber :min=\"1\" placeholder=\"请输入数量限制\" element-id=\"num\" :precision=\"0\"  v-model=\"formValidate.num\" class=\"perW20\"/>\n                                        <div class=\"ml10 grey\">活动有效期内每个用户可购买该商品总数限制。例如设置为4，表示本次活动有效期内，每个用户最多可购买总数4个</div>\n                                    </div>\n                                </FormItem>\n                            </Col>\n                            <Col span=\"24\">\n                                <FormItem label=\"单次购买数量限制：\" prop=\"once_num\">\n                                    <div class=\"acea-row row-middle\">\n                                        <InputNumber :min=\"1\" placeholder=\"请输入单次购买数量限制\" element-id=\"once_num\" :precision=\"0\"  v-model=\"formValidate.once_num\" class=\"perW20\"/>\n                                        <div class=\"ml10 grey\">用户参与秒杀时，一次购买最大数量限制。例如设置为2，表示参与秒杀时，用户一次购买数量最大可选择2个</div>\n                                    </div>\n                                </FormItem>\n                            </Col>\n                            <Col span=\"24\">\n                                <FormItem label=\"单位：\" prop=\"unit_name\" label-for=\"unit_name\">\n                                    <Input placeholder=\"请输入单位\" element-id=\"unit_name\" v-model=\"formValidate.unit_name\" class=\"perW20\"/>\n                                </FormItem>\n                            </Col>\n                            <Col span=\"24\">\n                                <FormItem label=\"排序：\">\n                                    <InputNumber placeholder=\"请输入排序\" element-id=\"sort\" :precision=\"0\"  v-model=\"formValidate.sort\" class=\"perW10\"/>\n                                </FormItem>\n                            </Col>\n                            <Col span=\"24\">\n                                <FormItem label=\"活动状态：\" props=\"status\" label-for=\"status\">\n                                    <RadioGroup element-id=\"status\"  v-model=\"formValidate.status\">\n                                        <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                                        <Radio :label=\"0\">关闭</Radio>\n                                    </RadioGroup>\n                                </FormItem>\n                            </Col>\n<!--                            <Col span=\"24\">-->\n<!--                                <FormItem label=\"规格选择：\">-->\n<!--                                    <Table :data=\"specsData\" :columns=\"columns\" border class=\"mt25\" highlight-row @on-selection-change=\"changeCheckbox\">-->\n<!--                                        <template slot-scope=\"{ row, index }\" slot=\"pic\">-->\n<!--                                            <div class=\"acea-row row-middle row-center-wrapper\" @click=\"modalPicTap('dan','danTable',index)\">-->\n<!--                                                <div class=\"pictrue pictrueTab\" v-if=\"row.pic\"><img v-lazy=\"row.pic\"></div>-->\n<!--                                                <div class=\"upLoad pictrueTab acea-row row-center-wrapper\"   v-else>-->\n<!--                                                    <Icon type=\"ios-camera-outline\" size=\"21\" class=\"iconfont\"/>-->\n<!--                                                </div>-->\n<!--                                            </div>-->\n<!--                                        </template>-->\n<!--                                    </Table>-->\n<!--                                </FormItem>-->\n<!--                            </Col>-->\n                            <Col span=\"24\">\n                                <FormItem label=\"规格选择：\">\n                                    <Table :data=\"specsData\" :columns=\"columns\" border @on-selection-change=\"changeCheckbox\">\n                                        <template slot-scope=\"{ row, index }\" slot=\"pic\">\n                                            <div class=\"acea-row row-middle row-center-wrapper\" @click=\"modalPicTap('dan','danTable',index)\">\n                                                <div class=\"pictrue pictrueTab\" v-if=\"row.pic\"><img v-lazy=\"row.pic\"></div>\n                                                <div class=\"upLoad pictrueTab acea-row row-center-wrapper\"   v-else>\n                                                    <Icon type=\"ios-camera-outline\" size=\"21\"/>\n                                                </div>\n                                            </div>\n                                        </template>\n                                    </Table>\n                                </FormItem>\n                            </Col>\n                        </Col>\n                        <Row v-show=\"current === 2\">\n                            <Col span=\"24\">\n                                <FormItem label=\"内容：\">\n                                    <vue-ueditor-wrap v-model=\"formValidate.description\"  @beforeInit=\"addCustomDialog\"  :config=\"myConfig\"  style=\"width: 90%;\"></vue-ueditor-wrap>\n                                </FormItem>\n                            </Col>\n                        </Row>\n                        <Col span=\"24\">\n                            <FormItem>\n                                <Button class=\"submission mr15\" @click=\"step\" v-show=\"current!==0\"\n                                        :disabled=\"$route.params.id&&current===1\">上一步\n                                </Button>\n                                <Button :disabled=\"submitOpen && current === 2\" type=\"primary\" class=\"submission\" @click=\"next('formValidate')\"\n                                        v-text=\"current===2?'提交':'下一步'\"></Button>\n                            </FormItem>\n                        </Col>\n                    </Form>\n                    <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\n                </Col>\n            </Row>\n        </Card>\n        <!-- 选择商品-->\n        <Modal v-model=\"modals\" title=\"商品列表\"  class=\"paymentFooter\" footerHide scrollable width=\"900\" @on-cancel=\"cancel\">\n            <goods-list ref=\"goodslist\"  @getProductId=\"getProductId\"></goods-list>\n        </Modal>\n        <!-- 上传图片-->\n        <Modal v-model=\"modalPic\" width=\"950px\" scrollable  footer-hide closable title='上传商品图' :mask-closable=\"false\" :z-index=\"888\">\n            <uploadPictures :isChoice=\"isChoice\" @getPic=\"getPic\"  @getPicD=\"getPicD\" :gridBtn=\"gridBtn\" :gridPic=\"gridPic\" v-if=\"modalPic\"></uploadPictures>\n        </Modal>\n    </div>\n</template>\n\n<script>\n    import { mapState } from 'vuex';\n    import goodsList from '@/components/goodsList/index';\n    import UeditorWrap from '@/components/ueditorFrom/index';\n    import VueUeditorWrap from 'vue-ueditor-wrap';\n    import uploadPictures from '@/components/uploadPictures';\n    import { seckillInfoApi, seckillAddApi, seckillTimeListApi, productAttrsApi } from '@/api/marketing';\n    import { productGetTemplateApi } from '@/api/product';\n\n    export default {\n        name: 'storeSeckillCreate',\n        components: { UeditorWrap, goodsList, uploadPictures, VueUeditorWrap },\n        data () {\n            return {\n                submitOpen: false,\n                spinShow: false,\n                isChoice: '',\n                current: 0,\n                modalPic: false,\n                grid: {\n                    xl: 12,\n                    lg: 20,\n                    md: 24,\n                    sm: 24,\n                    xs: 24\n                },\n                grid2: {\n                    xl: 8,\n                    lg: 12,\n                    md: 12,\n                    sm: 24,\n                    xs: 24\n                },\n                gridPic: {\n                    xl: 6,\n                    lg: 8,\n                    md: 12,\n                    sm: 12,\n                    xs: 12\n                },\n                gridBtn: {\n                    xl: 4,\n                    lg: 8,\n                    md: 8,\n                    sm: 8,\n                    xs: 8\n                },\n                myConfig: {\n                    autoHeightEnabled: false, // 编辑器不自动被内容撑高\n                    initialFrameHeight: 500, // 初始容器高度\n                    initialFrameWidth: '100%', // 初始容器宽度\n                    UEDITOR_HOME_URL: '/admin/UEditor/',\n                    serverUrl: ''\n                },\n                modals: false,\n                modal_loading: false,\n                images: [],\n                formValidate: {\n                    images: [],\n                    info: '',\n                    title: '',\n                    image: '',\n                    unit_name: '',\n                    price: 0,\n                    ot_price: 0,\n                    cost: 0,\n                    sales: 0,\n                    stock: 0,\n                    sort: 0,\n                    num: 1,\n                    once_num: 1,\n                    give_integral: 0,\n                    postage: 0,\n                    section_time: [],\n                    is_postage: 0,\n                    is_hot: 0,\n                    status: 0,\n                    description: '',\n                    id: 0,\n                    product_id: 0,\n                    temp_id: '',\n                    time_id: '',\n                    attrs: [],\n                    items: []\n                },\n                templateList: [],\n                timeList: [],\n                columns: [],\n                specsData: [],\n                picTit: '',\n                tableIndex: 0,\n                ruleValidate: {\n                    image: [\n                        { required: true, message: '请选择主图', trigger: 'change' }\n                    ],\n                    images: [\n                        { required: true, type: 'array', message: '请选择主图', trigger: 'change' },\n                        { type: 'array', min: 1, message: 'Choose two hobbies at best', trigger: 'change' }\n                    ],\n                    title: [\n                        { required: true, message: '请输入商品标题', trigger: 'blur' }\n                    ],\n                    info: [\n                        { required: true, message: '请输入秒杀活动简介', trigger: 'blur' }\n                    ],\n                    section_time: [\n                        { required: true, type: 'array', message: '请选择活动时间', trigger: 'change' }\n                    ],\n                    unit_name: [\n                        { required: true, message: '请输入单位', trigger: 'blur' }\n                    ],\n                    price: [\n                        { required: true, type: 'number', message: '请输入秒杀价', trigger: 'blur' }\n                    ],\n                    ot_price: [\n                        { required: true, type: 'number', message: '请输入原价', trigger: 'blur' }\n                    ],\n                    cost: [\n                        { required: true, type: 'number', message: '请输入成本价', trigger: 'blur' }\n                    ],\n                    stock: [\n                        { required: true, type: 'number', message: '请输入库存', trigger: 'blur' }\n                    ],\n                    num: [\n                        { required: true, type: 'number', message: '请输入购买数量限制', trigger: 'blur' }\n                    ],\n                    once_num: [\n                        { required: true, type: 'number', message: '请输入单次购买数量限制', trigger: 'blur' }\n                    ],\n                    temp_id: [\n                        { required: true, message: '请选择运费模板', trigger: 'change', type: 'number' }\n                    ],\n                    time_id: [\n                        { required: true, message: '请选择开始时间', trigger: 'change', type: 'number' }\n                    ]\n                },\n                copy:0\n            }\n        },\n        computed: {\n            ...mapState('media', [\n                'isMobile'\n            ]),\n            labelWidth () {\n                return this.isMobile ? undefined : 135;\n            },\n            labelPosition () {\n                return this.isMobile ? 'top' : 'right';\n            }\n        },\n        mounted () {\n            if (this.$route.params.id) {\n                this.copy = this.$route.params.copy;\n                this.current = 1;\n                this.getInfo();\n            }\n            this.productGetTemplate();\n            this.seckillTimeList();\n        },\n        methods: {\n            // 秒杀规格；\n            productAttrs (rows) {\n                let that = this;\n                productAttrsApi(rows.id, 1).then(res => {\n                    let data = res.data.info;\n                    let selection = {\n                        type: 'selection',\n                        width: 60,\n                        align: 'center'\n                    };\n                    that.specsData = data.attrs;\n                    that.specsData.forEach(function (item, index) {\n                        that.$set(that.specsData[index], 'id', index);\n                    });\n                    that.formValidate.items = data.items;\n                    that.columns = data.header;\n                    that.columns.unshift(selection);\n                    that.inputChange(data);\n                }).catch(res => {\n                    that.$Message.error(res.msg);\n                })\n            },\n            inputChange (data) {\n                let that = this;\n                let $index = [];\n                data.header.forEach(function (item, index) {\n                    if (item.type === 1) {\n                        $index.push({ index: index, key: item.key, title: item.title });\n                    }\n                });\n                $index.forEach(function (item, index) {\n                    let title = item.title;\n                    let key = item.key;\n                    let row = {\n                        title: title,\n                        key: key,\n                        align: 'center',\n                        minWidth: 120,\n                        render: (h, params) => {\n                            return h('div', [\n                                h('InputNumber', {\n                                    props: {\n                                        min: 1,\n                                        value: key === 'price' ? params.row.price : params.row.quota\n                                    },\n                                    on: {\n                                        'on-change': e => {\n                                            key === 'price' ? params.row.price = e : params.row.quota = e;\n                                            that.specsData[params.index] = params.row;\n                                            if (!!that.formValidate.attrs && that.formValidate.attrs.length) {\n                                                that.formValidate.attrs.forEach((v, index) => {\n                                                    if (v.id === params.row.id) {\n                                                        that.formValidate.attrs.splice(index, 1, params.row);\n                                                    }\n                                                });\n                                            }\n                                        }\n                                    }\n                                })\n                            ])\n                        }\n                    };\n                    that.columns.splice(item.index, 1, row);\n                });\n            },\n            // 多选\n            changeCheckbox (selection) {\n                this.formValidate.attrs = selection;\n            },\n            seckillTimeList () {\n                let that = this;\n                seckillTimeListApi().then(res => {\n                    that.timeList = res.data.list.data\n                }).catch(res => {\n                    that.$Message.error(res.msg);\n                })\n            },\n            // 获取运费模板；\n            productGetTemplate () {\n                productGetTemplateApi().then(res => {\n                    this.templateList = res.data;\n                })\n            },\n            // 表单验证\n            validate (prop, status, error) {\n                if (status === false) {\n                    this.$Message.error(error);\n                }\n            },\n            // 商品id\n            getProductId (row) {\n                this.modal_loading = false;\n                this.modals = false;\n                setTimeout(() => {\n                    this.formValidate = {\n                        images: row.slider_image,\n                        info: row.store_info,\n                        title: row.store_name,\n                        image: row.image,\n                        unit_name: row.unit_name,\n                        price: 0, // 不取商品中的原价\n                        ot_price: row.ot_price,\n                        cost: row.cost,\n                        sales: row.sales,\n                        stock: row.stock,\n                        sort: row.sort,\n                        num: 1,\n                        once_num: 1,\n                        give_integral: row.give_integral,\n                        postage: row.postage,\n                        section_time: [],\n                        is_postage: row.is_postage,\n                        is_hot: row.is_hot,\n                        status: 0,\n                        description: row.description,\n                        id: 0,\n                        product_id: row.id,\n                        temp_id: row.temp_id\n                    };\n                    this.productAttrs(row);\n                    this.$refs.goodslist.productRow = null;\n                }, 500);\n            },\n\n            cancel () {\n                this.modals = false;\n            },\n            // 具体日期\n            onchangeTime (e) {\n                this.formValidate.section_time = e;\n            },\n            // 详情\n            getInfo () {\n                this.spinShow = true;\n                seckillInfoApi(this.$route.params.id).then(async res => {\n                    let that = this;\n                    let info = res.data.info;\n                    let selection = {\n                        type: 'selection',\n                        width: 60,\n                        align: 'center'\n                    };\n                    this.formValidate = info;\n                    this.$set(this.formValidate, 'items', info.attrs.items);\n                    this.columns = info.attrs.header;\n                    this.columns.unshift(selection);\n                    this.specsData = info.attrs.value;\n                    that.specsData.forEach(function (item, index) {\n                        that.$set(that.specsData[index], 'id', index);\n                    });\n                    let data = info.attrs;\n                    let attr = [];\n                    for (let index in info.attrs.value) {\n                        if (info.attrs.value[index]._checked) {\n                            attr.push(info.attrs.value[index]);\n                        }\n                    }\n                    that.formValidate.attrs = attr;\n                    that.inputChange(data);\n                    this.spinShow = false;\n                }).catch(res => {\n                    this.spinShow = false;\n                    this.$Message.error(res.msg);\n                })\n            },\n            // 下一步\n            next (name) {\n                let that = this;\n                if (this.current === 2) {\n                    this.$refs[name].validate((valid) => {\n                        if (valid) {\n                            if (this.copy == 1 )this.formValidate.copy = 1;\n                            this.formValidate.id = Number(this.$route.params.id) || 0;\n                            this.submitOpen = true;\n                            seckillAddApi(this.formValidate).then(async res => {\n                                this.submitOpen = false;\n                                this.$Message.success(res.msg);\n                                setTimeout(() => {\n                                    this.$router.push({ path: '/admin/marketing/store_seckill/index' });\n                                }, 500);\n                            }).catch(res => {\n                                this.submitOpen = false;\n                                this.$Message.error(res.msg);\n                            })\n                        } else {\n                            return false\n                        }\n                    })\n                } else if(this.current === 1){\n                    this.$refs[name].validate((valid) => {\n                        if(valid){\n                            if (!that.formValidate.attrs) {\n                                return that.$Message.error('请选择属性规格');\n                            } else {\n                                for (let index in that.formValidate.attrs) {\n                                    if (that.formValidate.attrs[index].quota <= 0) {\n                                        return that.$Message.error('秒杀限量必须大于0');\n                                    }\n                                }\n                            }\n                            this.current += 1;\n                        }else {\n                            return this.$Message.warning('请完善您的信息');\n                        }\n                    })\n                }else {\n                    if (this.formValidate.image) {\n                        this.current += 1;\n                    } else {\n                        this.$Message.warning('请选择商品');\n                    }\n                }\n            },\n            // 上一步\n            step () {\n                this.current--;\n            },\n            // 内容\n            getContent (val) {\n                this.formValidate.description = val;\n            },\n            // 点击商品图\n            modalPicTap (tit, picTit, index) {\n                this.modalPic = true;\n                this.isChoice = tit === 'dan' ? '单选' : '多选';\n                this.picTit = picTit;\n                this.tableIndex = index;\n            },\n            // 获取单张图片信息\n            getPic (pc) {\n                switch (this.picTit) {\n                    case 'danFrom':\n                        this.formValidate.image = pc.att_dir;\n                        break;\n                    // case 'danTable':\n                    //     this.specsData[this.tableIndex].pic = pc.att_dir;\n                    //     break;\n                    default:\n                        if (!!this.formValidate.attrs && this.formValidate.attrs.length) {\n                            this.$set(this.specsData[this.tableIndex], '_checked', true);\n                        }\n                        this.specsData[this.tableIndex].pic = pc.att_dir;\n                }\n                this.modalPic = false;\n            },\n            // 获取多张图信息\n            getPicD (pc) {\n                this.images = pc;\n                this.images.map((item) => {\n                    this.formValidate.images.push(item.att_dir)\n                    this.formValidate.images = this.formValidate.images.splice(0,10);\n                });\n                this.modalPic = false;\n            },\n            handleRemove (i) {\n                this.images.splice(i, 1);\n                this.formValidate.images.splice(i, 1);\n            },\n            // 选择商品\n            changeGoods () {\n                this.modals = true;\n            }, // 移动\n            handleDragStart (e, item) {\n                this.dragging = item;\n            },\n            handleDragEnd (e, item) {\n                this.dragging = null\n            },\n            // 首先把div变成可以放置的元素，即重写dragenter/dragover\n            handleDragOver (e) {\n                e.dataTransfer.dropEffect = 'move'// e.dataTransfer.dropEffect=\"move\";//在dragenter中针对放置目标来设置!\n            },\n            handleDragEnter (e, item) {\n                e.dataTransfer.effectAllowed = 'move'// 为需要移动的元素设置dragstart事件\n                if (item === this.dragging) {\n                    return\n                }\n                const newItems = [...this.formValidate.images]\n                const src = newItems.indexOf(this.dragging)\n                const dst = newItems.indexOf(item)\n                newItems.splice(dst, 0, ...newItems.splice(src, 1))\n                this.formValidate.images = newItems;\n            },\n            // 添加自定义弹窗\n            addCustomDialog (editorId) {\n                window.UE.registerUI('test-dialog', function (editor, uiName) {\n                    // 创建 dialog\n                    let dialog = new window.UE.ui.Dialog({\n                        // 指定弹出层中页面的路径，这里只能支持页面，路径参考常见问题 2\n                        iframeUrl: '/admin/widget.images/index.html?fodder=dialog',\n                        // 需要指定当前的编辑器实例\n                        editor: editor,\n                        // 指定 dialog 的名字\n                        name: uiName,\n                        // dialog 的标题\n                        title: '上传图片',\n                        // 指定 dialog 的外围样式\n                        cssRules: 'width:1200px;height:500px;padding:20px;'\n                    });\n                    this.dialog = dialog;\n                    // 参考上面的自定义按钮\n                    var btn = new window.UE.ui.Button({\n                        name: 'dialog-button',\n                        title: '上传图片',\n                        cssRules: `background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;`,\n                        onclick: function () {\n                            // 渲染dialog\n                            dialog.render();\n                            dialog.open();\n                        }\n                    });\n                    return btn;\n                }, 37 /* 指定添加到工具栏上的那个位置，默认时追加到最后 */, editorId /* 指定这个UI是哪个编辑器实例上的，默认是页面上所有的编辑器都会添加这个按钮 */);\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n    .maxW /deep/.ivu-select-dropdown{\n        max-width 600px;\n    }\n    .tabBox_img\n        width 50px;\n        height 50px;\n        margin 0 auto;\n    .tabBox_img img\n        width 100%;\n        height 100%;\n    .priceBox\n        width 100%\n    .form\n        .picBox\n            display: inline-block;\n            cursor: pointer;\n        .pictrue\n            width:60px;\n            height:60px;\n            border:1px dotted rgba(0,0,0,0.1);\n            margin-right:15px;\n            display: inline-block;\n            position: relative;\n            cursor: pointer;\n            img\n                width 100%\n                height 100%\n            .btndel\n                position: absolute;\n                z-index: 9;\n                width :20px !important;\n                height: 20px !important;\n                left: 46px;\n                top: -4px;\n        .upLoad {\n            width: 58px;\n            height: 58px;\n            line-height: 58px;\n            border: 1px dotted rgba(0, 0, 0, 0.1);\n            border-radius: 4px;\n            background: rgba(0, 0, 0, 0.02);\n            cursor: pointer;\n        }\n\n</style>\n\n"]}]}