{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/marketing/storeCouponUser/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/marketing/storeCouponUser/index.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcKaW1wb3J0IHsgdXNlckxpc3RBcGkgfSBmcm9tICdAL2FwaS9tYXJrZXRpbmcnCmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tICdAL3V0aWxzL3ZhbGlkYXRlJwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnc3RvcmVDb3Vwb25Vc2VyJywKICAgIGZpbHRlcnM6IHsKICAgICAgICBmb3JtYXREYXRlICh0aW1lKSB7CiAgICAgICAgICAgIGlmICh0aW1lICE9PSAwKSB7CiAgICAgICAgICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKHRpbWUgKiAxMDAwKQogICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdERhdGUoZGF0ZSwgJ3l5eXktTU0tZGQgaGg6bW0nKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIGRhdGEgKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGNvbHVtbnMxOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdJRCcsCiAgICAgICAgICAgICAgICAgICAga2V5OiAnaWQnLAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiA4MAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+S8mOaDoOWIuOWQjeensCcsCiAgICAgICAgICAgICAgICAgICAga2V5OiAnY291cG9uX3RpdGxlJywKICAgICAgICAgICAgICAgICAgICBtaW5XaWR0aDogMTUwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6aKG5Y+W5Lq6JywKICAgICAgICAgICAgICAgICAgICBrZXk6ICduaWNrbmFtZScsCiAgICAgICAgICAgICAgICAgICAgbWluV2lkdGg6IDEzMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+mdouWAvCcsCiAgICAgICAgICAgICAgICAgICAga2V5OiAnY291cG9uX3ByaWNlJywKICAgICAgICAgICAgICAgICAgICBtaW5XaWR0aDogMTAwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5pyA5L2O5raI6LS56aKdJywKICAgICAgICAgICAgICAgICAgICBrZXk6ICd1c2VfbWluX3ByaWNlJywKICAgICAgICAgICAgICAgICAgICBtaW5XaWR0aDogMTIwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5byA5aeL5L2/55So5pe26Ze0JywKICAgICAgICAgICAgICAgICAgICBzbG90OiAnYWRkX3RpbWUnLAogICAgICAgICAgICAgICAgICAgIG1pbldpZHRoOiAxNTAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfnu5PmnZ/kvb/nlKjml7bpl7QnLAogICAgICAgICAgICAgICAgICAgIHNsb3Q6ICdlbmRfdGltZScsCiAgICAgICAgICAgICAgICAgICAgbWluV2lkdGg6IDE1MAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+iOt+WPluaWueW8jycsCiAgICAgICAgICAgICAgICAgICAga2V5OiAndHlwZScsCiAgICAgICAgICAgICAgICAgICAgbWluV2lkdGg6IDE1MAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+aYr+WQpuWPr+eUqCcsCiAgICAgICAgICAgICAgICAgICAgc2xvdDogJ2lzX2ZhaWwnLAogICAgICAgICAgICAgICAgICAgIG1pbldpZHRoOiAxMjAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfnirbmgIEnLAogICAgICAgICAgICAgICAgICAgIGtleTogJ3N0YXR1cycsCiAgICAgICAgICAgICAgICAgICAgbWluV2lkdGg6IDE3MAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdLAogICAgICAgICAgICB0YWJsZUxpc3Q6IFtdLAogICAgICAgICAgICBncmlkOiB7CiAgICAgICAgICAgICAgICB4bDogNywKICAgICAgICAgICAgICAgIGxnOiA3LAogICAgICAgICAgICAgICAgbWQ6IDEyLAogICAgICAgICAgICAgICAgc206IDI0LAogICAgICAgICAgICAgICAgeHM6IDI0CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRhYmxlRnJvbTogewogICAgICAgICAgICAgICAgc3RhdHVzOiAnJywKICAgICAgICAgICAgICAgIGNvdXBvbl90aXRsZTogJycsCiAgICAgICAgICAgICAgICBuaWNrbmFtZTogJycsCiAgICAgICAgICAgICAgICBwYWdlOiAxLAogICAgICAgICAgICAgICAgbGltaXQ6IDE1CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRvdGFsOiAwCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLi4ubWFwU3RhdGUoJ21lZGlhJywgWwogICAgICAgICAgICAnaXNNb2JpbGUnCiAgICAgICAgXSksCiAgICAgICAgbGFiZWxXaWR0aCAoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gdW5kZWZpbmVkIDogOTAKICAgICAgICB9LAogICAgICAgIGxhYmVsUG9zaXRpb24gKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5pc01vYmlsZSA/ICd0b3AnIDogJ3JpZ2h0JwogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkICgpIHsKICAgICAgICB0aGlzLmdldExpc3QoKQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAvLyDliJfooagKICAgICAgICBnZXRMaXN0ICgpIHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICAgICAgICB0aGlzLnRhYmxlRnJvbS5zdGF0dXMgPSB0aGlzLnRhYmxlRnJvbS5zdGF0dXMgfHwgJycKICAgICAgICAgICAgdXNlckxpc3RBcGkodGhpcy50YWJsZUZyb20pLnRoZW4oYXN5bmMgcmVzID0+IHsKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGEKICAgICAgICAgICAgICAgIHRoaXMudGFibGVMaXN0ID0gZGF0YS5saXN0CiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEuY291bnQKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgIH0pLmNhdGNoKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgcGFnZUNoYW5nZSAoaW5kZXgpIHsKICAgICAgICAgICAgdGhpcy50YWJsZUZyb20ucGFnZSA9IGluZGV4CiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICAgICAgfSwKICAgICAgICAvLyDooajmoLzmkJzntKIKICAgICAgICB1c2VyU2VhcmNocyAoKSB7CiAgICAgICAgICAgIHRoaXMudGFibGVGcm9tLnBhZ2UgPSAxCiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/marketing/storeCouponUser","sourcesContent":["<template>\n    <div>\n        <div class=\"i-layout-page-header\">\n          <div class=\"i-layout-page-header\">\n            <span class=\"ivu-page-header-title\">{{$route.meta.title}}</span>\n          </div>\n        </div>\n        <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n            <Form ref=\"tableFrom\" :model=\"tableFrom\"  :label-width=\"labelWidth\" :label-position=\"labelPosition\" @submit.native.prevent>\n                <Row type=\"flex\" :gutter=\"24\">\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"是否有效：\" >\n                            <Select  placeholder=\"请选择\" clearable v-model=\"tableFrom.status\" @on-change=\"userSearchs\">\n                                <Option value=\"1\">已使用</Option>\n                                <Option value=\"0\">未使用</Option>\n                                <Option value=\"2\">已过期</Option>\n                            </Select>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"领取人：\" label-for=\"nickname\">\n                            <Input  placeholder=\"请输入领取人\" v-model=\"tableFrom.nickname\" clearable/>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"优惠券搜索：\" label-for=\"coupon_title\">\n                            <Input search enter-button placeholder=\"请输入优惠券名称\" v-model=\"tableFrom.coupon_title\" @on-search=\"userSearchs\"/>\n                        </FormItem>\n                    </Col>\n                </Row>\n            </Form>\n            <Table :columns=\"columns1\" :data=\"tableList\">\n                <template slot-scope=\"{ row, index }\" slot=\"is_fail\">\n                    <Icon type=\"md-checkmark\" v-if=\"row.is_fail === 0\" color=\"#0092DC\" size=\"14\"/>\n                    <Icon type=\"md-close\" v-else color=\"#ed5565\" size=\"14\"/>\n                </template>\n                <template slot-scope=\"{ row, index }\" slot=\"add_time\">\n                    <span> {{row.add_time | formatDate}}</span>\n                </template>\n                <template slot-scope=\"{ row, index }\" slot=\"end_time\">\n                    <span> {{row.end_time | formatDate}}</span>\n                </template>\n            </Table>\n            <div class=\"acea-row row-right page\">\n                <Page :total=\"total\" :current=\"tableFrom.page\" show-elevator show-total @on-change=\"pageChange\"\n                      :page-size=\"tableFrom.limit\"/>\n            </div>\n        </Card>\n    </div>\n</template>\n\n<script>\n    import { mapState } from 'vuex'\n    import { userListApi } from '@/api/marketing'\n    import { formatDate } from '@/utils/validate'\n    export default {\n        name: 'storeCouponUser',\n        filters: {\n            formatDate (time) {\n                if (time !== 0) {\n                    let date = new Date(time * 1000)\n                    return formatDate(date, 'yyyy-MM-dd hh:mm')\n                }\n            }\n        },\n        data () {\n            return {\n                columns1: [\n                    {\n                        title: 'ID',\n                        key: 'id',\n                        width: 80\n                    },\n                    {\n                        title: '优惠券名称',\n                        key: 'coupon_title',\n                        minWidth: 150\n                    },\n                    {\n                        title: '领取人',\n                        key: 'nickname',\n                        minWidth: 130\n                    },\n                    {\n                        title: '面值',\n                        key: 'coupon_price',\n                        minWidth: 100\n                    },\n                    {\n                        title: '最低消费额',\n                        key: 'use_min_price',\n                        minWidth: 120\n                    },\n                    {\n                        title: '开始使用时间',\n                        slot: 'add_time',\n                        minWidth: 150\n                    },\n                    {\n                        title: '结束使用时间',\n                        slot: 'end_time',\n                        minWidth: 150\n                    },\n                    {\n                        title: '获取方式',\n                        key: 'type',\n                        minWidth: 150\n                    },\n                    {\n                        title: '是否可用',\n                        slot: 'is_fail',\n                        minWidth: 120\n                    },\n                    {\n                        title: '状态',\n                        key: 'status',\n                        minWidth: 170\n                    }\n                ],\n                tableList: [],\n                grid: {\n                    xl: 7,\n                    lg: 7,\n                    md: 12,\n                    sm: 24,\n                    xs: 24\n                },\n                tableFrom: {\n                    status: '',\n                    coupon_title: '',\n                    nickname: '',\n                    page: 1,\n                    limit: 15\n                },\n                total: 0\n            }\n        },\n        computed: {\n            ...mapState('media', [\n                'isMobile'\n            ]),\n            labelWidth () {\n                return this.isMobile ? undefined : 90\n            },\n            labelPosition () {\n                return this.isMobile ? 'top' : 'right'\n            }\n        },\n        created () {\n            this.getList()\n        },\n        methods: {\n            // 列表\n            getList () {\n                this.loading = true\n                this.tableFrom.status = this.tableFrom.status || ''\n                userListApi(this.tableFrom).then(async res => {\n                    let data = res.data\n                    this.tableList = data.list\n                    this.total = res.data.count\n                    this.loading = false\n                }).catch(res => {\n                    this.loading = false\n                    this.$Message.error(res.msg)\n                })\n            },\n            pageChange (index) {\n                this.tableFrom.page = index\n                this.getList()\n            },\n            // 表格搜索\n            userSearchs () {\n                this.tableFrom.page = 1\n                this.getList()\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}