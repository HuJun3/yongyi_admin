{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/system/auth/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/system/auth/index.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGF1dGgsIGF1dGhBcHBseSB9IGZyb20gJ0AvYXBpL3N5c3RlbScKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ3N5c3RlbV9hdXRoJywKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLi4ubWFwU3RhdGUoJ21lZGlhJywgWwogICAgICAgICAgICAnaXNNb2JpbGUnCiAgICAgICAgXSksCiAgICAgICAgLi4ubWFwU3RhdGUoJ3VzZXJMZXZlbCcsIFsKICAgICAgICAgICAgJ2NhdGVnb3J5SWQnCiAgICAgICAgXSksCiAgICAgICAgbGFiZWxXaWR0aCAoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gdW5kZWZpbmVkIDogODUKICAgICAgICB9LAogICAgICAgIGxhYmVsUG9zaXRpb24gKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5pc01vYmlsZSA/ICd0b3AnIDogJ3JpZ2h0JwogICAgICAgIH0KICAgIH0sCiAgICBkYXRhICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjYXB0Y2hzOiAnaHR0cDovL2F1dGhvcml6ZS5jcm1lYi5uZXQvYXBpL2NhcHRjaHMvJywKICAgICAgICAgICAgYXV0aENvZGU6ICcnLAogICAgICAgICAgICBzdGF0dXM6IDEsCiAgICAgICAgICAgIGRheU51bTogMCwKICAgICAgICAgICAgaXNUZW1wbGF0ZTogZmFsc2UsCiAgICAgICAgICAgIGZvcm1JdGVtOiB7CiAgICAgICAgICAgICAgICBjb21wYW55X25hbWU6ICcnLAogICAgICAgICAgICAgICAgb3JkZXJfaWQ6ICcnLAogICAgICAgICAgICAgICAgcGhvbmU6ICcnLAogICAgICAgICAgICAgICAgY2FwdGNoYTogJycsCiAgICAgICAgICAgICAgICBkb21haW5fbmFtZTogbG9jYXRpb24uaG9zdG5hbWUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJ1bGVWYWxpZGF0ZTogewogICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiBbCiAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+Whq+WGmeaCqOeahOS8geS4muWQjeensCcsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgZG9tYWluX25hbWU6IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5Z+f5ZCN77yM5qC85byP77yaYmFpZHUuY29tJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBvcmRlcl9pZDogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXmgqjlnKjmt5jlrp3miJblsI/nqIvluo/otK3kubDnmoTmupDnoIHorqLljZXlj7cnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHBob25lOiBbCiAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpei0n+i0o+S6uueUteivnScsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgY2FwdGNoYTogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXpqozor4HnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQgKCkgewogICAgICAgIHRoaXMuZ2V0QXV0aCgpCiAgICAgICAgdGhpcy5jYXB0Y2hzQ2hhbmcoKQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBjYXB0Y2hzQ2hhbmcgKCkgewogICAgICAgICAgICB0aGlzLmNhcHRjaHMgPSB0aGlzLmNhcHRjaHMgKyBEYXRlLnBhcnNlKG5ldyBEYXRlKCkpCiAgICAgICAgfSwKICAgICAgICBjYW5jZWwgKCkgewogICAgICAgICAgICB0aGlzLmlzVGVtcGxhdGUgPSBmYWxzZQogICAgICAgIH0sCiAgICAgICAgLy8g5o+Q5LqkCiAgICAgICAgaGFuZGxlU3VibWl0IChuYW1lKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnNbbmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICBhdXRoQXBwbHkodGhpcy5mb3JtSXRlbSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVGVtcGxhdGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEF1dGgoKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpCiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2gocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXB0Y2hzQ2hhbmcoKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgZ2V0QXV0aCAoKSB7CiAgICAgICAgICAgIGF1dGgoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhIHx8IHt9CiAgICAgICAgICAgICAgICB0aGlzLmF1dGhDb2RlID0gZGF0YS5hdXRoQ29kZSB8fCAnJwogICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBkYXRhLnN0YXR1cyA9PT0gdW5kZWZpbmVkID8gLTEgOiBkYXRhLnN0YXR1cwogICAgICAgICAgICAgICAgdGhpcy5kYXlOdW0gPSBkYXRhLmRheSB8fCAwCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICB0b0NybWViICgpIHsKICAgICAgICAgICAgd2luZG93Lm9wZW4oJ2h0dHA6Ly93d3cuY3JtZWIuY29tJykKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/system/auth","sourcesContent":["<template>\n    <div>\n        <div class=\"i-layout-page-header\">\n          <div class=\"i-layout-page-header\">\n            <span class=\"ivu-page-header-title\">{{$route.meta.title}}</span>\n          </div>\n        </div>\n        <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n            <div class=\"auth acea-row row-between-wrapper\">\n                <div class=\"acea-row row-middle\">\n                    <Icon type=\"ios-bulb-outline\" class=\"iconIos blue\"/>\n                    <div class=\"text\" v-if=\"status === -1 || status === -9\">\n                        <div>体验时间剩余 {{dayNum}}天</div>\n                        <div class=\"code\">到期后后台将不能正常使用，如果您对我们的系统满意，请支持正版！</div>\n                    </div>\n                    <div class=\"text\" v-else-if=\"status === 2\">\n                        <div>体验时间剩余 {{dayNum}}天</div>\n                        <div class=\"code red\">审核未通过</div>\n                    </div>\n                    <div class=\"text\" v-else-if=\"status === 1\">\n                        <div>商业授权</div>\n                        <div class=\"code\">授权码：{{ authCode }}</div>\n                    </div>\n                    <div class=\"text\" v-else-if=\"status === 0\">\n                        <div>体验时间剩余 {{dayNum}}天</div>\n                        <div class=\"code blue\">授权申请已提交，请等待审核</div>\n                    </div>\n                </div>\n                <Button @click=\"toCrmeb()\" v-if=\"status === 1\">进入官网</Button>\n                <Button type=\"primary\" @click=\"isTemplate = true\" v-else-if=\"status === -1 || status === -9\">申请授权</Button>\n                <Button type=\"primary\" @click=\"isTemplate = true\" v-else-if=\"status === 2\">重新申请</Button>\n                <Button class=\"grey\" v-else-if=\"status === 0\">审核中</Button>\n            </div>\n        </Card>\n        <Modal v-model=\"isTemplate\" scrollable footer-hide closable title=\"申请商业授权\" :z-index=\"1\" width=\"640\"\n               @on-cancel=\"cancel\">\n            <div class=\"article-manager\">\n                <Card :bordered=\"false\" dis-hover>\n                    <Form ref=\"formItem\" :model=\"formItem\" :label-width=\"labelWidth\" :label-position=\"labelPosition\"\n                          :rules=\"ruleValidate\" @submit.native.prevent>\n                        <Row type=\"flex\" :gutter=\"24\">\n                            <Col span=\"24\">\n                                <Col>\n                                    <FormItem label=\"企业名称：\" prop=\"company_name\" label-for=\"company_name\">\n                                        <Input v-model=\"formItem.company_name\" placeholder=\"请填写您的企业名称\"/>\n                                    </FormItem>\n                                </Col>\n                            </Col>\n                            <Col span=\"24\">\n                                <Col>\n                                    <FormItem label=\"企业域名：\" prop=\"domain_name\" label-for=\"domain_name\">\n                                        <Input v-model=\"formItem.domain_name\" :disabled=\"true\" placeholder=\"请输入域名，格式：baidu.com\"/>\n                                    </FormItem>\n                                </Col>\n                            </Col>\n                            <Col span=\"24\">\n                                <Col>\n                                    <FormItem label=\"订单号：\" label-for=\"order_id\" prop=\"order_id\">\n                                        <Input v-model=\"formItem.order_id\" placeholder=\"请输入您在淘宝或小程序购买的源码订单号\"\n                                               class=\"customer\">\n                                            <a slot=\"append\" target=\"_blank\" href=\"http://www.crmeb.com/web/auth/query.html\">联系客服获取订单号</a>\n                                        </Input>\n                                    </FormItem>\n                                </Col>\n                            </Col>\n                            <Col span=\"24\">\n                                <Col>\n                                    <FormItem label=\"手机号：\" label-for=\"phone\" prop=\"phone\">\n                                        <Input v-model=\"formItem.phone\" type=\"number\" placeholder=\"负责人电话\"/>\n                                    </FormItem>\n                                </Col>\n                            </Col>\n                            <Col span=\"24\">\n                                <Col>\n                                    <FormItem label=\"验证码：\" label-for=\"captcha\" prop=\"captcha\">\n                                        <div class=\"acea-row row-middle code\">\n                                            <Input v-model=\"formItem.captcha\" placeholder=\"验证码\" class=\"input\"/>\n                                            <img @click=\"captchsChang\" :src=\"captchs\"\n                                                 class=\"pictrue\"/>\n                                        </div>\n                                    </FormItem>\n                                </Col>\n                            </Col>\n                        </Row>\n                        <Row type=\"flex\">\n                            <Col span=\"24\">\n                                <Button type=\"primary\" @click=\"handleSubmit('formItem')\" class=\"submit\">提交</Button>\n                            </Col>\n                        </Row>\n                    </Form>\n                </Card>\n            </div>\n        </Modal>\n    </div>\n</template>\n<script>\n    import { auth, authApply } from '@/api/system'\n    import { mapState } from 'vuex'\n\n    export default {\n        name: 'system_auth',\n        computed: {\n            ...mapState('media', [\n                'isMobile'\n            ]),\n            ...mapState('userLevel', [\n                'categoryId'\n            ]),\n            labelWidth () {\n                return this.isMobile ? undefined : 85\n            },\n            labelPosition () {\n                return this.isMobile ? 'top' : 'right'\n            }\n        },\n        data () {\n            return {\n                captchs: 'http://authorize.crmeb.net/api/captchs/',\n                authCode: '',\n                status: 1,\n                dayNum: 0,\n                isTemplate: false,\n                formItem: {\n                    company_name: '',\n                    order_id: '',\n                    phone: '',\n                    captcha: '',\n                    domain_name: location.hostname,\n                },\n                ruleValidate: {\n                    company_name: [\n                        { required: true, message: '请填写您的企业名称', trigger: 'blur' }\n                    ],\n                    domain_name: [\n                        { required: true, message: '请输入域名，格式：baidu.com', trigger: 'blur' }\n                    ],\n                    order_id: [\n                        { required: true, message: '请输入您在淘宝或小程序购买的源码订单号', trigger: 'blur' }\n                    ],\n                    phone: [\n                        { required: true, message: '请输入负责人电话', trigger: 'blur' }\n                    ],\n                    captcha: [\n                        { required: true, message: '请输入验证码', trigger: 'blur' }\n                    ]\n                }\n            }\n        },\n        mounted () {\n            this.getAuth()\n            this.captchsChang()\n        },\n        methods: {\n            captchsChang () {\n                this.captchs = this.captchs + Date.parse(new Date())\n            },\n            cancel () {\n                this.isTemplate = false\n            },\n            // 提交\n            handleSubmit (name) {\n                this.$refs[name].validate((valid) => {\n                    if (valid) {\n                        authApply(this.formItem).then(res => {\n                            this.isTemplate = false\n                            this.getAuth()\n                            return this.$Message.success(res.msg)\n                        }).catch(res => {\n                            this.captchsChang()\n                            return this.$Message.error(res.msg)\n                        })\n                    } else {\n                        return false\n                    }\n                })\n            },\n            getAuth () {\n                auth().then(res => {\n                    let data = res.data || {}\n                    this.authCode = data.authCode || ''\n                    this.status = data.status === undefined ? -1 : data.status\n                    this.dayNum = data.day || 0\n                })\n            },\n            toCrmeb () {\n                window.open('http://www.crmeb.com')\n            }\n        }\n    }\n</script>\n<style scoped lang=\"stylus\">\n    .auth {\n        padding: 9px 16px 9px 10px;\n    }\n\n    .auth .iconIos {\n        font-size: 40px;\n        margin-right: 10px;\n        color: #001529;\n    }\n\n    .auth .text {\n        font-weight: 400;\n        color: rgba(0, 0, 0, 1);\n        font-size: 18px;\n    }\n\n    .auth .text .code {\n        font-size: 14px;\n        color: rgba(0, 0, 0, 0.5);\n    }\n\n    .auth .blue {\n        color: #1890FF !important;\n    }\n\n    .auth .red {\n        color: #ED4014 !important;\n    }\n\n    .grey {\n        background-color: #999999;\n        border-color: #999999;\n        color: #fff;\n    }\n\n    .submit {\n        width: 100%;\n    }\n\n    .code .input {\n        width: 83%;\n    }\n\n    .code .input .ivu-input {\n        border-radius: 4px 0 0 4px !important;\n    }\n\n    .code .pictrue {\n        height: 32px;\n        width: 17%;\n    }\n\n    .customer {\n        border-right: 0;\n    }\n\n    .customer a {\n        font-size: 12px;\n    }\n\n    .ivu-input-group-prepend, .ivu-input-group-append {\n        background-color: #fff;\n    }\n\n    .ivu-input-group .ivu-input {\n        border-right: 0 !important;\n    }\n</style>\n"]}]}