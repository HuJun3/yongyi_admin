{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/kefu/pc/components/userLabel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/kefu/pc/components/userLabel.vue","mtime":1610680942000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHVzZXJMYWJlbCx1c2VyTGFiZWxQdXQgfSBmcm9tICdAL2FwaS9rZWZ1JwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAidXNlckxhYmVsIiwKICAgIHByb3BzOnsKICAgICAgICB1aWQ6ewogICAgICAgICAgICB0eXBlOlN0cmluZyB8IE51bWJlciwKICAgICAgICAgICAgZGVmYXVsdDonJwogICAgICAgIH0KICAgIH0sCiAgICBkYXRhKCl7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbGFiZWxMaXN0OltdLAogICAgICAgICAgICBhY3RpdmVJZHM6W10KICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLmdldExpc3QoKQogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIGdldExpc3QoKXsKICAgICAgICAgICAgdXNlckxhYmVsKHRoaXMudWlkKS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgcmVzLmRhdGEubWFwKGVsPT57CiAgICAgICAgICAgICAgICAgICAgZWwubGFiZWwubWFwKGxhYmVsPT57CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxhYmVsLmRpc2FibGVkKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSWRzLnB1c2gobGFiZWwuaWQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIHRoaXMubGFiZWxMaXN0ID1yZXMuZGF0YQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgc2VsZWN0TGFiZWwobGFiZWwpewogICAgICAgICAgICBpZihsYWJlbC5kaXNhYmxlZCl7CiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmFjdGl2ZUlkcy5pbmRleE9mKGxhYmVsLmlkKQogICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZHMuc3BsaWNlKGluZGV4LDEpCiAgICAgICAgICAgICAgICBsYWJlbC5kaXNhYmxlZCA9IGZhbHNlCiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZHMucHVzaChsYWJlbC5pZCkKICAgICAgICAgICAgICAgIGxhYmVsLmRpc2FibGVkID0gdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvLyDnoa7lrpoKICAgICAgICBzdWJCdG4oKXsKICAgICAgICAgICAgbGV0IHVuTGFiZXJpZHMgPSBbXTsKICAgICAgICAgICAgdGhpcy5sYWJlbExpc3QubWFwKGl0ZW09PnsKICAgICAgICAgICAgICAgIGl0ZW0ubGFiZWwubWFwKCBpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZihpLmRpc2FibGVkID09IGZhbHNlKXsKICAgICAgICAgICAgICAgICAgICAgICAgdW5MYWJlcmlkcy5wdXNoKGkuaWQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdXNlckxhYmVsUHV0KHRoaXMudWlkLHsKICAgICAgICAgICAgICAgIGxhYmVsX2lkczogdGhpcy5hY3RpdmVJZHMsCiAgICAgICAgICAgICAgICB1bl9sYWJlbF9pZHM6IHVuTGFiZXJpZHMKICAgICAgICAgICAgfSkudGhlbihyZXM9PnsKICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZWRpdExhYmVsJykKICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3I9PnsKICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoZXJyb3IubXNnKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgY2FuY2VsKCl7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJykKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["userLabel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"userLabel.vue","sourceRoot":"src/pages/kefu/pc/components","sourcesContent":["<template>\n    <div class=\"label-wrapper\">\n        <div class=\"label-box\" v-for=\"(item,index) in labelList\" :key=\"index\">\n            <div class=\"title\">{{item.name}}</div>\n            <div class=\"list\">\n                <div class=\"label-item\" :class=\"{on:label.disabled}\" v-for=\"(label,j) in item.label\" :key=\"j\" @click=\"selectLabel(label)\">{{label.label_name}}</div>\n            </div>\n        </div>\n        <div class=\"footer\">\n            <Button type=\"primary\" class=\"btns\" @click=\"subBtn\">确定</Button>\n            <Button type=\"primary\" class=\"btns\" ghost @click=\"cancel\">取消</Button>\n        </div>\n    </div>\n</template>\n\n<script>\n    import { userLabel,userLabelPut } from '@/api/kefu'\n    export default {\n        name: \"userLabel\",\n        props:{\n            uid:{\n                type:String | Number,\n                default:''\n            }\n        },\n        data(){\n            return {\n                labelList:[],\n                activeIds:[]\n            }\n        },\n        mounted() {\n            this.getList()\n        },\n        methods:{\n            getList(){\n                userLabel(this.uid).then(res=>{\n                    res.data.map(el=>{\n                        el.label.map(label=>{\n                            if(label.disabled){\n                                this.activeIds.push(label.id)\n                            }\n                        })\n                    })\n                    this.labelList =res.data\n                })\n            },\n            selectLabel(label){\n                if(label.disabled){\n                    let index = this.activeIds.indexOf(label.id)\n                    this.activeIds.splice(index,1)\n                    label.disabled = false\n                }else{\n                    this.activeIds.push(label.id)\n                    label.disabled = true\n                }\n            },\n            // 确定\n            subBtn(){\n                let unLaberids = [];\n                this.labelList.map(item=>{\n                    item.label.map( i => {\n                        if(i.disabled == false){\n                            unLaberids.push(i.id);\n                        }\n                    });\n                });\n                userLabelPut(this.uid,{\n                    label_ids: this.activeIds,\n                    un_label_ids: unLaberids\n                }).then(res=>{\n                    this.$Message.success(res.msg)\n                    this.$emit('editLabel')\n                }).catch(error=>{\n                    this.$Message.error(error.msg)\n                })\n            },\n            cancel(){\n                this.$emit('close')\n            }\n        }\n    }\n</script>\n\n<style lang=\"stylus\" scoped>\n.label-wrapper\n    .list\n        display flex\n        flex-wrap wrap\n        .label-item\n            margin 10px 8px 10px 0\n            padding: 3px 8px;\n            background #EEEEEE\n            color #333333\n            border-radius 2px\n            cursor pointer\n            font-size 12px\n            &.on\n                color #fff\n                background #1890FF\n    .footer\n        display flex\n        justify-content flex-end\n        margin-top 40px\n        button\n            margin-left 10px\n.btn\n    width 60px\n    height 24px\n.title\n    font-size 13px\n\n</style>\n"]}]}