{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/components/diyComponents/c_goods.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/components/diyComponents/c_goods.vue","mtime":1610681260000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB2dWVkcmFnZ2FibGUgZnJvbSAndnVlZHJhZ2dhYmxlJwppbXBvcnQgZ29vZHNMaXN0IGZyb20gJ0AvY29tcG9uZW50cy9nb29kc0xpc3QnCmltcG9ydCBzb3J0TGlzdCBmcm9tICdAL2NvbXBvbmVudHMvc29ydExpc3QnCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdjX2dvb2RzJywKICAgIHByb3BzOiB7CiAgICAgICAgbmFtZTogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcKICAgICAgICB9LAogICAgICAgIGNvbmZpZ0RhdGE6ewogICAgICAgICAgICB0eXBlOm51bGwKICAgICAgICB9CiAgICB9LAogICAgY29tcG9uZW50czogewogICAgICAgIGdvb2RzTGlzdCwKICAgICAgICBzb3J0TGlzdCwKICAgICAgICBkcmFnZ2FibGU6IHZ1ZWRyYWdnYWJsZQogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgY29uZmlnRGF0YTogewogICAgICAgICAgICBoYW5kbGVyIChuVmFsLCBvVmFsKSB7CiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRzID0gblZhbAogICAgICAgICAgICAgICAgdGhpcy50eXBlID0gblZhbC5zZWxlY3RDb25maWc/KG5WYWwuc2VsZWN0Q29uZmlnLnR5cGU/blZhbC5zZWxlY3RDb25maWcudHlwZTonJyk6JycKICAgICAgICAgICAgICAgIC8vIHRoaXMudHlwZSA9IG5WYWwuc2VsZWN0Q29uZmlnLnR5cGU/blZhbC5zZWxlY3RDb25maWcudHlwZTonJwogICAgICAgICAgICB9LAogICAgICAgICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgICAgICAgIGRlZXA6IHRydWUKICAgICAgICB9CiAgICB9LAogICAgZGF0YSAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbW9kYWxzOiBmYWxzZSwKICAgICAgICAgICAgZ29vZHNMaXN0OiBbXSwKICAgICAgICAgICAgdGVtcEdvb2RzOiBbXSwKICAgICAgICAgICAgZGVmYXVsdHM6e30sCiAgICAgICAgICAgIHR5cGU6JycsCiAgICAgICAgICAgIGlzX25ldzonJywKICAgICAgICAgICAgbG9hZGluZzp0cnVlCiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQgKCkgewogICAgICAgIHRoaXMuZGVmYXVsdHMgPSB0aGlzLmNvbmZpZ0RhdGEKICAgICAgICB0aGlzLmlzX25ldyA9IHRoaXMuY29uZmlnRGF0YS5pc19uZXcKCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGdldFByb2R1Y3REaXkgKGRhdGEpIHsKICAgICAgICAgICAgdGhpcy50ZW1wR29vZHMgPSBkYXRhCiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgfSwKICAgICAgICBjYW5jZWwgKCkgewogICAgICAgICAgICB0aGlzLnRlbXBHb29kcyA9IFtdCiAgICAgICAgfSwKICAgICAgICAvL+WvueixoeaVsOe7hOWOu+mHje+8mwogICAgICAgIHVuaXF1ZShhcnIpIHsKICAgICAgICAgICAgY29uc3QgcmVzID0gbmV3IE1hcCgpOwogICAgICAgICAgICByZXR1cm4gYXJyLmZpbHRlcigoYXJyKSA9PiAhcmVzLmhhcyhhcnIuaWQpICYmIHJlcy5zZXQoYXJyLmlkLCAxKSkKICAgICAgICB9LAogICAgICAgIG9rICgpIHsKICAgICAgICAgICAgaWYoIXRoaXMudGVtcEdvb2RzLmxlbmd0aCl7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS53YXJuaW5nKCfor7flhYjpgInmi6nllYblk4EnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgbGlzdCA9IHRoaXMuZGVmYXVsdHMuZ29vZHNMaXN0Lmxpc3Q7CiAgICAgICAgICAgIGxpc3QucHVzaC5hcHBseShsaXN0LHRoaXMudGVtcEdvb2RzKTsKICAgICAgICAgICAgLy8gbGlzdC5wdXNoKHRoaXMudGVtcEdvb2RzKTsKICAgICAgICAgICAgbGV0IHBpY0xpc3QgPSB0aGlzLnVuaXF1ZShsaXN0KTsKICAgICAgICAgICAgdGhpcy5kZWZhdWx0cy5nb29kc0xpc3QubGlzdD0gcGljTGlzdDsKICAgICAgICAgICAgLy8gdGhpcy5kZWZhdWx0cy5nb29kc0xpc3QubGlzdC5wdXNoKHRoaXMudGVtcEdvb2RzKTsKICAgICAgICB9LAogICAgICAgIGJpbmREZWxldGUgKGluZGV4KSB7CiAgICAgICAgICAgIHRoaXMuZGVmYXVsdHMuZ29vZHNMaXN0Lmxpc3Quc3BsaWNlKGluZGV4LCAxKQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["c_goods.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"c_goods.vue","sourceRoot":"src/components/diyComponents","sourcesContent":["<template>\n    <div class=\"goods-box\" v-if=\"defaults.goodsList\">\n        <div class=\"wrapper\">\n            <draggable\n                    class=\"dragArea list-group\"\n                    :list=\"defaults.goodsList.list\"\n                    group=\"peoples\"\n            >\n                <div class=\"item\" v-for=\"(goods,index) in defaults.goodsList.list\" :key=\"index\" v-if=\"defaults.goodsList.list.length\">\n                    <img :src=\"type?goods.pic:goods.image\" alt=\"\">\n                    <span class=\"iconfont icondel_1\" @click.stop=\"bindDelete(index)\"></span>\n                </div>\n                <div class=\"add-item item\" @click=\"modals = true\"><span class=\"iconfont iconaddto\"></span></div>\n            </draggable>\n\n        </div>\n\n        <Modal v-model=\"modals\" :loading=\"loading\" :title=\"type?'分类列表':'商品列表'\" class=\"paymentFooter\" scrollable width=\"900\" @on-cancel=\"cancel\" @on-ok=\"ok\">\n            <sort-list ref=\"goodslist\"  @getProductDiy=\"getProductDiy\" v-if=\"modals && type\"></sort-list>\n            <goods-list ref=\"goodslist\"  @getProductDiy=\"getProductDiy\" :ischeckbox=\"true\" :is_new=\"is_new\" :diy=\"true\" v-if=\"modals && !type\"></goods-list>\n        </Modal>\n    </div>\n</template>\n\n<script>\n    import vuedraggable from 'vuedraggable'\n    import goodsList from '@/components/goodsList'\n    import sortList from '@/components/sortList'\n    export default {\n        name: 'c_goods',\n        props: {\n            name: {\n                type: String\n            },\n            configData:{\n                type:null\n            }\n        },\n        components: {\n            goodsList,\n            sortList,\n            draggable: vuedraggable\n        },\n        watch: {\n            configData: {\n                handler (nVal, oVal) {\n                    this.defaults = nVal\n                    this.type = nVal.selectConfig?(nVal.selectConfig.type?nVal.selectConfig.type:''):''\n                    // this.type = nVal.selectConfig.type?nVal.selectConfig.type:''\n                },\n                immediate: true,\n                deep: true\n            }\n        },\n        data () {\n            return {\n                modals: false,\n                goodsList: [],\n                tempGoods: [],\n                defaults:{},\n                type:'',\n                is_new:'',\n                loading:true\n            }\n        },\n        created () {\n            this.defaults = this.configData\n            this.is_new = this.configData.is_new\n\n        },\n        methods: {\n            getProductDiy (data) {\n                this.tempGoods = data\n                this.loading = false\n            },\n            cancel () {\n                this.tempGoods = []\n            },\n            //对象数组去重；\n            unique(arr) {\n                const res = new Map();\n                return arr.filter((arr) => !res.has(arr.id) && res.set(arr.id, 1))\n            },\n            ok () {\n                if(!this.tempGoods.length){\n                    return this.$Message.warning('请先选择商品');\n                }\n                let list = this.defaults.goodsList.list;\n                list.push.apply(list,this.tempGoods);\n                // list.push(this.tempGoods);\n                let picList = this.unique(list);\n                this.defaults.goodsList.list= picList;\n                // this.defaults.goodsList.list.push(this.tempGoods);\n            },\n            bindDelete (index) {\n                this.defaults.goodsList.list.splice(index, 1)\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n    .goods-box\n        padding 16px 0\n        margin-bottom 16px\n        border-top 1px solid rgba(0,0,0,0.05)\n        border-bottom 1px solid rgba(0,0,0,0.05)\n        .wrapper,.list-group\n            display flex\n            flex-wrap wrap\n        .add-item\n            display flex\n            align-items center\n            justify-content center\n            width 80px\n            height 80px\n            margin-bottom 10px\n            background #F7F7F7\n            .iconfont\n                font-size 18px\n                color #D8D8D8\n        .item\n            position relative\n            width 80px\n            height 80px\n            margin-bottom 20px\n            margin-right 12px\n            &:nth-child(4n)\n               margin-right 0\n            img\n                width 100%\n                height 100%\n            .icondel_1\n                position absolute\n                right -10px\n                top -16px\n                color #999999\n                font-size 28px\n                cursor pointer\n</style>\n\n"]}]}