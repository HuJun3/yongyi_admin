{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/setting/devise/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/setting/devise/index.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGRpeUdldEluZm8sIHN0b3JlU3RhdHVzIH0gZnJvbSAgJ0AvYXBpL2RpeScKaW1wb3J0IHsgbWFwTXV0YXRpb25zIH0gZnJvbSAndnVleCcKaW1wb3J0IHJpZ2h0Q29uZmlnIGZyb20gJ0AvY29tcG9uZW50cy9yaWdodENvbmZpZy9pbmRleCcKaW1wb3J0IGxpbmtzIGZyb20gJy4vbGlua3MnCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJpbmRleCIsCiAgICBjb21wb25lbnRzOnsKICAgICAgICByaWdodENvbmZpZywKICAgICAgICBsaW5rcwogICAgfSwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjb25maWdOYW1lOicnLAogICAgICAgICAgICBpZnJhbWVVcmw6JycsCiAgICAgICAgICAgIHNldENvbmZpZzonJywKICAgICAgICAgICAgdXBkYXRhQ29uZmlnOicnLAogICAgICAgICAgICBwYWdlSWQ6MAogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgICBsZXQgcGFnZUlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQ7CiAgICAgICAgbGV0IG5hbWVzID0gdGhpcy4kcm91dGUucXVlcnkubmFtZTsKICAgICAgICB0aGlzLnNldENvbmZpZyA9IG5hbWVzICsnL3NldENvbmZpZyc7CiAgICAgICAgdGhpcy51cGRhdGFDb25maWcgPSBuYW1lcyArJy91cGRhdGFDb25maWcnOwogICAgICAgIHRoaXMucGFnZUlkID0gcGFyc2VJbnQocGFnZUlkKTsKICAgICAgICB0aGlzLmlmcmFtZVVybCA9IGAke2xvY2F0aW9uLm9yaWdpbn0/dHlwZT1pZnJhbWVNYWtrTWlua2tKdWFuYDsKICAgICAgICBkaXlHZXRJbmZvKHBhcnNlSW50KHBhZ2VJZCkpLnRoZW4oZGF0YXM9PnsKICAgICAgICAgICAgbGV0IGRhdGEgPSBkYXRhcy5kYXRhLmluZm8udmFsdWU7CiAgICAgICAgICAgIHRoaXMudXBEYXRhKGRhdGEpOwogICAgICAgIH0pCiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICAvL+ebkeWQrOWtkOmhtemdoue7meW9k+WJjemhtemdouS8oOWAvAogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgdGhpcy5oYW5kbGVNZXNzYWdlLGZhbHNlKQogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIC8v5o6l5pS2aWZyYW1l5YC8CiAgICAgICAgaGFuZGxlTWVzc2FnZSAoZXZlbnQpIHsKICAgICAgICAgICAgaWYoZXZlbnQuZGF0YS5uYW1lKXsKICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnTmFtZSA9IGV2ZW50LmRhdGEubmFtZQogICAgICAgICAgICAgICAgdGhpcy5hZGQoZXZlbnQuZGF0YS5uYW1lKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhZGQgKGRhdGEpIHsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KHRoaXMuc2V0Q29uZmlnLCBkYXRhKTsKICAgICAgICB9LAogICAgICAgIHVwRGF0YSAoZGF0YSkgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQodGhpcy51cGRhdGFDb25maWcsIGRhdGEpOwogICAgICAgIH0KICAgICAgICAvLyAuLi5tYXBNdXRhdGlvbnMoewogICAgICAgIC8vICAgICBhZGQ6ICdkaXkvc2V0Q29uZmlnJywKICAgICAgICAvLyAgICAgdXBEYXRhOidkaXkvdXBkYXRhQ29uZmlnJwogICAgICAgIC8vIH0pCiAgICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/setting/devise","sourcesContent":["<template>\n    <div>\n    <div class=\"i-layout-page-header\">\n        <div class=\"i-layout-page-header\">\n            <router-link :to=\"{path:'/admin/setting/pages/devise'}\"><Button icon=\"ios-arrow-back\" size=\"small\"  class=\"mr20\">返回</Button></router-link>\n            <span class=\"ivu-page-header-title mr20\">页面设计</span>\n        </div>\n    </div>\n    <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n    <div class=\"flex-wrapper\">\n        <!-- :src=\"iframeUrl\" -->\n        <iframe class=\"iframe-box\" :src=\"iframeUrl\" frameborder=\"0\" ref=\"iframe\"></iframe>\n        <div>\n            <div class=\"content\">\n                <rightConfig :name=\"configName\" :pageId=\"pageId\"></rightConfig>\n            </div>\n        </div>\n        <links></links>\n    </div>\n    </Card>\n    </div>\n</template>\n\n<script>\n    import { diyGetInfo, storeStatus } from  '@/api/diy'\n    import { mapMutations } from 'vuex'\n    import rightConfig from '@/components/rightConfig/index'\n    import links from './links'\n    export default {\n        name: \"index\",\n        components:{\n            rightConfig,\n            links\n        },\n        data(){\n            return {\n                configName:'',\n                iframeUrl:'',\n                setConfig:'',\n                updataConfig:'',\n                pageId:0\n            }\n        },\n        created() {\n            let that = this;\n            let pageId = this.$route.query.id;\n            let names = this.$route.query.name;\n            this.setConfig = names +'/setConfig';\n            this.updataConfig = names +'/updataConfig';\n            this.pageId = parseInt(pageId);\n            this.iframeUrl = `${location.origin}?type=iframeMakkMinkkJuan`;\n            diyGetInfo(parseInt(pageId)).then(datas=>{\n                let data = datas.data.info.value;\n                this.upData(data);\n            })\n        },\n        mounted() {\n            //监听子页面给当前页面传值\n            window.addEventListener(\"message\", this.handleMessage,false)\n        },\n        methods:{\n            //接收iframe值\n            handleMessage (event) {\n                if(event.data.name){\n                    this.configName = event.data.name\n                    this.add(event.data.name)\n                }\n            },\n            add (data) {\n                this.$store.commit(this.setConfig, data);\n            },\n            upData (data) {\n                this.$store.commit(this.updataConfig, data);\n            }\n            // ...mapMutations({\n            //     add: 'diy/setConfig',\n            //     upData:'diy/updataConfig'\n            // })\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n    .content\n        width 450px;\n    .flex-wrapper\n        display flex\n    .iframe-box\n        width: 375px;\n        height: 700px;\n        /*border: 1px solid #ddd;*/\n        border-radius: 4px;\n        box-shadow : 0 0 7px #cccccc;\n    .right-box\n        width 400px\n        margin-left 50px\n        border:1px solid #ddd;\n        border-radius 4px\n        .title-bar\n            width 100%\n            height 38px\n            line-height 38px\n            padding-left 24px\n            color #333\n            border-radius 4px\n            border-bottom 1px solid #eee\n\n</style>\n"]}]}