{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/cms/addArticle/index.vue?vue&type=style&index=0&id=3f04eee2&scoped=true&lang=css&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/cms/addArticle/index.vue","mtime":1611019614000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnBpY0JveCB7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi5mb3JtIC5nb29kc1RpdGxlIHsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMDkpOwogICAgbWFyZ2luLWJvdHRvbTogMjVweDsKfQoKLmZvcm0gLmdvb2RzVGl0bGUgfiAuZ29vZHNUaXRsZSB7CiAgICBtYXJnaW4tdG9wOiAyMHB4Owp9CgouZm9ybSAuZ29vZHNUaXRsZSAudGl0bGUgewogICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMxODkwRkY7CiAgICBwYWRkaW5nOiAwIDhweCAxMnB4IDVweDsKICAgIGNvbG9yOiAjMDAwOwogICAgZm9udC1zaXplOiAxNHB4Owp9CgouZm9ybSAuZ29vZHNUaXRsZSAuaWNvbnMgewogICAgZm9udC1zaXplOiAxNXB4OwogICAgbWFyZ2luLXJpZ2h0OiA4cHg7CiAgICBjb2xvcjogIzk5OTsKfQoKLmZvcm0gLmFkZCB7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBjb2xvcjogIzE4OTBGRjsKICAgIHBhZGRpbmc6IDAgMTJweDsKICAgIGN1cnNvcjogcG9pbnRlcjsKfQoKLmZvcm0gLnJhZGlvIHsKICAgIG1hcmdpbi1yaWdodDogMjBweDsKfQoKLmZvcm0gLnN1Ym1pc3Npb24gewogICAgd2lkdGg6IDEwJTsKICAgIG1hcmdpbi1sZWZ0OiAyN3B4Owp9CgouZm9ybSAudXBMb2FkIHsKICAgIHdpZHRoOiA1OHB4OwogICAgaGVpZ2h0OiA1OHB4OwogICAgbGluZS1oZWlnaHQ6IDU4cHg7CiAgICBib3JkZXI6IDFweCBkb3R0ZWQgcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjAyKTsKfQoKLmZvcm0gLmljb25mb250IHsKICAgIGNvbG9yOiAjODk4OTg5Owp9CgouZm9ybSAucGljdHJ1ZSB7CiAgICB3aWR0aDogNjBweDsKICAgIGhlaWdodDogNjBweDsKICAgIGJvcmRlcjogMXB4IGRvdHRlZCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7Cn0KCi5mb3JtIC5waWN0cnVlIGltZyB7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwJTsKfQoKLk1vZGFscyAuYWRkcmVzcyB7CiAgICB3aWR0aDogOTAlOwp9CgouTW9kYWxzIC5hZGRyZXNzIC5pY29uZm9udCB7CiAgICBmb250LXNpemU6IDIwcHg7Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8TA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/cms/addArticle","sourcesContent":["<template>\n    <div class=\"article-manager\">\n        <div class=\"i-layout-page-header\">\n          <div class=\"i-layout-page-header\">\n            <router-link :to=\"{path:'/admin/cms/article/index'}\"><Button icon=\"ios-arrow-back\" size=\"small\"  class=\"mr20\">返回</Button></router-link>\n            <span class=\"ivu-page-header-title mr20\" v-text=\"$route.params.id?'编辑文章':'添加文章'\"></span>\n          </div>\n        </div>\n        <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n            <Form class=\"form\" ref=\"formValidate\" :model=\"formValidate\" :rules=\"ruleValidate\"  :label-width=\"labelWidth\" :label-position=\"labelPosition\" @submit.native.prevent>\n                <div class=\"goodsTitle acea-row\">\n                    <div class=\"title\">文章信息</div>\n                </div>\n                <Row :gutter=\"24\" type=\"flex\">\n                    <Col v-bind=\"grid\" class=\"mr50\">\n                        <FormItem label=\"标题：\" prop=\"title\" label-for=\"title\">\n                            <Input v-model=\"formValidate.title\" placeholder=\"请输入\" element-id=\"title\" style=\"width: 90%\"/>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\" class=\"mr50\">\n                        <FormItem label=\"作者：\" prop=\"author\" label-for=\"author\">\n                            <Input v-model=\"formValidate.author\" placeholder=\"请输入\" element-id=\"author\" style=\"width: 90%\"/>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\" class=\"mr50\">\n                        <FormItem label=\"文章分类：\"  label-for=\"cid\" prop=\"cid\">\n                            <div class=\"perW90\">\n                                <Select v-model=\"formValidate.cid\">\n                                    <Option v-for=\"item in treeData\" :value=\"item.id\" :key=\"item.id\">{{ item.title }}</Option>\n                                </Select>\n                            </div>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\" class=\"mr50\">\n                        <FormItem label=\"文章简介：\" prop=\"synopsis\" label-for=\"synopsis\">\n                            <Input v-model=\"formValidate.synopsis\" type=\"textarea\" placeholder=\"请输入\"  style=\"width: 90%\"/>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\" class=\"mr50\">\n                        <FormItem label=\"图文封面：\" prop=\"image_input\">\n                            <div class=\"picBox\" @click=\"modalPicTap('单选')\">\n                                <div class=\"pictrue\" v-if=\"formValidate.image_input\"><img :src=\"formValidate.image_input\"></div>\n                                <div class=\"upLoad acea-row row-center-wrapper\"   v-else>\n                                    <Icon type=\"ios-camera-outline\" size=\"26\" class=\"iconfont\"/>\n                                </div>\n                            </div>\n                        </FormItem>\n                    </Col>\n                </Row>\n                <div class=\"goodsTitle acea-row\">\n                    <div class=\"title\">文章内容</div>\n                </div>\n                <FormItem label=\"文章内容：\" prop=\"content\">\n                    <vue-ueditor-wrap v-model=\"formValidate.content\"  @beforeInit=\"addCustomDialog\"  :config=\"myConfig\"  style=\"width: 90%;\"></vue-ueditor-wrap>\n                </FormItem>\n                <div class=\"goodsTitle acea-row\">\n                    <div class=\"title\">其他设置</div>\n                </div>\n                <Row :gutter=\"24\" type=\"flex\">\n<!--                    <Col span=\"24\">-->\n<!--                        <FormItem label=\"原文链接：\">-->\n<!--                            <Input v-model=\"formValidate.url\" placeholder=\"请输入\" element-id=\"url\" style=\"width: 60%\"/>-->\n<!--                        </FormItem>-->\n<!--                    </Col>-->\n                    <Col span=\"24\">\n                        <FormItem label=\"banner显示：\"  label-for=\"is_banner\">\n                            <RadioGroup v-model=\"formValidate.is_banner\" element-id=\"is_banner\">\n                                <Radio :label=\"1\" class=\"radio\">显示</Radio>\n                                <Radio :label=\"0\">不显示</Radio>\n                            </RadioGroup>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"热门文章：\"  label-for=\"is_hot\">\n                            <RadioGroup v-model=\"formValidate.is_hot\" element-id=\"is_hot\">\n                                <Radio :label=1 class=\"radio\">显示</Radio>\n                                <Radio :label=0>不显示</Radio>\n                            </RadioGroup>\n                        </FormItem>\n                    </Col>\n                </Row>\n                <Button type=\"primary\" class=\"submission\" @click=\"onsubmit('formValidate')\">提交</Button>\n            </Form>\n            <Modal v-model=\"modalPic\" width=\"950px\" scrollable  footer-hide closable title='上传商品图' :mask-closable=\"false\" :z-index=\"888\">\n                <uploadPictures :isChoice=\"isChoice\" @getPic=\"getPic\" :gridBtn=\"gridBtn\" :gridPic=\"gridPic\" v-if=\"modalPic\"></uploadPictures>\n            </Modal>\n        </Card>\n    </div>\n</template>\n\n<script>\n    import { mapState } from 'vuex'\n    import uploadPictures from '@/components/uploadPictures'\n    import VueUeditorWrap from 'vue-ueditor-wrap'\n    import { cmsAddApi, createApi, categoryListApi } from '@/api/cms'\n    export default {\n        name: 'addArticle',\n        components: { uploadPictures, VueUeditorWrap },\n        data () {\n            const validateUpload = (rule, value, callback) => {\n                if (this.formValidate.image_input) {\n                    callback()\n                } else {\n                    callback(new Error('请上传图文封面'))\n                }\n            }\n            const validateUpload2 = (rule, value, callback) => {\n                if (!this.formValidate.cid) {\n                    callback(new Error('请选择文章分类'))\n                } else {\n                    callback()\n                }\n            }\n            return {\n                dialog: {},\n                isChoice: '单选',\n                grid: {\n                    xl: 8,\n                    lg: 8,\n                    md: 12,\n                    sm: 24,\n                    xs: 24\n                },\n                gridPic: {\n                    xl: 6,\n                    lg: 8,\n                    md: 12,\n                    sm: 12,\n                    xs: 12\n                },\n                gridBtn: {\n                    xl: 4,\n                    lg: 8,\n                    md: 8,\n                    sm: 8,\n                    xs: 8\n                },\n                loading: false,\n                formValidate: {\n                    id: 0,\n                    title: '',\n                    author: '',\n                    image_input: '',\n                    content: '',\n                    synopsis: '',\n                    url: '',\n                    is_hot: 0,\n                    is_banner: 0,\n                    cid: '',\n                    visit: 0\n                },\n                ruleValidate: {\n                    title: [\n                        { required: true, message: '请输入标题', trigger: 'blur' }\n                    ],\n                    cid: [\n                        { required: true, validator: validateUpload2, trigger: 'change', type: 'number' }\n                    ],\n                    image_input: [\n                        { required: true, validator: validateUpload, trigger: 'change' }\n                    ],\n                    content: [\n                        { required: true, message: '请输入文章内容', trigger: 'change' }\n                    ]\n                },\n                value: '',\n                modalPic: false,\n                template: false,\n                treeData: [],\n                formValidate2: {\n                    type: 1\n                },\n                myConfig: {\n                    autoHeightEnabled: false, // 编辑器不自动被内容撑高\n                    initialFrameHeight: 500, // 初始容器高度\n                    initialFrameWidth: '100%', // 初始容器宽度\n                    UEDITOR_HOME_URL: '/admin/UEditor/',\n                    serverUrl: ''\n                }\n            }\n        },\n        computed: {\n            ...mapState('media', [\n                'isMobile'\n            ]),\n            labelWidth () {\n                return this.isMobile ? undefined : 120\n            },\n            labelPosition () {\n                return this.isMobile ? 'top' : 'right'\n            }\n        },\n        watch: {\n            $route (to, from) {\n                if (this.$route.params.id) {\n                    this.getDetails()\n                } else {\n                    this.formValidate = {\n                        id: 0,\n                        title: '',\n                        author: '',\n                        image_input: '',\n                        content: '',\n                        synopsis: '',\n                        url: '',\n                        is_hot: 0,\n                        is_banner: 0\n                    }\n                }\n            }\n        },\n        methods: {\n            // ...mapActions('admin/page', [\n            //   'close'\n            // ]),\n            getContent (val) {\n                this.formValidate.content = val\n                console.log(this.formValidate.content)\n            },\n            // 选择图片\n            modalPicTap () {\n                this.modalPic = true\n            },\n            // 选中图片\n            getPic (pc) {\n                this.formValidate.image_input = pc.att_dir\n                this.modalPic = false\n            },\n            // 分类\n            getClass () {\n                categoryListApi(this.formValidate2).then(async res => {\n                    this.treeData = res.data\n                }).catch(res => {\n                    this.$Message.error(res.msg)\n                })\n            },\n            // 提交数据\n            onsubmit (name) {\n                this.$refs[name].validate((valid) => {\n                    if (valid) {\n                        cmsAddApi(this.formValidate).then(async res => {\n                            this.$Message.success(res.msg)\n                            setTimeout(() => {\n                                this.$router.push({ path: '/admin/cms/article/index' })\n                            }, 500)\n                        }).catch(res => {\n                            this.$Message.error(res.msg)\n                        })\n                    } else {\n                        return false\n                    }\n                })\n            },\n            // 文章详情\n            getDetails () {\n                createApi(this.$route.params.id ? this.$route.params.id : 0).then(async res => {\n                    let data = res.data\n                    let news = data.info\n                    this.formValidate = {\n                        id: news.id,\n                        title: news.title,\n                        author: news.author,\n                        image_input: news.image_input,\n                        content: news.content,\n                        synopsis: news.synopsis,\n                        url: news.url,\n                        is_hot: news.is_hot,\n                        is_banner: news.is_banner,\n                        cid: news.cid,\n                        visit: news.visit\n                    }\n                }).catch(res => {\n                    this.loading = false\n                    this.$Message.error(res.msg)\n                })\n            },\n            // 添加自定义弹窗\n            addCustomDialog (editorId) {\n                window.UE.registerUI('test-dialog', function (editor, uiName) {\n                    // 创建 dialog\n                    let dialog = new window.UE.ui.Dialog({\n                        // 指定弹出层中页面的路径，这里只能支持页面，路径参考常见问题 2\n                        iframeUrl: '/admin/widget.images/index.html?fodder=dialog',\n                        // 需要指定当前的编辑器实例\n                        editor: editor,\n                        // 指定 dialog 的名字\n                        name: uiName,\n                        // dialog 的标题\n                        title: '上传图片',\n                        // 指定 dialog 的外围样式\n                        cssRules: 'width:1200px;height:500px;padding:20px;'\n                    })\n                    this.dialog = dialog\n                    var btn = new window.UE.ui.Button({\n                        name: 'dialog-button',\n                        title: '上传图片',\n                        cssRules: `background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;`,\n                        onclick: function () {\n                            // 渲染dialog\n                            dialog.render()\n                            dialog.open()\n                        }\n                    })\n                    return btn\n                }, 37)\n            }\n        },\n        mounted () {\n            if (this.$route.params.id) {\n                this.getDetails()\n            }\n        },\n        created () {\n            this.getClass()\n        }\n    }\n</script>\n<style scoped>\n    .picBox {\n        display: inline-block;\n        cursor: pointer;\n    }\n\n    .form .goodsTitle {\n        border-bottom: 1px solid rgba(0, 0, 0, 0.09);\n        margin-bottom: 25px;\n    }\n\n    .form .goodsTitle ~ .goodsTitle {\n        margin-top: 20px;\n    }\n\n    .form .goodsTitle .title {\n        border-bottom: 2px solid #1890FF;\n        padding: 0 8px 12px 5px;\n        color: #000;\n        font-size: 14px;\n    }\n\n    .form .goodsTitle .icons {\n        font-size: 15px;\n        margin-right: 8px;\n        color: #999;\n    }\n\n    .form .add {\n        font-size: 12px;\n        color: #1890FF;\n        padding: 0 12px;\n        cursor: pointer;\n    }\n\n    .form .radio {\n        margin-right: 20px;\n    }\n\n    .form .submission {\n        width: 10%;\n        margin-left: 27px;\n    }\n\n    .form .upLoad {\n        width: 58px;\n        height: 58px;\n        line-height: 58px;\n        border: 1px dotted rgba(0, 0, 0, 0.1);\n        border-radius: 4px;\n        background: rgba(0, 0, 0, 0.02);\n    }\n\n    .form .iconfont {\n        color: #898989;\n    }\n\n    .form .pictrue {\n        width: 60px;\n        height: 60px;\n        border: 1px dotted rgba(0, 0, 0, 0.1);\n        margin-right: 10px;\n    }\n\n    .form .pictrue img {\n        width: 100%;\n        height: 100%;\n    }\n\n    .Modals .address {\n        width: 90%;\n    }\n\n    .Modals .address .iconfont {\n        font-size: 20px;\n    }\n</style>\n"]}]}