{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/user/list/handle/userDetails.vue?vue&type=style&index=1&id=2b718961&scoped=true&lang=stylus&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/user/list/handle/userDetails.vue","mtime":1610682396000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoudXNlcl9tZW51ID4+PiAuaXZ1LW1lbnUKICAgIHdpZHRoIDEwMCUgIWltcG9ydGFudAo="},{"version":3,"sources":["userDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuWA;AACA","file":"userDetails.vue","sourceRoot":"src/pages/user/list/handle","sourcesContent":["<template>\n    <div style=\"width: 100%\">\n        <Modal v-model=\"modals\" scrollable footer-hide closable title=\"用户详情\" :mask-closable=\"false\"\n               width=\"900\">\n            <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\n            <div class=\"acea-row\">\n                <div class=\"avatar mr15\"><img :src=\"psInfo.avatar\"></div>\n                <div class=\"dashboard-workplace-header-tip\">\n                    <p class=\"dashboard-workplace-header-tip-title\" v-text=\"psInfo.nickname || '-'\"></p>\n                    <div class=\"dashboard-workplace-header-tip-desc\">\n                        <span class=\"dashboard-workplace-header-tip-desc-sp\" v-for=\"(item, index) in detailsData\" :key=\"index\">{{item.title+'：'+item.value}}</span>\n                    </div>\n                </div>\n            </div>\n            <Row type=\"flex\" justify=\"space-between\" class=\"mt25\">\n                <Col span=\"4\" class=\"user_menu\">\n                    <Menu :theme=\"theme2\" active-name=\"order\" @on-select=\"changeType\">\n                        <MenuItem :name=\"item.val\" v-for=\"(item, index) in list\" :key=\"index\" >\n                            {{item.label}}\n                        </MenuItem>\n                    </Menu>\n                </Col>\n                <Col span=\"20\">\n                    <Table :columns=\"columns\" :data=\"userLists\" max-height=\"400\"\n                           ref=\"table\"\n                           :loading=\"loading\"\n                           no-userFrom-text=\"暂无数据\"\n                           no-filtered-userFrom-text=\"暂无筛选结果\"\n                    ></Table>\n                    <div class=\"acea-row row-right page\">\n                        <Page :total=\"total\" :current=\"userFrom.page\" show-elevator show-total @on-change=\"pageChange\"\n                              :page-size=\"userFrom.limit\"  /></div>\n                </Col>\n            </Row>\n        </Modal>\n    </div>\n</template>\n\n<script>\n    import { detailsApi, infoApi } from '@/api/user';\n\n    export default {\n        name: 'userDetails',\n        data () {\n            return {\n                theme2: 'light',\n                list: [\n                    { val: 'order', label: '消费记录' },\n                    { val: 'integral', label: '积分明细' },\n                    { val: 'sign', label: '签到记录' },\n                    { val: 'coupon', label: '持有优惠券' },\n                    { val: 'balance_change', label: '余额变动' },\n                    { val: 'spread', label: '好友关系' }\n                ],\n                modals: false,\n                spinShow: false,\n                detailsData: [],\n                userId: 0,\n                loading: false,\n                userFrom: {\n                    type: 'order',\n                    page: 1, // 当前页\n                    limit: 20 // 每页显示条数\n                },\n                total: 0,\n                columns: [],\n                userLists: [],\n                psInfo: {}\n            }\n        },\n        created () {\n        },\n        methods: {\n            // 会员详情\n            getDetails (id) {\n                this.userId = id;\n                this.spinShow = true;\n                detailsApi(id).then(async res => {\n                    if (res.status === 200) {\n                        let data = res.data\n                        this.detailsData = data.headerList;\n                        this.psInfo = data.ps_info;\n                        this.changeType(name);\n                        this.spinShow = false;\n                    } else {\n                        this.spinShow = false;\n                        this.$Message.error(res.msg);\n                    }\n                }).catch(res => {\n                    this.spinShow = false;\n                    this.$Message.error(res.msg);\n                })\n            },\n            pageChange (index) {\n                this.userFrom.page = index\n                this.changeType(this.userFrom.type);\n            },\n            // tab选项\n            changeType (name) {\n                this.loading = true;\n                this.userFrom.type = name;\n                if (this.userFrom.type === '') {\n                    this.userFrom.type = 'order';\n                }\n                let data = {\n                    id: this.userId,\n                    datas: this.userFrom\n                }\n                infoApi(data).then(async res => {\n                    if (res.status === 200) {\n                        let data = res.data\n                        this.userLists = data.list;\n                        this.total = data.count;\n                        switch (this.userFrom.type) {\n                            case 'order':\n                                this.columns = [\n                                    {\n                                        title: '订单ID',\n                                        key: 'order_id',\n                                        minWidth: 160\n                                    },\n                                    {\n                                        title: '收货人',\n                                        key: 'real_name',\n                                        minWidth: 100\n                                    },\n                                    {\n                                        title: '商品数量',\n                                        key: 'total_num',\n                                        minWidth: 90\n                                    },\n                                    {\n                                        title: '商品总价',\n                                        key: 'total_price',\n                                        minWidth: 110\n                                    },\n                                    {\n                                        title: '实付金额',\n                                        key: 'pay_price',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '交易完成时间',\n                                        key: 'pay_time',\n                                        minWidth: 120\n                                    }\n                                ]\n                                break;\n                            case 'integral':\n                                this.columns = [\n                                    {\n                                        title: '来源/用途',\n                                        key: 'title',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '积分变化',\n                                        key: 'number',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '变化前积分',\n                                        key: 'balance',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '日期',\n                                        key: 'add_time',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '备注',\n                                        key: 'mark',\n                                        minWidth: 120\n                                    }\n                                ]\n                                break;\n                            case 'sign':\n                                this.columns = [\n                                    {\n                                        title: '动作',\n                                        key: 'title',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '获得积分',\n                                        key: 'number',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '签到时间',\n                                        key: 'add_time',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '备注',\n                                        key: 'mark',\n                                        minWidth: 120\n                                    }\n                                ]\n                                break;\n                            case 'coupon':\n                                this.columns = [\n                                    {\n                                        title: '优惠券名称',\n                                        key: 'coupon_title',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '面值',\n                                        key: 'coupon_price',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '有效期(天)',\n                                        key: 'coupon_time',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '兑换时间',\n                                        key: '_add_time',\n                                        minWidth: 120\n                                    }\n                                ]\n                                break;\n                            case 'balance_change':\n                                this.columns = [\n                                    {\n                                        title: '动作',\n                                        key: 'title',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '变动金额',\n                                        key: 'number',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '变动前',\n                                        key: 'balance',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '创建时间',\n                                        key: 'add_time',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '备注',\n                                        key: 'mark',\n                                        minWidth: 120\n                                    }\n                                ]\n                                break;\n                            default:\n                                this.columns = [\n                                    {\n                                        title: 'ID',\n                                        key: 'uid',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '昵称',\n                                        key: 'nickname',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '等级',\n                                        key: 'type',\n                                        minWidth: 120\n                                    },\n                                    {\n                                        title: '加入时间',\n                                        key: 'add_time',\n                                        minWidth: 120\n                                    }\n                                ]\n                        }\n                        this.loading = false;\n                    } else {\n                        this.loading = false;\n                        this.$Message.error(res.msg);\n                    }\n                }).catch(res => {\n                    this.loading = false;\n                    this.$Message.error(res.msg);\n                })\n            }\n        }\n    }\n</script>\n\n<style lang=\"less\" scoped>\n    .avatar{\n        width: 60px;\n        height: 60px;\n        border-radius: 50%;\n        overflow: hidden;\n        img{\n            width: 100%;\n            height: 100%;\n        }\n    }\n    .dashboard-workplace {\n        &-header {\n            &-avatar {\n                width: 64px;\n                height: 64px;\n                border-radius: 50%;\n                margin-right: 16px;\n                font-weight: 600;\n            }\n\n            &-tip {\n                width: 82%;\n                display: inline-block;\n                vertical-align: middle;\n\n                &-title {\n                    font-size: 13px;\n                    color: #000000;\n                    margin-bottom: 12px;\n                }\n\n                &-desc {\n                    &-sp {\n                        width: 33.33%;\n                        color: #17233D;\n                        font-size: 13px;\n                        display: inline-block;\n                    }\n                }\n            }\n\n            &-extra {\n                .ivu-col {\n                    p {\n                        text-align: right;\n                    }\n\n                    p:first-child {\n                        span:first-child {\n                            margin-right: 4px;\n                        }\n\n                        span:last-child {\n                            color: #808695;\n                        }\n                    }\n\n                    p:last-child {\n                        font-size: 22px;\n                    }\n                }\n            }\n        }\n    }\n</style>\n<style scoped lang=\"stylus\">\n    .user_menu >>> .ivu-menu\n        width 100% !important\n</style>\n"]}]}