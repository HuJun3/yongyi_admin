{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/components/main/components/header-notice/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/components/main/components/header-notice/index.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmxldCBuZXdPcmRlckF1ZGlvTGluayA9IG5ldyBBdWRpbyhyZXF1aXJlKCdAL2Fzc2V0cy92aWRlby9uZXdPcmRlckF1ZGlvTGluay5tcDMnKSk7CmltcG9ydCB7IGpub3RpY2VSZXF1ZXN0IH0gZnJvbSAnQC9hcGkvY29tbW9uJwppbXBvcnQge2FkbWluU29ja2V0fSBmcm9tICdAL2xpYnMvc29ja2V0JzsKaW1wb3J0IHsgZ2V0Q29va2llcywgcmVtb3ZlQ29va2llcyxzZXRDb29raWVzIH0gZnJvbSAnQC9saWJzL3V0aWwnCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdVc2VyJywKICAgIGRhdGEgKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG5lZWRMaXN0OiBbXSwKICAgICAgICAgIG5ld09yZGVyQXVkaW9MaW5rOm51bGwKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCAoKSB7CiAgICAgIHRoaXMuZ2V0Tm90aWN0KCkKICAgICAgdGhpcy5uZXdPcmRlckF1ZGlvTGluayA9IG5ld09yZGVyQXVkaW9MaW5rOwogICAgICBhZG1pblNvY2tldC50aGVuKHdzPT57CiAgICAgICAgd3Muc2VuZCh7CiAgICAgICAgICB0eXBlOiAnbG9naW4nLAogICAgICAgICAgZGF0YTogZ2V0Q29va2llcygndG9rZW4nKQogICAgICAgIH0pCiAgICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAgIHRoYXQuJG9uKCdBRE1JTl9ORVdfUFVTSCcsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICB0aGF0LmdldE5vdGljdCgpOwogICAgICAgIH0pCgogICAgICAgIHRoYXQuJG9uKCdORVdfT1JERVInLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgICB0aGF0LiROb3RpY2UuaW5mbyh7CiAgICAgICAgICAgIHRpdGxlOiAn5paw6K6i5Y2VJywKICAgICAgICAgICAgZHVyYXRpb246IDgsCiAgICAgICAgICAgIGRlc2M6ICfmgqjmnInkuIDkuKrmlrDnmoTorqLljZUoJyArIGRhdGEub3JkZXJfaWQgKyAnKSzor7fms6jmhI/mn6XnnIsnCiAgICAgICAgICB9KTsKICAgICAgICAgIGlmICh0aGlzLm5ld09yZGVyQXVkaW9MaW5rKSB0aGlzLm5ld09yZGVyQXVkaW9MaW5rLnBsYXkoKTsKICAgICAgICAgIHRoYXQubWVzc2FnZUxpc3QucHVzaCh7CiAgICAgICAgICAgIHRpdGxlOiAn5paw6K6i5Y2V5o+Q6YaSJywKICAgICAgICAgICAgaWNvbjogJ21kLWJ1bGInLAogICAgICAgICAgICBpY29uQ29sb3I6ICcjODdkMDY4JywKICAgICAgICAgICAgdGltZTogMCwKICAgICAgICAgICAgcmVhZDogMAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhhdC4kb24oJ05FV19SRUZVTkRfT1JERVInLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgdGhhdC4kTm90aWNlLndhcm5pbmcoewogICAgICAgICAgICB0aXRsZTogJ+mAgOasvuiuouWNleaPkOmGkicsCiAgICAgICAgICAgIGR1cmF0aW9uOiA4LAogICAgICAgICAgICBkZXNjOiAn5oKo5pyJ5LiA5Liq6K6i5Y2VKCcgKyBkYXRhLm9yZGVyX2lkICsgJynnlLPor7fpgIDmrL4s6K+35rOo5oSP5p+l55yLJwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAod2luZG93Lm5ld09yZGVyQXVkaW9MaW5rKSB0aGlzLm5ld09yZGVyQXVkaW9MaW5rLnBsYXkoKTsKICAgICAgICAgIHRoYXQubWVzc2FnZUxpc3QucHVzaCh7CiAgICAgICAgICAgIHRpdGxlOiAn6YCA5qy+6K6i5Y2V5o+Q6YaSJywKICAgICAgICAgICAgaWNvbjogJ21kLWluZm9ybWF0aW9uJywKICAgICAgICAgICAgaWNvbkNvbG9yOiAnI2ZlNWM1NycsCiAgICAgICAgICAgIHRpbWU6IDAsCiAgICAgICAgICAgIHJlYWQ6IDAKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHRoYXQuJG9uKCdXSVRIRFJBVycsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICB0aGF0LiROb3RpY2Uud2FybmluZyh7CiAgICAgICAgICAgIHRpdGxlOiAn5o+Q546w5o+Q6YaSJywKICAgICAgICAgICAgZHVyYXRpb246IDgsCiAgICAgICAgICAgIGRlc2M6ICfmnInnlKjmiLfnlLPor7fmj5DnjrAoJyArIGRhdGEuaWQgKyAnKSzor7fms6jmhI/mn6XnnIsnCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoYXQubWVzc2FnZUxpc3QucHVzaCh7CiAgICAgICAgICAgIHRpdGxlOiAn6YCA5qy+6K6i5Y2V5o+Q6YaSJywKICAgICAgICAgICAgaWNvbjogJ21kLXBlb3BsZScsCiAgICAgICAgICAgIGljb25Db2xvcjogJyNmMDYyOTInLAogICAgICAgICAgICB0aW1lOiAwLAogICAgICAgICAgICByZWFkOiAwCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICB0aGF0LiRvbignU1RPUkVfU1RPQ0snLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgdGhhdC4kTm90aWNlLndhcm5pbmcoewogICAgICAgICAgICB0aXRsZTogJ+W6k+WtmOmihOitpicsCiAgICAgICAgICAgIGR1cmF0aW9uOiA4LAogICAgICAgICAgICBkZXNjOiAnKCcgKyBkYXRhLmlkICsgJynllYblk4HlupPlrZjkuI3otrMs6K+35rOo5oSP5p+l55yLJwogICAgICAgICAgfSkKICAgICAgICAgIHRoYXQubWVzc2FnZUxpc3QucHVzaCh7CiAgICAgICAgICAgIHRpdGxlOiAn5bqT5a2Y6aKE6K2mJywKICAgICAgICAgICAgaWNvbjogJ21kLWluZm9ybWF0aW9uJywKICAgICAgICAgICAgaWNvbkNvbG9yOiAnI2ZlNWM1NycsCiAgICAgICAgICAgIHRpbWU6IDAsCiAgICAgICAgICAgIHJlYWQ6IDAKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHRoYXQuJG9uKCdQQVlfU01TX1NVQ0NFU1MnLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgdGhhdC4kTm90aWNlLmluZm8oewogICAgICAgICAgICB0aXRsZTogJ+efreS/oeWFheWAvOaIkOWKnycsCiAgICAgICAgICAgIGR1cmF0aW9uOiA4LAogICAgICAgICAgICBkZXNjOiAn5oGt5Zac5oKo5YWF5YC8JyArIGRhdGEucHJpY2UgKyAn5YWD77yM6I635b6XJyArIGRhdGEubnVtYmVyICsgJ+adoeefreS/oScKICAgICAgICAgIH0pOwogICAgICAgICAgdGhhdC5tZXNzYWdlTGlzdC5wdXNoKHsKICAgICAgICAgICAgdGl0bGU6ICfnn63kv6HlhYXlgLzmiJDlip8nLAogICAgICAgICAgICBpY29uOiAnbWQtYnVsYicsCiAgICAgICAgICAgIGljb25Db2xvcjogJyM4N2QwNjgnLAogICAgICAgICAgICB0aW1lOiAwLAogICAgICAgICAgICByZWFkOiAwCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSkKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgZ2V0Tm90aWN0ICgpIHsKICAgICAgICAgICAgam5vdGljZVJlcXVlc3QoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLm5lZWRMaXN0ID0gcmVzLmRhdGEgfHwgW10KICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge30pCiAgICAgICAgfSwKICAgICAgICBqdW1wVXJsICh1cmwpIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiB1cmwgfSkKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/main/components/header-notice","sourcesContent":["<template>\n  <div class=\"header-notice\">\n    <Dropdown @on-click=\"jumpUrl\">\n      <div>\n        <Badge dot :count=\"needList.length?needList.length:0\">\n          <Icon type=\"ios-notifications-outline\" size=\"26\"></Icon>\n        </Badge>\n      </div>\n      <DropdownMenu slot=\"list\">\n        <DropdownItem :name=\"item.url\" v-for=\"(item,index) in needList\" :key=\"index\"><Icon :type=\"item.icon\" :style=\"'background-color:'+item.iconColor\" class=\"iconImg\" />{{item.title}}</DropdownItem>\n      </DropdownMenu>\n    </Dropdown>\n  </div>\n</template>\n<style lang=\"less\">\n  .header-notice{\n    margin-right: 30px;\n  }\n  .header-notice .ivu-dropdown-item{\n    font-size: 14px!important;\n    font-weight: 400;\n    line-height: 22px;\n    color: #515a6e;\n  }\n  .header-notice .ivu-dropdown-item~.ivu-dropdown-item{\n    border-top: 1px solid #e8eaec;\n  }\n  .header-notice .iconImg{\n    width: 32px;\n    height: 32px;\n    line-height: 32px;\n    border-radius: 50%;\n    color: #fff;\n    font-size: 18px;\n    margin-right: 10px;\n    vertical-align: middle;\n  }\n  .header-notice .ivu-dropdown{\n    height: 30px;\n    line-height: 30px;\n  }\n  .header-notice .ivu-dropdown .ivu-select-dropdown{\n    margin-top: 22px;\n  }\n  .header-notice .ivu-badge-dot{\n    z-index: 0!important;\n  }\n</style>\n<script>\n    let newOrderAudioLink = new Audio(require('@/assets/video/newOrderAudioLink.mp3'));\n    import { jnoticeRequest } from '@/api/common'\n    import {adminSocket} from '@/libs/socket';\n    import { getCookies, removeCookies,setCookies } from '@/libs/util'\n    export default {\n        name: 'User',\n        data () {\n            return {\n                needList: [],\n              newOrderAudioLink:null\n            }\n        },\n        mounted () {\n          this.getNotict()\n          this.newOrderAudioLink = newOrderAudioLink;\n          adminSocket.then(ws=>{\n            ws.send({\n              type: 'login',\n              data: getCookies('token')\n            })\n            let that = this;\n            that.$on('ADMIN_NEW_PUSH', function (data) {\n              that.getNotict();\n            })\n\n            that.$on('NEW_ORDER', function (data) {\n              console.log(data);\n              that.$Notice.info({\n                title: '新订单',\n                duration: 8,\n                desc: '您有一个新的订单(' + data.order_id + '),请注意查看'\n              });\n              if (this.newOrderAudioLink) this.newOrderAudioLink.play();\n              that.messageList.push({\n                title: '新订单提醒',\n                icon: 'md-bulb',\n                iconColor: '#87d068',\n                time: 0,\n                read: 0\n              });\n            });\n            that.$on('NEW_REFUND_ORDER', function (data) {\n              that.$Notice.warning({\n                title: '退款订单提醒',\n                duration: 8,\n                desc: '您有一个订单(' + data.order_id + ')申请退款,请注意查看'\n              });\n              if (window.newOrderAudioLink) this.newOrderAudioLink.play();\n              that.messageList.push({\n                title: '退款订单提醒',\n                icon: 'md-information',\n                iconColor: '#fe5c57',\n                time: 0,\n                read: 0\n              });\n            });\n            that.$on('WITHDRAW', function (data) {\n              that.$Notice.warning({\n                title: '提现提醒',\n                duration: 8,\n                desc: '有用户申请提现(' + data.id + '),请注意查看'\n              });\n              that.messageList.push({\n                title: '退款订单提醒',\n                icon: 'md-people',\n                iconColor: '#f06292',\n                time: 0,\n                read: 0\n              });\n            });\n            that.$on('STORE_STOCK', function (data) {\n              that.$Notice.warning({\n                title: '库存预警',\n                duration: 8,\n                desc: '(' + data.id + ')商品库存不足,请注意查看'\n              })\n              that.messageList.push({\n                title: '库存预警',\n                icon: 'md-information',\n                iconColor: '#fe5c57',\n                time: 0,\n                read: 0\n              });\n            });\n            that.$on('PAY_SMS_SUCCESS', function (data) {\n              that.$Notice.info({\n                title: '短信充值成功',\n                duration: 8,\n                desc: '恭喜您充值' + data.price + '元，获得' + data.number + '条短信'\n              });\n              that.messageList.push({\n                title: '短信充值成功',\n                icon: 'md-bulb',\n                iconColor: '#87d068',\n                time: 0,\n                read: 0\n              });\n            });\n          })\n        },\n        methods: {\n            getNotict () {\n                jnoticeRequest().then(res => {\n                    this.needList = res.data || []\n                }).catch(() => {})\n            },\n            jumpUrl (url) {\n                this.$router.push({ path: url })\n            }\n        }\n    }\n</script>\n"]}]}