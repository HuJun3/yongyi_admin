{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/product/productAdd/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/product/productAdd/index.vue","mtime":1610682228000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBDT1MgZnJvbSAnY29zLWpzLXNkay12NScKICAgIGltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcKICAgIGltcG9ydCB2dWVkcmFnZ2FibGUgZnJvbSAndnVlZHJhZ2dhYmxlJwogICAgaW1wb3J0IHVwbG9hZFBpY3R1cmVzIGZyb20gJ0AvY29tcG9uZW50cy91cGxvYWRQaWN0dXJlcycKICAgIGltcG9ydCBmcmVpZ2h0VGVtcGxhdGUgZnJvbSAnQC9jb21wb25lbnRzL2ZyZWlnaHRUZW1wbGF0ZScKICAgIGltcG9ydCBjb3Vwb25MaXN0IGZyb20gJ0AvY29tcG9uZW50cy9jb3Vwb25MaXN0JwogICAgaW1wb3J0IGFkZEF0dHIgZnJvbSAnLi4vcHJvZHVjdEF0dHIvYWRkQXR0cicKICAgIGltcG9ydCBWdWVVZWRpdG9yV3JhcCBmcm9tICd2dWUtdWVkaXRvci13cmFwJwogICAgaW1wb3J0IHsgcHJvZHVjdEluZm9BcGksIHRyZWVMaXN0QXBpLCBwcm9kdWN0QWRkQXBpLCBnZW5lcmF0ZUF0dHJBcGksIHByb2R1Y3RHZXRSdWxlQXBpLCBwcm9kdWN0R2V0VGVtcGxhdGVBcGksIHByb2R1Y3RHZXRUZW1wS2V5c0FwaSwgY2hlY2tBY3Rpdml0eUFwaSwgbGFiZWxMaXN0QXBpIH0gZnJvbSAnQC9hcGkvcHJvZHVjdCcKICAgIGV4cG9ydCBkZWZhdWx0IHsKICAgICAgICBuYW1lOiAncHJvZHVjdF9wcm9kdWN0QWRkJywKICAgICAgICBjb21wb25lbnRzOiB7IFZ1ZVVlZGl0b3JXcmFwLCB1cGxvYWRQaWN0dXJlcywgZnJlaWdodFRlbXBsYXRlLCBhZGRBdHRyLCBjb3Vwb25MaXN0LCBkcmFnZ2FibGU6IHZ1ZWRyYWdnYWJsZSB9LAogICAgICAgIGRhdGEgKCkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgc3BpblNob3c6IGZhbHNlLAogICAgICAgICAgICAgICAgb3BlblN1YmltaXQ6ZmFsc2UsCiAgICAgICAgICAgICAgICBncmlkMjogewogICAgICAgICAgICAgICAgICAgIHhsOiAxMCwKICAgICAgICAgICAgICAgICAgICBsZzogMTIsCiAgICAgICAgICAgICAgICAgICAgbWQ6IDEyLAogICAgICAgICAgICAgICAgICAgIHNtOiAyNCwKICAgICAgICAgICAgICAgICAgICB4czogMjQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBncmlkMzogewogICAgICAgICAgICAgICAgICAgIHhsOiAxOCwKICAgICAgICAgICAgICAgICAgICBsZzogMTgsCiAgICAgICAgICAgICAgICAgICAgbWQ6IDIwLAogICAgICAgICAgICAgICAgICAgIHNtOiAyNCwKICAgICAgICAgICAgICAgICAgICB4czogMjQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAvLyDmibnph4/orr7nva7ooajmoLxkYXRhCiAgICAgICAgICAgICAgICBvbmVGb3JtQmF0Y2g6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBpYzogJycsCiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiAwLAogICAgICAgICAgICAgICAgICAgICAgICBjb3N0OiAwLAogICAgICAgICAgICAgICAgICAgICAgICBvdF9wcmljZTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgc3RvY2s6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGJhcl9jb2RlOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAwLAogICAgICAgICAgICAgICAgICAgICAgICB2b2x1bWU6IDAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgLy8g6KeE5qC85pWw5o2uCiAgICAgICAgICAgICAgICBmb3JtRHluYW1pYzogewogICAgICAgICAgICAgICAgICAgIGF0dHJzTmFtZTogJycsCiAgICAgICAgICAgICAgICAgICAgYXR0cnNWYWw6ICcnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZm9ybUR5bmFtaWNOYW1lRGF0YTogW10sCiAgICAgICAgICAgICAgICBpc0J0bjogZmFsc2UsCiAgICAgICAgICAgICAgICBteUNvbmZpZzogewogICAgICAgICAgICAgICAgICAgIGF1dG9IZWlnaHRFbmFibGVkOiBmYWxzZSwgLy8g57yW6L6R5Zmo5LiN6Ieq5Yqo6KKr5YaF5a655pKR6auYCiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbEZyYW1lSGVpZ2h0OiA1MDAsIC8vIOWIneWni+WuueWZqOmrmOW6pgogICAgICAgICAgICAgICAgICAgIGluaXRpYWxGcmFtZVdpZHRoOiAnMTAwJScsIC8vIOWIneWni+WuueWZqOWuveW6pgogICAgICAgICAgICAgICAgICAgIFVFRElUT1JfSE9NRV9VUkw6ICcvYWRtaW4vVUVkaXRvci8nLAogICAgICAgICAgICAgICAgICAgIHNlcnZlclVybDogJycKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjb2x1bW5zMjogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICflm77niYcnLAogICAgICAgICAgICAgICAgICAgICAgICBzbG90OiAncGljJywKICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgICAgICAgICAgICAgICBtaW5XaWR0aDogODAKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfllK7ku7cnLAogICAgICAgICAgICAgICAgICAgICAgICBzbG90OiAncHJpY2UnLAogICAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbldpZHRoOiA5NQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+aIkOacrOS7tycsCiAgICAgICAgICAgICAgICAgICAgICAgIHNsb3Q6ICdjb3N0JywKICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgICAgICAgICAgICAgICBtaW5XaWR0aDogOTUKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfljp/ku7cnLAogICAgICAgICAgICAgICAgICAgICAgICBzbG90OiAnb3RfcHJpY2UnLAogICAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbldpZHRoOiA5NQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+W6k+WtmCcsCiAgICAgICAgICAgICAgICAgICAgICAgIHNsb3Q6ICdzdG9jaycsCiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgbWluV2lkdGg6IDk1CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5ZWG5ZOB57yW5Y+3JywKICAgICAgICAgICAgICAgICAgICAgICAgc2xvdDogJ2Jhcl9jb2RlJywKICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgICAgICAgICAgICAgICBtaW5XaWR0aDogMTIwCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6YeN6YeP77yIS0fvvIknLAogICAgICAgICAgICAgICAgICAgICAgICBzbG90OiAnd2VpZ2h0JywKICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgICAgICAgICAgICAgICBtaW5XaWR0aDogOTUKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfkvZPnp68obcKzKScsCiAgICAgICAgICAgICAgICAgICAgICAgIHNsb3Q6ICd2b2x1bWUnLAogICAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbldpZHRoOiA5NQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+aTjeS9nCcsCiAgICAgICAgICAgICAgICAgICAgICAgIHNsb3Q6ICdhY3Rpb24nLAogICAgICAgICAgICAgICAgICAgICAgICBmaXhlZDogJ3JpZ2h0JywKICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgICAgICAgICAgICAgICBtaW5XaWR0aDogMTQwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIGNvbHVtbnM6IFtdLAogICAgICAgICAgICAgICAgY29sdW1uc0luc3RhbGw6IFtdLAogICAgICAgICAgICAgICAgY29sdW1uc0luc3RhbDI6IFtdLAogICAgICAgICAgICAgICAgZ3JpZFBpYzogewogICAgICAgICAgICAgICAgICAgIHhsOiA2LAogICAgICAgICAgICAgICAgICAgIGxnOiA4LAogICAgICAgICAgICAgICAgICAgIG1kOiAxMiwKICAgICAgICAgICAgICAgICAgICBzbTogMTIsCiAgICAgICAgICAgICAgICAgICAgeHM6IDEyCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZ3JpZEJ0bjogewogICAgICAgICAgICAgICAgICAgIHhsOiA0LAogICAgICAgICAgICAgICAgICAgIGxnOiA4LAogICAgICAgICAgICAgICAgICAgIG1kOiA4LAogICAgICAgICAgICAgICAgICAgIHNtOiA4LAogICAgICAgICAgICAgICAgICAgIHhzOiA4CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZm9ybVZhbGlkYXRlOiB7CiAgICAgICAgICAgICAgICAgICAgc3RvcmVfbmFtZTogJycsCiAgICAgICAgICAgICAgICAgICAgY2F0ZV9pZDogW10sCiAgICAgICAgICAgICAgICAgICAgbGFiZWxfaWQ6IFtdLAogICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6ICcnLAogICAgICAgICAgICAgICAgICAgIHVuaXRfbmFtZTogJycsCiAgICAgICAgICAgICAgICAgICAgc3RvcmVfaW5mbzogJycsCiAgICAgICAgICAgICAgICAgICAgaW1hZ2U6ICcnLAogICAgICAgICAgICAgICAgICAgIHJlY29tbWVuZF9pbWFnZTogJycsCiAgICAgICAgICAgICAgICAgICAgc2xpZGVyX2ltYWdlOiBbXSwKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgICAgICAgICAgICAgZmljdGk6IDAsCiAgICAgICAgICAgICAgICAgICAgZ2l2ZV9pbnRlZ3JhbDogMCwKICAgICAgICAgICAgICAgICAgICBzb3J0OiAwLAogICAgICAgICAgICAgICAgICAgIGlzX3Nob3c6IDEsCiAgICAgICAgICAgICAgICAgICAgaXNfaG90OiAwLAogICAgICAgICAgICAgICAgICAgIGlzX2JlbmVmaXQ6IDAsCiAgICAgICAgICAgICAgICAgICAgaXNfYmVzdDogMCwKICAgICAgICAgICAgICAgICAgICBpc19uZXc6IDAsCiAgICAgICAgICAgICAgICAgICAgaXNfZ29vZDogMCwKICAgICAgICAgICAgICAgICAgICBpc19wb3N0YWdlOiAwLAogICAgICAgICAgICAgICAgICAgIGlzX3N1YjogW10sCiAgICAgICAgICAgICAgICAgICAgaWQ6IDAsCiAgICAgICAgICAgICAgICAgICAgc3BlY190eXBlOiAwLAogICAgICAgICAgICAgICAgICAgIHZpZGVvX2xpbms6ICcnLAogICAgICAgICAgICAgICAgICAgIC8vIHBvc3RhZ2U6IDAsCiAgICAgICAgICAgICAgICAgICAgdGVtcF9pZDogJycsCiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFtdLAogICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpYzogJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvc3Q6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdF9wcmljZTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b2NrOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFyX2NvZGU6ICcnCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5OiBbJ+m7mOiupCcsICfnp5LmnYAnLCAn56CN5Lu3JywgJ+aLvOWboiddLAogICAgICAgICAgICAgICAgICAgIGNvdXBvbk5hbWU6IFtdLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcjogW10sCiAgICAgICAgICAgICAgICAgICAgc2VsZWN0UnVsZTogJycsCiAgICAgICAgICAgICAgICAgICAgY291cG9uX2lkczogW10sCiAgICAgICAgICAgICAgICAgICAgY29tbWFuZF93b3JkOiAnJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJ1bGVMaXN0OiBbXSwKICAgICAgICAgICAgICAgIHRlbXBsYXRlTGlzdDogW10sCiAgICAgICAgICAgICAgICBjcmVhdGVCbnQ6IGZhbHNlLAogICAgICAgICAgICAgICAgc2hvd0lwdXQ6IGZhbHNlLAogICAgICAgICAgICAgICAgbWFueUZvcm1WYWxpZGF0ZTogW10sCiAgICAgICAgICAgICAgICAvLyDljZXop4TmoLzooajmoLxkYXRhCiAgICAgICAgICAgICAgICBvbmVGb3JtVmFsaWRhdGU6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBpYzogJycsCiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiAwLAogICAgICAgICAgICAgICAgICAgICAgICBjb3N0OiAwLAogICAgICAgICAgICAgICAgICAgICAgICBvdF9wcmljZTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgc3RvY2s6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGJhcl9jb2RlOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAwLAogICAgICAgICAgICAgICAgICAgICAgICB2b2x1bWU6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGJyb2tlcmFnZTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgYnJva2VyYWdlX3R3bzogMCwKICAgICAgICAgICAgICAgICAgICAgICAgdmlwX3ByaWNlOiAwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIGltYWdlczogW10sCiAgICAgICAgICAgICAgICBpbWFnZXNUYWJsZTogJycsCiAgICAgICAgICAgICAgICBjdXJyZW50VGFiOiAnMScsCiAgICAgICAgICAgICAgICBpc0Nob2ljZTogJycsCiAgICAgICAgICAgICAgICBncmlkOiB7CiAgICAgICAgICAgICAgICAgICAgeGw6IDgsCiAgICAgICAgICAgICAgICAgICAgbGc6IDgsCiAgICAgICAgICAgICAgICAgICAgbWQ6IDEyLAogICAgICAgICAgICAgICAgICAgIHNtOiAyNCwKICAgICAgICAgICAgICAgICAgICB4czogMjQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgIG1vZGFsUGljOiBmYWxzZSwKICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBmYWxzZSwKICAgICAgICAgICAgICAgIHVwbG9hZExpc3Q6IFtdLAogICAgICAgICAgICAgICAgdHJlZVNlbGVjdDogW10sCiAgICAgICAgICAgICAgICBsYWJlbFNlbGVjdDogW10sCiAgICAgICAgICAgICAgICBwaWNUaXQ6ICcnLAogICAgICAgICAgICAgICAgdGFibGVJbmRleDogMCwKICAgICAgICAgICAgICAgIHJ1bGVWYWxpZGF0ZTogewogICAgICAgICAgICAgICAgICAgIHN0b3JlX25hbWU6IFsKICAgICAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWVhuWTgeWQjeensCcsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICBjYXRlX2lkOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nllYblk4HliIbnsbsnLCB0cmlnZ2VyOiAnY2hhbmdlJywgdHlwZTogJ2FycmF5JywgbWluOiAnMScgfQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAga2V5d29yZDogWwogICAgICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5ZWG5ZOB5YWz6ZSu5a2XJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIHVuaXRfbmFtZTogWwogICAgICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5Y2V5L2NJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIHN0b3JlX2luZm86IFsKICAgICAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWVhuWTgeeugOS7iycsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICBpbWFnZTogWwogICAgICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+35LiK5Lyg5ZWG5ZOB5Zu+JywgdHJpZ2dlcjogJ2NoYW5nZScgfQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgc2xpZGVyX2ltYWdlOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fkuIrkvKDllYblk4Hova7mkq3lm74nLCB0eXBlOiAnYXJyYXknLCB0cmlnZ2VyOiAnY2hhbmdlJyB9CiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICBzcGVjX3R5cGU6IFsKICAgICAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeWVhuWTgeinhOagvCcsIHRyaWdnZXI6ICdjaGFuZ2UnIH0KICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIHNlbGVjdFJ1bGU6IFsKICAgICAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeWVhuWTgeinhOagvOWxnuaApycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0KICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIHRlbXBfaWQ6IFsKICAgICAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqei/kOi0ueaooeadvycsIHRyaWdnZXI6ICdjaGFuZ2UnLCB0eXBlOiAnbnVtYmVyJyB9CiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICBnaXZlX2ludGVncmFsOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogImludGVnZXIiLCBtZXNzYWdlOiAi6K+36L6T5YWl5pW05pWwIiB9CiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG1hbnlCcm9rZXJhZ2U6IDAsCiAgICAgICAgICAgICAgICBtYW55QnJva2VyYWdlVHdvOiAwLAogICAgICAgICAgICAgICAgbWFueVZpcFByaWNlOiAwLAogICAgICAgICAgICAgICAgdXBsb2FkOiB7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9Jbmc6IGZhbHNlIC8vIOaYr+WQpuaYvuekuui/m+W6puadoe+8mwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHByb2dyZXNzOiAwLCAvLyDov5vluqbmnaHpu5jorqQwCiAgICAgICAgICAgICAgICB2aWRlb0xpbms6ICcnLAogICAgICAgICAgICAgICAgYXR0cnM6IFtdLAogICAgICAgICAgICAgICAgYWN0aXZpdHk6IHsgJ+m7mOiupCc6ICdyZWQnLCAn56eS5p2AJzogJ2JsdWUnLCAn56CN5Lu3JzogJ2dyZWVuJywgJ+aLvOWboic6ICd5ZWxsb3cnIH0sCiAgICAgICAgICAgICAgICBjb3Vwb25OYW1lOiBbXSwKICAgICAgICAgICAgICAgIHVwZGF0ZUlkczpbXSwKICAgICAgICAgICAgICAgIHVwZGF0ZU5hbWU6W10sCiAgICAgICAgICAgICAgICByYWtlQmFjazpbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+S4gOe6p+i/lOS9oyjlhYMpJywKICAgICAgICAgICAgICAgICAgICAgICAgc2xvdDogJ2Jyb2tlcmFnZScsCiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDk1CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5LqM57qn6L+U5L2jKOWFgyknLAogICAgICAgICAgICAgICAgICAgICAgICBzbG90OiAnYnJva2VyYWdlX3R3bycsCiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDk1CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIGNvbHVtbnNJbnN0YWxNOltdLAogICAgICAgICAgICAgICAgbW92ZUluZGV4OicnCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGNvbXB1dGVkOiB7CiAgICAgICAgICAgIGxhYmVsQm90dG9tICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gdW5kZWZpbmVkIDogMTUKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgY3JlYXRlZCAoKSB7CiAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IHRoaXMuY29sdW1uczIuc2xpY2UoMCwgOCk7CiAgICAgICAgfSwKICAgICAgICBtb3VudGVkICgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCAhPT0gJzAnICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgICAgICAgICAgdGhpcy5nZXRJbmZvKCkKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmdvb2RzQ2F0ZWdvcnkoKQogICAgICAgICAgICB0aGlzLnByb2R1Y3RHZXRSdWxlKCkKICAgICAgICAgICAgdGhpcy5wcm9kdWN0R2V0VGVtcGxhdGUoKQogICAgICAgICAgICB0aGlzLnVzZXJMYWJlbCgpCiAgICAgICAgfSwKICAgICAgICBtZXRob2RzOiB7CiAgICAgICAgICAgIGNoZWNrTW92ZShldnQpewogICAgICAgICAgICAgICAgdGhpcy5tb3ZlSW5kZXggPSBldnQuZHJhZ2dlZENvbnRleHQuaW5kZXg7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVuZCgpewogICAgICAgICAgICAgICAgdGhpcy5tb3ZlSW5kZXggPSAnJzsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2hlY2tBbGxHcm91cENoYW5nZShkYXRhKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrQWxsR3JvdXAoZGF0YSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNoZWNrQWxsR3JvdXAoZGF0YSl7CiAgICAgICAgICAgICAgICBpZih0aGlzLmZvcm1WYWxpZGF0ZS5zcGVjX3R5cGUgPT09IDApewogICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuaW5kZXhPZigwKSA+IC0xKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zSW5zdGFsbCA9IHRoaXMuY29sdW1uczIuc2xpY2UoMCwgNCkuY29uY2F0KHRoaXMubWVtYmVyKQogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGRhdGEuaW5kZXhPZigxKSA+IC0xKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zSW5zdGFsbCA9IHRoaXMuY29sdW1uczIuc2xpY2UoMCwgNCkuY29uY2F0KHRoaXMucmFrZUJhY2spOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zSW5zdGFsbCA9IHRoaXMuY29sdW1uczIuc2xpY2UoMCwgNCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5sZW5ndGggPT09IDIpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWxsID0gdGhpcy5jb2x1bW5zMi5zbGljZSgwLCA0KS5jb25jYXQodGhpcy5yYWtlQmFjaykuY29uY2F0KHRoaXMubWVtYmVyKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5pbmRleE9mKDApID4gLTEpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWwyID0gdGhpcy5jb2x1bW5zSW5zdGFsTS5zbGljZSgwLCA0KS5jb25jYXQodGhpcy5tZW1iZXIpCiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoZGF0YS5pbmRleE9mKDEpID4gLTEpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWwyID0gdGhpcy5jb2x1bW5zSW5zdGFsTS5zbGljZSgwLCA0KS5jb25jYXQodGhpcy5yYWtlQmFjayk7CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWwyID0gdGhpcy5jb2x1bW5zSW5zdGFsTS5zbGljZSgwLCA0KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZihkYXRhLmxlbmd0aCA9PT0gMil7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdramhoaGhoaGhoaGhoaGhoaGhob29vJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uc0luc3RhbDIgPSB0aGlzLmNvbHVtbnNJbnN0YWxNLnNsaWNlKDAsIDQpLmNvbmNhdCh0aGlzLnJha2VCYWNrKS5jb25jYXQodGhpcy5tZW1iZXIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5re75Yqg5LyY5oOg5Yi4CiAgICAgICAgICAgIGFkZENvdXBvbiAoKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmNvdXBvblRlbXBsYXRlcy5pc1RlbXBsYXRlID0gdHJ1ZQogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5jb3Vwb25UZW1wbGF0ZXMudGFibGVMaXN0KCkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy/lr7nosaHmlbDnu4Tljrvph43vvJsKICAgICAgICAgICAgdW5pcXVlKGFycikgewogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgcmV0dXJuIGFyci5maWx0ZXIoKGFycikgPT4gIXJlcy5oYXMoYXJyLmlkKSAmJiByZXMuc2V0KGFyci5pZCwgMSkpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG5hbWVJZCAoaWQsbmFtZXMpIHsKICAgICAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmNvdXBvbl9pZHMgPSBpZDsKICAgICAgICAgICAgICAgIHRoaXMuY291cG9uTmFtZSA9IHRoaXMudW5pcXVlKG5hbWVzKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGFuZGxlQ2xvc2UgKG5hbWUpIHsKICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMuY291cG9uTmFtZS5pbmRleE9mKG5hbWUpOwogICAgICAgICAgICAgICAgdGhpcy5jb3Vwb25OYW1lLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICAgICAgICBsZXQgY291cG9uSWRzID0gdGhpcy5mb3JtVmFsaWRhdGUuY291cG9uX2lkczsKICAgICAgICAgICAgICAgIGNvdXBvbklkcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJZHMgPSBjb3Vwb25JZHM7CiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU5hbWUgPSB0aGlzLmNvdXBvbk5hbWU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOi/kOi0ueaooeadvwogICAgICAgICAgICBnZXRMaXN0ICgpIHsKICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdEdldFRlbXBsYXRlKCkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5re75Yqg6L+Q6LS55qih5p2/CiAgICAgICAgICAgIGFkZFRlbXAgKCkgewogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy50ZW1wbGF0ZXMuaXNUZW1wbGF0ZSA9IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5Yig6Zmk6KeG6aKR77ybCiAgICAgICAgICAgIGRlbFZpZGVvICgpIHsKICAgICAgICAgICAgICAgIGxldCB0aGF0ID0gdGhpcwogICAgICAgICAgICAgICAgdGhhdC4kc2V0KHRoYXQuZm9ybVZhbGlkYXRlLCAndmlkZW9fbGluaycsICcnKQogICAgICAgICAgICB9LAogICAgICAgICAgICB6aF91cGxvYWRGaWxlICgpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvTGluaykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnZpZGVvX2xpbmsgPSB0aGlzLnZpZGVvTGluawogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnJlZmlkLmNsaWNrKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgemhfdXBsb2FkRmlsZV9jaGFuZ2UgKGV2ZmlsZSkgewogICAgICAgICAgICAgICAgbGV0IHRoYXQgPSB0aGlzCiAgICAgICAgICAgICAgICBsZXQgc3VmZml4ID0gZXZmaWxlLnRhcmdldC5maWxlc1swXS5uYW1lLnN1YnN0cihldmZpbGUudGFyZ2V0LmZpbGVzWzBdLm5hbWUuaW5kZXhPZignLicpKQogICAgICAgICAgICAgICAgaWYgKHN1ZmZpeCAhPT0gJy5tcDQnKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQuJE1lc3NhZ2UuZXJyb3IoJ+WPquiDveS4iuS8oE1QNOaWh+S7ticpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBwcm9kdWN0R2V0VGVtcEtleXNBcGkoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhhdC4kdmlkZW9DbG91ZC52aWRlb1VwbG9hZCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHJlcy5kYXRhLnR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZmlsZTogZXZmaWxlLAogICAgICAgICAgICAgICAgICAgICAgICByZXM6IHJlcywKICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkaW5nIChzdGF0dXMsIHByb2dyZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnVwbG9hZC52aWRlb0luZyA9IHN0YXR1cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coc3RhdHVzLCBwcm9ncmVzcykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5mb3JtVmFsaWRhdGUudmlkZW9fbGluayA9IHJlcy51cmwKICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC4kTWVzc2FnZS5zdWNjZXNzKCfop4bpopHkuIrkvKDmiJDlip8nKQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuJE1lc3NhZ2UuZXJyb3IocmVzKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KS5jYXRjaChyZXMgPT4gewogICAgICAgICAgICAgICAgICAgIHRoYXQuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5LiK5LiA6aG177ybCiAgICAgICAgICAgIHVwVGFiICgpIHsKICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFRhYiA9IChOdW1iZXIodGhpcy5jdXJyZW50VGFiKSAtIDEpLnRvU3RyaW5nKCkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5LiL5LiA6aG177ybCiAgICAgICAgICAgIGRvd25UYWIgKCkgewogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VGFiID0gKE51bWJlcih0aGlzLmN1cnJlbnRUYWIpICsgMSkudG9TdHJpbmcoKQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDlsZ7mgKflvLnnqpflm57osIPlh73mlbDvvJsKICAgICAgICAgICAgdXNlclNlYXJjaHMgKCkgewogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0R2V0UnVsZSgpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOa3u+WKoOinhOWIme+8mwogICAgICAgICAgICBhZGRSdWxlICgpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuYWRkYXR0ci5tb2RhbCA9IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5om56YeP6K6+572u5YiG5L2j77ybCiAgICAgICAgICAgIGJyb2tlcmFnZVNldFVwICgpIHsKICAgICAgICAgICAgICAgIGxldCB0aGF0ID0gdGhpcwogICAgICAgICAgICAgICAgaWYodGhhdC5mb3JtVmFsaWRhdGUuaXNfc3ViLmluZGV4T2YoMSkgPiAtMSl7CiAgICAgICAgICAgICAgICAgICAgaWYodGhhdC5tYW55QnJva2VyYWdlIDw9IDAgfHwgdGhhdC5tYW55QnJva2VyYWdlVHdvIDw9IDApewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC4kTWVzc2FnZS5lcnJvcign6K+35aGr5YaZ6L+U5L2j6YeR6aKd5ZCO6L+b6KGM5om56YeP5re75YqgJykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9ZWxzZSBpZih0aGF0LmZvcm1WYWxpZGF0ZS5pc19zdWIuaW5kZXhPZigwKSA+IC0xKXsKICAgICAgICAgICAgICAgICAgICBpZih0aGF0Lm1hbnlWaXBQcmljZSA8PSAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQuJE1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmeS8muWRmOS7t+WQjui/m+ihjOaJuemHj+a3u+WKoCcpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYodGhpcy5mb3JtVmFsaWRhdGUuaXNfc3ViLmxlbmd0aD09PTIpewogICAgICAgICAgICAgICAgICAgIGlmKHRoYXQubWFueUJyb2tlcmFnZSA8PSAwIHx8IHRoYXQubWFueUJyb2tlcmFnZVR3byA8PSAwIHx8IHRoYXQubWFueVZpcFByaWNlIDw9IDApewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC4kTWVzc2FnZS5lcnJvcign6K+35aGr5YaZ5a6M6YeR6aKd5ZCO6L+b6KGM5om56YeP5re75YqgJykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3IgKGxldCB2YWwgb2YgdGhhdC5tYW55Rm9ybVZhbGlkYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ2Jyb2tlcmFnZScsIHRoYXQubWFueUJyb2tlcmFnZSkKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzZXQodmFsLCAnYnJva2VyYWdlX3R3bycsIHRoYXQubWFueUJyb2tlcmFnZVR3bykKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzZXQodmFsLCAndmlwX3ByaWNlJywgdGhhdC5tYW55VmlwUHJpY2UpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJhdGNoRGVsICgpIHsKICAgICAgICAgICAgICAgIHRoaXMub25lRm9ybUJhdGNoID0gWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGljOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvc3Q6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIG90X3ByaWNlOiAwLAogICAgICAgICAgICAgICAgICAgICAgICBzdG9jazogMCwKICAgICAgICAgICAgICAgICAgICAgICAgYmFyX2NvZGU6ICcnLAogICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIHZvbHVtZTogMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29uZmlybSAoKSB7CiAgICAgICAgICAgICAgICBsZXQgdGhhdCA9IHRoaXMKICAgICAgICAgICAgICAgIHRoYXQuY3JlYXRlQm50ID0gdHJ1ZQogICAgICAgICAgICAgICAgaWYgKHRoYXQuZm9ybVZhbGlkYXRlLnNlbGVjdFJ1bGUudHJpbSgpLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQuJE1lc3NhZ2UuZXJyb3IoJ+ivt+mAieaLqeWxnuaApycpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGF0LnJ1bGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0ucnVsZV9uYW1lID09PSB0aGF0LmZvcm1WYWxpZGF0ZS5zZWxlY3RSdWxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuYXR0cnMgPSBpdGVtLnJ1bGVfdmFsdWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDojrflj5bllYblk4HlsZ7mgKfmqKHmnb/vvJsKICAgICAgICAgICAgcHJvZHVjdEdldFJ1bGUgKCkgewogICAgICAgICAgICAgICAgcHJvZHVjdEdldFJ1bGVBcGkoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ydWxlTGlzdCA9IHJlcy5kYXRhCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDojrflj5bov5DotLnmqKHmnb/vvJsKICAgICAgICAgICAgcHJvZHVjdEdldFRlbXBsYXRlICgpIHsKICAgICAgICAgICAgICAgIHByb2R1Y3RHZXRUZW1wbGF0ZUFwaSgpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlTGlzdCA9IHJlcy5kYXRhCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDliKDpmaTooajmoLzkuK3nmoTlsZ7mgKcKICAgICAgICAgICAgZGVsQXR0clRhYmxlIChpbmRleCkgewogICAgICAgICAgICAgICAgbGV0IGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgICAgICAgICBpZiAoaWQpIHsKICAgICAgICAgICAgICAgICAgICBjaGVja0FjdGl2aXR5QXBpKGlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZS5zcGxpY2UoaW5kZXgsIDEpCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlLnNwbGljZShpbmRleCwgMSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5om56YeP5re75YqgCiAgICAgICAgICAgIGJhdGNoQWRkICgpIHsKICAgICAgICAgICAgICAgIC8vIGlmICghdGhpcy5vbmVGb3JtQmF0Y2hbMF0ucGljIHx8ICF0aGlzLm9uZUZvcm1CYXRjaFswXS5wcmljZSB8fCAhdGhpcy5vbmVGb3JtQmF0Y2hbMF0uY29zdCB8fCAhdGhpcy5vbmVGb3JtQmF0Y2hbMF0ub3RfcHJpY2UgfHwKICAgICAgICAgICAgICAgIC8vICAgICAhdGhpcy5vbmVGb3JtQmF0Y2hbMF0uc3RvY2sgfHwgIXRoaXMub25lRm9ybUJhdGNoWzBdLmJhcl9jb2RlKSByZXR1cm4gdGhpcy4kTWVzc2FnZS53YXJuaW5nKCfor7floavlhpnlrozmlbTnmoTmibnph4/orr7nva7lhoXlrrnvvIEnKTsKICAgICAgICAgICAgICAgIC8vIGlmICghdGhpcy5vbmVGb3JtQmF0Y2hbMF0ucGljKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup5pyJ5pWI5Zu+54mHJyk7CiAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgICBmb3IgKGxldCB2YWwgb2YgdGhpcy5tYW55Rm9ybVZhbGlkYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub25lRm9ybUJhdGNoWzBdLnBpYykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzZXQodmFsLCAncGljJywgdGhpcy5vbmVGb3JtQmF0Y2hbMF0ucGljKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vbmVGb3JtQmF0Y2hbMF0ucHJpY2UgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNldCh2YWwsICdwcmljZScsIHRoaXMub25lRm9ybUJhdGNoWzBdLnByaWNlKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vbmVGb3JtQmF0Y2hbMF0uY29zdCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ2Nvc3QnLCB0aGlzLm9uZUZvcm1CYXRjaFswXS5jb3N0KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vbmVGb3JtQmF0Y2hbMF0ub3RfcHJpY2UgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNldCh2YWwsICdvdF9wcmljZScsIHRoaXMub25lRm9ybUJhdGNoWzBdLm90X3ByaWNlKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vbmVGb3JtQmF0Y2hbMF0uc3RvY2sgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNldCh2YWwsICdzdG9jaycsIHRoaXMub25lRm9ybUJhdGNoWzBdLnN0b2NrKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vbmVGb3JtQmF0Y2hbMF0uYmFyX2NvZGUgIT09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNldCh2YWwsICdiYXJfY29kZScsIHRoaXMub25lRm9ybUJhdGNoWzBdLmJhcl9jb2RlKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vbmVGb3JtQmF0Y2hbMF0ud2VpZ2h0ID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzZXQodmFsLCAnd2VpZ2h0JywgdGhpcy5vbmVGb3JtQmF0Y2hbMF0ud2VpZ2h0KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vbmVGb3JtQmF0Y2hbMF0udm9sdW1lID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzZXQodmFsLCAndm9sdW1lJywgdGhpcy5vbmVGb3JtQmF0Y2hbMF0udm9sdW1lKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLiRzZXQodmFsLCAncHJpY2UnLCB0aGlzLm9uZUZvcm1CYXRjaFswXS5wcmljZSk7CiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy4kc2V0KHZhbCwgJ2Nvc3QnLCB0aGlzLm9uZUZvcm1CYXRjaFswXS5jb3N0KTsKICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLiRzZXQodmFsLCAnb3RfcHJpY2UnLCB0aGlzLm9uZUZvcm1CYXRjaFswXS5vdF9wcmljZSk7CiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy4kc2V0KHZhbCwgJ3N0b2NrJywgdGhpcy5vbmVGb3JtQmF0Y2hbMF0uc3RvY2spOwogICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuJHNldCh2YWwsICdiYXJfY29kZScsIHRoaXMub25lRm9ybUJhdGNoWzBdLmJhcl9jb2RlKTsKICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLiRzZXQodmFsLCAnd2VpZ2h0JywgdGhpcy5vbmVGb3JtQmF0Y2hbMF0ud2VpZ2h0KTsKICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLiRzZXQodmFsLCAndm9sdW1lJywgdGhpcy5vbmVGb3JtQmF0Y2hbMF0udm9sdW1lKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5re75Yqg5oyJ6ZKuCiAgICAgICAgICAgIGFkZEJ0biAoKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQXR0cigpCiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUJudCA9IGZhbHNlCiAgICAgICAgICAgICAgICB0aGlzLnNob3dJcHV0ID0gdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDnq4vljbPnlJ/miJAKICAgICAgICAgICAgZ2VuZXJhdGUgKHR5cGUpIHsKICAgICAgICAgICAgICAgIGdlbmVyYXRlQXR0ckFwaSh7IGF0dHJzOiB0aGlzLmF0dHJzIH0sIHRoaXMuZm9ybVZhbGlkYXRlLmlkLCB0eXBlKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGluZm8gPSByZXMuZGF0YS5pbmZvLCBoZWFkZXIxID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShpbmZvLmhlYWRlcikpOwogICAgICAgICAgICAgICAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZSA9IGluZm8udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaGVhZGVyID0gaGVhZGVyMTsKICAgICAgICAgICAgICAgICAgICBsZXQgaGVhZGVyID0gaW5mby5oZWFkZXI7CiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGJyb2tlcmFnZSA9IFsKICAgICAgICAgICAgICAgICAgICAvLyAgICAgewogICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgdGl0bGU6ICfkuIDnuqfov5TkvaMnLAogICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgc2xvdDogJ2Jyb2tlcmFnZScsCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB3aWR0aDogOTUKICAgICAgICAgICAgICAgICAgICAvLyAgICAgfSwKICAgICAgICAgICAgICAgICAgICAvLyAgICAgewogICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgdGl0bGU6ICfkuoznuqfov5TkvaMnLAogICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgc2xvdDogJ2Jyb2tlcmFnZV90d28nLAogICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgd2lkdGg6IDk1CiAgICAgICAgICAgICAgICAgICAgLy8gICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyBdOwogICAgICAgICAgICAgICAgICAgIGhlYWRlci5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmNvbHVtbnNJbnN0YWwyID0gaW5mby5oZWFkZXIuY29uY2F0KGJyb2tlcmFnZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zSW5zdGFsTSA9IGluZm8uaGVhZGVyOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tBbGxHcm91cCh0aGlzLmZvcm1WYWxpZGF0ZS5pc19zdWIpOwogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy4kcm91dGUucGFyYW1zLmlkICYmIHRoaXMuZm9ybVZhbGlkYXRlLnNwZWNfdHlwZSA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hbnlGb3JtVmFsaWRhdGUubWFwKChpdGVtKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnBpYyA9IHRoaXMuZm9ybVZhbGlkYXRlLmltYWdlCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uZUZvcm1CYXRjaFswXS5waWMgPSB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS5jYXRjaChyZXMgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDlj5bmtogKICAgICAgICAgICAgb2ZmQXR0ck5hbWUgKCkgewogICAgICAgICAgICAgICAgdGhpcy5zaG93SXB1dCA9IGZhbHNlCiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUJudCA9IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2xlYXJBdHRyICgpIHsKICAgICAgICAgICAgICAgIHRoaXMuZm9ybUR5bmFtaWMuYXR0cnNOYW1lID0gJycKICAgICAgICAgICAgICAgIHRoaXMuZm9ybUR5bmFtaWMuYXR0cnNWYWwgPSAnJwogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDliKDpmaTop4TmoLwKICAgICAgICAgICAgaGFuZGxlUmVtb3ZlUm9sZSAoaW5kZXgpIHsKICAgICAgICAgICAgICAgIHRoaXMuYXR0cnMuc3BsaWNlKGluZGV4LCAxKQogICAgICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlLnNwbGljZShpbmRleCwgMSkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5Yig6Zmk5bGe5oCnCiAgICAgICAgICAgIGhhbmRsZVJlbW92ZTIgKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgICBpdGVtLnNwbGljZShpbmRleCwgMSkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5re75Yqg6KeE5YiZ5ZCN56ewCiAgICAgICAgICAgIGNyZWF0ZUF0dHJOYW1lICgpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvcm1EeW5hbWljLmF0dHJzTmFtZSAmJiB0aGlzLmZvcm1EeW5hbWljLmF0dHJzVmFsKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmZvcm1EeW5hbWljLmF0dHJzTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1EeW5hbWljLmF0dHJzVmFsCiAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRycy5wdXNoKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgdmFyIGhhc2ggPSB7fQogICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cnMgPSB0aGlzLmF0dHJzLnJlZHVjZShmdW5jdGlvbiAoaXRlbSwgbmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSAqLwogICAgICAgICAgICAgICAgICAgICAgICBoYXNoW25leHQudmFsdWVdID8gJycgOiBoYXNoW25leHQudmFsdWVdID0gdHJ1ZSAmJiBpdGVtLnB1c2gobmV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtCiAgICAgICAgICAgICAgICAgICAgfSwgW10pCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckF0dHIoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dJcHV0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVCbnQgPSB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoJ+ivt+a3u+WKoOWujOaVtOeahOinhOagvO+8gScpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDmt7vliqDlsZ7mgKcKICAgICAgICAgICAgY3JlYXRlQXR0ciAobnVtLCBpZHgpIHsKICAgICAgICAgICAgICAgIGlmIChudW0pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJzW2lkeF0uZGV0YWlsLnB1c2gobnVtKTsKICAgICAgICAgICAgICAgICAgICB2YXIgaGFzaCA9IHt9OwogICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cnNbaWR4XS5kZXRhaWwgPSB0aGlzLmF0dHJzW2lkeF0uZGV0YWlsLnJlZHVjZShmdW5jdGlvbiAoaXRlbSwgbmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSAqLwogICAgICAgICAgICAgICAgICAgICAgICBoYXNoW25leHRdID8gJycgOiBoYXNoW25leHRdID0gdHJ1ZSAmJiBpdGVtLnB1c2gobmV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtCiAgICAgICAgICAgICAgICAgICAgfSwgW10pCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn6K+35re75Yqg5bGe5oCnJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOWVhuWTgeWIhuexu++8mwogICAgICAgICAgICBnb29kc0NhdGVnb3J5ICgpIHsKICAgICAgICAgICAgICAgIHRyZWVMaXN0QXBpKDEpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVTZWxlY3QgPSByZXMuZGF0YTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOeUqOaIt+agh+etvgogICAgICAgICAgICB1c2VyTGFiZWwgKCkgewogICAgICAgICAgICAgICAgbGFiZWxMaXN0QXBpKCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMubGFiZWxTZWxlY3QgPSByZXMuZGF0YS5saXN0OwogICAgICAgICAgICAgICAgfSkuY2F0Y2gocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5pS55Y+Y6KeE5qC8CiAgICAgICAgICAgIGNoYW5nZVNwZWMgKCkgewogICAgICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaXNfc3ViID0gW107CiAgICAgICAgICAgICAgICBsZXQgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgICAgICAgICAgICBpZiAoaWQpIHsKICAgICAgICAgICAgICAgICAgICBjaGVja0FjdGl2aXR5QXBpKGlkKS50aGVuKHJlcyA9PiB7CgogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNwZWNfdHlwZSA9IHRoaXMuc3BlY190eXBlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOivpuaDhQogICAgICAgICAgICBnZXRJbmZvICgpIHsKICAgICAgICAgICAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgICAgICAgICAgIHRoYXQuc3BpblNob3cgPSB0cnVlOwogICAgICAgICAgICAgICAgcHJvZHVjdEluZm9BcGkodGhhdC4kcm91dGUucGFyYW1zLmlkKS50aGVuKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YS5wcm9kdWN0SW5mbzsKICAgICAgICAgICAgICAgICAgICBsZXQgY2F0ZV9pZCA9IGRhdGEuY2F0ZV9pZC5tYXAoTnVtYmVyKTsKICAgICAgICAgICAgICAgICAgICBsZXQgbGFiZWxfaWQgPSBkYXRhLmxhYmVsX2lkLm1hcChOdW1iZXIpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cnMgPSBkYXRhLml0ZW1zIHx8IFtdOwogICAgICAgICAgICAgICAgICAgIGxldCBpZHMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAvLyBsZXQgbmFtZXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBkYXRhLmNvdXBvbnMubWFwKChpdGVtKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkcy5wdXNoKGl0ZW0uaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBuYW1lcy5wdXNoKGl0ZW0udGl0bGUpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHRoYXQuZm9ybVZhbGlkYXRlID0gZGF0YTsKICAgICAgICAgICAgICAgICAgICB0aGF0LmNvdXBvbk5hbWUgPSBkYXRhLmNvdXBvbnM7CiAgICAgICAgICAgICAgICAgICAgdGhhdC5mb3JtVmFsaWRhdGUuY291cG9uX2lkcyA9IGlkczsKICAgICAgICAgICAgICAgICAgICB0aGF0LnVwZGF0ZUlkcyA9IGlkczsKICAgICAgICAgICAgICAgICAgICB0aGF0LnVwZGF0ZU5hbWUgPSBkYXRhLmNvdXBvbnM7CiAgICAgICAgICAgICAgICAgICAgdGhhdC5mb3JtVmFsaWRhdGUuY2F0ZV9pZCA9IGNhdGVfaWQ7CiAgICAgICAgICAgICAgICAgICAgdGhhdC5mb3JtVmFsaWRhdGUubGFiZWxfaWQgPSBsYWJlbF9pZDsKICAgICAgICAgICAgICAgICAgICB0aGF0Lm9uZUZvcm1WYWxpZGF0ZSA9IFtkYXRhLmF0dHJdOwogICAgICAgICAgICAgICAgICAgIHRoYXQuZm9ybVZhbGlkYXRlLmhlYWRlciA9IFtdOwogICAgICAgICAgICAgICAgICAgIHRoYXQuZ2VuZXJhdGUoMCk7CiAgICAgICAgICAgICAgICAgICAgdGhhdC5tYW55Rm9ybVZhbGlkYXRlID0gZGF0YS5hdHRyczsKICAgICAgICAgICAgICAgICAgICB0aGF0LnNwZWNfdHlwZSA9IGRhdGEuc3BlY190eXBlOwogICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3BlY190eXBlID09PSAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5tYW55Rm9ybVZhbGlkYXRlID0gW107CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmNyZWF0ZUJudCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQub25lRm9ybVZhbGlkYXRlID0gWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpYzogJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29zdDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdF9wcmljZTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9jazogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJfY29kZTogJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9sdW1lOjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJva2VyYWdlOjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJva2VyYWdlX3R3bzowLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpcF9wcmljZTowCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGluU2hvdyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSkuY2F0Y2gocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNwaW5TaG93ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIHRhYuWIh+aNogogICAgICAgICAgICBvbmhhbmdlVGFiIChuYW1lKSB7CiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRUYWIgPSBuYW1lOwogICAgICAgICAgICB9LAogICAgICAgICAgICBoYW5kbGVSZW1vdmUgKGkpIHsKICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNsaWRlcl9pbWFnZS5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOWFs+mXreWbvueJh+S4iuS8oOaooeaAgeahhgogICAgICAgICAgICBjaGFuZ2VDYW5jZWwgKG1zZykgewogICAgICAgICAgICAgICAgdGhpcy5tb2RhbFBpYyA9IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOeCueWHu+WVhuWTgeWbvgogICAgICAgICAgICBtb2RhbFBpY1RhcCAodGl0LHBpY1RpdCxpbmRleCkgewogICAgICAgICAgICAgICAgdGhpcy5tb2RhbFBpYyA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLmlzQ2hvaWNlID0gdGl0ID09PSAnZGFuJyA/ICfljZXpgIknIDogJ+WkmumAiSc7CiAgICAgICAgICAgICAgICB0aGlzLnBpY1RpdCA9IHBpY1RpdDsKICAgICAgICAgICAgICAgIHRoaXMudGFibGVJbmRleCA9IGluZGV4OwogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDojrflj5bljZXlvKDlm77niYfkv6Hmga8KICAgICAgICAgICAgZ2V0UGljIChwYykgewogICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLnBpY1RpdCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RhbkZyb20nOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZSA9IHBjLmF0dF9kaXI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5mb3JtVmFsaWRhdGUuc3BlY190eXBlID09PSAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uZUZvcm1WYWxpZGF0ZVswXS5waWMgPSAgcGMuYXR0X2RpcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZS5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5waWMgPSBwYy5hdHRfZGlyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25lRm9ybUJhdGNoWzBdLnBpYyA9ICBwYy5hdHRfZGlyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RhblRhYmxlJzoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmVGb3JtVmFsaWRhdGVbdGhpcy50YWJsZUluZGV4XS5waWMgPSBwYy5hdHRfZGlyOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdkdW9waSc6CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25lRm9ybUJhdGNoW3RoaXMudGFibGVJbmRleF0ucGljID0gcGMuYXR0X2RpcjsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlY29tbWVuZF9pbWFnZSc6CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnJlY29tbWVuZF9pbWFnZT1wYy5hdHRfZGlyOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlW3RoaXMudGFibGVJbmRleF0ucGljPXBjLmF0dF9kaXI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLm1vZGFsUGljID0gZmFsc2U7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOiOt+WPluWkmuW8oOWbvuS/oeaBrwogICAgICAgICAgICBnZXRQaWNEIChwYykgewogICAgICAgICAgICAgICAgdGhpcy5pbWFnZXMgPSBwYzsKICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNsaWRlcl9pbWFnZS5wdXNoKGl0ZW0uYXR0X2Rpcik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuc2xpZGVyX2ltYWdlID0gdGhpcy5mb3JtVmFsaWRhdGUuc2xpZGVyX2ltYWdlLnNwbGljZSgwLDEwKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5tb2RhbFBpYyA9IGZhbHNlOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDmj5DkuqQKICAgICAgICAgICAgaGFuZGxlU3VibWl0IChuYW1lKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzW25hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmZvcm1WYWxpZGF0ZS5zcGVjX3R5cGUgPT09MCApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuYXR0cnMgPSB0aGlzLm9uZUZvcm1WYWxpZGF0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmhlYWRlciA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaXRlbXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pdGVtcyA9IHRoaXMuYXR0cnM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5hdHRycyA9IHRoaXMubWFueUZvcm1WYWxpZGF0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmZvcm1WYWxpZGF0ZS5zcGVjX3R5cGUgPT09IDEgJiYgdGhpcy5tYW55Rm9ybVZhbGlkYXRlLmxlbmd0aD09PTApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn5ZWG5ZOB5L+h5oGvLeivt+eCueWHu+eUn+aIkOWkmuinhOagvCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpdGVtID0gdGhpcy5mb3JtVmFsaWRhdGUuYXR0cnM7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuZm9ybVZhbGlkYXRlLmlzX3N1YlswXSA9PT0gMSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtW2ldLmJyb2tlcmFnZSA9PT0gbnVsbCB8fCBpdGVtW2ldLmJyb2tlcmFnZV90d28gPT09IG51bGwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS5lcnJvcign5YW25LuW6K6+572uLSDkuIDkuoznuqfov5TkvaPkuI3og73kuLrnqbonKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXRlbVtpXS52aXBfcHJpY2UgPT09IG51bGwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS5lcnJvcign5YW25LuW6K6+572uLeS8muWRmOS7t+S4jeiDveS4uuepuicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmZvcm1WYWxpZGF0ZS5pc19zdWIubGVuZ3RoID09PSAyKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW1baV0uYnJva2VyYWdlID09PSBudWxsIHx8IGl0ZW1baV0uYnJva2VyYWdlX3R3byA9PT0gbnVsbCB8fCBpdGVtW2ldLnZpcF9wcmljZSA9PT0gbnVsbCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCflhbbku5borr7nva4tIOS4gOS6jOe6p+i/lOS9o+WSjOS8muWRmOS7t+S4jeiDveS4uuepuicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5TdWJpbWl0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdEFkZEFwaSh0aGlzLmZvcm1WYWxpZGF0ZSkudGhlbihhc3luYyByZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuU3ViaW1pdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2FkbWluL3Byb2R1Y3QvcHJvZHVjdF9saXN0JyB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5TdWJpbWl0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLmZvcm1WYWxpZGF0ZS5zdG9yZV9uYW1lKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuWVhuWTgeS/oeaBry3llYblk4HlkI3np7DkuI3og73kuLrnqboiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoIXRoaXMuZm9ybVZhbGlkYXRlLmNhdGVfaWQubGVuZ3RoKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuWVhuWTgeS/oeaBry3llYblk4HliIbnsbvkuI3og73kuLoiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoIXRoaXMuZm9ybVZhbGlkYXRlLmtleXdvcmQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi5ZWG5ZOB5L+h5oGvLeWVhuWTgeWFs+mUruWtl+S4jeiDveS4uiIpOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZighdGhpcy5mb3JtVmFsaWRhdGUudW5pdF9uYW1lKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuWVhuWTgeS/oeaBry3llYblk4HljZXkvY3kuI3og73kuLoiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoIXRoaXMuZm9ybVZhbGlkYXRlLnN0b3JlX2luZm8pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi5ZWG5ZOB5L+h5oGvLeWVhuWTgeeugOS7i+S4jeiDveS4uiIpOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZighdGhpcy5mb3JtVmFsaWRhdGUuaW1hZ2UpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi5ZWG5ZOB5L+h5oGvLeWVhuWTgeWwgemdouWbvuS4jeiDveS4uiIpOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZighdGhpcy5mb3JtVmFsaWRhdGUuc2xpZGVyX2ltYWdlLmxlbmd0aCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLllYblk4Hkv6Hmga8t5ZWG5ZOB6L2u5pKt5Zu+5LiN6IO95Li6Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKCF0aGlzLmZvcm1WYWxpZGF0ZS50ZW1wX2lkKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuWVhuWTgeS/oeaBry3ov5DotLnmqKHmnb/kuI3og73kuLoiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNoYW5nZVRlbXBsYXRlIChtc2cpIHsKICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGUgPSBtc2cKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g6KGo5Y2V6aqM6K+BCiAgICAgICAgICAgIHZhbGlkYXRlIChwcm9wLCBzdGF0dXMsIGVycm9yKSB7CiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZyhlcnJvcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOenu+WKqAogICAgICAgICAgICBoYW5kbGVEcmFnU3RhcnQgKGUsIGl0ZW0pIHsKICAgICAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmcgPSBpdGVtOwogICAgICAgICAgICB9LAogICAgICAgICAgICBoYW5kbGVEcmFnRW5kIChlLCBpdGVtKSB7CiAgICAgICAgICAgICAgICB0aGlzLmRyYWdnaW5nID0gbnVsbAogICAgICAgICAgICB9LAogICAgICAgICAgICBoYW5kbGVEcmFnT3ZlciAoZSkgewogICAgICAgICAgICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdtb3ZlJwogICAgICAgICAgICB9LAogICAgICAgICAgICBoYW5kbGVEcmFnRW50ZXIgKGUsIGl0ZW0pIHsKICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAnbW92ZScKICAgICAgICAgICAgICAgIGlmIChpdGVtID09PSB0aGlzLmRyYWdnaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zdCBuZXdJdGVtcyA9IFsuLi50aGlzLmZvcm1WYWxpZGF0ZS5zbGlkZXJfaW1hZ2VdCiAgICAgICAgICAgICAgICBjb25zdCBzcmMgPSBuZXdJdGVtcy5pbmRleE9mKHRoaXMuZHJhZ2dpbmcpCiAgICAgICAgICAgICAgICBjb25zdCBkc3QgPSBuZXdJdGVtcy5pbmRleE9mKGl0ZW0pCiAgICAgICAgICAgICAgICBuZXdJdGVtcy5zcGxpY2UoZHN0LCAwLCAuLi5uZXdJdGVtcy5zcGxpY2Uoc3JjLCAxKSkKICAgICAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNsaWRlcl9pbWFnZSA9IG5ld0l0ZW1zOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDmt7vliqDoh6rlrprkuYnlvLnnqpcKICAgICAgICAgICAgYWRkQ3VzdG9tRGlhbG9nIChlZGl0b3JJZCkgewogICAgICAgICAgICAgICAgd2luZG93LlVFLnJlZ2lzdGVyVUkoJ3Rlc3QtZGlhbG9nJywgZnVuY3Rpb24gKGVkaXRvciwgdWlOYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5Yib5bu6IGRpYWxvZwogICAgICAgICAgICAgICAgICAgIGxldCBkaWFsb2cgPSBuZXcgd2luZG93LlVFLnVpLkRpYWxvZyh7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmcmFtZVVybDogJy9hZG1pbi93aWRnZXQuaW1hZ2VzL2luZGV4Lmh0bWw/Zm9kZGVyPWRpYWxvZycsCiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvcjogZWRpdG9yLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB1aU5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5LiK5Lyg5Zu+54mHJywKICAgICAgICAgICAgICAgICAgICAgICAgY3NzUnVsZXM6ICd3aWR0aDoxMjAwcHg7aGVpZ2h0OjUwMHB4O3BhZGRpbmc6MjBweDsnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cgPSBkaWFsb2c7CiAgICAgICAgICAgICAgICAgICAgbGV0IGJ0biA9IG5ldyB3aW5kb3cuVUUudWkuQnV0dG9uKHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2RpYWxvZy1idXR0b24nLAogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+S4iuS8oOWbvueJhycsCiAgICAgICAgICAgICAgICAgICAgICAgIGNzc1J1bGVzOiBgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uLy4uLy4uL2Fzc2V0cy9pbWFnZXMvaWNvbnMucG5nKTtiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNzI2cHggLTc3cHg7YCwKICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5riy5p+TZGlhbG9nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2cucmVuZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2cub3BlbigpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ0bjsKICAgICAgICAgICAgICAgIH0sIDM3KTsKICAgICAgICAgICAgICAgIHdpbmRvdy5VRS5yZWdpc3RlclVJKCd2aWRlby1kaWFsb2cnLCBmdW5jdGlvbiAoZWRpdG9yLCB1aU5hbWUpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgZGlhbG9nID0gbmV3IHdpbmRvdy5VRS51aS5EaWFsb2coewogICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWVVcmw6ICcvYWRtaW4vd2lkZ2V0LnZpZGVvL2luZGV4Lmh0bWw/Zm9kZGVyPXZpZGVvJywKICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHVpTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfkuIrkvKDop4bpopEnLAogICAgICAgICAgICAgICAgICAgICAgICBjc3NSdWxlczogJ3dpZHRoOjEwMDBweDtoZWlnaHQ6NTAwcHg7cGFkZGluZzoyMHB4OycKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZyA9IGRpYWxvZzsKICAgICAgICAgICAgICAgICAgICBsZXQgYnRuID0gbmV3IHdpbmRvdy5VRS51aS5CdXR0b24oewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndmlkZW8tYnV0dG9uJywKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfkuIrkvKDop4bpopEnLAogICAgICAgICAgICAgICAgICAgICAgICBjc3NSdWxlczogYGJhY2tncm91bmQtaW1hZ2U6IHVybCguLi8uLi8uLi9hc3NldHMvaW1hZ2VzL2ljb25zLnBuZyk7YmFja2dyb3VuZC1wb3NpdGlvbjogLTMyMHB4IC0yMHB4O2AsCiAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOa4suafk2RpYWxvZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLnJlbmRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLm9wZW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBidG47CiAgICAgICAgICAgICAgICB9LCAzOCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/product/productAdd","sourcesContent":["<template>\n    <div class=\"article-manager\" id=\"shopp-manager\">\n      <div class=\"i-layout-page-header\">\n        <div class=\"i-layout-page-header\">\n          <router-link :to=\"{path:'/admin/product/product_list'}\"><Button icon=\"ios-arrow-back\" size=\"small\"  class=\"mr20\">返回</Button></router-link>\n          <span class=\"ivu-page-header-title mr20\" v-text=\"$route.params.id?'编辑商品':'添加商品'\"></span>\n        </div>\n      </div>\n        <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n            <Tabs v-model=\"currentTab\" @on-click=\"onhangeTab\">\n                <TabPane label=\"商品信息\" name=\"1\"></TabPane>\n                <TabPane label=\"商品详情\" name=\"2\"></TabPane>\n                <TabPane label=\"其他设置\" name=\"3\"></TabPane>\n            </Tabs>\n            <Form class=\"formValidate mt35\" ref=\"formValidate\" :rules=\"ruleValidate\" :model=\"formValidate\" :label-width=\"120\" label-position=\"right\" @submit.native.prevent>\n                <Row :gutter=\"24\" type=\"flex\" v-show=\"currentTab === '1'\">\n                    <!-- 商品信息-->\n                    <Col span=\"24\">\n                        <FormItem label=\"商品名称：\" prop=\"store_name\">\n                            <Input v-model=\"formValidate.store_name\" placeholder=\"请输入商品名称\" class=\"perW50\"/>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"商品分类：\" prop=\"cate_id\">\n                            <Select v-model=\"formValidate.cate_id\" multiple class=\"perW50\">\n                                <Option v-for=\"item in treeSelect\" :disabled=\"item.pid === 0\" :value=\"item.id\" :key=\"item.id\">{{ item.html + item.cate_name }}</Option>\n                            </Select>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"商品关键字：\" prop=\"\">\n                            <Input v-model=\"formValidate.keyword\" placeholder=\"请输入商品关键字\" class=\"perW50\"/>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"单位：\" prop=\"unit_name\">\n                            <Input v-model=\"formValidate.unit_name\"  placeholder=\"请输入单位\" class=\"perW50\"/>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"商品简介：\" prop=\"\">\n                            <Input v-model=\"formValidate.store_info\" type=\"textarea\" :rows=\"3\" placeholder=\"请输入商品简介\" class=\"perW50\"/>\n                        </FormItem>\n                    </Col>\n                    <!--<Col v-bind=\"grid2\">-->\n                        <!--<FormItem label=\"邮费：\">-->\n                            <!--<InputNumber  v-model=\"formValidate.postage\" placeholder=\"请输入邮费\"  />-->\n                        <!--</FormItem>-->\n                    <!--</Col>-->\n                    <Col span=\"24\">\n                        <FormItem label=\"商品封面图：\" prop=\"image\">\n                            <div class=\"pictrueBox\" @click=\"modalPicTap('dan','danFrom')\">\n                                <div class=\"pictrue\" v-if=\"formValidate.image\">\n                                    <img v-lazy=\"formValidate.image\">\n                                    <Input v-model=\"formValidate.image\" style=\"display: none\"></Input>\n                                </div>\n                                <div class=\"upLoad acea-row row-center-wrapper\" v-else>\n                                    <Input v-model=\"formValidate.image\" style=\"display: none\"></Input>\n                                    <Icon type=\"ios-camera-outline\" size=\"26\"/>\n                                </div>\n                            </div>\n                        </FormItem>\n                    </Col>\n                  <Col span=\"24\">\n                    <FormItem label=\"商品推荐图：\">\n                      <div class=\"pictrueBox\" @click=\"modalPicTap('dan','recommend_image')\">\n                        <div class=\"pictrue\" v-if=\"formValidate.recommend_image\">\n                          <img v-lazy=\"formValidate.recommend_image\">\n                          <Input v-model=\"formValidate.recommend_image\" style=\"display: none\"></Input>\n                        </div>\n                        <div class=\"upLoad acea-row row-center-wrapper\" v-else>\n                          <Input v-model=\"formValidate.recommend_image\" style=\"display: none\"></Input>\n                          <Icon type=\"ios-camera-outline\" size=\"26\"/>\n                        </div>\n                      </div>\n                    </FormItem>\n                  </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"商品轮播图：\" prop=\"slider_image\">\n                            <div class=\"acea-row\">\n                                <div class=\"pictrue\" v-for=\"(item,index) in formValidate.slider_image\" :key=\"index\"\n                                     draggable=\"true\"\n                                     @dragstart=\"handleDragStart($event, item)\"\n                                     @dragover.prevent=\"handleDragOver($event, item)\"\n                                     @dragenter=\"handleDragEnter($event, item)\"\n                                     @dragend=\"handleDragEnd($event, item)\">\n                                    <img v-lazy=\"item\">\n                                    <Button shape=\"circle\" icon=\"md-close\"  @click.native=\"handleRemove(index)\" class=\"btndel\"></Button>\n                                </div>\n                                <div v-if=\"formValidate.slider_image.length<10\" class=\"upLoad acea-row row-center-wrapper\" @click=\"modalPicTap('duo')\">\n                                    <Icon type=\"ios-camera-outline\" size=\"26\"/>\n                                </div>\n                                <Input v-model=\"formValidate.slider_image[0]\" style=\"display: none\"></Input>\n                            </div>\n                            <div class=\"tips\">(最多10张)</div>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"主图视频：\" prop=\"video_link\">\n                            <Input class=\"perW50\" v-model=\"videoLink\" placeholder=\"请输入视频链接\"/>\n                            <input type=\"file\" ref='refid' @change=\"zh_uploadFile_change\" style=\"display:none\">\n                            <Button type=\"primary\" icon=\"ios-cloud-upload-outline\" class=\"uploadVideo\" @click=\"zh_uploadFile\">{{videoLink ? '确认添加' : '上传视频'}}</Button>\n                            <Progress :percent = progress :stroke-width=\"5\" v-if=\"upload.videoIng\" />\n                            <div class=\"iview-video-style\" v-if=\"formValidate.video_link\">\n                                <video style=\"width:100%;height: 100%!important;border-radius: 10px;\" :src=\"formValidate.video_link\" controls=\"controls\">\n                                    您的浏览器不支持 video 标签。\n                                </video>\n                                <div class=\"mark\">\n                                </div>\n                                <Icon type=\"ios-trash-outline\" class=\"iconv\" @click=\"delVideo\"/>\n                            </div>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"商品规格：\" props=\"spec_type\">\n                            <RadioGroup v-model=\"formValidate.spec_type\"  @on-change=\"changeSpec\">\n                                <Radio :label=\"0\" class=\"radio\">单规格</Radio>\n                                <Radio :label=\"1\">多规格</Radio>\n                            </RadioGroup>\n                        </FormItem>\n                    </Col>\n                    <!-- 多规格添加-->\n                    <Col span=\"24\" v-if=\"formValidate.spec_type === 1\" class=\"noForm\">\n                        <Col span=\"24\">\n                            <FormItem label=\"选择规格：\" prop=\"\">\n                                <div  class=\"acea-row row-middle\">\n                                    <Select v-model=\"formValidate.selectRule\" style=\"width: 23%;\">\n                                        <Option v-for=\"(item, index) in ruleList\" :value=\"item.rule_name\" :key=\"index\">{{ item.rule_name }}</Option>\n                                    </Select>\n                                    <Button type=\"primary\" class=\"mr20\" @click=\"confirm\">确认</Button>\n                                    <Button @click=\"addRule\">添加规格模板</Button>\n                                </div>\n                            </FormItem>\n                        </Col>\n                        <Col span=\"24\">\n                            <FormItem v-if=\"attrs.length!==0\">\n                                <draggable\n                                        class=\"dragArea list-group\"\n                                        :list=\"attrs\"\n                                        group=\"peoples\"\n                                        handle=\".move-icon\"\n                                        :move=\"checkMove\"\n                                        @end=\"end\"\n                                >\n                                    <div v-for=\"(item, index) in attrs\" :key=\"index\" class=\"acea-row row-middle mb10\">\n                                        <div class=\"move-icon\">\n                                            <span class=\"iconfont icondrag2\"></span>\n                                        </div>\n                                        <div style=\"width: 90%\" :class=\"moveIndex===index?'borderStyle':''\">\n                                            <div class=\"acea-row row-middle\"><span class=\"mr5\">{{item.value}}</span><Icon type=\"ios-close-circle\" size=\"14\" class=\"curs\" @click=\"handleRemoveRole(index)\"/></div>\n                                            <div class=\"rulesBox\">\n                                                <draggable\n                                                        :list=\"item.detail\"\n                                                        handle=\".drag\"\n                                                >\n                                                    <Tag type=\"dot\" closable color=\"primary\" v-for=\"(j, indexn) in item.detail\" :key=\"indexn\" :name=\"j\" class=\"mr20 drag\" @on-close=\"handleRemove2(item.detail,indexn)\">{{j}}</Tag>\n                                                </draggable>\n                                                <Input search enter-button=\"添加\" placeholder=\"请输入属性名称\" v-model=\"item.detail.attrsVal\" @on-search=\"createAttr(item.detail.attrsVal,index)\" style=\"width: 150px\"/>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </draggable>\n                            </FormItem>\n                        </Col>\n                        <Col span=\"24\" v-if=\"createBnt\">\n                            <FormItem>\n                                <Button type=\"primary\" icon=\"md-add\" @click=\"addBtn\" class=\"mr15\">添加新规格</Button>\n                                <Button type=\"success\" @click=\"generate(1)\">立即生成</Button>\n                            </FormItem>\n                        </Col>\n                        <Col span=\"24\" v-if=\"showIput\">\n                            <Col  :xl=\"6\" :lg=\"9\" :md=\"10\" :sm=\"24\" :xs=\"24\" >\n                                <FormItem label=\"规格：\">\n                                    <Input  placeholder=\"请输入规格\" v-model=\"formDynamic.attrsName\"  />\n                                </FormItem>\n                            </Col>\n                            <Col  :xl=\"6\" :lg=\"9\" :md=\"10\" :sm=\"24\" :xs=\"24\">\n                                <FormItem label=\"规格值：\">\n                                    <Input v-model=\"formDynamic.attrsVal\" placeholder=\"请输入规格值\"  />\n                                </FormItem>\n                            </Col>\n                            <Col :xl=\"6\" :lg=\"5\" :md=\"10\" :sm=\"24\" :xs=\"24\" >\n                                <FormItem>\n                                    <Button type=\"primary\" class=\"mr15\"   @click=\"createAttrName\">确定</Button>\n                                    <Button  @click=\"offAttrName\" >取消</Button>\n                                </FormItem>\n                            </Col>\n                        </Col>\n                        <!-- 多规格设置-->\n                        <Col :xl=\"24\" :lg=\"24\" :md=\"24\" :sm=\"24\" :xs=\"24\" v-if=\"manyFormValidate.length && formValidate.header.length!==0 && attrs.length!==0\">\n                            <!-- 批量设置-->\n                            <Col span=\"24\">\n                                <FormItem label=\"批量设置：\" class=\"labeltop\">\n                                    <Table :data=\"oneFormBatch\" :columns=\"columns2\" border>\n                                        <template slot-scope=\"{ row, index }\" slot=\"pic\">\n                                            <div class=\"acea-row row-middle row-center-wrapper\" @click=\"modalPicTap('dan','duopi',index)\">\n                                                <div class=\"pictrue pictrueTab\" v-if=\"oneFormBatch[0].pic\"><img v-lazy=\"oneFormBatch[0].pic\"></div>\n                                                <div class=\"upLoad pictrueTab acea-row row-center-wrapper\"   v-else>\n                                                    <Icon type=\"ios-camera-outline\" size=\"21\"/>\n                                                </div>\n                                            </div>\n                                        </template>\n                                        <template slot-scope=\"{ row, index }\" slot=\"price\">\n                                            <InputNumber  v-model=\"oneFormBatch[0].price\" :min=\"0\"  class=\"priceBox\"></InputNumber>\n                                        </template>\n                                        <template slot-scope=\"{ row, index }\" slot=\"cost\">\n                                            <InputNumber  v-model=\"oneFormBatch[0].cost\" :min=\"0\"  class=\"priceBox\"></InputNumber>\n                                        </template>\n                                        <template slot-scope=\"{ row, index }\" slot=\"ot_price\">\n                                            <InputNumber  v-model=\"oneFormBatch[0].ot_price\" :min=\"0\"  class=\"priceBox\"></InputNumber>\n                                        </template>\n                                        <template slot-scope=\"{ row, index }\" slot=\"stock\">\n                                            <InputNumber  v-model=\"oneFormBatch[0].stock\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                                        </template>\n                                        <template slot-scope=\"{ row, index }\" slot=\"bar_code\">\n                                            <Input  v-model=\"oneFormBatch[0].bar_code\"></Input>\n                                        </template>\n                                        <template slot-scope=\"{ row, index }\" slot=\"weight\">\n                                            <InputNumber  v-model=\"oneFormBatch[0].weight\" :step=\"0.1\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                                        </template>\n                                        <template slot-scope=\"{ row, index }\" slot=\"volume\">\n                                            <InputNumber  v-model=\"oneFormBatch[0].volume\" :step=\"0.1\" :min=\"0\"  class=\"priceBox\"></InputNumber>\n                                        </template>\n                                        <template slot-scope=\"{ row, index }\" slot=\"action\">\n                                            <a @click=\"batchAdd\">批量添加</a>\n                                            <Divider type=\"vertical\"/>\n                                            <a @click=\"batchDel\">清空</a>\n                                        </template>\n                                    </Table>\n                                </FormItem>\n                            </Col>\n                            <!-- 多规格表格-->\n                            <Col span=\"24\">\n                                <FormItem label=\"商品属性：\" class=\"labeltop\">\n                                    <Table :data=\"manyFormValidate\" :columns=\"formValidate.header\" border>\n                                        <template slot-scope=\"{ row, index }\" slot=\"pic\">\n                                            <div class=\"acea-row row-middle row-center-wrapper\" @click=\"modalPicTap('dan','duoTable',index)\">\n                                                <div class=\"pictrue pictrueTab\" v-if=\"manyFormValidate[index].pic\"><img v-lazy=\"manyFormValidate[index].pic\"></div>\n                                                <div class=\"upLoad pictrueTab acea-row row-center-wrapper\"   v-else>\n                                                    <Icon type=\"ios-camera-outline\" size=\"21\"/>\n                                                </div>\n                                            </div>\n                                        </template>\n                                        <template slot-scope=\"{ row, index }\" slot=\"price\">\n                                            <InputNumber  v-model=\"manyFormValidate[index].price\" :min=\"0\"  class=\"priceBox\"></InputNumber>\n                                        </template>\n                                        <template slot-scope=\"{ row, index }\" slot=\"cost\">\n                                            <InputNumber  v-model=\"manyFormValidate[index].cost\" :min=\"0\"  class=\"priceBox\"></InputNumber>\n                                        </template>\n                                        <template slot-scope=\"{ row, index }\" slot=\"ot_price\">\n                                            <InputNumber  v-model=\"manyFormValidate[index].ot_price\" :min=\"0\"  class=\"priceBox\"></InputNumber>\n                                        </template>\n                                        <template slot-scope=\"{ row, index }\" slot=\"stock\">\n                                            <InputNumber  v-model=\"manyFormValidate[index].stock\" :min=\"0\" :precision=\"0\" class=\"priceBox\"></InputNumber>\n                                        </template>\n                                        <template slot-scope=\"{ row, index }\" slot=\"bar_code\">\n                                            <Input  v-model=\"manyFormValidate[index].bar_code\"></Input>\n                                        </template>\n                                        <template slot-scope=\"{ row, index }\" slot=\"weight\">\n                                            <InputNumber  v-model=\"manyFormValidate[index].weight\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                                        </template>\n                                        <template slot-scope=\"{ row, index }\" slot=\"volume\">\n                                            <InputNumber  v-model=\"manyFormValidate[index].volume\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                                        </template>\n                                        <template slot-scope=\"{ row, index }\" slot=\"action\">\n                                            <a @click=\"delAttrTable(index)\">删除</a>\n                                        </template>\n                                    </Table>\n                                </FormItem>\n                            </Col>\n                        </Col>\n                    </Col>\n                    <!-- 单规格表格-->\n                    <Col :xl=\"23\" :lg=\"24\" :md=\"24\" :sm=\"24\" :xs=\"24\" v-if=\"formValidate.spec_type === 0\">\n                        <FormItem >\n                            <Table :data=\"oneFormValidate\" :columns=\"columns\" border>\n                                <template slot-scope=\"{ row, index }\" slot=\"pic\">\n                                    <div class=\"acea-row row-middle row-center-wrapper\" @click=\"modalPicTap('dan','danTable',index)\">\n                                        <div class=\"pictrue pictrueTab\" v-if=\"oneFormValidate[0].pic\"><img v-lazy=\"oneFormValidate[0].pic\"></div>\n                                        <div class=\"upLoad pictrueTab acea-row row-center-wrapper\"   v-else>\n                                            <Icon type=\"ios-camera-outline\" size=\"21\"/>\n                                        </div>\n                                    </div>\n                                </template>\n                                <template slot-scope=\"{ row, index }\" slot=\"price\">\n                                    <InputNumber  v-model=\"oneFormValidate[0].price\" :min=\"0\"  class=\"priceBox\"></InputNumber>\n                                </template>\n                                <template slot-scope=\"{ row, index }\" slot=\"cost\">\n                                    <InputNumber  v-model=\"oneFormValidate[0].cost\" :min=\"0\"  class=\"priceBox\"></InputNumber>\n                                </template>\n                                <template slot-scope=\"{ row, index }\" slot=\"ot_price\">\n                                    <InputNumber  v-model=\"oneFormValidate[0].ot_price\" :min=\"0\"  class=\"priceBox\"></InputNumber>\n                                </template>\n                                <template slot-scope=\"{ row, index }\" slot=\"stock\">\n                                    <InputNumber  v-model=\"oneFormValidate[0].stock\" :min=\"0\" :precision=\"0\" class=\"priceBox\"></InputNumber>\n                                </template>\n                                <template slot-scope=\"{ row, index }\" slot=\"bar_code\">\n                                    <Input  v-model=\"oneFormValidate[0].bar_code\"></Input>\n                                </template>\n                                <template slot-scope=\"{ row, index }\" slot=\"weight\">\n                                    <InputNumber  v-model=\"oneFormValidate[0].weight\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                                </template>\n                                <template slot-scope=\"{ row, index }\" slot=\"volume\">\n                                    <InputNumber  v-model=\"oneFormValidate[0].volume\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                                </template>\n                            </Table>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"运费模板：\" prop=\"temp_id\">\n                            <div class=\"acea-row\">\n                                <Select v-model=\"formValidate.temp_id\" clearable class=\"mr20 perW50 maxW\">\n                                    <Option v-for=\"(item,index) in templateList\" :value=\"item.id\" :key=\"index\">{{ item.name }}</Option>\n                                </Select>\n                                <Button @click=\"addTemp\">添加运费模板</Button>\n                            </div>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"关联用户标签：\" prop=\"label_id\">\n                            <Select v-model=\"formValidate.label_id\" multiple class=\"perW50\">\n                                <Option v-for=\"item in labelSelect\" :value=\"item.id\" :key=\"item.id\">{{ item.label_name }}</Option>\n                            </Select>\n                        </FormItem>\n                    </Col>\n                </Row>\n                <!-- 商品详情-->\n                <Row v-show=\"currentTab === '2'\">\n                    <Col span=\"24\">\n                        <FormItem label=\"商品详情：\">\n                            <vue-ueditor-wrap v-model=\"formValidate.description\"  @beforeInit=\"addCustomDialog\"  :config=\"myConfig\"  style=\"width: 90%;\"></vue-ueditor-wrap>\n                        </FormItem>\n                    </Col>\n                </Row>\n                <!-- 其他设置-->\n                <Row type=\"flex\" justify=\"space-between\" v-show=\"currentTab === '3'\">\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"虚拟销量：\">\n                            <InputNumber class=\"perW50\" :min=\"0\" v-model=\"formValidate.ficti\" placeholder=\"请输入虚拟销量\"  />\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"额外赠送积分：\" prop=\"give_integral\">\n                            <InputNumber class=\"perW50\" v-model=\"formValidate.give_integral\" :min=\"0\" placeholder=\"请输入积分\" />\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"排序：\">\n                            <InputNumber :min=\"0\" class=\"perW50\" v-model=\"formValidate.sort\" placeholder=\"请输入排序\" />\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\">\n                        <FormItem label=\"单独设置：\">\n                            <CheckboxGroup v-model=\"formValidate.is_sub\" @on-change=\"checkAllGroupChange\">\n                                <Checkbox :label=\"1\">佣金设置</Checkbox>\n                            </CheckboxGroup>\n                        </FormItem>\n                    </Col>\n                    <Col span=\"24\" v-if=\"formValidate.is_sub.length\">\n                        <!--单规格返佣-->\n                        <FormItem label=\"商品属性：\" v-if=\"formValidate.spec_type === 0\">\n                            <Table :data=\"oneFormValidate\" :columns=\"columnsInstall\" border>\n                                <template slot-scope=\"{ row, index }\" slot=\"pic\">\n                                    <div class=\"pictrue pictrueTab\"><img v-lazy=\"oneFormValidate[0].pic\"></div>\n                                </template>\n                                <template slot-scope=\"{ row, index }\" slot=\"price\">{{oneFormValidate[0].price}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"cost\">{{oneFormValidate[0].cost}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"ot_price\">{{oneFormValidate[0].ot_price}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"stock\">{{oneFormValidate[0].stock}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"bar_code\">{{oneFormValidate[0].bar_code}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"weight\">{{oneFormValidate[0].weight}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"volume\">{{oneFormValidate[0].volume}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"brokerage\">\n                                    <InputNumber  v-model=\"oneFormValidate[0].brokerage\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                                </template>\n                                <template slot-scope=\"{ row, index }\" slot=\"brokerage_two\">\n                                    <InputNumber  v-model=\"oneFormValidate[0].brokerage_two\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                                </template>\n                            </Table>\n                        </FormItem>\n                        <!--多规格返佣-->\n                        <FormItem label=\"批量设置：\" v-if=\"formValidate.spec_type === 1\">\n                            <span v-if=\"formValidate.is_sub.indexOf(1) > -1\">\n                                一级返佣：<InputNumber placeholder=\"请输入一级返佣\" :min=\"0\" class=\"columnsBox perW20\" v-model=\"manyBrokerage\"></InputNumber>\n                                二级返佣：<InputNumber placeholder=\"请输入二级返佣\" :min=\"0\" class=\"columnsBox perW20\" v-model=\"manyBrokerageTwo\"></InputNumber>\n                            </span>\n                            <Button type=\"primary\" @click=\"brokerageSetUp\">批量设置</Button>\n                        </FormItem>\n                        <FormItem label=\"商品属性：\" v-if=\"formValidate.spec_type === 1 && manyFormValidate.length\">\n                            <Table :data=\"manyFormValidate\" :columns=\"columnsInstal2\" border>\n                                <template slot-scope=\"{ row, index }\" slot=\"pic\">\n                                    <div class=\"pictrue pictrueTab\"><img v-lazy=\"manyFormValidate[index].pic\"></div>\n                                </template>\n                                <template slot-scope=\"{ row, index }\" slot=\"price\">{{manyFormValidate[index].price}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"cost\">{{manyFormValidate[index].cost}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"ot_price\">{{manyFormValidate[index].ot_price}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"stock\">{{manyFormValidate[index].stock}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"bar_code\">{{manyFormValidate[index].bar_code}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"weight\">{{manyFormValidate[index].weight}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"volume\">{{manyFormValidate[index].volume}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"brokerage\">\n                                    <InputNumber  v-model=\"manyFormValidate[index].brokerage\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                                </template>\n                                <template slot-scope=\"{ row, index }\" slot=\"brokerage_two\">\n                                    <InputNumber  v-model=\"manyFormValidate[index].brokerage_two\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                                </template>\n                            </Table>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"商品状态：\">\n                            <RadioGroup v-model=\"formValidate.is_show\" >\n                                <Radio :label=\"1\" class=\"radio\">上架</Radio>\n                                <Radio :label=\"0\">下架</Radio>\n                            </RadioGroup>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"热卖单品：\">\n                            <RadioGroup v-model=\"formValidate.is_hot\" >\n                                <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                                <Radio :label=\"0\">关闭</Radio>\n                            </RadioGroup>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"促销单品：\">\n                            <RadioGroup v-model=\"formValidate.is_benefit\" >\n                                <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                                <Radio :label=\"0\">关闭</Radio>\n                            </RadioGroup>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"精品推荐：\">\n                            <RadioGroup v-model=\"formValidate.is_best\" >\n                                <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                                <Radio :label=\"0\">关闭</Radio>\n                            </RadioGroup>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"首发新品：\">\n                            <RadioGroup v-model=\"formValidate.is_new\" >\n                                <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                                <Radio :label=\"0\">关闭</Radio>\n                            </RadioGroup>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"优品推荐：\">\n                            <RadioGroup v-model=\"formValidate.is_good\">\n                                <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                                <Radio :label=\"0\">关闭</Radio>\n                            </RadioGroup>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid3\">\n                        <FormItem label=\"活动优先级：\">\n                            <div class=\"color-list acea-row row-middle\">\n                                <div\n                                        class=\"color-item\" :class=\"activity[color]\"\n                                        v-for=\"color in formValidate.activity\" v-dragging=\"{ item: color, list: formValidate.activity, group: 'color' }\"\n                                        :key=\"color\"\n                                >{{color}}</div>\n                                <div class=\"tip\">可拖动按钮调整活动的优先展示顺序</div>\n                            </div>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid3\">\n                        <FormItem label=\"赠送优惠券：\">\n                            <div v-if=\"couponName.length\" class=\"mb20\">\n                                <Tag closable v-for=\"(item, index) in couponName\" :key=\"index\" @on-close=\"handleClose(item)\">{{item.title}}</Tag>\n                            </div>\n                            <Button type=\"primary\" @click=\"addCoupon\">添加优惠券</Button>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid3\">\n                        <FormItem label=\"商品口令：\">\n                            <Input v-model=\"formValidate.command_word\" placeholder=\"请输入商品口令\" style=\"width: 50%\"/>\n                        </FormItem>\n                    </Col>\n                </Row>\n                <FormItem>\n                    <Button v-if=\"currentTab !== '1'\" @click=\"upTab\">上一步</Button>\n                    <Button type=\"primary\" class=\"submission\" v-if=\"currentTab !== '3'\" @click=\"downTab\">下一步</Button>\n                    <Button type=\"primary\" :disabled=\"openSubimit\" class=\"submission\" @click=\"handleSubmit('formValidate')\" v-if=\"$route.params.id || currentTab === '3'\">保存</Button>\n                </FormItem>\n                <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\n            </Form>\n            <Modal v-model=\"modalPic\" width=\"950px\" scrollable  footer-hide closable title='上传商品图' :mask-closable=\"false\" :z-index=\"999\">\n                <uploadPictures :isChoice=\"isChoice\" @getPic=\"getPic\" @getPicD=\"getPicD\" :gridBtn=\"gridBtn\" :gridPic=\"gridPic\" v-if=\"modalPic\"></uploadPictures>\n            </Modal>\n        </Card>\n        <freightTemplate :template=\"template\" v-on:changeTemplate=\"changeTemplate\" ref=\"templates\"></freightTemplate>\n        <add-attr ref=\"addattr\" @getList=\"userSearchs\"></add-attr>\n        <coupon-list ref=\"couponTemplates\" @nameId=\"nameId\" :couponids=\"formValidate.coupon_ids\" :updateIds=\"updateIds\" :updateName=\"updateName\"></coupon-list>\n    </div>\n</template>\n\n<script>\n// import COS from 'cos-js-sdk-v5'\n    import { mapState } from 'vuex'\n    import vuedraggable from 'vuedraggable'\n    import uploadPictures from '@/components/uploadPictures'\n    import freightTemplate from '@/components/freightTemplate'\n    import couponList from '@/components/couponList'\n    import addAttr from '../productAttr/addAttr'\n    import VueUeditorWrap from 'vue-ueditor-wrap'\n    import { productInfoApi, treeListApi, productAddApi, generateAttrApi, productGetRuleApi, productGetTemplateApi, productGetTempKeysApi, checkActivityApi, labelListApi } from '@/api/product'\n    export default {\n        name: 'product_productAdd',\n        components: { VueUeditorWrap, uploadPictures, freightTemplate, addAttr, couponList, draggable: vuedraggable },\n        data () {\n            return {\n                spinShow: false,\n                openSubimit:false,\n                grid2: {\n                    xl: 10,\n                    lg: 12,\n                    md: 12,\n                    sm: 24,\n                    xs: 24\n                },\n                grid3: {\n                    xl: 18,\n                    lg: 18,\n                    md: 20,\n                    sm: 24,\n                    xs: 24\n                },\n                // 批量设置表格data\n                oneFormBatch: [\n                    {\n                        pic: '',\n                        price: 0,\n                        cost: 0,\n                        ot_price: 0,\n                        stock: 0,\n                        bar_code: '',\n                        weight: 0,\n                        volume: 0\n                    }\n                ],\n                // 规格数据\n                formDynamic: {\n                    attrsName: '',\n                    attrsVal: ''\n                },\n                formDynamicNameData: [],\n                isBtn: false,\n                myConfig: {\n                    autoHeightEnabled: false, // 编辑器不自动被内容撑高\n                    initialFrameHeight: 500, // 初始容器高度\n                    initialFrameWidth: '100%', // 初始容器宽度\n                    UEDITOR_HOME_URL: '/admin/UEditor/',\n                    serverUrl: ''\n                },\n                columns2: [\n                    {\n                        title: '图片',\n                        slot: 'pic',\n                        align: 'center',\n                        minWidth: 80\n                    },\n                    {\n                        title: '售价',\n                        slot: 'price',\n                        align: 'center',\n                        minWidth: 95\n                    },\n                    {\n                        title: '成本价',\n                        slot: 'cost',\n                        align: 'center',\n                        minWidth: 95\n                    },\n                    {\n                        title: '原价',\n                        slot: 'ot_price',\n                        align: 'center',\n                        minWidth: 95\n                    },\n                    {\n                        title: '库存',\n                        slot: 'stock',\n                        align: 'center',\n                        minWidth: 95\n                    },\n                    {\n                        title: '商品编号',\n                        slot: 'bar_code',\n                        align: 'center',\n                        minWidth: 120\n                    },\n                    {\n                        title: '重量（KG）',\n                        slot: 'weight',\n                        align: 'center',\n                        minWidth: 95\n                    },\n                    {\n                        title: '体积(m³)',\n                        slot: 'volume',\n                        align: 'center',\n                        minWidth: 95\n                    },\n                    {\n                        title: '操作',\n                        slot: 'action',\n                        fixed: 'right',\n                        align: 'center',\n                        minWidth: 140\n                    }\n                ],\n                columns: [],\n                columnsInstall: [],\n                columnsInstal2: [],\n                gridPic: {\n                    xl: 6,\n                    lg: 8,\n                    md: 12,\n                    sm: 12,\n                    xs: 12\n                },\n                gridBtn: {\n                    xl: 4,\n                    lg: 8,\n                    md: 8,\n                    sm: 8,\n                    xs: 8\n                },\n                formValidate: {\n                    store_name: '',\n                    cate_id: [],\n                    label_id: [],\n                    keyword: '',\n                    unit_name: '',\n                    store_info: '',\n                    image: '',\n                    recommend_image: '',\n                    slider_image: [],\n                    description: '',\n                    ficti: 0,\n                    give_integral: 0,\n                    sort: 0,\n                    is_show: 1,\n                    is_hot: 0,\n                    is_benefit: 0,\n                    is_best: 0,\n                    is_new: 0,\n                    is_good: 0,\n                    is_postage: 0,\n                    is_sub: [],\n                    id: 0,\n                    spec_type: 0,\n                    video_link: '',\n                    // postage: 0,\n                    temp_id: '',\n                    attrs: [],\n                    items: [\n                        {\n                            pic: '',\n                            price: 0,\n                            cost: 0,\n                            ot_price: 0,\n                            stock: 0,\n                            bar_code: ''\n                        }\n                    ],\n                    activity: ['默认', '秒杀', '砍价', '拼团'],\n                    couponName: [],\n                    header: [],\n                    selectRule: '',\n                    coupon_ids: [],\n                    command_word: ''\n                },\n                ruleList: [],\n                templateList: [],\n                createBnt: false,\n                showIput: false,\n                manyFormValidate: [],\n                // 单规格表格data\n                oneFormValidate: [\n                    {\n                        pic: '',\n                        price: 0,\n                        cost: 0,\n                        ot_price: 0,\n                        stock: 0,\n                        bar_code: '',\n                        weight: 0,\n                        volume: 0,\n                        brokerage: 0,\n                        brokerage_two: 0,\n                        vip_price: 0\n                    }\n                ],\n                images: [],\n                imagesTable: '',\n                currentTab: '1',\n                isChoice: '',\n                grid: {\n                    xl: 8,\n                    lg: 8,\n                    md: 12,\n                    sm: 24,\n                    xs: 24\n                },\n                loading: false,\n                modalPic: false,\n                template: false,\n                uploadList: [],\n                treeSelect: [],\n                labelSelect: [],\n                picTit: '',\n                tableIndex: 0,\n                ruleValidate: {\n                    store_name: [\n                        { required: true, message: '请输入商品名称', trigger: 'blur' }\n                    ],\n                    cate_id: [\n                        { required: true, message: '请选择商品分类', trigger: 'change', type: 'array', min: '1' }\n                    ],\n                    keyword: [\n                        { required: true, message: '请输入商品关键字', trigger: 'blur' }\n                    ],\n                    unit_name: [\n                        { required: true, message: '请输入单位', trigger: 'blur' }\n                    ],\n                    store_info: [\n                        { required: true, message: '请输入商品简介', trigger: 'blur' }\n                    ],\n                    image: [\n                        { required: true, message: '请上传商品图', trigger: 'change' }\n                    ],\n                    slider_image: [\n                        { required: true, message: '请上传商品轮播图', type: 'array', trigger: 'change' }\n                    ],\n                    spec_type: [\n                        { required: true, message: '请选择商品规格', trigger: 'change' }\n                    ],\n                    selectRule: [\n                        { required: true, message: '请选择商品规格属性', trigger: 'change' }\n                    ],\n                    temp_id: [\n                        { required: true, message: '请选择运费模板', trigger: 'change', type: 'number' }\n                    ],\n                    give_integral: [\n                        { type: \"integer\", message: \"请输入整数\" }\n                    ]\n                },\n                manyBrokerage: 0,\n                manyBrokerageTwo: 0,\n                manyVipPrice: 0,\n                upload: {\n                    videoIng: false // 是否显示进度条；\n                },\n                progress: 0, // 进度条默认0\n                videoLink: '',\n                attrs: [],\n                activity: { '默认': 'red', '秒杀': 'blue', '砍价': 'green', '拼团': 'yellow' },\n                couponName: [],\n                updateIds:[],\n                updateName:[],\n                rakeBack:[\n                    {\n                        title: '一级返佣(元)',\n                        slot: 'brokerage',\n                        align: 'center',\n                        width: 95\n                    },\n                    {\n                        title: '二级返佣(元)',\n                        slot: 'brokerage_two',\n                        align: 'center',\n                        width: 95\n                    }\n                ],\n                columnsInstalM:[],\n                moveIndex:''\n            }\n        },\n        computed: {\n            labelBottom () {\n                return this.isMobile ? undefined : 15\n            }\n        },\n        created () {\n            this.columns = this.columns2.slice(0, 8);\n        },\n        mounted () {\n            if (this.$route.params.id !== '0' && this.$route.params.id) {\n                this.getInfo()\n            }\n            this.goodsCategory()\n            this.productGetRule()\n            this.productGetTemplate()\n            this.userLabel()\n        },\n        methods: {\n            checkMove(evt){\n                this.moveIndex = evt.draggedContext.index;\n            },\n            end(){\n                this.moveIndex = '';\n            },\n            checkAllGroupChange(data) {\n                this.checkAllGroup(data);\n            },\n            checkAllGroup(data){\n                if(this.formValidate.spec_type === 0){\n                    if(data.indexOf(0) > -1){\n                        this.columnsInstall = this.columns2.slice(0, 4).concat(this.member)\n                    }else if(data.indexOf(1) > -1){\n                        this.columnsInstall = this.columns2.slice(0, 4).concat(this.rakeBack);\n                    }else {\n                        this.columnsInstall = this.columns2.slice(0, 4)\n                    }\n                    if(data.length === 2){\n                        this.columnsInstall = this.columns2.slice(0, 4).concat(this.rakeBack).concat(this.member);\n                    }\n                }else {\n                    if(data.indexOf(0) > -1){\n                        this.columnsInstal2 = this.columnsInstalM.slice(0, 4).concat(this.member)\n                    }else if(data.indexOf(1) > -1){\n                        this.columnsInstal2 = this.columnsInstalM.slice(0, 4).concat(this.rakeBack);\n                    }else {\n                        this.columnsInstal2 = this.columnsInstalM.slice(0, 4)\n                    }\n                    if(data.length === 2){\n                        console.log('kjhhhhhhhhhhhhhhhhhooo');\n                        this.columnsInstal2 = this.columnsInstalM.slice(0, 4).concat(this.rakeBack).concat(this.member);\n                    }\n                }\n            },\n            // 添加优惠券\n            addCoupon () {\n                this.$refs.couponTemplates.isTemplate = true\n                this.$refs.couponTemplates.tableList()\n            },\n            //对象数组去重；\n            unique(arr) {\n                const res = new Map();\n                return arr.filter((arr) => !res.has(arr.id) && res.set(arr.id, 1))\n            },\n            nameId (id,names) {\n                this.formValidate.coupon_ids = id;\n                this.couponName = this.unique(names);\n            },\n            handleClose (name) {\n                let index = this.couponName.indexOf(name);\n                this.couponName.splice(index, 1);\n                let couponIds = this.formValidate.coupon_ids;\n                couponIds.splice(index, 1);\n                this.updateIds = couponIds;\n                this.updateName = this.couponName;\n            },\n            // 运费模板\n            getList () {\n                this.productGetTemplate()\n            },\n            // 添加运费模板\n            addTemp () {\n                this.$refs.templates.isTemplate = true\n            },\n            // 删除视频；\n            delVideo () {\n                let that = this\n                that.$set(that.formValidate, 'video_link', '')\n            },\n            zh_uploadFile () {\n                if (this.videoLink) {\n                    this.formValidate.video_link = this.videoLink\n                } else {\n                    this.$refs.refid.click()\n                }\n            },\n            zh_uploadFile_change (evfile) {\n                let that = this\n                let suffix = evfile.target.files[0].name.substr(evfile.target.files[0].name.indexOf('.'))\n                if (suffix !== '.mp4') {\n                    return that.$Message.error('只能上传MP4文件')\n                }\n                productGetTempKeysApi().then(res => {\n                    that.$videoCloud.videoUpload({\n                        type: res.data.type,\n                        evfile: evfile,\n                        res: res,\n                        uploading (status, progress) {\n                            that.upload.videoIng = status\n                            console.log(status, progress)\n                        }\n                    }).then(res => {\n                        that.formValidate.video_link = res.url\n                        that.$Message.success('视频上传成功')\n                    }).catch(res => {\n                        that.$Message.error(res)\n                    })\n                }).catch(res => {\n                    that.$Message.error(res.msg);\n                });\n            },\n            // 上一页；\n            upTab () {\n                this.currentTab = (Number(this.currentTab) - 1).toString()\n            },\n            // 下一页；\n            downTab () {\n                this.currentTab = (Number(this.currentTab) + 1).toString()\n            },\n            // 属性弹窗回调函数；\n            userSearchs () {\n                this.productGetRule()\n            },\n            // 添加规则；\n            addRule () {\n                this.$refs.addattr.modal = true\n            },\n            // 批量设置分佣；\n            brokerageSetUp () {\n                let that = this\n                if(that.formValidate.is_sub.indexOf(1) > -1){\n                    if(that.manyBrokerage <= 0 || that.manyBrokerageTwo <= 0){\n                        return that.$Message.error('请填写返佣金额后进行批量添加')\n                    }\n                }else if(that.formValidate.is_sub.indexOf(0) > -1){\n                    if(that.manyVipPrice <= 0){\n                        return that.$Message.error('请填写会员价后进行批量添加')\n                    }\n                }\n                if(this.formValidate.is_sub.length===2){\n                    if(that.manyBrokerage <= 0 || that.manyBrokerageTwo <= 0 || that.manyVipPrice <= 0){\n                        return that.$Message.error('请填写完金额后进行批量添加')\n                    }\n                }\n                for (let val of that.manyFormValidate) {\n                    this.$set(val, 'brokerage', that.manyBrokerage)\n                    this.$set(val, 'brokerage_two', that.manyBrokerageTwo)\n                    this.$set(val, 'vip_price', that.manyVipPrice)\n                }\n            },\n            batchDel () {\n                this.oneFormBatch = [\n                    {\n                        pic: '',\n                        price: 0,\n                        cost: 0,\n                        ot_price: 0,\n                        stock: 0,\n                        bar_code: '',\n                        weight: 0,\n                        volume: 0\n                    }\n                ]\n            },\n            confirm () {\n                let that = this\n                that.createBnt = true\n                if (that.formValidate.selectRule.trim().length <= 0) {\n                    return that.$Message.error('请选择属性')\n                }\n                that.ruleList.forEach(function (item, index) {\n                    if (item.rule_name === that.formValidate.selectRule) {\n                        that.attrs = item.rule_value\n                    }\n                })\n            },\n            // 获取商品属性模板；\n            productGetRule () {\n                productGetRuleApi().then(res => {\n                    this.ruleList = res.data\n                })\n            },\n            // 获取运费模板；\n            productGetTemplate () {\n                productGetTemplateApi().then(res => {\n                    this.templateList = res.data\n                })\n            },\n            // 删除表格中的属性\n            delAttrTable (index) {\n                let id = this.$route.params.id\n                if (id) {\n                    checkActivityApi(id).then(res => {\n                        this.manyFormValidate.splice(index, 1)\n                        this.$Message.success(res.msg)\n                    }).catch(res => {\n                        this.$Message.error(res.msg);\n                    })\n                } else {\n                    this.manyFormValidate.splice(index, 1)\n                }\n            },\n            // 批量添加\n            batchAdd () {\n                // if (!this.oneFormBatch[0].pic || !this.oneFormBatch[0].price || !this.oneFormBatch[0].cost || !this.oneFormBatch[0].ot_price ||\n                //     !this.oneFormBatch[0].stock || !this.oneFormBatch[0].bar_code) return this.$Message.warning('请填写完整的批量设置内容！');\n                // if (!this.oneFormBatch[0].pic) {\n                //     return this.$Message.warning('请选择有效图片');\n                // }\n                for (let val of this.manyFormValidate) {\n                    if (this.oneFormBatch[0].pic) {\n                        this.$set(val, 'pic', this.oneFormBatch[0].pic)\n                    }\n                    if (this.oneFormBatch[0].price > 0) {\n                        this.$set(val, 'price', this.oneFormBatch[0].price)\n                    }\n                    if (this.oneFormBatch[0].cost > 0) {\n                        this.$set(val, 'cost', this.oneFormBatch[0].cost)\n                    }\n                    if (this.oneFormBatch[0].ot_price > 0) {\n                        this.$set(val, 'ot_price', this.oneFormBatch[0].ot_price)\n                    }\n                    if (this.oneFormBatch[0].stock > 0) {\n                        this.$set(val, 'stock', this.oneFormBatch[0].stock)\n                    }\n                    if (this.oneFormBatch[0].bar_code !== '') {\n                        this.$set(val, 'bar_code', this.oneFormBatch[0].bar_code)\n                    }\n                    if (this.oneFormBatch[0].weight > 0) {\n                        this.$set(val, 'weight', this.oneFormBatch[0].weight)\n                    }\n                    if (this.oneFormBatch[0].volume > 0) {\n                        this.$set(val, 'volume', this.oneFormBatch[0].volume)\n                    }\n                    // this.$set(val, 'price', this.oneFormBatch[0].price);\n                    // this.$set(val, 'cost', this.oneFormBatch[0].cost);\n                    // this.$set(val, 'ot_price', this.oneFormBatch[0].ot_price);\n                    // this.$set(val, 'stock', this.oneFormBatch[0].stock);\n                    // this.$set(val, 'bar_code', this.oneFormBatch[0].bar_code);\n                    // this.$set(val, 'weight', this.oneFormBatch[0].weight);\n                    // this.$set(val, 'volume', this.oneFormBatch[0].volume);\n                }\n            },\n            // 添加按钮\n            addBtn () {\n                this.clearAttr()\n                this.createBnt = false\n                this.showIput = true\n            },\n            // 立即生成\n            generate (type) {\n                generateAttrApi({ attrs: this.attrs }, this.formValidate.id, type).then(res => {\n                    let info = res.data.info, header1 = JSON.parse(JSON.stringify(info.header));\n                    this.manyFormValidate = info.value;\n                    this.formValidate.header = header1;\n                    let header = info.header;\n                    // let brokerage = [\n                    //     {\n                    //         title: '一级返佣',\n                    //         slot: 'brokerage',\n                    //         align: 'center',\n                    //         width: 95\n                    //     },\n                    //     {\n                    //         title: '二级返佣',\n                    //         slot: 'brokerage_two',\n                    //         align: 'center',\n                    //         width: 95\n                    //     }\n                    // ];\n                    header.pop();\n                    // this.columnsInstal2 = info.header.concat(brokerage);\n                    this.columnsInstalM = info.header;\n                    this.checkAllGroup(this.formValidate.is_sub);\n                    if (!this.$route.params.id && this.formValidate.spec_type === 1) {\n                        this.manyFormValidate.map((item) => {\n                            item.pic = this.formValidate.image\n                        });\n                        this.oneFormBatch[0].pic = this.formValidate.image;\n                    }\n                }).catch(res => {\n                    this.$Message.error(res.msg);\n                })\n            },\n            // 取消\n            offAttrName () {\n                this.showIput = false\n                this.createBnt = true\n            },\n            clearAttr () {\n                this.formDynamic.attrsName = ''\n                this.formDynamic.attrsVal = ''\n            },\n            // 删除规格\n            handleRemoveRole (index) {\n                this.attrs.splice(index, 1)\n                this.manyFormValidate.splice(index, 1)\n            },\n            // 删除属性\n            handleRemove2 (item, index) {\n                item.splice(index, 1)\n            },\n            // 添加规则名称\n            createAttrName () {\n                if (this.formDynamic.attrsName && this.formDynamic.attrsVal) {\n                    let data = {\n                        value: this.formDynamic.attrsName,\n                        detail: [\n                            this.formDynamic.attrsVal\n                        ]\n                    }\n                    this.attrs.push(data)\n                    var hash = {}\n                    this.attrs = this.attrs.reduce(function (item, next) {\n                        /* eslint-disable */\n                        hash[next.value] ? '' : hash[next.value] = true && item.push(next);\n                        return item\n                    }, [])\n                    this.clearAttr();\n                    this.showIput = false;\n                    this.createBnt = true;\n                } else {\n                    this.$Message.warning('请添加完整的规格！');\n                }\n            },\n            // 添加属性\n            createAttr (num, idx) {\n                if (num) {\n                    this.attrs[idx].detail.push(num);\n                    var hash = {};\n                    this.attrs[idx].detail = this.attrs[idx].detail.reduce(function (item, next) {\n                        /* eslint-disable */\n                        hash[next] ? '' : hash[next] = true && item.push(next);\n                        return item\n                    }, [])\n                } else {\n                    this.$Message.warning('请添加属性');\n                }\n            },\n            // 商品分类；\n            goodsCategory () {\n                treeListApi(1).then(res => {\n                    this.treeSelect = res.data;\n                }).catch(res => {\n                    this.$Message.error(res.msg);\n                })\n            },\n            // 用户标签\n            userLabel () {\n                labelListApi().then(res => {\n                    this.labelSelect = res.data.list;\n                }).catch(res => {\n                    this.$Message.error(res.msg);\n                })\n            },\n            // 改变规格\n            changeSpec () {\n                this.formValidate.is_sub = [];\n                let id = this.$route.params.id;\n                if (id) {\n                    checkActivityApi(id).then(res => {\n\n                    }).catch(res => {\n                        this.formValidate.spec_type = this.spec_type;\n                        this.$Message.error(res.msg);\n                    })\n                }\n            },\n            // 详情\n            getInfo () {\n                let that = this;\n                that.spinShow = true;\n                productInfoApi(that.$route.params.id).then(async res => {\n                    let data = res.data.productInfo;\n                    let cate_id = data.cate_id.map(Number);\n                    let label_id = data.label_id.map(Number);\n                    this.attrs = data.items || [];\n                    let ids = [];\n                    // let names = [];\n                    data.coupons.map((item) => {\n                        ids.push(item.id);\n                        // names.push(item.title);\n                    });\n                    that.formValidate = data;\n                    that.couponName = data.coupons;\n                    that.formValidate.coupon_ids = ids;\n                    that.updateIds = ids;\n                    that.updateName = data.coupons;\n                    that.formValidate.cate_id = cate_id;\n                    that.formValidate.label_id = label_id;\n                    that.oneFormValidate = [data.attr];\n                    that.formValidate.header = [];\n                    that.generate(0);\n                    that.manyFormValidate = data.attrs;\n                    that.spec_type = data.spec_type;\n                    if(data.spec_type === 0){\n                        that.manyFormValidate = [];\n                    }else {\n                        that.createBnt = true;\n                        that.oneFormValidate = [\n                            {\n                                pic: '',\n                                price: 0,\n                                cost: 0,\n                                ot_price: 0,\n                                stock: 0,\n                                bar_code: '',\n                                weight:0,\n                                volume:0,\n                                brokerage:0,\n                                brokerage_two:0,\n                                vip_price:0\n                            }\n                        ]\n                    }\n                    this.spinShow = false;\n                }).catch(res => {\n                    this.spinShow = false;\n                    this.$Message.error(res.msg);\n                })\n            },\n            // tab切换\n            onhangeTab (name) {\n                this.currentTab = name;\n            },\n            handleRemove (i) {\n                this.images.splice(i, 1);\n                this.formValidate.slider_image.splice(i, 1);\n            },\n            // 关闭图片上传模态框\n            changeCancel (msg) {\n                this.modalPic = false\n            },\n            // 点击商品图\n            modalPicTap (tit,picTit,index) {\n                this.modalPic = true;\n                this.isChoice = tit === 'dan' ? '单选' : '多选';\n                this.picTit = picTit;\n                this.tableIndex = index;\n            },\n            // 获取单张图片信息\n            getPic (pc) {\n                switch (this.picTit) {\n                    case 'danFrom':\n                        this.formValidate.image = pc.att_dir;\n                        if(!this.$route.params.id){\n                            if(this.formValidate.spec_type === 0){\n                                this.oneFormValidate[0].pic =  pc.att_dir;\n                            }else{\n                                this.manyFormValidate.map((item) => {\n                                    item.pic = pc.att_dir;\n                                });\n                                this.oneFormBatch[0].pic =  pc.att_dir;\n                            }\n                        }\n                        break;\n                    case 'danTable':\n                        this.oneFormValidate[this.tableIndex].pic = pc.att_dir;\n                        break;\n                    case 'duopi':\n                        this.oneFormBatch[this.tableIndex].pic = pc.att_dir;\n                        break;\n                  case 'recommend_image':\n                        this.formValidate.recommend_image=pc.att_dir;\n                        break;\n                  default:\n                        this.manyFormValidate[this.tableIndex].pic=pc.att_dir;\n                }\n                this.modalPic = false;\n            },\n            // 获取多张图信息\n            getPicD (pc) {\n                this.images = pc;\n                this.images.map((item) => {\n                    this.formValidate.slider_image.push(item.att_dir);\n                    this.formValidate.slider_image = this.formValidate.slider_image.splice(0,10);\n                });\n                this.modalPic = false;\n            },\n            // 提交\n            handleSubmit (name) {\n                this.$refs[name].validate((valid) => {\n                    if (valid) {\n                        if(this.formValidate.spec_type ===0 ){\n                            this.formValidate.attrs = this.oneFormValidate;\n                            this.formValidate.header = [];\n                            this.formValidate.items = [];\n                        }else{\n                            this.formValidate.items = this.attrs;\n                            this.formValidate.attrs = this.manyFormValidate;\n                        }\n                        if(this.formValidate.spec_type === 1 && this.manyFormValidate.length===0){\n                            return this.$Message.warning('商品信息-请点击生成多规格');\n                        }\n                        let item = this.formValidate.attrs;\n                        if(this.formValidate.is_sub[0] === 1){\n                            for (let i = 0; i < item.length; i++) {\n                                if(item[i].brokerage === null || item[i].brokerage_two === null){\n                                    return this.$Message.error('其他设置- 一二级返佣不能为空');\n                                }\n                            }\n                        }else{\n                            for (let i = 0; i < item.length; i++) {\n                                if(item[i].vip_price === null){\n                                    return this.$Message.error('其他设置-会员价不能为空');\n                                }\n                            }\n                        }\n                        if(this.formValidate.is_sub.length === 2){\n                            for (let i = 0; i < item.length; i++) {\n                                if(item[i].brokerage === null || item[i].brokerage_two === null || item[i].vip_price === null){\n                                    return this.$Message.error('其他设置- 一二级返佣和会员价不能为空');\n                                }\n                            }\n                        }\n                        this.openSubimit = true;\n                        productAddApi(this.formValidate).then(async res => {\n                            this.openSubimit = false;\n                            this.$Message.success(res.msg);\n                            setTimeout(() => {\n                                this.$router.push({ path: '/admin/product/product_list' });\n                            }, 500);\n                        }).catch(res => {\n                            this.openSubimit = false;\n                            this.$Message.error(res.msg);\n                        })\n                    } else {\n                        if(!this.formValidate.store_name){\n                            return this.$Message.warning(\"商品信息-商品名称不能为空\");\n                        }else if(!this.formValidate.cate_id.length){\n                            return this.$Message.warning(\"商品信息-商品分类不能为\");\n                        }else if(!this.formValidate.keyword){\n                            return this.$Message.warning(\"商品信息-商品关键字不能为\");\n                        }else if(!this.formValidate.unit_name){\n                            return this.$Message.warning(\"商品信息-商品单位不能为\");\n                        }else if(!this.formValidate.store_info){\n                            return this.$Message.warning(\"商品信息-商品简介不能为\");\n                        }else if(!this.formValidate.image){\n                            return this.$Message.warning(\"商品信息-商品封面图不能为\");\n                        }else if(!this.formValidate.slider_image.length){\n                            return this.$Message.warning(\"商品信息-商品轮播图不能为\");\n                        }else if(!this.formValidate.temp_id){\n                            return this.$Message.warning(\"商品信息-运费模板不能为\");\n                        }\n                    }\n                })\n            },\n            changeTemplate (msg) {\n                this.template = msg\n            },\n            // 表单验证\n            validate (prop, status, error) {\n                if (status === false) {\n                    this.$Message.warning(error);\n                }\n            },\n            // 移动\n            handleDragStart (e, item) {\n                this.dragging = item;\n            },\n            handleDragEnd (e, item) {\n                this.dragging = null\n            },\n            handleDragOver (e) {\n                e.dataTransfer.dropEffect = 'move'\n            },\n            handleDragEnter (e, item) {\n                e.dataTransfer.effectAllowed = 'move'\n                if (item === this.dragging) {\n                    return\n                }\n                const newItems = [...this.formValidate.slider_image]\n                const src = newItems.indexOf(this.dragging)\n                const dst = newItems.indexOf(item)\n                newItems.splice(dst, 0, ...newItems.splice(src, 1))\n                this.formValidate.slider_image = newItems;\n            },\n            // 添加自定义弹窗\n            addCustomDialog (editorId) {\n                window.UE.registerUI('test-dialog', function (editor, uiName) {\n                    // 创建 dialog\n                    let dialog = new window.UE.ui.Dialog({\n                        iframeUrl: '/admin/widget.images/index.html?fodder=dialog',\n                        editor: editor,\n                        name: uiName,\n                        title: '上传图片',\n                        cssRules: 'width:1200px;height:500px;padding:20px;'\n                    });\n                    this.dialog = dialog;\n                    let btn = new window.UE.ui.Button({\n                        name: 'dialog-button',\n                        title: '上传图片',\n                        cssRules: `background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;`,\n                        onclick: function () {\n                            // 渲染dialog\n                            dialog.render();\n                            dialog.open();\n                        }\n                    });\n                    return btn;\n                }, 37);\n                window.UE.registerUI('video-dialog', function (editor, uiName) {\n                    let dialog = new window.UE.ui.Dialog({\n                        iframeUrl: '/admin/widget.video/index.html?fodder=video',\n                        editor: editor,\n                        name: uiName,\n                        title: '上传视频',\n                        cssRules: 'width:1000px;height:500px;padding:20px;'\n                    });\n                    this.dialog = dialog;\n                    let btn = new window.UE.ui.Button({\n                        name: 'video-button',\n                        title: '上传视频',\n                        cssRules: `background-image: url(../../../assets/images/icons.png);background-position: -320px -20px;`,\n                        onclick: function () {\n                            // 渲染dialog\n                            dialog.render();\n                            dialog.open();\n                        }\n                    });\n                    return btn;\n                }, 38);\n            }\n        }\n    }\n</script>\n<style scoped lang=\"stylus\">\n    .list-group{\n        margin-left -8px\n    }\n    .borderStyle{\n        border: 1px solid #ccc;\n        padding: 8px;\n        border-radius: 4px;\n    }\n    .drag\n        cursor move\n    .move-icon{\n        width 30px\n        cursor move\n        margin-right 10px\n    }\n    .move-icon .icondrag2{\n        font-size: 26px;\n        color: #d8d8d8;\n    }\n\n    .maxW /deep/.ivu-select-dropdown{\n        max-width 600px;\n    }\n    #shopp-manager .ivu-table-wrapper\n      border-left: 1px solid #dcdee2;\n      border-top: 1px solid #dcdee2;\n    .noLeft\n        >>> .ivu-form-item-content\n         margin-left 0 !important\n    #shopp-manager .ivu-form-item{\n        position: relative;\n    }\n    #shopp-manager .ivu-form-item .tips{\n        position: absolute;\n        color: #999;\n        top: 29px;\n        left: -77px;\n        font-size: 12px;\n    }\n    .iview-video-style{\n        width: 40%;\n        height: 180px;\n        border-radius: 10px;\n        background-color: #707070;\n        margin-top: 10px;\n        position: relative;\n        overflow: hidden;\n    }\n    .iview-video-style .iconv{\n        color: #fff;\n        line-height: 180px;\n        width: 50px;\n        height: 50px;\n        display: inherit;\n        font-size: 26px;\n        position: absolute;\n        top: -74px;\n        left: 50%;\n        margin-left: -25px;\n    }\n    .iview-video-style .mark{\n        position: absolute;\n        width: 100%;\n        height: 30px;\n        top: 0;\n        background-color: rgba(0,0,0,.5);\n        text-align: center;\n    }\n        .uploadVideo\n            margin-left 10px;\n        .submission\n            margin-left 10px;\n        .color-list .tip{\n            color: #c9c9c9;\n        }\n        .color-list .color-item{\n            height: 30px;\n            line-height: 30px;\n            padding: 0 10px;\n            color:#fff;\n            margin-right :10px;\n        }\n        .color-list .color-item.blue{\n            background-color: #1E9FFF;\n        }\n        .color-list .color-item.yellow{\n            background-color: rgb(254, 185, 0);\n        }\n        .color-list .color-item.green{\n            background-color: #009688;\n        }\n        .color-list .color-item.red{\n            background-color: #ed4014;\n        }\n        .columnsBox\n            margin-right 10px\n        .priceBox\n            width 100%\n        .rulesBox\n            display flex\n            flex-wrap: wrap;\n        .pictrueBox\n            display inline-block;\n        .pictrueTab\n            width:40px !important;\n            height:40px !important;\n        .pictrue\n            width:60px;\n            height:60px;\n            border:1px dotted rgba(0,0,0,0.1);\n            margin-right:15px;\n            display: inline-block;\n            position: relative;\n            cursor: pointer;\n            img\n                width 100%\n                height 100%\n            .btndel\n                position: absolute;\n                z-index: 1;\n                width :20px !important;\n                height: 20px !important;\n                left: 46px;\n                top: -4px;\n        .upLoad {\n            width: 58px;\n            height: 58px;\n            line-height: 58px;\n            border: 1px dotted rgba(0, 0, 0, 0.1);\n            border-radius: 4px;\n            background: rgba(0, 0, 0, 0.02);\n            cursor: pointer;\n        }\n        .curs\n            cursor pointer\n        .inpWith\n            width 60%;\n        .labeltop\n            >>> .ivu-form-item-label\n                float: none !important;\n                display: inline-block !important;\n                margin-left: 120px !important;\n                width auto !important\n\n</style>\n"]}]}