{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/kefu/components/PriceChange.vue?vue&type=style&index=0&id=c0dbd7dc&scoped=true&lang=css&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/kefu/components/PriceChange.vue","mtime":1610680940000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmlucHV0ewogIGRpc3BsYXk6IGJsb2NrOwogIGhlaWdodDogMTAwJTsKICBiYWNrZ3JvdW5kOiBub25lOwogIGNvbG9yOiBpbmhlcml0OwogIG9wYWNpdHk6IDE7CiAgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6IGN1cnJlbnRjb2xvcjsKICBmb250OiBpbmhlcml0OwogIGxpbmUtaGVpZ2h0OiBpbmhlcml0OwogIGxldHRlci1zcGFjaW5nOiBpbmhlcml0OwogIHRleHQtYWxpZ246IGluaGVyaXQ7CiAgdGV4dC1pbmRlbnQ6IGluaGVyaXQ7CiAgdGV4dC10cmFuc2Zvcm06IGluaGVyaXQ7CiAgdGV4dC1zaGFkb3c6IGluaGVyaXQ7CiAgYm9yZGVyOiBub25lOwp9Ci8qQGltcG9ydCAnLi4vLi4vLi4vc3R5bGVzL3Jlc2V0LmNzcyc7Ki8KLnByaWNlQ2hhbmdle3Bvc2l0aW9uOmZpeGVkO3dpZHRoOjUuOHJlbTtoZWlnaHQ6Ni43cmVtO2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXItcmFkaXVzOjAuMXJlbTt0b3A6NTAlO2xlZnQ6NTAlO21hcmdpbi1sZWZ0Oi0yLjlyZW07bWFyZ2luLXRvcDotMy4zNXJlbTt6LWluZGV4Ojk5O3RyYW5zaXRpb246YWxsIDAuM3MgZWFzZS1pbi1vdXQgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAwLjNzIGVhc2UtaW4tb3V0IDBzOy1vLXRyYW5zaXRpb246YWxsIDAuM3MgZWFzZS1pbi1vdXQgMHM7LW1vei10cmFuc2l0aW9uOmFsbCAwLjNzIGVhc2UtaW4tb3V0IDBzOy13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDApOy1vLXRyYW5zZm9ybTpzY2FsZSgwKTstbW96LXRyYW5zZm9ybTpzY2FsZSgwKTstbXMtdHJhbnNmb3JtOnNjYWxlKDApOwogIHRyYW5zZm9ybTogc2NhbGUoMCk7b3BhY2l0eTowO30KLnByaWNlQ2hhbmdlLm9ue29wYWNpdHk6MTt0cmFuc2Zvcm06IHNjYWxlKDEpOy13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpOy1vLXRyYW5zZm9ybTpzY2FsZSgxKTstbW96LXRyYW5zZm9ybTpzY2FsZSgxKTstbXMtdHJhbnNmb3JtOnNjYWxlKDEpO30KLnByaWNlQ2hhbmdlIC5wcmljZVRpdGxle2JhY2tncm91bmQ6dXJsKCIuLi8uLi8uLi9hc3NldHMvaW1hZ2VzL3ByaWNldGl0bGUuanBnIikgbm8tcmVwZWF0O2JhY2tncm91bmQtc2l6ZToxMDAlIDEwMCU7d2lkdGg6MTAwJTtoZWlnaHQ6MS42cmVtO2JvcmRlci1yYWRpdXM6MC4xcmVtIDAuMXJlbSAwIDA7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjAuNHJlbTtjb2xvcjojZmZmO2xpbmUtaGVpZ2h0OjEuNnJlbTtwb3NpdGlvbjpyZWxhdGl2ZTt9Ci5wcmljZUNoYW5nZSAucHJpY2VUaXRsZSAuaWNvbmZvbnRZSXtwb3NpdGlvbjphYnNvbHV0ZTtmb250LXNpemU6MC40cmVtO3JpZ2h0OjAuMjZyZW07dG9wOjAuMjNyZW07d2lkdGg6MC40cmVtO2hlaWdodDowLjRyZW07bGluZS1oZWlnaHQ6MC40cmVtO30KLnByaWNlQ2hhbmdlIC5saXN0Q2hhbmdle3BhZGRpbmc6MCAwLjRyZW07fQoucHJpY2VDaGFuZ2UgLmxpc3RDaGFuZ2UgLml0ZW17aGVpZ2h0OjEuMDNyZW07Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2UzZTNlMztmb250LXNpemU6MC4zMnJlbTtjb2xvcjojMzMzO30KLnByaWNlQ2hhbmdlIC5saXN0Q2hhbmdlIC5pdGVtIC5tb25leXtjb2xvcjojNjY2O3dpZHRoOjNyZW07dGV4dC1hbGlnbjpyaWdodDt9Ci5wcmljZUNoYW5nZSAubGlzdENoYW5nZSAuaXRlbSAubW9uZXkgLmljb25mb250WUl7Zm9udC1zaXplOjAuMzJyZW07bWFyZ2luLWxlZnQ6MC4ycmVtO30KLnByaWNlQ2hhbmdlIC5saXN0Q2hhbmdlIC5pdGVtIC5tb25leSBpbnB1dHt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3RleHQtYWxpZ246cmlnaHQ7Y29sb3I6I2NjYztib3JkZXI6IG5vbmU7fQoucHJpY2VDaGFuZ2UgLmxpc3RDaGFuZ2UgLml0ZW0gLm1vbmV5IGlucHV0Lm9ue2NvbG9yOiM2NjY7fQoucHJpY2VDaGFuZ2UgLm1vZGlmeXtmb250LXNpemU6MC4zMnJlbTtjb2xvcjojZmZmO3dpZHRoOjQuOXJlbTtoZWlnaHQ6MC45cmVtO3RleHQtYWxpZ246Y2VudGVyO2xpbmUtaGVpZ2h0OjAuOXJlbTtib3JkZXItcmFkaXVzOjAuNDVyZW07YmFja2dyb3VuZC1jb2xvcjojMjI5MWY4O21hcmdpbjowLjUzcmVtIGF1dG8gMCBhdXRvO30KLnByaWNlQ2hhbmdlIC5tb2RpZnkxe2ZvbnQtc2l6ZTowLjMycmVtO2NvbG9yOiMzMTJiMmI7d2lkdGg6NC45cmVtO2hlaWdodDowLjlyZW07dGV4dC1hbGlnbjpjZW50ZXI7bGluZS1oZWlnaHQ6MC45cmVtO2JvcmRlci1yYWRpdXM6MC40NXJlbTtiYWNrZ3JvdW5kLWNvbG9yOiNlZWU7bWFyZ2luOjAuM3JlbSBhdXRvIDAgYXV0bzt9Ci5wcmljZUNoYW5nZSAubGlzdENoYW5nZSB0ZXh0YXJlYSB7CiAgYm9yZGVyOiAxcHggc29saWQgI2VlZTsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDJyZW07CiAgbWFyZ2luLXRvcDogMC41cmVtOwogIGJvcmRlci1yYWRpdXM6IDAuMXJlbTsKICBjb2xvcjogIzMzMzsKICBwYWRkaW5nOiAwLjJyZW07CiAgZm9udC1zaXplOiAwLjNyZW07Cn0K"},{"version":3,"sources":["PriceChange.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PriceChange.vue","sourceRoot":"src/pages/kefu/components","sourcesContent":["<template>\n  <div>\n    <div class=\"priceChange\" :class=\"change === true ? 'on' : ''\">\n      <div class=\"priceTitle\">\n        {{\n        status === 0\n        ? orderInfo.refund_status === 1\n        ? \"立即退款\"\n        : \"一键改价\"\n        : \"订单备注\"\n        }}\n        <span class=\"iconfontYI icon-guanbi\" @click=\"close\"></span>\n      </div>\n      <div class=\"listChange\" v-if=\"status === 0\">\n        <div\n                class=\"item acea-row row-between-wrapper\"\n                v-if=\"orderInfo.refund_status === 0\"\n        >\n          <div>商品总价(¥)</div>\n          <div class=\"money\">\n            {{ orderInfo.total_price }}<span class=\"iconfontYI icon-suozi\"></span>\n          </div>\n        </div>\n        <div\n                class=\"item acea-row row-between-wrapper\"\n                v-if=\"orderInfo.refund_status === 0\"\n        >\n          <div>原始邮费(¥)</div>\n          <div class=\"money\">\n            {{ orderInfo.pay_postage }}<span class=\"iconfontYI icon-suozi\"></span>\n          </div>\n        </div>\n        <div\n                class=\"item acea-row row-between-wrapper\"\n                v-if=\"orderInfo.refund_status === 0\"\n        >\n          <div>实际支付(¥)</div>\n          <div class=\"money\">\n            <input\n                    type=\"text\"\n                    v-model=\"price\"\n                    :class=\"focus === true ? 'on' : ''\"\n                    @focus=\"priceChange\"\n            />\n          </div>\n        </div>\n        <div\n                class=\"item acea-row row-between-wrapper\"\n                v-if=\"orderInfo.refund_status === 1\"\n        >\n          <div>实际支付(¥)</div>\n          <div class=\"money\">\n            {{ orderInfo.pay_price }}<span class=\"iconfontYI icon-suozi\"></span>\n          </div>\n        </div>\n        <div\n                class=\"item acea-row row-between-wrapper\"\n                v-if=\"orderInfo.refund_status === 1\"\n        >\n          <div>退款金额(¥)</div>\n          <div class=\"money\">\n            <input\n                    type=\"text\"\n                    v-model=\"refund_price\"\n                    :class=\"focus === true ? 'on' : ''\"\n                    @focus=\"priceChange\"\n            />\n          </div>\n        </div>\n      </div>\n      <div class=\"listChange\" v-else>\n        <textarea\n                :placeholder=\"\n            orderInfo.remark ? orderInfo.remark : '请填写备注信息...'\n          \"\n                v-model=\"remark\" maxlength=\"100\"\n        ></textarea>\n      </div>\n      <div class=\"modify\" @click=\"save\">\n        {{ orderInfo.refund_status === 0 || status === 1 ? \"立即修改\" : \"确认退款\" }}\n      </div>\n      <div class=\"modify1\" @click=\"refuse\" v-if=\"orderInfo.refund_status === 1 && status === 0\">\n        拒绝退款\n      </div>\n    </div>\n    <div class=\"maskModel\" @touchmove.prevent v-show=\"change === true\"></div>\n  </div>\n</template>\n<script>\n    import {required, num} from \"@/utils/validate\";\n    import {validatorDefaultCatch} from \"@/libs/dialog\";\n    import { orderRemark, editPriceApi, orderRefundApi } from '@/api/kefu';\n    export default {\n        name: \"PriceChange\",\n        components: {},\n        props: {\n            change: Boolean,\n            orderInfo: {\n                type: Object,\n                default: null\n            },\n            status: {\n                type: Number,\n                default: 0\n            }\n        },\n        data: function () {\n            return {\n                focus: false,\n                price: 0,\n                refund_price: 0,\n                remark: \"\"\n            };\n        },\n        watch: {\n            orderInfo: function () {\n                this.price = this.orderInfo.pay_price;\n                this.refund_price = this.orderInfo.pay_price;\n                this.remark = this.orderInfo.remark;\n            }\n        },\n        methods: {\n            priceChange: function () {\n                this.focus = true;\n            },\n            close: function () {\n                this.price = this.orderInfo.pay_price;\n                this.$emit(\"closeChange\", false);\n            },\n            save() {\n                this.savePrice({\n                    price: this.price,\n                    refund_price: this.refund_price,\n                    type: 1,\n                    remark: this.remark,\n                    id: this.orderInfo.id,\n                    order_id: this.orderInfo.order_id\n                })\n            },\n            async savePrice(opt) {\n                let that = this,\n                    data = {},\n                    price = opt.price,\n                    refund_price = opt.refund_price,\n                    refund_status = that.orderInfo.refund_status,\n                    remark = opt.remark;\n                if (that.status == 0 && refund_status === 0) {\n                    try {\n                        await this.$validator({\n                            price: [\n                                required(required.message(\"金额\")),\n                                num(num.message(\"金额\"))\n                            ]\n                        }).validate({price});\n                    } catch (e) {\n                        return validatorDefaultCatch(e);\n                    }\n                    data.total_price = this.orderInfo.total_price\n                    data.total_postage = this.orderInfo.total_price\n                    data.pay_postage = this.orderInfo.pay_postage\n                    data.gain_integral = this.orderInfo.gain_integral\n                    data.pay_price = opt.price;\n                    data.order_id = opt.order_id;\n                    editPriceApi(opt.id, data).then(() => {\n                        this.$emit(\"closechange\", false);\n                        that.$dialog.success(\"改价成功\");\n                    }).catch((error) => {\n                        that.$dialog.error(error.msg);\n                    });\n                } else if (that.status == 0 && refund_status === 1) {\n                    try {\n                        await this.$validator({\n                            refund_price: [\n                                required(required.message(\"金额\")),\n                                num(num.message(\"金额\"))\n                            ]\n                        }).validate({refund_price});\n                    } catch (e) {\n                        return validatorDefaultCatch(e);\n                    }\n                    data.price = opt.refund_price;\n                    data.type = opt.type;\n                    data.order_id = opt.order_id;\n                    orderRefundApi(data).then(\n                        res => {\n                            this.$emit(\"closechange\", false);\n                            that.$dialog.success('操作成功');\n                        },\n                        err => {\n                            this.$emit(\"closechange\", false);\n                            that.$dialog.error(err.msg);\n                        }\n                    );\n                } else {\n                    try {\n                        await this.$validator({\n                            remark: [required(required.message(\"备注\"))]\n                        }).validate({remark});\n                    } catch (e) {\n                        return validatorDefaultCatch(e);\n                    }\n                    data.remark = remark;\n                    data.order_id = opt.order_id;\n                    orderRemark(data).then(\n                        res => {\n                            this.$emit(\"closechange\", false);\n                            that.$dialog.success('提交成功');\n                        },\n                        err => {\n                            this.$emit(\"closechange\", false);\n                            that.$dialog.error(err.msg);\n                        }\n                    );\n                }\n            },\n            refuse () {\n                this.savePrice({\n                    price: this.price,\n                    refund_price: this.refund_price,\n                    type: 2,\n                    remark: this.remark,\n                    id: this.orderInfo.id,\n                    order_id: this.orderInfo.order_id\n                })\n            }\n        }\n    };\n</script>\n<style scoped>\n  input{\n    display: block;\n    height: 100%;\n    background: none;\n    color: inherit;\n    opacity: 1;\n    -webkit-text-fill-color: currentcolor;\n    font: inherit;\n    line-height: inherit;\n    letter-spacing: inherit;\n    text-align: inherit;\n    text-indent: inherit;\n    text-transform: inherit;\n    text-shadow: inherit;\n    border: none;\n  }\n  /*@import '../../../styles/reset.css';*/\n  .priceChange{position:fixed;width:5.8rem;height:6.7rem;background-color:#fff;border-radius:0.1rem;top:50%;left:50%;margin-left:-2.9rem;margin-top:-3.35rem;z-index:99;transition:all 0.3s ease-in-out 0s;-webkit-transition:all 0.3s ease-in-out 0s;-o-transition:all 0.3s ease-in-out 0s;-moz-transition:all 0.3s ease-in-out 0s;-webkit-transform:scale(0);-o-transform:scale(0);-moz-transform:scale(0);-ms-transform:scale(0);\n    transform: scale(0);opacity:0;}\n  .priceChange.on{opacity:1;transform: scale(1);-webkit-transform:scale(1);-o-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);}\n  .priceChange .priceTitle{background:url(\"../../../assets/images/pricetitle.jpg\") no-repeat;background-size:100% 100%;width:100%;height:1.6rem;border-radius:0.1rem 0.1rem 0 0;text-align:center;font-size:0.4rem;color:#fff;line-height:1.6rem;position:relative;}\n  .priceChange .priceTitle .iconfontYI{position:absolute;font-size:0.4rem;right:0.26rem;top:0.23rem;width:0.4rem;height:0.4rem;line-height:0.4rem;}\n  .priceChange .listChange{padding:0 0.4rem;}\n  .priceChange .listChange .item{height:1.03rem;border-bottom:1px solid #e3e3e3;font-size:0.32rem;color:#333;}\n  .priceChange .listChange .item .money{color:#666;width:3rem;text-align:right;}\n  .priceChange .listChange .item .money .iconfontYI{font-size:0.32rem;margin-left:0.2rem;}\n  .priceChange .listChange .item .money input{width:100%;height:100%;text-align:right;color:#ccc;border: none;}\n  .priceChange .listChange .item .money input.on{color:#666;}\n  .priceChange .modify{font-size:0.32rem;color:#fff;width:4.9rem;height:0.9rem;text-align:center;line-height:0.9rem;border-radius:0.45rem;background-color:#2291f8;margin:0.53rem auto 0 auto;}\n  .priceChange .modify1{font-size:0.32rem;color:#312b2b;width:4.9rem;height:0.9rem;text-align:center;line-height:0.9rem;border-radius:0.45rem;background-color:#eee;margin:0.3rem auto 0 auto;}\n  .priceChange .listChange textarea {\n    border: 1px solid #eee;\n    width: 100%;\n    height: 2rem;\n    margin-top: 0.5rem;\n    border-radius: 0.1rem;\n    color: #333;\n    padding: 0.2rem;\n    font-size: 0.3rem;\n  }\n</style>\n"]}]}