{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/components/uploadVideo/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/components/uploadVideo/index.vue","mtime":1610681472000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHByb2R1Y3RHZXRUZW1wS2V5c0FwaSB9IGZyb20gJ0AvYXBpL3Byb2R1Y3QnCmltcG9ydCAnLi4vLi4vLi4vcHVibGljL1VFZGl0b3IvZGlhbG9ncy9pbnRlcm5hbCcKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ3ZpZGUxMW8nLAogICAgZGF0YSAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdXBsb2FkOiB7CiAgICAgICAgICAgICAgICB2aWRlb0luZzogZmFsc2UgLy8g5piv5ZCm5pi+56S66L+b5bqm5p2h77ybCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByb2dyZXNzOiAwLCAvLyDov5vluqbmnaHpu5jorqQwCiAgICAgICAgICAgIHZpZGVvTGluazogJycsCiAgICAgICAgICAgIGZvcm1WYWxpZGF0ZTogewogICAgICAgICAgICAgICAgdmlkZW9fbGluazogJycKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLy8g5Yig6Zmk6KeG6aKR77ybCiAgICAgICAgZGVsVmlkZW8gKCkgewogICAgICAgICAgICBsZXQgdGhhdCA9IHRoaXMKICAgICAgICAgICAgdGhhdC4kc2V0KHRoYXQuZm9ybVZhbGlkYXRlLCAndmlkZW9fbGluaycsICcnKQogICAgICAgIH0sCiAgICAgICAgemhfdXBsb2FkRmlsZSAoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvTGluaykgewogICAgICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUudmlkZW9fbGluayA9IHRoaXMudmlkZW9MaW5rCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnJlZmlkLmNsaWNrKCkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgemhfdXBsb2FkRmlsZV9jaGFuZ2UgKGV2ZmlsZSkgewogICAgICAgICAgICBsZXQgdGhhdCA9IHRoaXMKICAgICAgICAgICAgbGV0IHN1ZmZpeCA9IGV2ZmlsZS50YXJnZXQuZmlsZXNbMF0ubmFtZS5zdWJzdHIoZXZmaWxlLnRhcmdldC5maWxlc1swXS5uYW1lLmluZGV4T2YoJy4nKSkKICAgICAgICAgICAgaWYgKHN1ZmZpeCAhPT0gJy5tcDQnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC4kTWVzc2FnZS5lcnJvcign5Y+q6IO95LiK5LygTVA05paH5Lu2JykKICAgICAgICAgICAgfQogICAgICAgICAgICBwcm9kdWN0R2V0VGVtcEtleXNBcGkoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGF0LiR2aWRlb0Nsb3VkLnZpZGVvVXBsb2FkKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiByZXMuZGF0YS50eXBlLAogICAgICAgICAgICAgICAgICAgIGV2ZmlsZTogZXZmaWxlLAogICAgICAgICAgICAgICAgICAgIHJlczogcmVzLAogICAgICAgICAgICAgICAgICAgIHVwbG9hZGluZyAoc3RhdHVzLCBwcm9ncmVzcykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnVwbG9hZC52aWRlb0luZyA9IHN0YXR1cwogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdGF0dXMsIHByb2dyZXNzKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGF0LmZvcm1WYWxpZGF0ZS52aWRlb19saW5rID0gcmVzLnVybAogICAgICAgICAgICAgICAgICAgIHRoYXQuJE1lc3NhZ2Uuc3VjY2Vzcygn6KeG6aKR5LiK5Lyg5oiQ5YqfJykKICAgICAgICAgICAgICAgIH0pLmNhdGNoKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhhdC4kTWVzc2FnZS5lcnJvcihyZXMpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgdXBsb2FkcyAoKSB7CiAgICAgICAgICAgIG5vd0VkaXRvci5kaWFsb2cuY2xvc2UodHJ1ZSkKICAgICAgICAgICAgbm93RWRpdG9yLmVkaXRvci5leGVjQ29tbWFuZCgnaW5zZXJ0aHRtbCcsICc8cD48dmlkZW8gc3JjPVwnIiArIHRoaXMuZm9ybVZhbGlkYXRlLnZpZGVvX2xpbmsgKyAiXCcgY29udHJvbHM9XCdjb250cm9sc1wnPjwvdmlkZW8+PGJyLz48L3A+JykKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/uploadVideo","sourcesContent":["<template>\n    <div>\n        <div class=\"mt20 ml20\">\n            <Input class=\"perW35\"  v-model=\"videoLink\" placeholder=\"请输入视频链接\"/>\n            <input type=\"file\" ref='refid' style=\"display:none\" @change=\"zh_uploadFile_change\">\n            <Button type=\"primary\" icon=\"ios-cloud-upload-outline\" class=\"ml10\" @click=\"zh_uploadFile\">{{videoLink ? '确认添加' : '上传视频'}}</Button>\n            <Progress :percent = progress :stroke-width=\"5\" v-if=\"upload.videoIng\" />\n            <div class=\"iview-video-style\" v-if=\"formValidate.video_link\">\n                <video style=\"width:100%;height: 100%!important;border-radius: 10px;\" :src=\"formValidate.video_link\" controls=\"controls\">\n                    您的浏览器不支持 video 标签。\n                </video>\n                <div class=\"mark\">\n                </div>\n                <Icon type=\"ios-trash-outline\" class=\"iconv\" @click=\"delVideo\"/>\n            </div>\n        </div>\n        <div class=\"mt50 ml20\">\n            <Button type=\"primary\" @click=\"uploads\">确认</Button>\n        </div>\n    </div>\n</template>\n\n<script>\n    import { productGetTempKeysApi } from '@/api/product'\n    import '../../../public/UEditor/dialogs/internal'\n    export default {\n        name: 'vide11o',\n        data () {\n            return {\n                upload: {\n                    videoIng: false // 是否显示进度条；\n                },\n                progress: 0, // 进度条默认0\n                videoLink: '',\n                formValidate: {\n                    video_link: ''\n                }\n            }\n        },\n        methods: {\n            // 删除视频；\n            delVideo () {\n                let that = this\n                that.$set(that.formValidate, 'video_link', '')\n            },\n            zh_uploadFile () {\n                if (this.videoLink) {\n                    this.formValidate.video_link = this.videoLink\n                } else {\n                    this.$refs.refid.click()\n                }\n            },\n            zh_uploadFile_change (evfile) {\n                let that = this\n                let suffix = evfile.target.files[0].name.substr(evfile.target.files[0].name.indexOf('.'))\n                if (suffix !== '.mp4') {\n                    return that.$Message.error('只能上传MP4文件')\n                }\n                productGetTempKeysApi().then(res => {\n                    that.$videoCloud.videoUpload({\n                        type: res.data.type,\n                        evfile: evfile,\n                        res: res,\n                        uploading (status, progress) {\n                            that.upload.videoIng = status\n                            console.log(status, progress)\n                        }\n                    }).then(res => {\n                        that.formValidate.video_link = res.url\n                        that.$Message.success('视频上传成功')\n                    }).catch(res => {\n                        that.$Message.error(res)\n                    })\n                })\n            },\n            uploads () {\n                nowEditor.dialog.close(true)\n                nowEditor.editor.execCommand('inserthtml', '<p><video src=\\'\" + this.formValidate.video_link + \"\\' controls=\\'controls\\'></video><br/></p>')\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .iview-video-style{\n        width: 40%;\n        height: 180px;\n        border-radius: 10px;\n        background-color: #707070;\n        margin-top: 10px;\n        position: relative;\n        overflow: hidden;\n    }\n    .iview-video-style .iconv{\n        color: #fff;\n        line-height: 180px;\n        width: 50px;\n        height: 50px;\n        display: inherit;\n        font-size: 26px;\n        position: absolute;\n        top: -74px;\n        left: 50%;\n        margin-left: -25px;\n    }\n    .iview-video-style .mark{\n        position: absolute;\n        width: 100%;\n        height: 30px;\n        top: 0;\n        background-color: rgba(0,0,0,.5);\n        text-align: center;\n    }\n</style>\n"]}]}