{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/kefu/mobile/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/kefu/mobile/index.vue","mtime":1610680940000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCnZhciBtcDMgPSByZXF1aXJlKCdAL2Fzc2V0cy92aWRlby9ub3RpY2UubXAzJyk7CnZhciBtcDMgPSBuZXcgQXVkaW8obXAzKTsKaW1wb3J0IFNldHRpbmcgZnJvbSAnQC9zZXR0aW5nJzsKaW1wb3J0IHdvcmRzIGZyb20gIi4uL2NvbXBvbmVudHMvd29yZHMiOwppbXBvcnQge1NvY2tldH0gZnJvbSAnQC9saWJzL3NvY2tldCc7CmltcG9ydCB1dGlsIGZyb20gJ0AvbGlicy91dGlsJzsKaW1wb3J0IGVtb2ppTGlzdCBmcm9tICdAL3V0aWxzL2Vtb2ppJwppbXBvcnQge3NlcnZpY2VMaXN0LCBzcGVlQ2hjcmFmdCx0cmFuc2Zlckxpc3Qsc2VydmljZUNhdGUgLHNlcnZpY2VUcmFuc2Zlcn0gZnJvbSAnQC9hcGkva2VmdScKaW1wb3J0IHsgZ2V0Q29va2llcywgcmVtb3ZlQ29va2llcyxzZXRDb29raWVzIH0gZnJvbSAnQC9saWJzL3V0aWwnCmNvbnN0IGNodW5rID0gZnVuY3Rpb24gKGFyciwgbnVtKSB7CiAgICBudW0gPSBudW0gKiAxIHx8IDE7CiAgICB2YXIgcmV0ID0gW107CiAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaSkgewogICAgICAgIGlmIChpICUgbnVtID09PSAwKSB7CiAgICAgICAgICAgIHJldC5wdXNoKFtdKTsKICAgICAgICB9CiAgICAgICAgcmV0W3JldC5sZW5ndGggLSAxXS5wdXNoKGl0ZW0pOwogICAgfSk7CiAgICByZXR1cm4gcmV0Owp9OwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ2FkbWluQ2hhdF9pbmRleCcsCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG9wczogewogICAgICAgICAgICAgICAgdnVlc2Nyb2xsOiB7CiAgICAgICAgICAgICAgICAgICAgbW9kZTogJ3NsaWRlJywKICAgICAgICAgICAgICAgICAgICBlbmFibGU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGF1dG86IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGF1dG9Mb2FkRGlzdGFuY2U6IDAsCiAgICAgICAgICAgICAgICAgICAgcHVsbFJlZnJlc2g6IHsKICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBhdXRvOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0xvYWREaXN0YW5jZTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgdGlwczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmU6ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiAn5LiK5ouJ5Yqg6L295pu05aSaJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiAnTG9hZGluZy4uLicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmVEZWFjdGl2ZTogJyAnCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBwdXNoTG9hZDogewogICAgICAgICAgICAgICAgICAgICAgICBlbmFibGU6IGZhbHNlLAoKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYmFyOiB7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJyMzOTMyMzInLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6ICcuNScsCiAgICAgICAgICAgICAgICAgICAgc2l6ZTogJzJweCcKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3dpcGVyT3B0aW9uczoge30sCiAgICAgICAgICAgIHN0YXR1czogZmFsc2UsCiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICBpc1Rvb2w6IGZhbHNlLAogICAgICAgICAgICBpc1N3aXBlcjogZmFsc2UsCiAgICAgICAgICAgIGlzV29yZHM6IGZhbHNlLAogICAgICAgICAgICBhdXRvcGxheTogZmFsc2UsCiAgICAgICAgICAgIGNpcmN1bGFyOiB0cnVlLAogICAgICAgICAgICBpbnRlcnZhbDogMzAwMCwKICAgICAgICAgICAgZHVyYXRpb246IDUwMCwKICAgICAgICAgICAgZW1vamlHcm91cDogY2h1bmsoZW1vamlMaXN0LCAyMSksCgogICAgICAgICAgICBjb246ICcnLAogICAgICAgICAgICB0b1VpZDogJycsCiAgICAgICAgICAgIGxpbWl0OiAxNSwKICAgICAgICAgICAgdXBwZXJJZDogMCwKICAgICAgICAgICAgY2hhdExpc3Q6IFtdLAogICAgICAgICAgICBrZWZ1SW5mbzoge30sCiAgICAgICAgICAgIHNjcm9sbFRvcDogMCwKICAgICAgICAgICAgYWN0aXZlOiB0cnVlLAogICAgICAgICAgICBpc1Njcm9sbDogdHJ1ZSwKICAgICAgICAgICAgb2xkSGVpZ2h0OiAwLAogICAgICAgICAgICBzZWxlY3RvcjogJycsCiAgICAgICAgICAgIHRyYW5zZmVyTGlzdDpbXSwgLy/ovazmjqXliJfooagKICAgICAgICAgICAgaXNUcmFuc2ZlcjpmYWxzZSwKICAgICAgICAgICAgdXBsb2FkRGF0YToge30sIC8vIOS4iuS8oOWPguaVsAogICAgICAgICAgICBoZWFkZXI6IHt9LAogICAgICAgICAgICBmaWxlVXJsOiAnJywKICAgICAgICAgICAgdG91cmlzdDogMCwKICAgICAgICAgICAgYWN0aXZlS0Y6JycKICAgICAgICB9CiAgICB9LAogICAgY29tcG9uZW50czp7CiAgICAgICAgd29yZHMKICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIGlzU2VuZCgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuY29uLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHJlY29yZHMoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYXRMaXN0Lm1hcCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgIGl0ZW0udGltZSA9IHRoaXMuJG1vbWVudChpdGVtLmFkZF90aW1lKjEwMDApLmZvcm1hdCgnTU1NRG8gaDptbScpCiAgICAgICAgICAgICAgICBpZiAoaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYWRkX3RpbWUgLQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXRMaXN0W2luZGV4IC0gMV0uYWRkX3RpbWUgPj0KICAgICAgICAgICAgICAgICAgICAgICAgMzAwCiAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc2hvdyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zaG93ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpdGVtLnNob3cgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICB0aGlzLmZpbGVVcmwgPSBTZXR0aW5nLmFwaUJhc2VVUkwucmVwbGFjZSgnYWRtaW5hcGknLCAna2VmdWFwaScpKyAnL3VwbG9hZCcKICAgICAgICB0aGlzLnRvVWlkID0gdGhpcy4kcm91dGUucXVlcnkudG9VaWQgfHwgJycKICAgICAgICB0aGlzLm5pY2tuYW1lID0gdGhpcy4kcm91dGUucXVlcnkubmlja25hbWUgfHwgJycKICAgICAgICB0aGlzLmtlZnVJbmZvID0gSlNPTi5wYXJzZShnZXRDb29raWVzKCdrZWZ1SW5mbycpKQogICAgICAgIFByb21pc2UuYWxsKFt0aGlzLmdldENoYXRMaXN0KCksdGhpcy5nZXRUcmFuc2Zlckxpc3QoKV0pCiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB3aW5kb3cuZG9jdW1lbnQudGl0bGUgPSBgJHt0aGlzLiRyb3V0ZS5xdWVyeS5uaWNrbmFtZSB8fCAnJ30gLSDlr7nor53or6bmg4VgCiAgICAgICAgLy8g5LiK5Lyg5aS06YOodG9rZW4KICAgICAgICB0aGlzLmhlYWRlclsnQXV0aG9yaS16YXRpb24nXSA9ICdCZWFyZXIgJyArIGdldENvb2tpZXMoJ2tlZnVfdG9rZW4nKTsKICAgICAgICBTb2NrZXQudGhlbih3cyA9PiB7CiAgICAgICAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgICAgICAgd3Muc2VuZCh7CiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMudG9VaWQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0eXBlOiAidG9fY2hhdCIKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLy8g5raI5oGv5o6l5pS2CiAgICAgICAgICAgIHdzLiRvbihbInJlcGx5IiwgImNoYXQiXSwgZGF0YSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZGF0YS5tc25fdHlwZSA9PSAxIHx8IGRhdGEubXNuX3R5cGUgPT0gMikgewogICAgICAgICAgICAgICAgICAgIGRhdGEubXNuID0gdGhpcy5yZXBsYWNlX2VtKGRhdGEubXNuKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoZGF0YS5tc25fdHlwZSA9PSA1KSByZXR1cm4KICAgICAgICAgICAgICAgIHRoaXMuY2hhdExpc3QucHVzaChkYXRhKQogICAgICAgICAgICAgICAgdGhpcy4kcmVmc1sic2Nyb2xsQm94Il0ucmVmcmVzaCgpOwogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsQm9tKCkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB3cy4kb24oInJlcGx5IiwgZGF0YSA9PiB7CiAgICAgICAgICAgICAgICAvLyBtcDMucGxheSgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgd3MuJG9uKCJzb2NrZXRfZXJyb3IiLCAoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiR1dGlsLlRpcHMoewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6L+e5o6l5aSx6LSlJwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIH0pCiAgICB9LAogICAgYmVmb3JlRGVzdHJveSgpIHsKICAgICAgICBTb2NrZXQudGhlbih3cyA9PiB7CiAgICAgICAgICAgIHdzLnNlbmQoewogICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgIGlkOiAwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdHlwZTogInRvX2NoYXQiCiAgICAgICAgICAgIH0pCiAgICAgICAgfSk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGhhbmRsZUZvcm1hdEVycm9yIChmaWxlKSB7CiAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoIuS4iuS8oOWbvueJh+WPquiDveaYryBqcGfjgIFqcGfjgIFqcGVn44CBZ2lmIOagvOW8jyEiKTsKICAgICAgICB9LAogICAgICAgIC8vIOeUqOaIt+ivpuaDhQogICAgICAgIGdvVXNlckluZm8oaXRlbSxzdGF0dXMpewogICAgICAgICAgICBpZighc3RhdHVzKXsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBwYXRoOmAva2VmdS91c2VyL2luZGV4LyR7aXRlbS51aWR9LyR7aXRlbS50eXBlfWAKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8vIOS4iuS8oOS5i+WJjQogICAgICAgIGJlZm9yZVVwbG9hZCAoKSB7CgogICAgICAgIH0sCiAgICAgICAgLy8g5LiK5Lyg5oiQ5YqfCiAgICAgICAgaGFuZGxlU3VjY2VzcyAocmVzLCBmaWxlLGZpbGVMaXN0KSB7CiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgICAgICAgIHRoaXMuc2VuZE1zZyhyZXMuZGF0YS51cmwsMykKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8vIOa7muWKqOWIsOW6lemDqAogICAgICAgIHNjcm9sbEJvbSgpIHsKICAgICAgICAgICAgc2V0VGltZW91dChyZXMgPT4gewogICAgICAgICAgICAgICAgbGV0IG51bSA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXRCb3gnKS5vZmZzZXRIZWlnaHQpCiAgICAgICAgICAgICAgICBpZih0aGlzLiRyZWZzWyJzY3JvbGxCb3giXSl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmc1sic2Nyb2xsQm94Il0uc2Nyb2xsVG8oCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IG51bQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAzMDAKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSwgMzAwKQogICAgICAgIH0sCiAgICAgICAgLy8g6K6i5Y2V6K+m5oOFCiAgICAgICAgZ29PcmRlckRldGFpbChpdGVtKSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgIHBhdGg6YC9rZWZ1L29yZGVyRGV0YWlsLyR7aXRlbS5vcmRlckluZm8uaWR9YAogICAgICAgICAgICB9KQogICAgICAgICAgICAvLyB1bmkubmF2aWdhdGVUbyh7CiAgICAgICAgICAgIC8vICAgICB1cmw6IGAvcGFnZXMvYWRtaW4vb3JkZXJEZXRhaWwvaW5kZXg/aWQ9JHtpdGVtLm1zbn1gCiAgICAgICAgICAgIC8vIH0pCiAgICAgICAgfSwKICAgICAgICAvLyDov5Tlm54KICAgICAgICBnb0JhY2soKSB7CiAgICAgICAgICAgIHVuaS5uYXZpZ2F0ZUJhY2soKQogICAgICAgIH0sCiAgICAgICAgLy8g5bqV6YOo5Yqf6IO95Yy65omT5byACiAgICAgICAgb3BlbkJveChrZXkpIHsKICAgICAgICAgICAgaWYgKGtleSA9PSAxKSB7CiAgICAgICAgICAgICAgICB0aGlzLmlzVG9vbCA9IGZhbHNlCiAgICAgICAgICAgICAgICB0aGlzLmlzU3dpcGVyID0gIXRoaXMuaXNTd2lwZXIKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuaXNTd2lwZXIgPSBmYWxzZQogICAgICAgICAgICAgICAgdGhpcy5pc1Rvb2wgPSAhdGhpcy5pc1Rvb2wKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRyZWZzWyJzY3JvbGxCb3giXS5yZWZyZXNoKCk7CiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpPT57CiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbEJvbSgpOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgc2hvd1dvcmRzKCkgewogICAgICAgICAgICB0aGlzLmlzV29yZHMgPSB0cnVlCiAgICAgICAgfSwKCiAgICAgICAgLy8g6L2s5o6lCiAgICAgICAgZ29UcmFuc2ZlcigpIHsKICAgICAgICAgICAgdGhpcy5pc1RyYW5zZmVyPSB0cnVlCiAgICAgICAgfSwKICAgICAgICAvLyDovazmjqXlhbPpl60KICAgICAgICBjbG9zZVRyYW5zZmVyKCl7CiAgICAgICAgICAgIHRoaXMudHJhbnNmZXJMaXN0LmZvckVhY2goKGVsLGluZGV4KT0+ewogICAgICAgICAgICAgICAgZWwuaXNDaGVjayA9IGZhbHNlCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMuaXNUcmFuc2Zlcj0gZmFsc2UKICAgICAgICB9LAogICAgICAgIC8vIOi9rOaOpeehruiupAogICAgICAgIGNvbmZpcm0oKXsKICAgICAgICAgICAgaWYodGhpcy5hY3RpdmVLRil7CiAgICAgICAgICAgICAgICBzZXJ2aWNlVHJhbnNmZXIoewogICAgICAgICAgICAgICAgICAgIHVpZDp0aGlzLnRvVWlkLAogICAgICAgICAgICAgICAgICAgIGtlZnVUb1VpZDp0aGlzLmFjdGl2ZUtGCiAgICAgICAgICAgICAgICB9KS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmZXJMaXN0LmZvckVhY2goKGVsLGluZGV4KT0+ewogICAgICAgICAgICAgICAgICAgICAgICBlbC5pc0NoZWNrID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKQogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNUcmFuc2ZlciA9IGZhbHNlCiAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnJvcj0+ewogICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoZXJyb3IubXNnKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcign6K+36YCJ5oup6L2s5o6l5a6i5pyNJykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgLy8g5ZWG5ZOB5L+h5oGvCiAgICAgICAgZ29vZHNJbmZvKCkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICBwYXRoOicva2VmdS9nb29kcy9saXN0P3RvVWlkPScrIHRoaXMudG9VaWQKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOihqOaDheeCueWHuwogICAgICAgIGFkZEVtb2ppKGl0ZW0pIHsKICAgICAgICAgICAgbGV0IHZhbCA9IGBbJHtpdGVtfV1gCiAgICAgICAgICAgIHRoaXMuY29uICs9IHZhbAogICAgICAgIH0sCiAgICAgICAgLy8g6IGK5aSp6KGo5oOF6L2s5o2iCiAgICAgICAgcmVwbGFjZV9lbShzdHIpIHsKICAgICAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UoL1xbZW0tKFthLXpfXSopXF0vZywgIjxzcGFuIGNsYXNzPSdlbSBlbS0kMScvPjwvc3Bhbj4iKTsKICAgICAgICAgICAgcmV0dXJuIHN0cjsKICAgICAgICB9LAogICAgICAgIC8vIOiOt+WPluiBiuWkqeWIl+ihqAogICAgICAgIGdldENoYXRMaXN0KCkgewogICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXMKICAgICAgICAgICAgc2VydmljZUxpc3QoewogICAgICAgICAgICAgICAgbGltaXQ6IHRoaXMubGltaXQsCiAgICAgICAgICAgICAgICB1aWQ6IHRoaXMudG9VaWQsCiAgICAgICAgICAgICAgICB1cHBlcklkOiB0aGlzLnVwcGVySWQsCiAgICAgICAgICAgICAgICBpc190b3VyaXN0OiB0aGlzLiRyb3V0ZS5xdWVyeS5pc190b3VyaXN0CiAgICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHZhciBzSCA9IDAKICAgICAgICAgICAgICAgIHJlcy5kYXRhLmZvckVhY2goZWwgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChlbC5tc25fdHlwZSA9PSAxIHx8IGVsLm1zbl90eXBlID09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZWwubXNuID0gdGhpcy5yZXBsYWNlX2VtKGVsLm1zbikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgbGV0IHNlbGVjdG9yID0gJycKICAgICAgICAgICAgICAgIGlmICh0aGlzLnVwcGVySWQgPT0gMCkgewogICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gYGNoYXRfJHtyZXMuZGF0YVtyZXMuZGF0YS5sZW5ndGggLSAxXS5pZH1gOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzZWxlY3RvciA9IGBjaGF0XyR7dGhpcy5jaGF0TGlzdFswXS5pZH1gOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yCiAgICAgICAgICAgICAgICB0aGlzLmNoYXRMaXN0ID0gWy4uLnJlcy5kYXRhLCAuLi50aGlzLmNoYXRMaXN0XTsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICB0aGlzLmlzU2Nyb2xsID0gcmVzLmRhdGEubGVuZ3RoID49IHRoaXMubGltaXQKICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCB0cnVlKQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnNbInNjcm9sbEJveCJdLnJlZnJlc2goKTsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51cHBlcklkID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG51bSA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0b3IpLm9mZnNldFRvcCkgLSA2MAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmc1sic2Nyb2xsQm94Il0uc2Nyb2xsVG8oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBudW0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgLy8g5Y+R6YCB5raI5oGvCiAgICAgICAgc2VuZFRleHQoKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5pc1NlbmQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCfor7fovpPlhaXlhoXlrrknKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc2VuZE1zZyh0aGlzLmNvbiwgMSk7CiAgICAgICAgICAgIHRoaXMuY29uID0gJycKICAgICAgICB9LAogICAgICAgIC8vIHdz5Y+R6YCBCiAgICAgICAgc2VuZE1zZyhtc24sIHR5cGUpIHsKICAgICAgICAgICAgbGV0IG9iaiA9IHsKICAgICAgICAgICAgICAgIHR5cGU6ICdjaGF0JywKICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICBtc24sCiAgICAgICAgICAgICAgICAgICAgdHlwZSwKICAgICAgICAgICAgICAgICAgICB0b191aWQ6IHRoaXMudG9VaWQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBTb2NrZXQudGhlbih3cyA9PiB7CiAgICAgICAgICAgICAgICB3cy5zZW5kKG9iaikKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOWbvueJh+S4iuS8oAogICAgICAgIHVwbG9hZEltZygpIHsKICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzCiAgICAgICAgICAgIHNlbGYuJHV0aWwudXBsb2FkSW1hZ2VPbmUoJ3VwbG9hZC9pbWFnZScsIGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgICAgICAgIHNlbGYuc2VuZE1zZyhyZXMuZGF0YS51cmwsIDMpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgLy8g5bi455So5LqO6YCJ5oupCiAgICAgICAgc2VsZWN0V29yZHMoaXRlbSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtLm1lc3NhZ2UpCiAgICAgICAgICAgIHRoaXMuaXNXb3JkcyA9IGZhbHNlCiAgICAgICAgICAgIHRoaXMuc2VuZE1zZyhpdGVtLm1lc3NhZ2UsIDEpCiAgICAgICAgfSwKICAgICAgICAvLyAg5ZWG5ZOB6K+m5oOF6aG1CiAgICAgICAgZ29Qcm9kdWN0KGl0ZW0pIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgcGF0aDonL2tlZnUvZ29vZHMvZGV0YWlsP2dvb2RzSWQ9JysgaXRlbS5tc24KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOeuoeeQhuWRmOiuouWNlQogICAgICAgIGdvQWRtaW5PcmRlcigpIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgcGF0aDonL2tlZnUvb3JkZXJMaXN0LzAvJyt0aGlzLnRvVWlkCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICAvLyDmu5rliqjliLDlupXpg6gKICAgICAgICBoZWlnaHQoKSB7CiAgICAgICAgICAgIGxldCBzZWxmID0gdGhpcwogICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gMAogICAgICAgICAgICBsZXQgaW5mbyA9IHVuaS5jcmVhdGVTZWxlY3RvclF1ZXJ5KCkuc2VsZWN0KCIuY2hhdCIpOwogICAgICAgICAgICBzZXRUaW1lb3V0KHJlcyA9PiB7CiAgICAgICAgICAgICAgICBpbmZvLmJvdW5kaW5nQ2xpZW50UmVjdChmdW5jdGlvbiAoZGF0YSkgeyAvL2RhdGEgLSDlkITnp43lj4LmlbAKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmhlaWdodCwgJ2RhdGEuaGVpZ2h0JykgLy8g6I635Y+W5YWD57Sg6auY5bqmCiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wID0gZGF0YS5oZWlnaHQKICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5hY3RpdmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zY3JvbGxUb3AgPSBwYXJzZUludChzY3JvbGxUb3ApICsgNTAwCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zY3JvbGxUb3AgPSBwYXJzZUludChzY3JvbGxUb3ApICsgMTAwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkuZXhlYygpCiAgICAgICAgICAgIH0sIDEwMDApCiAgICAgICAgfSwKICAgICAgICAvLyDovazmjqXliJfooagKICAgICAgICBnZXRUcmFuc2Zlckxpc3QoKXsKICAgICAgICAgICAgdHJhbnNmZXJMaXN0KHsKICAgICAgICAgICAgICAgIHVpZDp0aGlzLnRvVWlkCiAgICAgICAgICAgIH0pLnRoZW4ocmVzPT57CiAgICAgICAgICAgICAgICByZXMuZGF0YS5saXN0LmZvckVhY2goKGl0ZW0saW5kZXgpPT57CiAgICAgICAgICAgICAgICAgICAgaXRlbS5pc0NoZWNrID0gZmFsc2UKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZmVyTGlzdCA9IHJlcy5kYXRhLmxpc3QKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOWFs+mXreW4uOeUqOivrQogICAgICAgIGNsb3NlQm94KCl7CiAgICAgICAgICAgIHRoaXMuaXNXb3JkcyA9IGZhbHNlCiAgICAgICAgfSwKICAgICAgICAvLyDpgInmi6nor53mnK8KICAgICAgICBzZWxlY3RNc2coZGF0YSl7CiAgICAgICAgICAgIHRoaXMuY29uKz1kYXRhCiAgICAgICAgICAgIHRoaXMuaXNXb3JkcyA9IGZhbHNlCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVBY3RpdmF0ZSh2bSwgcmVmcmVzaERvbSkgewogICAgICAgICAgICB0aGlzLnVwcGVySWQgPSB0aGlzLmNoYXRMaXN0WzBdLmlkCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVTdGFydCh2bSwgcmVmcmVzaERvbSwgZG9uZSkgewogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIGxvYWQgZmluaXNoZWQKICAgICAgICAgICAgICAgIGRvbmUoKTsKICAgICAgICAgICAgfSwgMjAwMCkKICAgICAgICB9LAogICAgICAgIGhhbmRsZUJlZm9yZURlYWN0aXZhdGUodm0sIHJlZnJlc2hEb20sIGRvbmUpIHsKICAgICAgICAgICAgdGhpcy5nZXRDaGF0TGlzdCgpCgogICAgICAgICAgICB0aGlzLiRvbignY2hhbmdlJywgZGF0YSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZGF0YSkgZG9uZSgpOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgaGFuZGxlRGVhY3RpdmF0ZSh2bSwgcmVmcmVzaERvbSkgewogICAgICAgICAgICBsZXQgbnVtID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnNlbGVjdG9yKS5vZmZzZXRUb3ApIC0gNjAKICAgICAgICAgICAgdGhpcy4kcmVmc1sic2Nyb2xsQm94Il0uc2Nyb2xsVG8oCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgeTogbnVtCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgMAogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/kefu/mobile","sourcesContent":["<template>\n    <div class=\"chat-box\">\n        <div class=\"chat-scroll-box\">\n            <vue-scroll :ops=\"ops\" ref=\"scrollBox\"\n                @refresh-activate=\"handleActivate\"\n                @refresh-start=\"handleStart\"\n                @refresh-before-deactivate=\"handleBeforeDeactivate\"\n                @refresh-deactivate=\"handleDeactivate\"\n            >\n                <div class=\"slot-refresh\" slot=\"refresh-deactive\"></div>\n                <div class=\"slot-refresh\" slot=\"refresh-beforeDeactive\"></div>\n                <div id=\"chatBox\" class=\"chat\" ref=\"chat\" style=\"padding: .3rem .3rem 0;\">\n\n                    <div v-for=\"(item,index) in records\" :key=\"index\" :id=\"`chat_${item.id}`\">\n                        <div class=\"day-box\" v-if=\"item.show\">{{item.time}}</div>\n                        <div  class=\"chat-item\" :class=\"{'right-box':item.uid == kefuInfo.uid}\">\n                            <img class=\"avatar\" v-lazy=\"item.avatar\" mode=\"\" @click=\"goUserInfo(item,item.uid == kefuInfo.uid)\">\n                            <!-- 消息 -->\n                            <div class=\"msg-box\" v-if=\"item.msn_type==1\" v-html=\"item.msn\"></div>\n                            <!-- 图片 -->\n                            <div class=\"img-box\" v-if=\"item.msn_type==3\" v-viewer><img v-lazy=\"item.msn\" mode=\"widthFix\"></div>\n                            <!-- 商品 -->\n                            <div class=\"product-box\" v-if=\"item.msn_type==5\" @click=\"goProduct(item)\">\n                                <img v-lazy=\"item.productInfo.image\" mode=\"widthFix\">\n                                <div class=\"info\">\n                                    <div class=\"price\"><span>￥</span>{{item.productInfo.price}}</div>\n                                    <div class=\"name line2\">{{item.productInfo.store_name}}</div>\n                                </div>\n                            </div>\n                            <!-- 订单 -->\n                            <div class=\"order-box\" v-if=\"item.msn_type==6\" @click=\"goOrderDetail(item)\">\n                                <div class=\"title\">订单ID: {{item.orderInfo.order_id}}</div>\n                                <div class=\"info\">\n                                    <img v-lazy=\"item.orderInfo.cartInfo[0].productInfo.image\">\n                                    <div class=\"product-info\">\n                                        <div class=\"name line2\">{{item.orderInfo.cartInfo[0].productInfo.store_name}}</div>\n                                        <div class=\"price\">¥{{item.orderInfo.cartInfo[0].productInfo.price}}</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </vue-scroll>\n        </div>\n        <div class=\"footer-box\">\n            <div class=\"words\" @click=\"showWords\"><span class=\"iconfont iconhuashu1\"></span></div>\n            <div class=\"input-box\">\n                <Input v-model=\"con\" placeholder=\"请输入内容\" style=\"font-size: .28rem\"/>\n                <span class=\"iconfont iconfasong\" @click=\"sendText\" :class=\"{isSend:isSend}\"></span>\n            </div>\n            <div class=\"emoji\" @click=\"openBox(1)\"><span class=\"iconfont iconbiaoqing2\"></span></div>\n            <div class=\"more\" @click=\"openBox(2)\"><span class=\"iconfont icongengduozhankai1\"></span></div>\n        </div>\n        <!-- 工具 -->\n        <div class=\"tool-wrapper\" v-if=\"isTool\">\n            <div class=\"tool-item\">\n                <Upload :show-upload-list=\"false\" :action=\"fileUrl\" class=\"mr10 mb10\"\n                        :before-upload=\"beforeUpload\"\n                        :data=\"uploadData\"\n                        :headers=\"header\"\n                        :multiple=\"true\"\n                        :on-success=\"handleSuccess\"\n                        :format=\"['jpg','jpeg','png','gif']\"\n                        :on-format-error=\"handleFormatError\"\n                        style=\"margin-top: 1px;display: inline-block\">\n                    <img src=\"../static/tool-01.png\" mode=\"\">\n                    <div>图片</div>\n                </Upload>\n\n            </div>\n            <div class=\"tool-item\" @click=\"goTransfer\">\n                <img src=\"../static/tool-02.png\" mode=\"\">\n                <div>转接</div>\n            </div>\n            <div class=\"tool-item\" @click=\"goAdminOrder\">\n                <img src=\"../static/tool-03.png\" mode=\"\">\n                <div>交易订单</div>\n            </div>\n            <div class=\"tool-item\" @click=\"goodsInfo\">\n                <img src=\"../static/tool-04.png\" mode=\"\">\n                <div>商品信息</div>\n            </div>\n        </div>\n        <!-- 表情 -->\n        <div class=\"banner slider-banner\" v-show=\"isSwiper\">\n            <swiper class=\"swiper-wrapper\" ref=\"mySwiper\" :options=\"swiperOptions\">\n                <swiper-slide v-for=\"(emojiList, index) in emojiGroup\" :key=\"index\">\n                    <i class=\"em\" :class=\"emoji\" v-for=\"emoji in emojiList\" :key=\"emoji\" @click=\"addEmoji(emoji)\"></i>\n                </swiper-slide>\n            </swiper>\n        </div>\n        <!-- 常用语 -->\n        <words :isWords=\"isWords\" @closeBox=\"closeBox\" @selectMsg=\"selectMsg\"></words>\n        <!-- 转接 -->\n        <div class=\"transfer-mask\" v-if=\"isTransfer\">\n            <div class=\"content\" :class=\"{on:isTransfer}\">\n                <div class=\"title\">转接客服<span class=\"iconfont iconcha\" @click=\"closeTransfer\"></span></div>\n                <div class=\"list-wrapper\">\n                    <RadioGroup v-model=\"activeKF\">\n                        <Radio class=\"list-item\" v-for=\"(item,index) in transferList\" :label=\"item.uid\">\n                            <div class=\"avatar-box\">\n                                <img v-lazy=\"item.avatar\" alt=\"\">\n                            </div>\n                            <p class=\"nickName\">{{item.wx_name}}</p>\n                        </Radio>\n                    </RadioGroup>\n                </div>\n                <Button class=\"btn\" @click=\"confirm\">确定</Button>\n            </div>\n\n        </div>\n    </div>\n</template>\n\n<script>\n    var mp3 = require('@/assets/video/notice.mp3');\n    var mp3 = new Audio(mp3);\n    import Setting from '@/setting';\n    import words from \"../components/words\";\n    import {Socket} from '@/libs/socket';\n    import util from '@/libs/util';\n    import emojiList from '@/utils/emoji'\n    import {serviceList, speeChcraft,transferList,serviceCate ,serviceTransfer} from '@/api/kefu'\n    import { getCookies, removeCookies,setCookies } from '@/libs/util'\n    const chunk = function (arr, num) {\n        num = num * 1 || 1;\n        var ret = [];\n        arr.forEach(function (item, i) {\n            if (i % num === 0) {\n                ret.push([]);\n            }\n            ret[ret.length - 1].push(item);\n        });\n        return ret;\n    };\n\n    export default {\n        name: 'adminChat_index',\n        data() {\n            return {\n                ops: {\n                    vuescroll: {\n                        mode: 'slide',\n                        enable: false,\n                        auto: false,\n                        autoLoadDistance: 0,\n                        pullRefresh: {\n                            enable: true,\n                            auto: false,\n                            autoLoadDistance: 0,\n                            tips: {\n                                deactive: '',\n                                active: '上拉加载更多',\n                                start: 'Loading...',\n                                beforeDeactive: ' '\n                            },\n                        },\n                        pushLoad: {\n                            enable: false,\n\n                        }\n                    },\n                    bar: {\n                        background: '#393232',\n                        opacity: '.5',\n                        size: '2px'\n                    }\n                },\n                swiperOptions: {},\n                status: false,\n                loading: false,\n                isTool: false,\n                isSwiper: false,\n                isWords: false,\n                autoplay: false,\n                circular: true,\n                interval: 3000,\n                duration: 500,\n                emojiGroup: chunk(emojiList, 21),\n\n                con: '',\n                toUid: '',\n                limit: 15,\n                upperId: 0,\n                chatList: [],\n                kefuInfo: {},\n                scrollTop: 0,\n                active: true,\n                isScroll: true,\n                oldHeight: 0,\n                selector: '',\n                transferList:[], //转接列表\n                isTransfer:false,\n                uploadData: {}, // 上传参数\n                header: {},\n                fileUrl: '',\n                tourist: 0,\n                activeKF:''\n            }\n        },\n        components:{\n            words\n        },\n        computed: {\n            isSend() {\n                if (this.con.length == 0) {\n                    return false\n                } else {\n                    return true\n                }\n            },\n            records() {\n                return this.chatList.map((item, index) => {\n                    item.time = this.$moment(item.add_time*1000).format('MMMDo h:mm')\n                    if (index) {\n                        if (\n                            item.add_time -\n                            this.chatList[index - 1].add_time >=\n                            300\n                        ) {\n                            item.show = true;\n                        } else {\n                            item.show = false;\n                        }\n                    } else {\n                        item.show = true;\n                    }\n                    return item;\n                });\n            },\n        },\n        created() {\n            this.fileUrl = Setting.apiBaseURL.replace('adminapi', 'kefuapi')+ '/upload'\n            this.toUid = this.$route.query.toUid || ''\n            this.nickname = this.$route.query.nickname || ''\n            this.kefuInfo = JSON.parse(getCookies('kefuInfo'))\n            Promise.all([this.getChatList(),this.getTransferList()])\n        },\n        mounted() {\n            window.document.title = `${this.$route.query.nickname || ''} - 对话详情`\n            // 上传头部token\n            this.header['Authori-zation'] = 'Bearer ' + getCookies('kefu_token');\n            Socket.then(ws => {\n                let that = this;\n                ws.send({\n                    data: {\n                        id: this.toUid\n                    },\n                    type: \"to_chat\"\n                })\n                // 消息接收\n                ws.$on([\"reply\", \"chat\"], data => {\n                    if (data.msn_type == 1 || data.msn_type == 2) {\n                        data.msn = this.replace_em(data.msn)\n                    }\n                    if(data.msn_type == 5) return\n                    this.chatList.push(data)\n                    this.$refs[\"scrollBox\"].refresh();\n                    this.$nextTick(() => {\n                        this.scrollBom()\n                    })\n                });\n                ws.$on(\"reply\", data => {\n                    // mp3.play();\n                });\n                ws.$on(\"socket_error\", () => {\n                    this.$util.Tips({\n                        title: '连接失败'\n                    })\n                });\n            });\n            this.$nextTick(() => {\n            })\n        },\n        beforeDestroy() {\n            Socket.then(ws => {\n                ws.send({\n                    data: {\n                        id: 0\n                    },\n                    type: \"to_chat\"\n                })\n            });\n        },\n        methods: {\n            handleFormatError (file) {\n                this.$Message.error(\"上传图片只能是 jpg、jpg、jpeg、gif 格式!\");\n            },\n            // 用户详情\n            goUserInfo(item,status){\n                if(!status){\n                    this.$router.push({\n                        path:`/kefu/user/index/${item.uid}/${item.type}`\n                    })\n                }\n            },\n            // 上传之前\n            beforeUpload () {\n\n            },\n            // 上传成功\n            handleSuccess (res, file,fileList) {\n                if (res.status === 200) {\n                    this.$Message.success(res.msg);\n                    this.sendMsg(res.data.url,3)\n                } else {\n                    this.$Message.error(res.msg);\n                }\n            },\n            // 滚动到底部\n            scrollBom() {\n                setTimeout(res => {\n                    let num = parseFloat(document.getElementById('chatBox').offsetHeight)\n                    if(this.$refs[\"scrollBox\"]){\n                        this.$refs[\"scrollBox\"].scrollTo(\n                            {\n                                y: num\n                            },\n                            300\n                        );\n                    }\n\n                }, 300)\n            },\n            // 订单详情\n            goOrderDetail(item) {\n                this.$router.push({\n                    path:`/kefu/orderDetail/${item.orderInfo.id}`\n                })\n                // uni.navigateTo({\n                //     url: `/pages/admin/orderDetail/index?id=${item.msn}`\n                // })\n            },\n            // 返回\n            goBack() {\n                uni.navigateBack()\n            },\n            // 底部功能区打开\n            openBox(key) {\n                if (key == 1) {\n                    this.isTool = false\n                    this.isSwiper = !this.isSwiper\n                } else {\n                    this.isSwiper = false\n                    this.isTool = !this.isTool\n                }\n                this.$refs[\"scrollBox\"].refresh();\n                this.$nextTick(()=>{\n                    this.scrollBom();\n                })\n            },\n            showWords() {\n                this.isWords = true\n            },\n\n            // 转接\n            goTransfer() {\n                this.isTransfer= true\n            },\n            // 转接关闭\n            closeTransfer(){\n                this.transferList.forEach((el,index)=>{\n                    el.isCheck = false\n                })\n                this.isTransfer= false\n            },\n            // 转接确认\n            confirm(){\n                if(this.activeKF){\n                    serviceTransfer({\n                        uid:this.toUid,\n                        kefuToUid:this.activeKF\n                    }).then(res=>{\n                        this.transferList.forEach((el,index)=>{\n                            el.isCheck = false\n                        })\n                        this.$Message.success(res.msg)\n                        this.isTransfer = false\n                    }).catch(error=>{\n                        this.$Message.error(error.msg)\n                    })\n                }else {\n                    this.$Message.error('请选择转接客服')\n                }\n            },\n            // 商品信息\n            goodsInfo() {\n                this.$router.push({\n                    path:'/kefu/goods/list?toUid='+ this.toUid\n                })\n            },\n            // 表情点击\n            addEmoji(item) {\n                let val = `[${item}]`\n                this.con += val\n            },\n            // 聊天表情转换\n            replace_em(str) {\n                str = str.replace(/\\[em-([a-z_]*)\\]/g, \"<span class='em em-$1'/></span>\");\n                return str;\n            },\n            // 获取聊天列表\n            getChatList() {\n                let self = this\n                serviceList({\n                    limit: this.limit,\n                    uid: this.toUid,\n                    upperId: this.upperId,\n                    is_tourist: this.$route.query.is_tourist\n                }).then(res => {\n                    var sH = 0\n                    res.data.forEach(el => {\n                        if (el.msn_type == 1 || el.msn_type == 2) {\n                            el.msn = this.replace_em(el.msn)\n                        }\n                    })\n                    let selector = ''\n                    if (this.upperId == 0) {\n                        selector = `chat_${res.data[res.data.length - 1].id}`;\n                    } else {\n                        selector = `chat_${this.chatList[0].id}`;\n                    }\n                    this.selector = selector\n                    this.chatList = [...res.data, ...this.chatList];\n                    this.loading = false\n                    this.isScroll = res.data.length >= this.limit\n                    this.$nextTick(() => {\n                        this.$emit('change', true)\n                        this.$refs[\"scrollBox\"].refresh();\n                        if (this.upperId == 0) {\n                            setTimeout(res => {\n                                let num = parseFloat(document.getElementById(selector).offsetTop) - 60\n                                this.$refs[\"scrollBox\"].scrollTo(\n                                    {\n                                        y: num\n                                    },\n                                    0\n                                );\n                            }, 300)\n                        }\n                    })\n                })\n            },\n            // 发送消息\n            sendText() {\n                if (!this.isSend) {\n                    return this.$Message.error('请输入内容')\n                }\n                this.sendMsg(this.con, 1);\n                this.con = ''\n            },\n            // ws发送\n            sendMsg(msn, type) {\n                let obj = {\n                    type: 'chat',\n                    data: {\n                        msn,\n                        type,\n                        to_uid: this.toUid\n                    }\n                }\n                Socket.then(ws => {\n                    ws.send(obj)\n                })\n            },\n            // 图片上传\n            uploadImg() {\n                let self = this\n                self.$util.uploadImageOne('upload/image', function (res) {\n                    if (res.status == 200) {\n                        self.sendMsg(res.data.url, 3)\n                    }\n                });\n            },\n            // 常用于选择\n            selectWords(item) {\n                console.log(item.message)\n                this.isWords = false\n                this.sendMsg(item.message, 1)\n            },\n            //  商品详情页\n            goProduct(item) {\n                this.$router.push({\n                    path:'/kefu/goods/detail?goodsId='+ item.msn\n                })\n            },\n            // 管理员订单\n            goAdminOrder() {\n                this.$router.push({\n                    path:'/kefu/orderList/0/'+this.toUid\n                })\n            },\n            // 滚动到底部\n            height() {\n                let self = this\n                var scrollTop = 0\n                let info = uni.createSelectorQuery().select(\".chat\");\n                setTimeout(res => {\n                    info.boundingClientRect(function (data) { //data - 各种参数\n                        console.log(data.height, 'data.height') // 获取元素高度\n                        scrollTop = data.height\n                        if (self.active) {\n                            self.scrollTop = parseInt(scrollTop) + 500\n                        } else {\n                            self.scrollTop = parseInt(scrollTop) + 100\n                        }\n                    }).exec()\n                }, 1000)\n            },\n            // 转接列表\n            getTransferList(){\n                transferList({\n                    uid:this.toUid\n                }).then(res=>{\n                    res.data.list.forEach((item,index)=>{\n                        item.isCheck = false\n                    })\n                    this.transferList = res.data.list\n                })\n            },\n            // 关闭常用语\n            closeBox(){\n                this.isWords = false\n            },\n            // 选择话术\n            selectMsg(data){\n                this.con+=data\n                this.isWords = false\n            },\n            handleActivate(vm, refreshDom) {\n                this.upperId = this.chatList[0].id\n            },\n            handleStart(vm, refreshDom, done) {\n                setTimeout(() => {\n                    // load finished\n                    done();\n                }, 2000)\n            },\n            handleBeforeDeactivate(vm, refreshDom, done) {\n                this.getChatList()\n\n                this.$on('change', data => {\n                    if (data) done();\n                })\n            },\n            handleDeactivate(vm, refreshDom) {\n                let num = parseFloat(document.getElementById(this.selector).offsetTop) - 60\n                this.$refs[\"scrollBox\"].scrollTo(\n                    {\n                        y: num\n                    },\n                    0\n                );\n            }\n        }\n    }\n</script>\n\n<style lang=\"stylus\" scoped>\n\n    .chat-box {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        height: 100vh;\n        background #f0f1f2\n        .head-box {\n            background: linear-gradient(85deg, #3875EA 0%, #1890FC 100%);\n\n            .title-hd {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                position: relative;\n                height: 43px;\n                padding: 0 .3rem;\n                color: #fff;\n\n                .icon-fanhui {\n                    position: absolute;\n                    left: .3rem;\n                    top: 50%;\n                    transform: translateY(-50%);\n                }\n\n                .icon-gengduo2 {\n                    /* #ifdef MP */\n                    position: absolute;\n                    right: 2.1rem;\n                    top: 50%;\n                    transform: translateY(-50%);\n                    /* #endif */\n                }\n            }\n        }\n\n        .scroll-box {\n            flex: 1;\n        }\n\n        .footer-box {\n            display: flex;\n            align-items: center;\n            height: 1rem;\n            padding: 0 .3rem;\n            color: rgba(0,0,0,0.8);\n            background #f7f7f7\n            .words .iconfont {\n                font-size: .5rem\n            }\n\n            .input-box {\n                display: flex;\n                align-items: center;\n                width: 4.92rem;\n                height: .64rem;\n                padding-right: 0.05rem;\n                margin-left: .18rem;\n                background-color: #fff;\n                border-radius: .32rem;\n                overflow hidden\n\n                input {\n                    flex: 1;\n                    padding-left: .2rem;\n                    height: 100%;\n                    border transparent !important\n\n                }\n\n                >>> .ivu-input, .ivu-input:hover, .ivu-input:focus {\n                    border transparent\n                    box-shadow: none;\n                }\n\n                .iconfont {\n                    font-size: .5rem;\n                    color: #ccc;\n                    font-weight: normal;\n                }\n\n                .isSend {\n                    color: #3875EA;\n                }\n            }\n\n            .emoji .iconfont {\n                margin-left: .18rem;\n                font-size: .5rem;\n            }\n\n            .more .iconfont {\n                margin-left: .18rem;\n                font-size: .5rem;\n            }\n\n        }\n    }\n\n    .tool-wrapper {\n        display: flex;\n        justify-content: space-between;\n        padding: .45rem .6rem;\n        background: #fff;\n        font-size: .24rem;\n\n        .tool-item {\n            text-align: center;\n\n            img {\n                width: 1.04rem;\n                height: 1.04rem;\n            }\n        }\n    }\n\n    .slider-banner {\n        padding-bottom .25rem\n        background: #fff;\n\n        .em {\n            display: inline-block;\n            width: .5rem;\n            height: .5rem;\n            margin: .4rem 0 0 .5rem;\n        }\n    }\n\n    .words-mask {\n        z-index: 50;\n        position: fixed;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.5);\n\n        .content {\n            position: absolute;\n            left: 0;\n            right: 0;\n            top: 1.14rem;\n            bottom: 0;\n            display: flex;\n            flex-direction: column;\n            background: #fff;\n            border-radius: 0.06rem 0.06rem 0px 0px;\n\n            .title-box {\n                padding: 0 .3rem .3rem;\n                position: relative;\n                border-bottom 1px solid #F5F6F9\n                .tab-box{\n                    position relative\n                    display flex\n                    justify-content space-between\n                    padding .4rem 2.2rem .3rem\n                    font-size .32rem\n                    color #9F9F9F\n                    .on{\n                        color #3875EA\n                        font-weight bold\n                    }\n                    .right-icon{\n                        position absolute\n                        right 0\n                        top 50%\n                        transform translateY(-50%)\n                        .iconfont{\n                            margin-left .2rem\n                            font-size .48rem\n                            color #C8CAD0\n                        }\n                    }\n                }\n                .input-box{\n                    display: flex;\n                    align-items: center;\n                    width: 6.9rem;\n                    height: .64rem;\n                    padding-right: 0.05rem;\n                    margin-left: .18rem;\n                    border-radius: .32rem;\n                    overflow hidden\n\n                    >>> .ivu-input{\n                        background #F5F6F9\n                    }\n                    >>> .ivu-input, .ivu-input:hover, .ivu-input:focus {\n                        border transparent\n                        box-shadow: none;\n                    }\n                }\n                .icon-cha1 {\n                    position: absolute;\n                    right: 0;\n                    top: 50%;\n                    transform: translateY(-50%);\n                }\n            }\n\n            .scroll-box {\n                flex: 1;\n                display flex\n                overflow: hidden;\n                .scroll-left{\n                    width 1.76rem\n                    height 100%\n                    overflow-y scroll\n                    -webkit-overflow-scrolling touch\n                    background #F5F6F9\n                    .left-item{\n                        position relative\n                        display flex\n                        align-items center\n                        justify-content center\n                        width 100%\n                        height 1.09rem\n                        color #282828\n                        font-size .26rem\n                        &.active{\n                            color #3875EA\n                            background #fff\n                            &:after{\n                                content ' '\n                                position: absolute;\n                                left 0\n                                top 50%\n                                transform translateY(-50%)\n                                width 0.06rem\n                                height .46rem\n                                background #3875EA\n                            }\n                        }\n                        &.add_cate{\n                            color #9F9F9F\n                            font-size .26rem\n                            .iconfont{\n                                margin-right 0.1rem\n                                font-size .24rem\n                            }\n                        }\n                    }\n                }\n                .right-box{\n                    flex 1\n                    overflow scroll\n                    -webkit-overflow-scrolling touch\n                }\n                .msg-item {\n                    padding: .25rem .3rem;\n                    color #888888\n                    font-size .28rem\n                    .title{\n                        margin-right .2rem\n                        color #282828\n                    }\n                    &.add-mg{\n                        display flex\n                        align-items center\n                        justify-content flex-end\n                        font-size .28rem\n                        padding .15rem .3rem\n                        .iconfont{\n                            font-size .36rem\n                            margin-right .1rem\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    .chat-scroll-box {\n        flex: 1;\n        overflow: hidden;\n        .day-box{\n            margin-bottom .2rem\n            font-size .24rem\n            color #999\n            text-align: center;\n        }\n        .chat-item {\n            display: flex;\n            margin-bottom: .36rem;\n            font-size .28rem\n\n            .avatar {\n                width: .8rem;\n                height: .8rem;\n                border-radius: 50%;\n            }\n\n            .msg-box {\n                display: flex;\n                align-items: center;\n                max-width: 4.52rem;\n                margin-left: .22rem;\n                padding: .1rem .24rem;\n                background: #fff;\n                border-radius: .14rem;\n                word-break: break-all;\n                color #333\n            }\n\n            .img-box {\n                width: 2.7rem;\n                margin-left: .22rem;\n\n                img {\n                    width: 2.7rem;\n                    border-radius 6px\n                }\n            }\n\n            .product-box {\n                width: 4.52rem;\n                background-color: #fff;\n                border-radius: .14rem;\n                overflow: hidden;\n                margin-left: .22rem;\n\n                img {\n                    width: 4.52rem;\n                }\n\n                .info {\n                    padding: .16rem .26rem;\n\n                    .price {\n                        font-size: .36rem;\n                        color: #F74C31;\n\n                        text {\n                            font-size: .28rem;\n                        }\n                    }\n                }\n            }\n\n            .order-box {\n                width: 4.52rem;\n                margin-left: .22rem;\n                background-color: #fff;\n                border-radius: .14rem;\n\n                .title {\n                    padding: .15rem .2rem;\n                    font-size: .26rem;\n                    color: #282828;\n                    border-bottom: 1px solid #ECEFF8;\n                }\n\n                .info {\n                    display: flex;\n                    padding: .2rem;\n\n                    img {\n                        width: 1.24rem;\n                        height: 1.24rem;\n                        border-radius: 0.06rem;\n                    }\n\n                    .product-info {\n                        flex: 1;\n                        display: flex;\n                        flex-direction: column;\n                        justify-content: space-between;\n                        margin-left: .16rem;\n\n                        .name {\n                            font-size: .26rem;\n                        }\n\n                        .price {\n                            font-size: .3rem;\n                            color: #F74C31;\n                        }\n                    }\n                }\n            }\n\n            &.right-box {\n                flex-direction: row-reverse;\n\n                .msg-box {\n                    margin-left: 0;\n                    margin-right: .22rem;\n                    background-color: #9cec60;\n                }\n\n                .img-box {\n                    margin-left: 0;\n                    margin-right: .22rem;\n                }\n\n                .product-box {\n                    margin-left: 0;\n                    margin-right: .22rem;\n                }\n\n                .order-box {\n                    margin-left: 0;\n                    margin-right: .22rem;\n                }\n            }\n\n            .em {\n                margin: 0;\n            }\n        }\n    }\n    .transfer-mask\n        z-index 30\n        position fixed\n        left 0\n        top 0\n        width 100%\n        height 100%\n        background rgba(0,0,0,0.5)\n        .content\n            position absolute\n            left 0\n            bottom 0\n            transform translateY(100%)\n            top 2.5rem\n            right 0\n            display flex\n            flex-direction column\n            background #fff\n            border-radius: .16rem .16rem 0px 0px;\n            &.on\n                animation up .2s linear\n                animation-fill-mode: forwards;\n            .title\n                position relative\n                display flex\n                align-items center\n                justify-content center\n                height 1.1rem\n                font-size .32rem\n                font-weight bold\n                color #282828\n                .iconfont\n                    position absolute\n                    right .3rem\n                    top 50%\n                    transform translateY(-50%)\n                    color #C8CAD0\n                    font-size .44rem\n            .list-wrapper\n                flex 1\n                padding-left .3rem\n                overflow-y scroll\n                -webkit-overflow-scrolling touch\n                .list-item\n                    display flex\n                    align-items center\n                    padding .16rem 0\n                    border-bottom 1px solid #F0F2F7\n                    .check-box\n                        width .72rem\n                    .avatar-box img\n                        width .9rem\n                        height .9rem\n                        border-radius 0.06rem\n                    .nickName\n                        margin-left .28rem\n                        color #282828\n                        font-size .3rem\n                        font-weight bold\n            .btn\n                width 6.9rem\n                height .86rem\n                margin .5rem auto\n                color #fff\n                background #3875EA\n                font-size .3rem\n                border-radius: .43rem !important;\n\n</style>\n<style>\n    @keyframes up {\n        0%{transform: translateY(100%);}\n        100% {transform: translateY(0);}\n    }\n    .emoji-outer {\n        position: absolute;\n        right: .5rem;\n        bottom: .3rem;\n        width: .5rem;\n        height: .5rem;\n    }\n</style>\n"]}]}