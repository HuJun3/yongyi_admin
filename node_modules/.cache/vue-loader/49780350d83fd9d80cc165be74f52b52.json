{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/kefu/pc/components/chatList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/kefu/pc/components/chatList.vue","mtime":1610680940000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7U29ja2V0fSBmcm9tICdAL2xpYnMvc29ja2V0JzsKaW1wb3J0IGRheWpzIGZyb20gJ2RheWpzJwppbXBvcnQgeyByZWNvcmQgfSBmcm9tICdAL2FwaS9rZWZ1JwppbXBvcnQgeyBIYXBweVNjcm9sbCB9IGZyb20gJ3Z1ZS1oYXBweS1zY3JvbGwnCmltcG9ydCBlbXB0eSBmcm9tICIuLi8uLi9jb21wb25lbnRzL2VtcHR5IjsKaW1wb3J0IHtmb3JFYWNofSBmcm9tICIuLi8uLi8uLi8uLi9saWJzL3Rvb2xzIjsKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogImNoYXRMaXN0IiwKICAgIHByb3BzOnsKICAgICAgICB1c2VyT25saW5lOnsKICAgICAgICAgICAgdHlwZTpPYmplY3QsCiAgICAgICAgICAgIGRlZmF1bHQ6ZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHt9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG5ld1JlY29yZWQ6ewogICAgICAgICAgICB0eXBlOk9iamVjdCwKICAgICAgICAgICAgZGVmYXVsdDpmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4ge30KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc2VhcmNoRGF0YTp7CiAgICAgICAgICAgIHR5cGU6U3RyaW5nLAogICAgICAgICAgICBkZWZhdWx0OicnCiAgICAgICAgfQogICAgfSwKICAgIGNvbXBvbmVudHM6ewogICAgICAgIEhhcHB5U2Nyb2xsLAogICAgICAgIGVtcHR5CiAgICB9LAogICAgd2F0Y2g6ewogICAgICAgIHVzZXJPbmxpbmU6ewogICAgICAgICAgICBoYW5kbGVyKG5WYWwsb1ZhbCl7CiAgICAgICAgICAgICAgICBpZihuVmFsLmhhc093blByb3BlcnR5KCd0b191aWQnKSl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyTGlzdC5mb3JFYWNoKChlbCxpbmRleCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWwudG9fdWlkID09IG5WYWwudG9fdWlkKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLm9ubGluZSA9IG5WYWwub25saW5lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihuVmFsLm9ubGluZSA9PSAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuaW5mbyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5LiK57q/6YCa55+lJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzYzogYCR7ZWwubmlja25hbWV95LiK57q/YAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRlZXA6dHJ1ZQogICAgICAgIH0sCiAgICAgICAgc2VhcmNoRGF0YTp7CiAgICAgICAgICAgIGhhbmRsZXIoblZhbCxvVmFsKXsKICAgICAgICAgICAgICAgIGlmKG5WYWwgIT1vVmFsKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLm5pY2tuYW1lID0gblZhbAogICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZSA9IDEKICAgICAgICAgICAgICAgICAgICB0aGlzLmlzU2Nyb2xsID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIHRoaXMudXNlckxpc3QgPSBbXQogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTZWFyY2ggPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGVlcDp0cnVlCiAgICAgICAgfQogICAgfSwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBoZFRhYkN1cjowLAogICAgICAgICAgICBoZFRhYjpbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAga2V5OjAsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6J+eUqOaIt+WIl+ihqCcKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAga2V5OjEsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6J+a4uOWuouWIl+ihqCcKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKICAgICAgICAgICAgdXNlckxpc3Q6W10sCiAgICAgICAgICAgIGN1cklkOicnLAogICAgICAgICAgICBwYWdlOjEsCiAgICAgICAgICAgIGxpbWl0OjE1LAogICAgICAgICAgICBpc1Njcm9sbDp0cnVlLAogICAgICAgICAgICBuaWNrbmFtZTonJywKICAgICAgICAgICAgaXNTZWFyY2g6ZmFsc2UsCiAgICAgICAgICAgIG9wczp7CiAgICAgICAgICAgICAgICB2dWVzY3JvbGw6ewogICAgICAgICAgICAgICAgICAgIG1vZGU6ICduYXRpdmUnLAogICAgICAgICAgICAgICAgICAgIGVuYWJsZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgdGlwczogewogICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2ZTogJ1B1c2ggdG8gTG9hZCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogJ1JlbGVhc2UgdG8gTG9hZCcsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiAnTG9hZGluZy4uLicsCiAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZURlYWN0aXZlOiAnTG9hZCBTdWNjZXNzZnVsbHkhJwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYXV0bzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgYXV0b0xvYWREaXN0YW5jZTogMCwKICAgICAgICAgICAgICAgICAgICBwdWxsUmVmcmVzaDogewogICAgICAgICAgICAgICAgICAgICAgICBlbmFibGU6IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBwdXNoTG9hZDogewogICAgICAgICAgICAgICAgICAgICAgICBlbmFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG86IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Mb2FkRGlzdGFuY2U6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJhcjp7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDonIzM5MzIzMicsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTonLjUnLAogICAgICAgICAgICAgICAgICAgIHNpemU6JzVweCcKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICB9CiAgICB9LAogICAgZmlsdGVyczogewogICAgICAgIHRvRGF5OiBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuICcnCiAgICAgICAgICAgIHJldHVybiAgZGF5anMudW5peCh2YWx1ZSkuZm9ybWF0KCdN5pyIROaXpSBISDptbScpCgogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIGxldCB0aGF0ID0gdGhpcwogICAgICAgIFNvY2tldC50aGVuKHdzPT57CiAgICAgICAgICAgIC8v55So5oi36L2s5o6lCiAgICAgICAgICAgIHdzLiRvbigndHJhbnNmZXInLCBkYXRhID0+IHsKICAgICAgICAgICAgICAgIGxldCBzdGF0dXMgPSBmYWxzZQogICAgICAgICAgICAgICAgdGhhdC51c2VyTGlzdC5mb3JFYWNoKChlbCxpbmRleCxhcnIpPT57CiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5yZWNvcmVkLmlkID09IGVsLmlkKXsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnJlY29yZWQuaXNfdG91cmlzdCA9PSB0aGF0LmhkVGFiQ3VyKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvbGRWYWwgPSBkYXRhLnJlY29yZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyci5zcGxpY2UoaW5kZXgsMSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpbmRleCA9PSAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzZXREYXRhSWQnLG9sZFZhbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWwubXNzYWdlX251bSA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyci51bnNoaWZ0KG9sZFZhbCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuaW5mbyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+aCqOacieS4gOadoei9rOaOpea2iOaBr++8gScsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBpZighc3RhdHVzKXsKICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnJlY29yZWQuaXNfdG91cmlzdCA9PSB0aGlzLmhkVGFiQ3VyKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJMaXN0LnVuc2hpZnQoZGF0YS5yZWNvcmVkKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICB3cy4kb24oJ21zc2FnZV9udW0nLCBkYXRhID0+IHsKICAgICAgICAgICAgICAgIGlmKGRhdGEucmVjb3JlZC5pZCl7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXR1cyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgdGhhdC51c2VyTGlzdC5mb3JFYWNoKChlbCxpbmRleCxhcnIpPT57CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEucmVjb3JlZC5pZCA9PSBlbC5pZCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnJlY29yZWQuaXNfdG91cmlzdCA9PSB0aGF0LmhkVGFiQ3VyKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2xkVmFsID0gZGF0YS5yZWNvcmVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnNwbGljZShpbmRleCwxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyci51bnNoaWZ0KG9sZFZhbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgaWYoIXN0YXR1cyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEucmVjb3JlZC5pc190b3VyaXN0ID09IHRoaXMuaGRUYWJDdXIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJMaXN0LnVuc2hpZnQoZGF0YS5yZWNvcmVkKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGRhdGEucmVjb3JlZC5pc190b3VyaXN0ICE9IHRoaXMuaGRUYWJDdXIgJiYgZGF0YS5yZWNvcmVkLmlkKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuaW5mbyh7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLmhkVGFiQ3VyPyfnlKjmiLflj5HmnaXmtojmga/llabvvIEnOifmuLjlrqLlj5HmnaXmtojmga/llabvvIEnLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0pOwogICAgICAgIHRoaXMuYnVzLiRvbignY2hhbmdlJywgZGF0YSA9PiB7CiAgICAgICAgICAgIHRoaXMubmlja25hbWUgPSBkYXRhCiAgICAgICAgfSkKICAgICAgICB0aGlzLmdldExpc3QoKQoKICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICAvL+WIh+aNogogICAgICAgIGNoYW5nZVRhYihpdGVtKXsKICAgICAgICAgICAgaWYodGhpcy5oZFRhYkN1ciA9PSBpdGVtLmtleSkgcmV0dXJuCiAgICAgICAgICAgIHRoaXMuaGRUYWJDdXIgPSBpdGVtLmtleQogICAgICAgICAgICB0aGlzLmlzU2Nyb2xsID0gdHJ1ZQogICAgICAgICAgICB0aGlzLnBhZ2UgPSAxCiAgICAgICAgICAgIHRoaXMudXNlckxpc3QgPSBbXQogICAgICAgICAgICB0aGlzLiRlbWl0KCdjaGFuZ2VUeXBlJyxpdGVtLmtleSkKICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCkKICAgICAgICB9LAogICAgICAgIGdldExpc3QoKXsKICAgICAgICAgICAgaWYoIXRoaXMuaXNTY3JvbGwpIHJldHVybgogICAgICAgICAgICByZWNvcmQoewogICAgICAgICAgICAgICAgbmlja25hbWU6dGhpcy5uaWNrbmFtZSwKICAgICAgICAgICAgICAgIHBhZ2U6dGhpcy5wYWdlLAogICAgICAgICAgICAgICAgbGltaXQ6dGhpcy5saW1pdCwKICAgICAgICAgICAgICAgIGlzX3RvdXJpc3Q6dGhpcy5oZFRhYkN1cgogICAgICAgICAgICB9KS50aGVuKCByZXMgPT4gewogICAgICAgICAgICAgICAgaWYocmVzLmRhdGEubGVuZ3RoPjApewogICAgICAgICAgICAgICAgICAgIHJlcy5kYXRhWzBdLm1zc2FnZV9udW0gPSAwCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1Njcm9sbCA9IHJlcy5kYXRhLmxlbmd0aD49dGhpcy5saW1pdAoKICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJMaXN0ID0gdGhpcy51c2VyTGlzdC5jb25jYXQocmVzLmRhdGEpCgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhZ2UgPT0gMSAmJiByZXMuZGF0YS5sZW5ndGg+MCAmJiF0aGlzLmlzU2VhcmNoICkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cklkID0gcmVzLmRhdGFbMF0uaWQKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2V0RGF0YUlkJyxyZXMuZGF0YVswXSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlKysKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NldERhdGFJZCcsMCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBjaGFydFJlYWNoQm90dG9tKCl7CiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICAgICAgfSwKICAgICAgICAvLyDpgInmi6nnlKjmiLcKICAgICAgICBzZWxlY3RVc2VyKGl0ZW0pewogICAgICAgICAgICBpZih0aGlzLmN1cklkID09IGl0ZW0uaWQpIHJldHVybgogICAgICAgICAgICBpdGVtLm1zc2FnZV9udW0gPSAwCiAgICAgICAgICAgIHRoaXMuY3VySWQgPSBpdGVtLmlkCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NldERhdGFJZCcsaXRlbSkKICAgICAgICB9LAogICAgICAgIGhhbmRsZVNjcm9sbCh2ZXJ0aWNhbCwgaG9yaXpvbnRhbCwgbmF0aXZlRXZlbnQpIHsKICAgICAgICAgICAgaWYodmVydGljYWwucHJvY2VzcyA9PSAxKXsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["chatList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chatList.vue","sourceRoot":"src/pages/kefu/pc/components","sourcesContent":["<template>\n    <div class=\"chatList\">\n        <div class=\"tab-head\">\n            <div class=\"item\" :class=\"{active:item.key == hdTabCur}\" v-for=\"(item, index) in hdTab\" :key=\"index\" @click=\"changeTab(item)\">{{item.title}}</div>\n        </div>\n        <div class=\"scroll-box\">\n            <vue-scroll :ops=\"ops\" @handle-scroll=\"handleScroll\" v-if=\"userList.length>0\"\n            >\n                <div class=\"chat-item\" v-for=\"(item,index) in userList\" :key=\"index\" :class=\"{active:curId == item.id}\" @click=\"selectUser(item)\">\n                    <div class=\"avatar\">\n                        <img v-lazy=\"item.avatar\" alt=\"\">\n                        <div class=\"status\" :class=\"{off:item.online == 0}\"></div>\n                    </div>\n                    <div class=\"user-info\">\n                        <div class=\"hd\">\n                            <span class=\"name line1\">{{item.nickname}}</span>\n                            <template v-if=\"item.type == 2\">\n                                <span class=\"label\">小程序</span>\n                            </template>\n                            <template v-if=\"item.type == 3\">\n                                <span class=\"label H5\">H5</span>\n                            </template>\n                            <template v-if=\"item.type == 1\">\n                                <span class=\"label wechat\">公众号</span>\n                            </template>\n                            <template v-if=\"item.type == 0\">\n                                <span class=\"label pc\">PC端</span>\n                            </template>\n                        </div>\n                        <div class=\"bd line1\">\n                            <template v-if=\"item.message_type <=2\">{{item.message}}</template>\n                            <template v-if=\"item.message_type ==3\">[图片]</template>\n                            <template v-if=\"item.message_type ==5\">[商品]</template>\n                            <template v-if=\"item.message_type ==6\">[订单]</template>\n                        </div>\n                    </div>\n                    <div class=\"right-box\">\n                        <div class=\"time\">{{item.update_time | toDay}}</div>\n                        <div class=\"num\">\n                            <Badge :count=\"item.mssage_num\">\n                                <a href=\"#\" class=\"demo-badge\"></a>\n                            </Badge>\n                        </div>\n                    </div>\n                </div>\n            </vue-scroll>\n            <empty v-else msg=\"暂无用户列表\" status=\"1\"></empty>\n        </div>\n\n\n\n\n    </div>\n</template>\n\n<script>\n    import {Socket} from '@/libs/socket';\n    import dayjs from 'dayjs'\n    import { record } from '@/api/kefu'\n    import { HappyScroll } from 'vue-happy-scroll'\n    import empty from \"../../components/empty\";\n    import {forEach} from \"../../../../libs/tools\";\n    export default {\n        name: \"chatList\",\n        props:{\n            userOnline:{\n                type:Object,\n                default:function () {\n                    return {}\n                }\n            },\n            newRecored:{\n                type:Object,\n                default:function () {\n                    return {}\n                }\n            },\n            searchData:{\n                type:String,\n                default:''\n            }\n        },\n        components:{\n            HappyScroll,\n            empty\n        },\n        watch:{\n            userOnline:{\n                handler(nVal,oVal){\n                    if(nVal.hasOwnProperty('to_uid')){\n                        this.userList.forEach((el,index)=>{\n                            if(el.to_uid == nVal.to_uid){\n                                el.online = nVal.online\n                                if(nVal.online == 1){\n                                    this.$Notice.info({\n                                        title: '上线通知',\n                                        desc: `${el.nickname}上线`\n                                    });\n                                }\n\n                            }\n                        })\n                    }\n                },\n                deep:true\n            },\n            searchData:{\n                handler(nVal,oVal){\n                    if(nVal !=oVal){\n                        this.nickname = nVal\n                        this.page = 1\n                        this.isScroll = true\n                        this.userList = []\n                        this.isSearch = true\n                        this.getList()\n                    }\n                },\n                deep:true\n            }\n        },\n        data(){\n            return {\n                hdTabCur:0,\n                hdTab:[\n                    {\n                        key:0,\n                        title:'用户列表'\n                    },\n                    {\n                        key:1,\n                        title:'游客列表'\n                    }\n                ],\n                userList:[],\n                curId:'',\n                page:1,\n                limit:15,\n                isScroll:true,\n                nickname:'',\n                isSearch:false,\n                ops:{\n                    vuescroll:{\n                        mode: 'native',\n                        enable: false,\n                        tips: {\n                            deactive: 'Push to Load',\n                            active: 'Release to Load',\n                            start: 'Loading...',\n                            beforeDeactive: 'Load Successfully!'\n                        },\n                        auto: false,\n                        autoLoadDistance: 0,\n                        pullRefresh: {\n                            enable: false\n                        },\n                        pushLoad: {\n                            enable: true,\n                            auto: true,\n                            autoLoadDistance: 10\n                        }\n                    },\n                    bar:{\n                        background:'#393232',\n                        opacity:'.5',\n                        size:'5px'\n                    }\n                },\n            }\n        },\n        filters: {\n            toDay: function (value) {\n                if (!value) return ''\n                return  dayjs.unix(value).format('M月D日 HH:mm')\n\n            }\n        },\n        mounted() {\n            let that = this\n            Socket.then(ws=>{\n                //用户转接\n                ws.$on('transfer', data => {\n                    let status = false\n                    that.userList.forEach((el,index,arr)=>{\n                        if(data.recored.id == el.id){\n                            status = true\n                            if(data.recored.is_tourist == that.hdTabCur){\n                                let oldVal = data.recored\n                                arr.splice(index,1)\n\n                                if(index == 0){\n                                    this.$emit('setDataId',oldVal)\n                                    oldVal.mssage_num = 0\n                                }\n                                arr.unshift(oldVal)\n                            }\n                            this.$Notice.info({\n                                title: '您有一条转接消息！',\n                            });\n                        }\n                    })\n                    if(!status){\n                        if(data.recored.is_tourist == this.hdTabCur)\n                            this.userList.unshift(data.recored)\n                    }\n                })\n                ws.$on('mssage_num', data => {\n                    if(data.recored.id){\n                        let status = false\n                        that.userList.forEach((el,index,arr)=>{\n                            if(data.recored.id == el.id){\n                                status = true\n                                if(data.recored.is_tourist == that.hdTabCur){\n                                    let oldVal = data.recored\n                                    arr.splice(index,1)\n                                    arr.unshift(oldVal)\n                                }\n                            }\n                        })\n                        if(!status){\n                            if(data.recored.is_tourist == this.hdTabCur)\n                                this.userList.unshift(data.recored)\n                        }\n                    }\n                    if(data.recored.is_tourist != this.hdTabCur && data.recored.id){\n                        this.$Notice.info({\n                            title: this.hdTabCur?'用户发来消息啦！':'游客发来消息啦！',\n                        });\n                    }\n                })\n            });\n            this.bus.$on('change', data => {\n                this.nickname = data\n            })\n            this.getList()\n\n        },\n        methods:{\n            //切换\n            changeTab(item){\n                if(this.hdTabCur == item.key) return\n                this.hdTabCur = item.key\n                this.isScroll = true\n                this.page = 1\n                this.userList = []\n                this.$emit('changeType',item.key)\n                this.getList()\n            },\n            getList(){\n                if(!this.isScroll) return\n                record({\n                    nickname:this.nickname,\n                    page:this.page,\n                    limit:this.limit,\n                    is_tourist:this.hdTabCur\n                }).then( res => {\n                    if(res.data.length>0){\n                        res.data[0].mssage_num = 0\n                        this.isScroll = res.data.length>=this.limit\n\n                        this.userList = this.userList.concat(res.data)\n\n                        if (this.page == 1 && res.data.length>0 &&!this.isSearch ) {\n                            this.curId = res.data[0].id\n                            this.$emit('setDataId',res.data[0])\n                        }\n                        this.page++\n                    }else{\n                        this.$emit('setDataId',0)\n                    }\n\n                })\n            },\n            chartReachBottom(){\n                this.getList()\n            },\n            // 选择用户\n            selectUser(item){\n                if(this.curId == item.id) return\n                item.mssage_num = 0\n                this.curId = item.id\n                this.$emit('setDataId',item)\n            },\n            handleScroll(vertical, horizontal, nativeEvent) {\n                if(vertical.process == 1){\n                    this.getList()\n                }\n            }\n        }\n    }\n</script>\n\n<style lang=\"stylus\" scoped>\n.chatList\n    display flex\n    flex-direction column\n    width 320px\n    height 742px\n    border-right 1px solid #ECECEC\n    .tab-head\n        display flex\n        align-items center\n        justify-content space-between\n        height 50px\n        flex-shrink 0\n        padding 0 52px\n        font-size 14px\n        color #000000\n        .item\n            position relative\n            cursor pointer\n            &:after\n                display none\n                content ' '\n                position absolute\n                left 50%\n                bottom -15px\n                transform translateX(-50%)\n                height 2px\n                width 100%\n                background #1890FF\n            &.active\n                color #1890FF\n                &:after\n                    display block\n\n    .scroll-box\n        flex 1\n        height 500px\n        overflow hidden\n    .chat-item\n        display flex\n        align-items center\n        justify-content space-between\n        padding 12px 10px\n        height 74px\n        box-sizing border-box\n        border-left 3px solid transparent\n        cursor pointer\n        &.active\n            background #EFF0F1\n            border-left 3px solid #1890FF\n        .avatar\n            position relative\n            width 40px\n            height 40px\n            img\n                display block\n                width 100%\n                height 100%\n                border-radius 50%\n            .status\n                position absolute\n                right 3px\n                bottom 0\n                width 8px\n                height 8px\n                background #48D452\n                border 1px solid #fff\n                border-radius 50%\n                &.off\n                    background #999999\n        .user-info\n            width 155px\n            margin-left 12px\n            margin-top: 5px;\n            font-size 16px\n            .hd\n                display flex\n                align-items center\n                color: rgba(0, 0, 0, 0.65);\n                .name\n                    max-width 67%\n                .label\n                    margin-left 5px\n                    color #3875EA\n                    font-size 12px\n                    background #D8E5FF\n                    border-radius 2px\n                    padding 1px 5px\n                    &.H5\n                        background #FAF1D0\n                        color #DC9A04\n                    &.wechat\n                        background: rgba(64, 194, 73, 0.16);\n                        color #40C249\n                    &.pc\n                        background: rgba(100, 64, 194, 0.16);;\n                        color #6440C2\n            .bd\n                margin-top 3px\n                font-size 12px\n                color #8E959E\n        .right-box\n            position relative\n            flex 1\n            display flex\n            flex-direction column\n            align-items flex-end\n            color #8E959E\n            .num\n                margin-right 12px\n.chart-scroll\n    margin-top -10px\n</style>\n\n"]}]}