{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/kefu/pc/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/kefu/pc/index.vue","mtime":1610680942000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgp2YXIgbXAzID0gcmVxdWlyZSgnLi4vLi4vLi4vYXNzZXRzL3ZpZGVvL25vdGljZS53YXYnKTsKdmFyIG1wMyA9IG5ldyBBdWRpbyhtcDMpOwppbXBvcnQgU2V0dGluZyBmcm9tICdAL3NldHRpbmcnOwppbXBvcnQgeyBIYXBweVNjcm9sbCB9IGZyb20gJ3Z1ZS1oYXBweS1zY3JvbGwnCmltcG9ydCBiYXNlSGVhZGVyIGZyb20gJy4vY29tcG9uZW50cy9iYXNlSGVhZGVyJzsKaW1wb3J0IGNoYXRMaXN0IGZyb20gJy4vY29tcG9uZW50cy9jaGF0TGlzdCcKaW1wb3J0IHJpZ2h0TWVudSBmcm9tICIuL2NvbXBvbmVudHMvcmlnaHRNZW51IjsKaW1wb3J0IGVtb2ppTGlzdCBmcm9tICJAL3V0aWxzL2Vtb2ppIjsKaW1wb3J0IHtTb2NrZXR9IGZyb20gJ0AvbGlicy9zb2NrZXQnOwppbXBvcnQgdXRpbCBmcm9tICdAL2xpYnMvdXRpbCc7CmltcG9ydCBtc2dXaW5kb3cgZnJvbSAiLi9jb21wb25lbnRzL21zZ1dpbmRvdyI7CmltcG9ydCB0cmFuc2ZlciBmcm9tICcuL2NvbXBvbmVudHMvdHJhbnNmZXInCmltcG9ydCB7IHNlcnZpY2VMaXN0IH0gZnJvbSAnQC9hcGkva2VmdScKaW1wb3J0IGdvb2RzRGV0YWlsIGZyb20gIi4vY29tcG9uZW50cy9nb29kc19kZXRhaWwiOwppbXBvcnQgb3JkZXJEZXRhaWwgZnJvbSAiLi9jb21wb25lbnRzL29yZGVyX2RldGFpbCI7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcKaW1wb3J0IHsgZ2V0Q29va2llcywgcmVtb3ZlQ29va2llcyxzZXRDb29raWVzIH0gZnJvbSAnQC9saWJzL3V0aWwnCmltcG9ydCB7IHNlcnZpY2VJbmZvIH0gZnJvbSAnQC9hcGkva2VmdV9tb2JpbGUnCmNvbnN0IGNodW5rID0gZnVuY3Rpb24oYXJyLCBudW0pIHsKICAgIG51bSA9IG51bSAqIDEgfHwgMTsKICAgIHZhciByZXQgPSBbXTsKICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGkpIHsKICAgICAgICBpZiAoaSAlIG51bSA9PT0gMCkgewogICAgICAgICAgICByZXQucHVzaChbXSk7CiAgICAgICAgfQogICAgICAgIHJldFtyZXQubGVuZ3RoIC0gMV0ucHVzaChpdGVtKTsKICAgIH0pOwogICAgcmV0dXJuIHJldDsKfTsKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ2luZGV4JywKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBiYXNlSGVhZGVyLAogICAgICAgIGNoYXRMaXN0LAogICAgICAgIHJpZ2h0TWVudSwKICAgICAgICBtc2dXaW5kb3csCiAgICAgICAgdHJhbnNmZXIsCiAgICAgICAgSGFwcHlTY3JvbGwsCiAgICAgICAgZ29vZHNEZXRhaWwsCiAgICAgICAgb3JkZXJEZXRhaWwKICAgIH0sCiAgICBkYXRhICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpc0Vtb2ppOmZhbHNlLAogICAgICAgICAgICBjaGF0Q29uOicnLAogICAgICAgICAgICBlbW9qaUdyb3VwOiBjaHVuayhlbW9qaUxpc3QsIDIwKSwgLy8g6KGo5oOF5YiX6KGoCiAgICAgICAgICAgIGVtb2ppTGlzdDplbW9qaUxpc3QsCiAgICAgICAgICAgIGh0bWw6JycsCiAgICAgICAgICAgIHVzZXJBY3RpdmU6e30sIC8v5bem5L6n55So5oi35YiX6KGo6YCJ5Lit5L+h5oGvCiAgICAgICAgICAgIGtlZnVJbmZvOnt9LCAvL+WuouacjeS/oeaBrwogICAgICAgICAgICBpc01zZzpmYWxzZSwKICAgICAgICAgICAgaXNUcmFuc2ZlcjpmYWxzZSwKICAgICAgICAgICAgYWN0aXZlTXNnOicnLCAvLyDpgInkuK3nmoTor53mnK8KICAgICAgICAgICAgY2hhdExpc3Q6W10sCiAgICAgICAgICAgIHRleHQ6JycsCiAgICAgICAgICAgIGxpbWl0OjIwLAogICAgICAgICAgICB1cHBlcklkOjAsCiAgICAgICAgICAgIG9ubGluZTp0cnVlLC8v5b2T5YmN5a6i5pyN5Zyo57q/54q25oCBCiAgICAgICAgICAgIHNjcm9sbFRvcDowLAogICAgICAgICAgICBpc1Njcm9sbDp0cnVlLAogICAgICAgICAgICBvbGRIZWlnaHQ6MCwKICAgICAgICAgICAgaXNMb2FkOmZhbHNlLAogICAgICAgICAgICBpc1Byb2R1Y3RCb3g6ZmFsc2UsCiAgICAgICAgICAgIGdvb2RzSWQ6IiIsCiAgICAgICAgICAgIGlzT3JkZXI6ZmFsc2UsCiAgICAgICAgICAgIG9yZGVySWQ6JycsCiAgICAgICAgICAgIHVwbG9hZDonJywKICAgICAgICAgICAgaGVhZGVyOiB7fSwKICAgICAgICAgICAgdXBsb2FkRGF0YTp7CiAgICAgICAgICAgICAgICBmaWxlbmFtZTonZmlsZScKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdXNlck9ubGluZTp7fSwKICAgICAgICAgICAgbmV3UmVjb3JlZDp7fSwgLy/mlrDlr7nor53kv6Hmga8KICAgICAgICAgICAgc2VhcmNoRGF0YTonJywgLy8g5pCc57Si5paH5a2XCiAgICAgICAgICAgIHNjcm9sbE51bTowLCAvL+a7muWKqOasoeaVsAogICAgICAgICAgICB0cmFuc2ZlcklkOicnLCAvL+i9rOaOpWlkCiAgICAgICAgICAgIGJvZHlDbG9zZTpmYWxzZSwKICAgICAgICAgICAgdG91cmlzdDowCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOnsKICAgICAgICAuLi5tYXBTdGF0ZSh7CiAgICAgICAgICAgIHNvY2tldFN0YXR1czogc3RhdGUgPT4gc3RhdGUuYWRtaW4ua2VmdS5zb2NrZXRTdGF0dXMKICAgICAgICB9KSwKICAgICAgICBkaXNhYmxlZCgpewogICAgICAgICAgICBpZih0aGlzLmNoYXRDb24ubGVuZ3RoID09IDApewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcmVjb3JkcygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhdExpc3QubWFwKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgaXRlbS50aW1lID0gdGhpcy4kbW9tZW50KGl0ZW0uYWRkX3RpbWUqMTAwMCkuZm9ybWF0KCdNTU1EbyBIOm1tJykKICAgICAgICAgICAgICAgIGlmIChpbmRleCkgewogICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5hZGRfdGltZSAtCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhdExpc3RbaW5kZXggLSAxXS5hZGRfdGltZSA+PQogICAgICAgICAgICAgICAgICAgICAgICAzMDAKICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zaG93ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnNob3cgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGl0ZW0uc2hvdyA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgIH0sCiAgICB3YXRjaDp7CiAgICAgICAgLy8gc29ja2V0U3RhdHVzOnsKICAgICAgICAvLyAgICAgaGFuZGxlcihuVmFsLFZhbCl7CiAgICAgICAgLy8gICAgICAgICBpZihuVmFsKXsKICAgICAgICAvLyAgICAgICAgICAgICBTb2NrZXQuc2VuZCh7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGRhdGE6IHV0aWwuY29va2llcy5rZWZ1R2V0KCd0b2tlbicpLAogICAgICAgIC8vICAgICAgICAgICAgICAgICB0eXBlOiAia2VmdV9sb2dpbiIKICAgICAgICAvLyAgICAgICAgICAgICB9KTsKICAgICAgICAvLyAgICAgICAgIH0KICAgICAgICAvLyAgICAgfSwKICAgICAgICAvLyAgICAgZGVlcDp0cnVlCiAgICAgICAgLy8gfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy51cGxvYWQgPSBTZXR0aW5nLmFwaUJhc2VVUkwucmVwbGFjZSgnYWRtaW5hcGknLCAna2VmdWFwaScpKyAnL3VwbG9hZCcKICAgICAgICBzZXJ2aWNlSW5mbygpLnRoZW4ocmVzPT57CiAgICAgICAgICAgIHRoaXMua2VmdUluZm8gPSByZXMuZGF0YTsKICAgICAgICAgICAgaWYodGhpcy5rZWZ1SW5mby5zaXRlX25hbWUpewogICAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gdGhpcy5rZWZ1SW5mby5zaXRlX25hbWU7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgIHRoaXMua2VmdUluZm8uc2l0ZV9uYW1lID0gJyc7CiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgfSwKICAgIG1vdW50ZWQgKCkgewogICAgICAgIGxldCBzZWxmID0gdGhpcwogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oKXsKICAgICAgICAgICAgc2VsZi5pc0Vtb2ppID0gZmFsc2UKICAgICAgICB9KTsKCiAgICAgICAgU29ja2V0LnRoZW4od3M9PnsKICAgICAgICAgICAgd3Muc2VuZCh7CiAgICAgICAgICAgICAgICB0eXBlOiAna2VmdV9sb2dpbicsCiAgICAgICAgICAgICAgICBkYXRhOiBnZXRDb29raWVzKCdrZWZ1X3Rva2VuJykKICAgICAgICAgICAgfSkKICAgICAgICAgICAgd3MuJG9uKFsicmVwbHkiLCAiY2hhdCJdLCBkYXRhID0+IHsKICAgICAgICAgICAgICAgIGlmKGRhdGEubXNuX3R5cGUgPT0gMSl7CiAgICAgICAgICAgICAgICAgICAgZGF0YS5tc24gPSB0aGlzLnJlcGxhY2VfZW0oZGF0YS5tc24pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZihkYXRhLm1zbl90eXBlID09IDIpewogICAgICAgICAgICAgICAgICAgIGlmKGRhdGEubXNuLmluZGV4T2YoIlsiKSA9PSAtMSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubXNuID0gdGhpcy5yZXBsYWNlX2VtKGBbJHtkYXRhLm1zbn1dYCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmNoYXRMaXN0LnB1c2goZGF0YSkKICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2NoYXRfc2Nyb2xsIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9wID0gY29udGFpbmVyLm9mZnNldEhlaWdodAogICAgICAgICAgICAgICAgICAgIH0sODAwKQoKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgd3MuJG9uKCJyZXBseSIsIGRhdGEgPT4gewogICAgICAgICAgICAgICAgLy8gbXAzLnBsYXkoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHdzLiRvbigic29ja2V0X2Vycm9yIiwgKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcign6L+e5o6l5aSx6LSlJykKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHdzLiRvbigiZXJyX3RpcCIsIGRhdGEgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihkYXRhLm1zZykKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8v55So5oi35LiK57q/5o+Q6YaS5bm/5pKtCiAgICAgICAgICAgIHdzLiRvbigndXNlcl9vbmxpbmUnLCBkYXRhID0+IHsKICAgICAgICAgICAgICAgIHRoaXMudXNlck9ubGluZSA9IGRhdGEKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy/nlKjmiLfmnKror7vmtojmga/mnaHmlbDmm7TmlLkKICAgICAgICAgICAgd3MuJG9uKCdtc3NhZ2VfbnVtJywgZGF0YSA9PiB7CiAgICAgICAgICAgICAgICBpZihkYXRhLm51bT4wKXsKICAgICAgICAgICAgICAgICAgICBtcDMucGxheSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5jaGF0TGlzdC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0udG9fdWlkID09IGRhdGEudWlkKXsKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5tc3NhZ2VfbnVtID0gZGF0YS5udW07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZihkYXRhLnJlY29yZWQuaWQpewogICAgICAgICAgICAgICAgICAgIHRoaXMubmV3UmVjb3JlZCA9IGRhdGEucmVjb3JlZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgICAgdGhpcy5oZWFkZXJbJ0F1dGhvcmktemF0aW9uJ10gPSAnQmVhcmVyICcgKyBnZXRDb29raWVzKCdrZWZ1X3Rva2VuJyk7CiAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy5yZXBsYWNlX2VtKCdbZW0tc21pbGluZ19pbXBdJykKICAgICAgICAvLyBTb2NrZXQuaW5pdCh0aGlzLCdrZWZ1Jyk7CgogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBoYW5kbGVGb3JtYXRFcnJvciAoZmlsZSkgewogICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKCLkuIrkvKDlm77niYflj6rog73mmK8ganBn44CBanBn44CBanBlZ+OAgWdpZiDmoLzlvI8hIik7CiAgICAgICAgfSwKICAgICAgICBiaW5kRW50ZXIoZSl7CiAgICAgICAgICAgIGlmKGUudGFyZ2V0LnZhbHVlID09ICcnKXsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCfor7fovpPlhaXmtojmga8nKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0LnZhbHVlKQogICAgICAgICAgICB0aGlzLnNlbmRNc2coZS50YXJnZXQudmFsdWUsMSkKICAgICAgICAgICAgdGhpcy5jaGF0Q29uID0gJycKICAgICAgICB9LAogICAgICAgIC8vIOS4iuS8oOaIkOWKnwogICAgICAgIGhhbmRsZVN1Y2Nlc3MgKHJlcywgZmlsZSxmaWxlTGlzdCkgewogICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgICAgICAgICB0aGlzLnNlbmRNc2cocmVzLmRhdGEudXJsLDMpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvL+iuouWNleivpuaDhQogICAgICAgIGxvb2tPcmRlcihpdGVtKXsKICAgICAgICAgICAgdGhpcy5vcmRlcklkID0gaXRlbS5vcmRlckluZm8uaWQKICAgICAgICAgICAgdGhpcy5pc09yZGVyID0gdHJ1ZQogICAgICAgIH0sCiAgICAgICAgc2V0T25saW5lKGRhdGEpIHsKCiAgICAgICAgICAgIFNvY2tldC50aGVuKHdzPT4gewogICAgICAgICAgICAgICAgd3Muc2VuZCh7CiAgICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgICAgICBvbmxpbmU6ZGF0YQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgdHlwZTogIm9ubGluZSIKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMub25saW5lID0gZGF0YTsKICAgICAgICB9LAogICAgICAgIC8vIOmYu+atoua1j+iniOWZqOm7mOiupOaNouihjOaTjeS9nAogICAgICAgIGxpc3RlbihlKXsKICAgICAgICAgICAgaWYoZS5rZXlDb2RlID09IDEzKXsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8vIOi+k+WFpeahhumAieaLqeihqOaDhQogICAgICAgIHNlbGVjdChkYXRhKXsKICAgICAgICAgICAgbGV0IHZhbCA9IGBbJHtkYXRhfV1gCiAgICAgICAgICAgIHRoaXMuY2hhdENvbiArPSB2YWwKICAgICAgICAgICAgdGhpcy5pc0Vtb2ppID0gZmFsc2UKICAgICAgICB9LAogICAgICAgIC8vIOiBiuWkqeihqOaDhei9rOaNogogICAgICAgIHJlcGxhY2VfZW0oc3RyKSB7CiAgICAgICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9cW2VtLShbYS16X10qKVxdL2csICI8c3BhbiBjbGFzcz0nZW0gZW0tJDEnLz48L3NwYW4+Iik7CiAgICAgICAgICAgIHJldHVybiBzdHI7CiAgICAgICAgfSwKICAgICAgICAvLyDojrflj5bmmK/lkKbmuLjlrqIKICAgICAgICBjaGFuZ2VUeXBlKGRhdGEpewogICAgICAgICAgICB0aGlzLnRvdXJpc3QgPSBkYXRhCiAgICAgICAgfSwKICAgICAgICAvLyDojrflj5bliJfooajnlKjmiLfkv6Hmga8KICAgICAgICBzZXREYXRhSWQoZGF0YSl7CiAgICAgICAgICAgIHRoaXMudXNlckFjdGl2ZSA9ICBkYXRhCiAgICAgICAgICAgIHRoaXMuY2hhdExpc3QgPSBbXQogICAgICAgICAgICB0aGlzLnVwcGVySWQgPSAwCiAgICAgICAgICAgIHRoaXMub2xkSGVpZ2h0ID0gMAogICAgICAgICAgICB0aGlzLmlzU2Nyb2xsID0gdHJ1ZQogICAgICAgICAgICBpZihkYXRhKXsKICAgICAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC50aXRsZSA9IGRhdGEubmlja25hbWU/YOato+WcqOWSjCR7ZGF0YS5uaWNrbmFtZX3lr7nor53kuK0gLSAke3RoaXMua2VmdUluZm8uc2l0ZV9uYW1lfWA6J+ato+WcqOWSjOa4uOWuouWvueivneS4rSAtICcrIHRoaXMua2VmdUluZm8uc2l0ZV9uYW1lCgogICAgICAgICAgICAgICAgU29ja2V0LnRoZW4od3M9PiB7CiAgICAgICAgICAgICAgICAgICAgd3Muc2VuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnVzZXJBY3RpdmUudG9fdWlkCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJ0b19jaGF0IgogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgdGhpcy5nZXRDaGF0TGlzdCgpCiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LnRpdGxlID0gdGhpcy5rZWZ1SW5mby5zaXRlX25hbWUKICAgICAgICAgICAgfQoKCiAgICAgICAgfSwKICAgICAgICBtc2dDbG9zZSgpewogICAgICAgICAgICB0aGlzLmlzVHJhbnNmZXIgPSBmYWxzZQogICAgICAgIH0sCiAgICAgICAgLy8g6K+d5pyv6YCJ5LitCiAgICAgICAgYWN0aXZlVHh0KGRhdGEpewogICAgICAgICAgICB0aGlzLmNoYXRDb24gPSBkYXRhCiAgICAgICAgICAgIHRoaXMuaXNNc2cgPSBmYWxzZQogICAgICAgIH0sCiAgICAgICAgLy8g5paH5pys5Y+R6YCBCiAgICAgICAgc2VuZFRleHQoKXsKICAgICAgICAgICAgdGhpcy5zZW5kTXNnKHRoaXMuY2hhdENvbiwxKQogICAgICAgICAgICB0aGlzLmNoYXRDb24gPSAnJzsKICAgICAgICB9LAoKICAgICAgICAvLyDnu5/kuIDlj5HpgIHlpITnkIYKICAgICAgICBzZW5kTXNnKG1zbiwgdHlwZSkgewogICAgICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgICAgICAgdHlwZTonY2hhdCcsCiAgICAgICAgICAgICAgICBkYXRhOnsKICAgICAgICAgICAgICAgICAgICBtc24sCiAgICAgICAgICAgICAgICAgICAgdHlwZSwKICAgICAgICAgICAgICAgICAgICB0b191aWQ6IHRoaXMudXNlckFjdGl2ZS50b191aWQsCiAgICAgICAgICAgICAgICAgICAgaXNfdG91cmlzdDp0aGlzLnRvdXJpc3QKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBTb2NrZXQudGhlbih3cz0+IHsKICAgICAgICAgICAgICAgIHdzLnNlbmQob2JqKQogICAgICAgICAgICB9KQoKCgogICAgICAgIH0sCiAgICAgICAgc2VuZCh0eXBlLGRhdGEpewogICAgICAgICAgICBTb2NrZXQuc2VuZCh7CiAgICAgICAgICAgICAgICBkYXRhLAogICAgICAgICAgICAgICAgdHlwZQogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIC8vIOiOt+WPluiBiuWkqeWIl+ihqAogICAgICAgIGdldENoYXRMaXN0KCl7CiAgICAgICAgICAgIHNlcnZpY2VMaXN0KHsKICAgICAgICAgICAgICAgIGxpbWl0OnRoaXMubGltaXQsCiAgICAgICAgICAgICAgICB1aWQ6dGhpcy51c2VyQWN0aXZlLnRvX3VpZCwKICAgICAgICAgICAgICAgIHVwcGVySWQ6dGhpcy51cHBlcklkLAogICAgICAgICAgICAgICAgaXNfdG91cmlzdDp0aGlzLnRvdXJpc3QKICAgICAgICAgICAgfSkudGhlbihyZXM9PnsKICAgICAgICAgICAgICAgIHJlcy5kYXRhLmZvckVhY2goZWw9PnsKICAgICAgICAgICAgICAgICAgICBpZihlbC5tc25fdHlwZSA9PSAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgZWwubXNuID0gdGhpcy5yZXBsYWNlX2VtKGVsLm1zbikKICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihlbC5tc25fdHlwZSA9PSAyKXsKICAgICAgICAgICAgICAgICAgICAgICAgZWwubXNuID0gdGhpcy5yZXBsYWNlX2VtKGBbJHtlbC5tc259XWApCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIGxldCBzZWxlY3RvciA9ICcnCiAgICAgICAgICAgICAgICBpZih0aGlzLnVwcGVySWQgPT0gMCl7CiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3IgPSAnJzsKCiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBzZWxlY3RvciA9IGBjaGF0XyR7dGhpcy5jaGF0TGlzdFswXS5pZH1gOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIHRoaXMuY2hhdExpc3QgPSByZXMuZGF0YS5jb25jYXQodGhpcy5jaGF0TGlzdCkKICAgICAgICAgICAgICAgIHRoaXMuY2hhdExpc3QgPSBbLi4ucmVzLmRhdGEsLi4udGhpcy5jaGF0TGlzdF07CiAgICAgICAgICAgICAgICB0aGlzLnVwcGVySWQgPSByZXMuZGF0YS5sZW5ndGg+MD9yZXMuZGF0YVswXS5pZCA6IDAKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkID0gZmFsc2UKICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpPT57CiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zY3JvbGxUb1RvcCgpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1Njcm9sbCA9IHJlcy5kYXRhLmxlbmd0aD49dGhpcy5saW1pdAogICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UGFnZVNjcm9sbFRvKHNlbGVjdG9yKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOiuvue9rumhtemdoua7muWKqOS9jee9rgogICAgICAgIHNldFBhZ2VTY3JvbGxUbyhzZWxlY3Rvcil7CiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpPT57CiAgICAgICAgICAgICAgICBpZihzZWxlY3Rvcil7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+ewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbnVtID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3Rvcikub2Zmc2V0VG9wKS02MAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvcCA9IG51bQogICAgICAgICAgICAgICAgICAgIH0sMCkKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHZhciBjb250YWluZXIgPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNjaGF0X3Njcm9sbCIpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9wID0gY29udGFpbmVyLm9mZnNldEhlaWdodAogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQocmVzPT57CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuc2Nyb2xsVG9wICE9IHRoaXMuJHJlZnMuc2Nyb2xsQm94Lm9mZnNldEhlaWdodCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNjaGF0X3Njcm9sbCIpLm9mZnNldEhlaWdodAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwzMDApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCgoKCgogICAgICAgIH0sCiAgICAgICAgLy/mu5rliqjliLDpobbpg6gKICAgICAgICBzY3JvbGxIYW5kbGVyKCl7CiAgICAgICAgICAgIGxldCBzZWxmID0gdGhpcwogICAgICAgICAgICBpZih0aGlzLmlzU2Nyb2xsICYmIHRoaXMudXBwZXJJZCl7CiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZCA9IHRydWUKICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q2hhdExpc3QoKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvLyDmu5rliqjmnaHliqjnlLsKICAgICAgICBzY3JvbGxUb1RvcChkdXJhdGlvbil7CiAgICAgICAgICAgIHZhciBjb250YWluZXIgPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNjaGF0X3Njcm9sbCIpOwogICAgICAgICAgICB0aGlzLnNjcm9sbFRvcCA9IGNvbnRhaW5lci5vZmZzZXRIZWlnaHQgLSB0aGlzLm9sZEhlaWdodAogICAgICAgICAgICBzZXRUaW1lb3V0KHJlcz0+ewogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy4kcmVmcy5zY3JvbGxCb3gub2Zmc2V0SGVpZ2h0KQogICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb3AgPXRoaXMuJHJlZnMuc2Nyb2xsQm94Lm9mZnNldEhlaWdodCAtIHRoaXMub2xkSGVpZ2h0CiAgICAgICAgICAgIH0sMzAwKQoKICAgICAgICB9LAogICAgICAgIC8vIOWVhuWTgeaOqOmAgQogICAgICAgIGJpbmRQdXNoKGRhdGEpewogICAgICAgICAgICB0aGlzLnNlbmRNc2coZGF0YSw1KQogICAgICAgIH0sCiAgICAgICAgLy8g5ZWG5ZOB6K+m5oOFCiAgICAgICAgbG9va0dvb2RzKGl0ZW0pewogICAgICAgICAgICB0aGlzLmdvb2RzSWQgPSBpdGVtLm1zbgogICAgICAgICAgICB0aGlzLmlzUHJvZHVjdEJveCA9IHRydWUKICAgICAgICB9LAogICAgICAgIC8vIOaQnOe0oueUqOaItwogICAgICAgIGJpbmRTZWFyY2goZGF0YSl7CiAgICAgICAgICAgIHRoaXMuc2VhcmNoRGF0YSA9IGRhdGEKICAgICAgICAgICAgdGhpcy5vbGRIZWlnaHQgPSAwCiAgICAgICAgICAgIHRoaXMudXBwZXJJZCA9IDAKICAgICAgICAgICAgdGhpcy5pc1Njcm9sbCA9IGZhbHNlCgogICAgICAgIH0sCiAgICAgICAgLy8g5a6i5pyN6L2s5o6lCiAgICAgICAgdHJhbnNmZXJQZW9wbGUoZGF0YSl7CiAgICAgICAgICAgIHRoaXMudHJhbnNmZXJJZCA9IGRhdGEuaWQKICAgICAgICAgICAgdGhpcy5pc1RyYW5zZmVyID0gZmFsc2UKICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCfovazmjqXmiJDlip8nKQogICAgICAgICAgICBTb2NrZXQudGhlbih3cz0+IHsKICAgICAgICAgICAgICAgIHdzLnNlbmQoewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0b19jaGF0JywKICAgICAgICAgICAgICAgICAgICBkYXRhOiB7aWQ6ZGF0YS51aWR9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgLy8g5a6i5pyN6L2s5o6l56Gu5a6aCiAgICAgICAgdHJhbnNmZXJPaygpewoKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/kefu/pc","sourcesContent":["<template>\n    <div class=\"kefu-layouts\">\n        <div class=\"content-wrapper\">\n            <baseHeader :kefuInfo=\"kefuInfo\" :online=\"online\" @setOnline=\"setOnline\" @search=\"bindSearch\"></baseHeader>\n            <div class=\"container\">\n                <chatList @setDataId=\"setDataId\"\n                          @changeType=\"changeType\"\n                          :userOnline=\"userOnline\"\n                          :newRecored=\"newRecored\"\n                          :searchData=\"searchData\"\n                ></chatList>\n                <div class=\"chat-content\">\n                    <div class=\"chat-body\">\n                        <happy-scroll size=\"5\" resize hide-horizontal :scroll-top=\"scrollTop\" @vertical-start=\"scrollHandler\">\n                            <div style=\"width: 600px; padding:20px\" id=\"chat_scroll\" ref=\"scrollBox\">\n                                <Spin v-show=\"isLoad\">\n                                    <Icon type=\"ios-loading\" size=18 class=\"demo-spin-icon-load\"></Icon>\n                                    <div>Loading</div>\n                                </Spin>\n                                <div class=\"chat-item\" v-for=\"(item,index) in records\" :key=\"index\" :class=\"[{'right-box':item.uid == kefuInfo.uid},{'gary':item.msn_type==5}]\" :id=\"`chat_${item.id}`\">\n                                    <div class=\"time\" v-show=\"item.show\">{{item.time }}</div>\n                                    <div class=\"flex-box\">\n                                        <div class=\"avatar\">\n                                            <img v-lazy=\"item.avatar\" alt=\"\">\n                                        </div>\n                                        <div class=\"msg-wrapper\">\n                                            <!-- 文档 -->\n                                            <template v-if=\"item.msn_type<=2\">\n                                                <div class=\"txt-wrapper pad16\" v-html=\"item.msn\"></div>\n                                            </template>\n                                            <!-- 图片 -->\n                                            <template v-if=\"item.msn_type==3\">\n                                                <div class=\"img-wraper\" v-viewer>\n                                                    <img v-lazy=\"item.msn\" alt=\"\">\n                                                </div>\n                                            </template>\n                                            <!-- 商品 -->\n                                            <template v-if=\"item.msn_type==5\">\n                                                <div class=\"order-wrapper pad16\">\n                                                    <div class=\"img-box\"><img :src=\"item.productInfo.image\" alt=\"\"></div>\n                                                    <div class=\"order-info\">\n                                                        <div class=\"name line1\">{{item.productInfo.store_name}}</div>\n                                                        <div class=\"sku\">库存：{{item.productInfo.stock}}     销量：{{item.productInfo.sales + item.productInfo.ficti}}</div>\n                                                        <div class=\"price-box\">\n                                                            <div class=\"num\">¥ {{item.productInfo.price}}</div>\n                                                            <a herf=\"javascript:;\" class=\"more\" @click.stop=\"lookGoods(item)\">查看商品 ></a>\n                                                        </div>\n                                                    </div>\n\n                                                </div>\n                                            </template>\n                                            <!-- 订单 -->\n                                            <template v-if=\"item.msn_type==6 && (item.orderInfo.length>0||item.orderInfo.id)\">\n                                                <div class=\"order-wrapper pad16\">\n                                                    <div class=\"img-box\"><img :src=\"item.orderInfo.cartInfo[0].productInfo.image\" alt=\"\"></div>\n                                                    <div class=\"order-info\">\n                                                        <div class=\"name line1\">{{item.orderInfo.order_id}}</div>\n                                                        <div class=\"sku\">商品数量：{{item.orderInfo.total_num}}</div>\n                                                        <div class=\"price-box\">\n                                                            <div class=\"num\">¥ {{item.orderInfo.pay_price}}</div>\n                                                            <a href=\"javascript:;\" class=\"more\" @click.stop=\"lookOrder(item)\">查看订单 ></a>\n                                                        </div>\n                                                    </div>\n\n                                                </div>\n                                            </template>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </happy-scroll>\n                    </div>\n                    <div class=\"chat-textarea\">\n                        <div class=\"chat-btn-wrapper\">\n                            <div class=\"left-wrapper\">\n                                <div class=\"icon-item\" @click.stop=\"isEmoji = !isEmoji\"><span class=\"iconfont iconbiaoqing1\"></span></div>\n                                <div class=\"icon-item\">\n                                    <Upload :show-upload-list=\"false\"\n                                            :headers=\"header\"\n                                            :data=\"uploadData\"\n                                            :on-success=\"handleSuccess\"\n                                            :format=\"['jpg','jpeg','png','gif']\"\n                                            :on-format-error=\"handleFormatError\"\n                                            :action=\"upload\">\n                                        <span class=\"iconfont icontupian1\"></span>\n                                    </Upload>\n                                </div>\n                                <div class=\"icon-item\" @click.stop.stop=\"isMsg = true\"><span class=\"iconfont iconliaotian\"></span></div>\n                            </div>\n                            <div class=\"right-wrapper\">\n                                <div class=\"icon-item\" @click.stop=\"isTransfer = !isTransfer\">\n                                    <span class=\"iconfont iconzhuanjie\"></span>\n                                    <span>转接</span>\n                                </div>\n                                <div class=\"transfer-box\" v-if=\"isTransfer\">\n                                    <transfer @close=\"msgClose\" @transferPeople=\"transferPeople\" :userUid=\"userActive.to_uid\"></transfer>\n                                </div>\n                                <div class=\"transfer-bg\" v-if=\"isTransfer\" @click.stop=\"isTransfer = false\"></div>\n                            </div>\n                            <!-- 表情 -->\n                            <div class=\"emoji-box\" v-show=\"isEmoji\">\n                                <div class=\"emoji-item\" v-for=\"(emoji, index) in emojiList\" :key=\"index\">\n                                    <i class=\"em\" :class=\"emoji\" @click.stop=\"select(emoji)\"></i>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"textarea-box\" style=\"position:relative;\">\n                            <Input v-model=\"chatCon\" type=\"textarea\" :rows=\"4\" @keydown.native=\"listen($event)\" placeholder=\"请输入文字内容\" @on-enter=\"bindEnter\" style=\"font-size:14px\"/>\n                            <div class=\"send-btn\"><Button class=\"btns\" type=\"primary\" :disabled=\"disabled\" @click.stop=\"sendText\">发送</Button></div>\n                        </div>\n                    </div>\n                </div>\n                <div>\n                    <rightMenu :isTourist=\"tourist\" :uid=\"userActive.to_uid\" :webType=\"userActive.type\" @bindPush=\"bindPush\"></rightMenu>\n                </div>\n            </div>\n            <!-- 用户标签 -->\n            <Modal\n                    v-model=\"isMsg\"\n                    :mask=\"true\"\n                    class=\"none-radius isMsgbox\"\n                    width=\"600\"\n                    :footer-hide=\"true\"\n            >\n                <msgWindow v-if=\"isMsg\" @close=\"msgClose\" @activeTxt=\"activeTxt\"></msgWindow>\n            </Modal>\n            <!-- 商品弹窗 -->\n            <div v-if=\"isProductBox\">\n                <div class=\"bg\" @click.stop=\"isProductBox = false\"></div>\n                <goodsDetail :goodsId=\"goodsId\"></goodsDetail>\n            </div>\n            <!-- 订单详情 -->\n            <div v-if=\"isOrder\">\n                <Modal\n                        v-model=\"isOrder\"\n                        title=\"订单信息\"\n                        width=\"700\"\n                        :footer-hide=\"true\"\n                        :mask=\"true\"\n                        class=\"none-radius\"\n                >\n                    <orderDetail :orderId=\"orderId\"></orderDetail>\n                </Modal>\n            </div>\n        </div>\n    </div>\n\n</template>\n\n<script>\n\n    var mp3 = require('../../../assets/video/notice.wav');\n    var mp3 = new Audio(mp3);\n    import Setting from '@/setting';\n    import { HappyScroll } from 'vue-happy-scroll'\n    import baseHeader from './components/baseHeader';\n    import chatList from './components/chatList'\n    import rightMenu from \"./components/rightMenu\";\n    import emojiList from \"@/utils/emoji\";\n    import {Socket} from '@/libs/socket';\n    import util from '@/libs/util';\n    import msgWindow from \"./components/msgWindow\";\n    import transfer from './components/transfer'\n    import { serviceList } from '@/api/kefu'\n    import goodsDetail from \"./components/goods_detail\";\n    import orderDetail from \"./components/order_detail\";\n    import { mapState } from 'vuex'\n    import { getCookies, removeCookies,setCookies } from '@/libs/util'\n    import { serviceInfo } from '@/api/kefu_mobile'\n    const chunk = function(arr, num) {\n        num = num * 1 || 1;\n        var ret = [];\n        arr.forEach(function(item, i) {\n            if (i % num === 0) {\n                ret.push([]);\n            }\n            ret[ret.length - 1].push(item);\n        });\n        return ret;\n    };\n    export default {\n        name: 'index',\n        components: {\n            baseHeader,\n            chatList,\n            rightMenu,\n            msgWindow,\n            transfer,\n            HappyScroll,\n            goodsDetail,\n            orderDetail\n        },\n        data () {\n            return {\n                isEmoji:false,\n                chatCon:'',\n                emojiGroup: chunk(emojiList, 20), // 表情列表\n                emojiList:emojiList,\n                html:'',\n                userActive:{}, //左侧用户列表选中信息\n                kefuInfo:{}, //客服信息\n                isMsg:false,\n                isTransfer:false,\n                activeMsg:'', // 选中的话术\n                chatList:[],\n                text:'',\n                limit:20,\n                upperId:0,\n                online:true,//当前客服在线状态\n                scrollTop:0,\n                isScroll:true,\n                oldHeight:0,\n                isLoad:false,\n                isProductBox:false,\n                goodsId:\"\",\n                isOrder:false,\n                orderId:'',\n                upload:'',\n                header: {},\n                uploadData:{\n                    filename:'file'\n                },\n                userOnline:{},\n                newRecored:{}, //新对话信息\n                searchData:'', // 搜索文字\n                scrollNum:0, //滚动次数\n                transferId:'', //转接id\n                bodyClose:false,\n                tourist:0\n            }\n        },\n        computed:{\n            ...mapState({\n                socketStatus: state => state.admin.kefu.socketStatus\n            }),\n            disabled(){\n                if(this.chatCon.length == 0){\n                    return true\n                }else{\n                    return false\n                }\n            },\n            records() {\n                return this.chatList.map((item, index) => {\n                    item.time = this.$moment(item.add_time*1000).format('MMMDo H:mm')\n                    if (index) {\n                        if (\n                            item.add_time -\n                            this.chatList[index - 1].add_time >=\n                            300\n                        ) {\n                            item.show = true;\n                        } else {\n                            item.show = false;\n                        }\n                    } else {\n                        item.show = true;\n                    }\n                    return item;\n                });\n            },\n        },\n        watch:{\n            // socketStatus:{\n            //     handler(nVal,Val){\n            //         if(nVal){\n            //             Socket.send({\n            //                 data: util.cookies.kefuGet('token'),\n            //                 type: \"kefu_login\"\n            //             });\n            //         }\n            //     },\n            //     deep:true\n            // }\n        },\n        created() {\n            this.upload = Setting.apiBaseURL.replace('adminapi', 'kefuapi')+ '/upload'\n            serviceInfo().then(res=>{\n                this.kefuInfo = res.data;\n                if(this.kefuInfo.site_name){\n                  document.title = this.kefuInfo.site_name;\n                }else{\n                  this.kefuInfo.site_name = '';\n                }\n            })\n        },\n        mounted () {\n            let self = this\n            window.addEventListener('click',function(){\n                self.isEmoji = false\n            });\n\n            Socket.then(ws=>{\n                ws.send({\n                    type: 'kefu_login',\n                    data: getCookies('kefu_token')\n                })\n                ws.$on([\"reply\", \"chat\"], data => {\n                    if(data.msn_type == 1){\n                        data.msn = this.replace_em(data.msn)\n                    }\n                    if(data.msn_type == 2){\n                        if(data.msn.indexOf(\"[\") == -1){\n                            data.msn = this.replace_em(`[${data.msn}]`)\n                        }\n                    }\n                    this.chatList.push(data)\n                    this.$nextTick(function() {\n                        setTimeout(()=>{\n                            var container =document.querySelector(\"#chat_scroll\");\n                            this.scrollTop = container.offsetHeight\n                        },800)\n\n                    });\n                });\n                ws.$on(\"reply\", data => {\n                    // mp3.play();\n                });\n                ws.$on(\"socket_error\", () => {\n                    this.$Message.error('连接失败')\n                });\n                ws.$on(\"err_tip\", data => {\n                    this.$Message.error(data.msg)\n                });\n                //用户上线提醒广播\n                ws.$on('user_online', data => {\n                    this.userOnline = data\n                    console.log(data);\n                });\n                //用户未读消息条数更改\n                ws.$on('mssage_num', data => {\n                    if(data.num>0){\n                        mp3.play();\n                    }\n                    this.chatList.forEach(item => {\n                        if(item.to_uid == data.uid){\n                            item.mssage_num = data.num;\n                        }\n                    });\n                    if(data.recored.id){\n                        this.newRecored = data.recored\n                    }\n                })\n            })\n            this.header['Authori-zation'] = 'Bearer ' + getCookies('kefu_token');\n            this.text = this.replace_em('[em-smiling_imp]')\n            // Socket.init(this,'kefu');\n\n        },\n        methods: {\n            handleFormatError (file) {\n                this.$Message.error(\"上传图片只能是 jpg、jpg、jpeg、gif 格式!\");\n            },\n            bindEnter(e){\n                if(e.target.value == ''){\n                    return this.$Message.error('请输入消息')\n                }\n                console.log(e.target.value)\n                this.sendMsg(e.target.value,1)\n                this.chatCon = ''\n            },\n            // 上传成功\n            handleSuccess (res, file,fileList) {\n                if (res.status === 200) {\n                    this.$Message.success(res.msg);\n                    this.sendMsg(res.data.url,3)\n                } else {\n                    this.$Message.error(res.msg);\n                }\n            },\n            //订单详情\n            lookOrder(item){\n                this.orderId = item.orderInfo.id\n                this.isOrder = true\n            },\n            setOnline(data) {\n\n                Socket.then(ws=> {\n                    ws.send({\n                        data: {\n                            online:data\n                        },\n                        type: \"online\"\n                    })\n                })\n                this.online = data;\n            },\n            // 阻止浏览器默认换行操作\n            listen(e){\n                if(e.keyCode == 13){\n                    e.preventDefault()\n                    return false\n                }\n            },\n            // 输入框选择表情\n            select(data){\n                let val = `[${data}]`\n                this.chatCon += val\n                this.isEmoji = false\n            },\n            // 聊天表情转换\n            replace_em(str) {\n                str = str.replace(/\\[em-([a-z_]*)\\]/g, \"<span class='em em-$1'/></span>\");\n                return str;\n            },\n            // 获取是否游客\n            changeType(data){\n                this.tourist = data\n            },\n            // 获取列表用户信息\n            setDataId(data){\n                this.userActive =  data\n                this.chatList = []\n                this.upperId = 0\n                this.oldHeight = 0\n                this.isScroll = true\n                if(data){\n                    window.document.title = data.nickname?`正在和${data.nickname}对话中 - ${this.kefuInfo.site_name}`:'正在和游客对话中 - '+ this.kefuInfo.site_name\n\n                    Socket.then(ws=> {\n                        ws.send({\n                            data: {\n                                id: this.userActive.to_uid\n                            },\n                            type: \"to_chat\"\n                        })\n                    })\n                    this.getChatList()\n                }else{\n                    window.document.title = this.kefuInfo.site_name\n                }\n\n\n            },\n            msgClose(){\n                this.isTransfer = false\n            },\n            // 话术选中\n            activeTxt(data){\n                this.chatCon = data\n                this.isMsg = false\n            },\n            // 文本发送\n            sendText(){\n                this.sendMsg(this.chatCon,1)\n                this.chatCon = '';\n            },\n\n            // 统一发送处理\n            sendMsg(msn, type) {\n                let obj = {\n                    type:'chat',\n                    data:{\n                        msn,\n                        type,\n                        to_uid: this.userActive.to_uid,\n                        is_tourist:this.tourist\n                    }\n                }\n                Socket.then(ws=> {\n                    ws.send(obj)\n                })\n\n\n\n            },\n            send(type,data){\n                Socket.send({\n                    data,\n                    type\n                });\n            },\n            // 获取聊天列表\n            getChatList(){\n                serviceList({\n                    limit:this.limit,\n                    uid:this.userActive.to_uid,\n                    upperId:this.upperId,\n                    is_tourist:this.tourist\n                }).then(res=>{\n                    res.data.forEach(el=>{\n                        if(el.msn_type == 1){\n                            el.msn = this.replace_em(el.msn)\n                        }else if(el.msn_type == 2){\n                            el.msn = this.replace_em(`[${el.msn}]`)\n                        }\n                    })\n                    let selector = ''\n                    if(this.upperId == 0){\n                        selector = '';\n\n                    }else{\n                        selector = `chat_${this.chatList[0].id}`;\n                    }\n\n                    // this.chatList = res.data.concat(this.chatList)\n                    this.chatList = [...res.data,...this.chatList];\n                    this.upperId = res.data.length>0?res.data[0].id : 0\n                    this.isLoad = false\n                    this.$nextTick(()=>{\n                        // this.scrollToTop()\n                        this.isScroll = res.data.length>=this.limit\n                        this.setPageScrollTo(selector)\n                    })\n                })\n            },\n            // 设置页面滚动位置\n            setPageScrollTo(selector){\n                this.$nextTick(()=>{\n                    if(selector){\n                        setTimeout(()=>{\n                            let num = parseFloat(document.getElementById(selector).offsetTop)-60\n                            this.scrollTop = num\n                        },0)\n                    }else{\n                        var container =document.querySelector(\"#chat_scroll\");\n                        this.scrollTop = container.offsetHeight\n                        setTimeout(res=>{\n                            if(this.scrollTop != this.$refs.scrollBox.offsetHeight){\n                                this.scrollTop = document.querySelector(\"#chat_scroll\").offsetHeight\n                            }\n                        },300)\n                    }\n                })\n\n\n\n\n            },\n            //滚动到顶部\n            scrollHandler(){\n                let self = this\n                if(this.isScroll && this.upperId){\n                    this.isLoad = true\n                    this.getChatList()\n                }\n            },\n            // 滚动条动画\n            scrollToTop(duration){\n                var container =document.querySelector(\"#chat_scroll\");\n                this.scrollTop = container.offsetHeight - this.oldHeight\n                setTimeout(res=>{\n                    console.log(this.$refs.scrollBox.offsetHeight)\n                    this.scrollTop =this.$refs.scrollBox.offsetHeight - this.oldHeight\n                },300)\n\n            },\n            // 商品推送\n            bindPush(data){\n                this.sendMsg(data,5)\n            },\n            // 商品详情\n            lookGoods(item){\n                this.goodsId = item.msn\n                this.isProductBox = true\n            },\n            // 搜索用户\n            bindSearch(data){\n                this.searchData = data\n                this.oldHeight = 0\n                this.upperId = 0\n                this.isScroll = false\n\n            },\n            // 客服转接\n            transferPeople(data){\n                this.transferId = data.id\n                this.isTransfer = false\n                this.$Message.success('转接成功')\n                Socket.then(ws=> {\n                    ws.send({\n                        type: 'to_chat',\n                        data: {id:data.uid}\n                    })\n                })\n            },\n            // 客服转接确定\n            transferOk(){\n\n            }\n        }\n    }\n</script>\n\n<style lang=\"stylus\" scoped>\n    @import \"../../../styles/emoji-awesome/css/google.min.css\";\n    textarea.ivu-input\n        border none\n        resize none\n    .kefu-layouts\n        padding-top 30px\n        height 100%\n        display flex\n        background #ccc\n        overflow scroll\n    .content-wrapper\n        display flex\n        flex-direction column\n        width 1200px\n        height 808px\n        margin 0 auto\n        background #fff\n        .container\n            flex 1\n            display flex\n            .chat-content\n                width 600px\n                height 100%\n                border-right 1px solid #ECECEC\n                .chat-body\n                    height 530px\n                    .chat-item\n                        margin-bottom 10px\n                        .time\n                            text-align center\n                            color #999999\n                            font-size 14px\n                            margin 18px 0\n                        .flex-box\n                            display flex\n                        .avatar\n                            width 40px\n                            height 40px\n                            margin-right 16px\n                            img\n                                display block\n                                width 100%\n                                height 100%\n                                border-radius 50%\n                        .msg-wrapper\n                            max-width 320px\n                            background #F5F5F5\n                            border-radius 10px\n                            color #000000\n                            font-size 14px\n                            overflow hidden\n                            .txt-wrapper\n                                word-break: break-all;\n                            .pad16\n                                padding 9px\n                            .img-wraper img\n                                max-width 100%\n                                height auto\n                                display block\n                            .order-wrapper\n                                display flex\n                                width 320px\n                                .img-box\n                                    width 60px\n                                    height 60px\n                                    img\n                                        width 100%\n                                        height 100%\n                                        border-radius 5px\n                                .order-info\n                                    display flex\n                                    flex-direction column\n                                    justify-content space-between\n                                    width 224px\n                                    margin-left 10px\n                                    font-size 12px\n                                    .price-box\n                                        display flex\n                                        align-items center\n                                        justify-content space-between\n                                        font-size 14px\n                                        color #FF0000\n                                        .more\n                                            font-size 12px\n                                            color #1890FF\n                                    .name\n                                        font-size 14px\n                                    .sku\n                                        margin 1px 0\n                                        color #999999\n                        &.right-box\n                            .flex-box\n                                flex-direction: row-reverse;\n                                .avatar\n                                    margin-right 0\n                                    margin-left 16px\n                                .msg-wrapper\n                                    background #CDE0FF\n                            &.gary .msg-wrapper\n                                    background #f5f5f5\n                .chat-textarea\n                    height 214px\n                    border-top 1px solid #ECECEC\n                    .chat-btn-wrapper\n                        position relative\n                        display flex\n                        align-items center\n                        justify-content space-between\n                        padding 15px 0\n                        .left-wrapper\n                            display flex\n                            align-items center\n                            .icon-item\n                                display flex\n                                align-items center\n                                margin-left 20px\n                                cursor pointer\n                                .iconfont\n                                    font-size 22px\n                                    color #333333\n                        .right-wrapper\n                            position relative\n                            padding-right 20px\n                            .icon-item\n                                display flex\n                                align-items center\n                                font-size 15px\n                                color #333\n                                cursor pointer\n                                span\n                                    margin-left 10px\n                            .transfer-box\n                                z-index 60\n                                position absolute\n                                right: 1px;\n                                bottom: 43px;\n                                width 140px\n                                background #fff\n                                box-shadow: 0 4px 12px rgba(0,0,0,.15);\n                                padding: 16px;\n                            .transfer-bg\n                                z-index 50\n                                position fixed\n                                left 0\n                                top 0\n                                width 100%\n                                height 100%\n                                background transparent\n                        .emoji-box\n                            position absolute\n                            left 0\n                            top 0\n                            transform: translateY(-100%);\n                            display flex\n                            flex-wrap wrap\n                            width 60%\n                            padding: 15px 9px ;\n                            box-shadow: 0px 0px 13px 1px rgba(0,0,0,.1);\n                            background #fff\n                            .emoji-item\n                                margin-right: 13px;\n                                margin-bottom: 8px;\n                                cursor pointer\n                                &:nth-child(10n)\n                                    margin-right 0\n    .send-btn\n        position absolute\n        right 0\n        bottom 10px\n        display flex\n        justify-content flex-end\n        margin-top 10px\n        margin-right 10px\n        width 80px\n        .btns\n            width 100%\n            background #3875EA\n            &[disabled]\n                background #CCCCCC\n                color #fff\n    .bg\n        z-index 100\n        position fixed\n        left 0\n        top 0\n        width 100%\n        height 100%\n        background rgba(0,0,0,0.5)\n    /deep/.happy-scroll-content\n        width 100%\n        .demo-spin-icon-load{\n            animation: ani-demo-spin 1s linear infinite;\n        }\n        @keyframes ani-demo-spin {\n            from { transform: rotate(0deg);}\n            50%  { transform: rotate(180deg);}\n            to   { transform: rotate(360deg);}\n        }\n        .demo-spin-col{\n            height: 100px;\n            position: relative;\n            border: 1px solid #eee;\n        }\n    .isMsgbox\n        >>> .ivu-modal-body\n            padding 0\n</style>\n"]}]}