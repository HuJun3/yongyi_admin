{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/kefu/mobile/user/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/kefu/mobile/user/index.vue","mtime":1610680940000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB1c2VyTGFiZWxzIGZyb20gIi4vdXNlckxhYmVsIjsKaW1wb3J0IHsgdXNlckluZm8sIHVzZXJHcm91cEFwaSwgcHV0R3JvdXBBcGksIHVzZXJMYWJlbCB9IGZyb20gJ0AvYXBpL2tlZnUnOwppbXBvcnQgdnVlUGlja2VycyBmcm9tICd2dWUtcGlja2Vycyc7CmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJpbmRleCIsCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgdXNlckxhYmVscywKICAgICAgICB2dWVQaWNrZXJzCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjaGFuZ2U6IGZhbHNlLCAvL+aooeaAgeahhuaYvuekuumakOiXjwogICAgICAgICAgICBhY3RpdmVVc2VySW5mbzogJycsCiAgICAgICAgICAgIHBpY2tlclZpc2libGU6IGZhbHNlLCAvL+WIhue7hOmAieaLqQogICAgICAgICAgICBncm91cExpc3Q6IFtdLCAvL+WIhue7hAogICAgICAgICAgICBsYWJlbExpc3Q6IFtdIC8v5qCH562+CiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5nZXRHcm91cCgpOwogICAgICAgIHRoaXMuZ2V0VXNlckluZm8oKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLy/ojrflj5bnlKjmiLfmoIfnrb4KICAgICAgICBnZXRMaXN0KCl7CiAgICAgICAgICAgIHVzZXJMYWJlbCh0aGlzLiRyb3V0ZS5wYXJhbXMudWlkKS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgdGhpcy5sYWJlbExpc3QgPXJlcy5kYXRhIHx8IFtdOwogICAgICAgICAgICAgICAgaWYodGhpcy5sYWJlbExpc3QubGVuZ3RoKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZSA9IHRydWU7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRkaWFsb2cuZXJyb3IoJ+aaguaXoOagh+etvicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kZGlhbG9nLmVycm9yKGVyci5tc2cpOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgLy/ojrflj5bnlKjmiLfor6bmg4UKICAgICAgICBnZXRVc2VySW5mbygpewogICAgICAgICAgICB1c2VySW5mbyh0aGlzLiRyb3V0ZS5wYXJhbXMudWlkKS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVVc2VySW5mbyA9IHJlcy5kYXRhOwogICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kZGlhbG9nLmVycm9yKGVyci5tc2cpOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgLy/ojrflj5bnlKjmiLfliIbnu4QKICAgICAgICBnZXRHcm91cCgpewogICAgICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgICAgICAgaWQ6IDAsCiAgICAgICAgICAgICAgICBncm91cF9uYW1lOiAi5pegIgogICAgICAgICAgICB9CiAgICAgICAgICAgIHVzZXJHcm91cEFwaSgpLnRoZW4ocmVzPT57CiAgICAgICAgICAgICAgICByZXMuZGF0YS51bnNoaWZ0KG9iaikKICAgICAgICAgICAgICAgIGxldCB0ZGF0YSA9IFtdCiAgICAgICAgICAgICAgICByZXMuZGF0YS5tYXAoaXRlbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGRhdGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLmdyb3VwX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLmlkCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5ncm91cExpc3QgPSBbdGRhdGFdOwogICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kZGlhbG9nLmVycm9yKGVyci5tc2cpOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgZWRpdExhYmVsKCl7CiAgICAgICAgICAgIHRoaXMuY2hhbmdlID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuZ2V0VXNlckluZm8oKTsKICAgICAgICB9LAogICAgICAgIG9uU2hvd0xhYmVsKCkgewogICAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICB9LAogICAgICAgIHNob3dOYW1lKCl7CiAgICAgICAgICAgIHRoaXMucGlja2VyVmlzaWJsZT10cnVlOwogICAgICAgIH0sCiAgICAgICAgY2FuY2VsKCkge30sCiAgICAgICAgLy8g6YCJ5oup5YiG57uECiAgICAgICAgY29uZmlybShyZXMpIHsKICAgICAgICAgICAgcHV0R3JvdXBBcGkodGhpcy4kcm91dGUucGFyYW1zLnVpZCwgcmVzWzBdLnZhbHVlKS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpCiAgICAgICAgICAgICAgICB0aGlzLmdldFVzZXJJbmZvKCk7CiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRkaWFsb2cuZXJyb3IoZXJyLm1zZyk7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBjbG9zZUNoYW5nZShtc2cpewogICAgICAgICAgICB0aGlzLmNoYW5nZSA9IG1zZzsKICAgICAgICB9LAogICAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/kefu/mobile/user","sourcesContent":["<template>\n    <div class=\"userBox\" v-if=\"activeUserInfo\">\n        <div class=\"user-header acea-row row-middle\">\n            <div class=\"user-header-img mr20\">\n                <img v-lazy=\"activeUserInfo.avatar\">\n            </div>\n            <div class=\"user-header-name\">\n                <span class=\"sp1 mr10\" v-text=\"activeUserInfo.nickname\"></span>\n                <span class=\"sp2\">{{ $route.params.type | sourceType}}</span>\n            </div>\n        </div>\n        <div class=\"user-list\">\n            <div class=\"acea-row item bgt\">\n                <span class=\"sp1\">用户标签</span>\n                <div class=\"labelBox\" v-if=\"activeUserInfo.labelNames.length\">\n                    <span class=\"label\" v-for=\"(item, index) in activeUserInfo.labelNames\" :key=\"index\">{{item}}</span>\n                </div>\n                <span v-else class=\"labelBox\">无</span>\n                <span class=\"iconfontYI icon-up\" @click=\"onShowLabel\"></span>\n            </div>\n            <div class=\"acea-row item bgt\">\n                <span class=\"sp1\">手机号</span>\n                <span class=\"sp2\" v-text=\"activeUserInfo.phone || '无'\"></span>\n            </div>\n            <div class=\"acea-row item\">\n                <span class=\"sp1\">分组</span>\n                <span class=\"checkName\" v-if=\"activeUserInfo.group_name\" v-text=\"activeUserInfo.group_name\" @click=\"showName\"></span>\n                <span v-else @click=\"showName\">无</span>\n                <vue-pickers :data=\"groupList\"\n                             v-if=\"groupList.length\"\n                             :showToolbar=\"true\"\n                             :maskClick=\"true\"\n                             @confirm=\"confirm\"\n                             :defaultIndex=\"0\"\n                             :visible.sync=\"pickerVisible\"\n                ></vue-pickers>\n\n            </div>\n        </div>\n        <div class=\"user-list\">\n            <div class=\"acea-row item bgt\">\n                <span class=\"sp1\">会员等级</span>\n                <span class=\"sp2\" v-text=\"activeUserInfo.level_name?activeUserInfo.level_name:'无'\"></span>\n            </div>\n            <div class=\"acea-row item bgt\">\n                <span class=\"sp1\">用户类型</span>\n                <span class=\"sp2\">{{activeUserInfo.user_type | userType}}</span>\n            </div>\n            <div class=\"acea-row item bgt\">\n                <span class=\"sp1\">余额</span>\n                <span class=\"sp2\" v-text=\"activeUserInfo.now_money || '无'\"></span>\n            </div>\n            <div class=\"acea-row item bgt\">\n                <span class=\"sp1\">推广员</span>\n                <span class=\"sp2\" v-text=\"activeUserInfo.is_promoter===1?'是':'否'\"></span>\n            </div>\n            <div class=\"acea-row item\">\n                <span class=\"sp1\">生日</span>\n                <span class=\"sp2\" v-text=\"activeUserInfo.birthday||'无'\"></span>\n            </div>\n        </div>\n        <user-labels v-if=\"change\" :change=\"change\"\n                    @cancel=\"cancel\"\n                    :labelList=\"labelList\"\n                    :uid=\"Number($route.params.uid)\"\n                    @editLabel=\"editLabel\"\n                    @closeChange=\"closeChange\"></user-labels>\n    </div>\n</template>\n\n<script>\n    import userLabels from \"./userLabel\";\n    import { userInfo, userGroupApi, putGroupApi, userLabel } from '@/api/kefu';\n    import vuePickers from 'vue-pickers';\n    export default {\n        name: \"index\",\n        components: {\n            userLabels,\n            vuePickers\n        },\n        data() {\n            return {\n                change: false, //模态框显示隐藏\n                activeUserInfo: '',\n                pickerVisible: false, //分组选择\n                groupList: [], //分组\n                labelList: [] //标签\n            }\n        },\n        mounted() {\n            this.getGroup();\n            this.getUserInfo();\n        },\n        methods: {\n            //获取用户标签\n            getList(){\n                userLabel(this.$route.params.uid).then(res=>{\n                    this.labelList =res.data || [];\n                    if(this.labelList.length){\n                        this.change = true;\n                    }else{\n                        this.$dialog.error('暂无标签');\n                    }\n                }).catch(err => {\n                    this.$dialog.error(err.msg);\n                })\n            },\n            //获取用户详情\n            getUserInfo(){\n                userInfo(this.$route.params.uid).then(res=>{\n                    this.activeUserInfo = res.data;\n                }).catch(err => {\n                    this.$dialog.error(err.msg);\n                })\n            },\n            //获取用户分组\n            getGroup(){\n                let obj = {\n                    id: 0,\n                    group_name: \"无\"\n                }\n                userGroupApi().then(res=>{\n                    res.data.unshift(obj)\n                    let tdata = []\n                    res.data.map(item => {\n                        tdata.push({\n                            label: item.group_name,\n                            value: item.id\n                        })\n                    });\n                    this.groupList = [tdata];\n                }).catch(err => {\n                    this.$dialog.error(err.msg);\n                })\n            },\n            editLabel(){\n                this.change = false;\n                this.getUserInfo();\n            },\n            onShowLabel() {\n                this.getList();\n            },\n            showName(){\n                this.pickerVisible=true;\n            },\n            cancel() {},\n            // 选择分组\n            confirm(res) {\n                putGroupApi(this.$route.params.uid, res[0].value).then(res=>{\n                    this.$Message.success(res.msg)\n                    this.getUserInfo();\n                }).catch(err => {\n                    this.$dialog.error(err.msg);\n                })\n            },\n            closeChange(msg){\n                this.change = msg;\n            },\n        }\n    }\n</script>\n\n<style scoped lang=\"less\">\n    .userBox{\n        background: #F0F1F2;\n    }\n    .bgt{\n        border-bottom: 1px solid #F0F2F7;\n    }\n    .user{\n        &-header{\n            width: 100%;\n            height: 1.5rem;\n            line-height: 1.5rem;\n            &-img{\n                width: 1.1rem;\n                height: 1.1rem;\n                border-radius: 50%;\n                overflow: hidden;\n                img{\n                    width: 100%;\n                    height: 100%;\n                }\n            }\n            &-name{\n                .sp1{\n                    color: #282828;\n                    font-size: 0.32rem;\n                    font-weight: bold;\n                }\n                .sp2{\n                    background: rgba(56, 117, 234, 0.14);\n                    color: #3875EA;\n                    font-size: 0.18rem;\n                    padding: 0.1rem;\n                    border-radius: 4px;\n                }\n            }\n            padding: 0 0.3rem;\n            background: #fff;\n            margin-bottom: 0.15rem;\n        }\n        &-list{\n            padding: 0 0.2rem;\n            background: #fff;\n            margin-bottom: 0.15rem;\n            .item{\n                width: 100%;\n                padding: .2rem 0;\n                .sp1{\n                    color: #686868;\n                    font-size: 0.28rem;\n                    width: 1.6rem;\n                }\n                .sp2{\n                    color: #282828;\n                    font-size: 0.28rem;\n                }\n            }\n            .labelBox{\n                display: flex;\n                flex-wrap: wrap;\n                width: 4.8rem;\n            }\n            .label{\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                height: .5rem;\n                border: 1px solid #3875EA;\n                opacity: 1;\n                border-radius: 16px;\n                padding: 0 0.15rem;\n                text-align: center;\n                color: #3875EA;\n                font-size: 0.2rem;\n                margin: .07rem .15rem .07rem 0;\n            }\n        }\n    }\n\n</style>\n"]}]}