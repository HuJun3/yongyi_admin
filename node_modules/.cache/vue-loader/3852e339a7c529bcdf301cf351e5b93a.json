{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/notify/smsConfig/components/register.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/notify/smsConfig/components/register.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNhcHRjaGFBcGksIHJlZ2lzdGVyQXBpIH0gZnJvbSAnQC9hcGkvc2V0dGluZyc7CmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdyZWdpc3RlcicsCiAgICBkYXRhICgpIHsKICAgICAgICBjb25zdCB2YWxpZGF0ZVBob25lID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICAgICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCfor7floavlhpnmiYvmnLrlj7cnKSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoIS9eMVszNDU2Nzg5XVxkezl9JC8udGVzdCh2YWx1ZSkpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5omL5py65Y+35qC85byP5LiN5q2j56GuIScpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGN1dE5VbTogJ+iOt+WPlumqjOivgeeggScsCiAgICAgICAgICAgIGNhbkNsaWNrOiB0cnVlLAogICAgICAgICAgICBmb3JtSW5saW5lOiB7CiAgICAgICAgICAgICAgICB1cmw6ICcnLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgICAgICAgICAgdmVyaWZ5X2NvZGU6ICcnLAogICAgICAgICAgICAgICAgcGhvbmU6ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJ1bGVJbmxpbmU6IHsKICAgICAgICAgICAgICAgIGFjY291bnQ6IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl55+t5L+h5bmz5Y+w6LSm5Y+3JywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBwYXNzd29yZDogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXnn63kv6HlubPlj7Dlr4bnoIEvdG9rZW4nLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHVybDogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXnvZHlnYDln5/lkI0nLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHBob25lOiBbCiAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgdmFsaWRhdG9yOiB2YWxpZGF0ZVBob25lLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHNpZ246IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl55+t5L+h562+5ZCNJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB2ZXJpZnlfY29kZTogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXpqozor4HnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAvLyDnn63kv6Hpqozor4HnoIEKICAgICAgICBjdXREb3duICgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuZm9ybUlubGluZS5waG9uZSkgewogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNhbkNsaWNrKSByZXR1cm47CiAgICAgICAgICAgICAgICB0aGlzLmNhbkNsaWNrID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmN1dE5VbSA9IDYwOwogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHRoaXMuZm9ybUlubGluZS5waG9uZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGNhcHRjaGFBcGkoZGF0YSkudGhlbihhc3luYyByZXMgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBsZXQgdGltZSA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmN1dE5VbS0tOwogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1dE5VbSA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1dE5VbSA9ICfojrflj5bpqozor4HnoIEnOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbkNsaWNrID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDEwMDApCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoJ+ivt+Whq+WGmeaJi+acuuWPtyEnKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgLy8g5rOo5YaMCiAgICAgICAgaGFuZGxlU3VibWl0IChuYW1lKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnNbbmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICByZWdpc3RlckFwaSh0aGlzLmZvcm1JbmxpbmUpLnRoZW4oYXN5bmMgcmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlbG9nbygpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOeri+WNs+eZu+W9lQogICAgICAgIGNoYW5nZWxvZ28gKCkgewogICAgICAgICAgICB0aGlzLiRlbWl0KCdvbi1jaGFuZ2UnKQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"register.vue","sourceRoot":"src/pages/notify/smsConfig/components","sourcesContent":["<template>\n    <Row type=\"flex\">\n        <Col span=\"24\">\n            <div class=\"index_from page-account-container\">\n                <div class=\"page-account-top \">\n                    <span class=\"page-account-top-tit\">一号通账户注册</span>\n                </div>\n                <Form ref=\"formInline\" :model=\"formInline\" :rules=\"ruleInline\" @submit.native.prevent>\n                    <!--<FormItem prop=\"account\">-->\n                    <!--<Input type=\"text\" v-model=\"formInline.account\" prefix=\"ios-contact-outline\"-->\n                    <!--placeholder=\"请输入短信平台账号\" />-->\n                    <!--</FormItem>-->\n                    <FormItem prop=\"phone\" class=\"maxInpt\">\n                        <Input type=\"number\" v-model=\"formInline.phone\" prefix=\"ios-contact-outline\"\n                               placeholder=\"请输入您的手机号\" />\n                    </FormItem>\n                    <FormItem prop=\"password\" class=\"maxInpt\">\n                        <Input type=\"password\" v-model=\"formInline.password\" prefix=\"ios-lock-outline\"\n                               placeholder=\"请输入短信平台密码/token\" />\n                    </FormItem>\n                    <!--<FormItem prop=\"password\">-->\n                    <!--<Input type=\"password\" v-model=\"formInline.password\" prefix=\"ios-lock-outline\"-->\n                    <!--placeholder=\"请确认短信平台密码/token\" />-->\n                    <!--</FormItem>-->\n                    <FormItem prop=\"url\" class=\"maxInpt\">\n                        <Input type=\"text\" v-model=\"formInline.url\" prefix=\"ios-contact-outline\"\n                               placeholder=\"请输入网址域名\" />\n                    </FormItem>\n                    <!--<FormItem prop=\"sign\">-->\n                    <!--<Input type=\"text\" v-model=\"formInline.sign\" prefix=\"ios-contact-outline\"-->\n                    <!--placeholder=\"请输入短信签名，例如：CRMEB\" />-->\n                    <!--</FormItem>-->\n                    <FormItem prop=\"verify_code\" class=\"maxInpt\">\n                        <div class=\"code\">\n                            <Input type=\"text\" v-model=\"formInline.verify_code\" prefix=\"ios-keypad-outline\"\n                                   placeholder=\"请输入验证码\" />\n                            <Button :disabled=!canClick @click=\"cutDown\">{{cutNUm}}</Button>\n                        </div>\n                    </FormItem>\n                    <FormItem class=\"maxInpt\">\n                        <Button type=\"primary\" long size=\"large\" @click=\"handleSubmit('formInline')\" class=\"btn\">注册</Button>\n                    </FormItem>\n                </Form>\n                <div class=\"page-account-other\">\n                    <span @click=\"changelogo\">立即登录</span>\n                </div>\n            </div>\n        </Col>\n    </Row>\n</template>\n\n<script>\n    import { captchaApi, registerApi } from '@/api/setting';\n    export default {\n        name: 'register',\n        data () {\n            const validatePhone = (rule, value, callback) => {\n                if (!value) {\n                    return callback(new Error('请填写手机号'));\n                } else if (!/^1[3456789]\\d{9}$/.test(value)) {\n                    callback(new Error('手机号格式不正确!'));\n                } else {\n                    callback();\n                }\n            };\n            return {\n                cutNUm: '获取验证码',\n                canClick: true,\n                formInline: {\n                    url: '',\n                    password: '',\n                    verify_code: '',\n                    phone: ''\n                },\n                ruleInline: {\n                    account: [\n                        { required: true, message: '请输入短信平台账号', trigger: 'blur' }\n                    ],\n                    password: [\n                        { required: true, message: '请输入短信平台密码/token', trigger: 'blur' }\n                    ],\n                    url: [\n                        { required: true, message: '请输入网址域名', trigger: 'blur' }\n                    ],\n                    phone: [\n                        { required: true, validator: validatePhone, trigger: 'blur' }\n                    ],\n                    sign: [\n                        { required: true, message: '请输入短信签名', trigger: 'blur' }\n                    ],\n                    verify_code: [\n                        { required: true, message: '请输入验证码', trigger: 'blur' }\n                    ]\n                }\n            }\n        },\n        methods: {\n            // 短信验证码\n            cutDown () {\n                if (this.formInline.phone) {\n                    if (!this.canClick) return;\n                    this.canClick = false;\n                    this.cutNUm = 60;\n                    let data = {\n                        phone: this.formInline.phone\n                    };\n                    captchaApi(data).then(async res => {\n                        this.$Message.success(res.msg);\n                    }).catch(res => {\n                        this.$Message.error(res.msg);\n                    })\n                    let time = setInterval(() => {\n                        this.cutNUm--;\n                        if (this.cutNUm === 0) {\n                            this.cutNUm = '获取验证码';\n                            this.canClick = true;\n                            clearInterval(time)\n                        }\n                    }, 1000)\n                } else {\n                    this.$Message.warning('请填写手机号!');\n                }\n            },\n            // 注册\n            handleSubmit (name) {\n                this.$refs[name].validate((valid) => {\n                    if (valid) {\n                        registerApi(this.formInline).then(async res => {\n                            this.$Message.success(res.msg);\n                            setTimeout(() => {\n                                this.changelogo();\n                            }, 1000);\n                        }).catch(res => {\n                            this.$Message.error(res.msg);\n                        })\n                    } else {\n                        return false;\n                    }\n                })\n            },\n            // 立即登录\n            changelogo () {\n                this.$emit('on-change')\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n    .maxInpt{\n        max-width 400px\n        margin-left auto\n        margin-right auto\n    }\n    .page-account-container{\n        text-align center\n        padding 50px 0\n    }\n    .page-account-top{\n        margin-bottom 20px\n    }\n    .page-account-top-tit\n        font-size 21px\n        color #1890FF\n    .page-account-other\n        text-align center\n        color #1890FF\n        font-size 12px\n        span\n            cursor pointer\n    .code {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n</style>\n"]}]}