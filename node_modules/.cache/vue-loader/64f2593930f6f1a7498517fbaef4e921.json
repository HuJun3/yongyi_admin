{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/components/newsCategory/index.vue?vue&type=style&index=0&id=5e8ffa44&scoped=true&lang=stylus&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/components/newsCategory/index.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNvbnRlbnRCb3gKICAgIGhlaWdodDogMTAwJTsKICAgIHdpZHRoOiAxMDAlOwogICAgcG9zaXRpb246IHN0YXRpYzsKICAgICNjb250ZW50IHsKICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgLyp0b3A6IDI4MHB4OyovCiAgICAgICAgYm90dG9tOiAwOwogICAgICAgIHdpZHRoOiA4NiU7CiAgICAgICAgLypoZWlnaHQgMTAwMHB4OyovCiAgICB9Ci5jb250ZW50Qm94ID4+PiAudnVlLXdhdGVyZmFsbC1lYXN5ewogICAgd2lkdGggMTAwJSAhaW1wb3J0YW50OwogICAgbGVmdDowIWltcG9ydGFudDsKICAgIG1hcmdpbi1sZWZ0IDAhaW1wb3J0YW50Owp9Ci5jb250ZW50Qm94ID4+PiAudnVlLXdhdGVyZmFsbC1lYXN5LXNjcm9sbDo6LXdlYmtpdC1zY3JvbGxiYXIgewogICAgZGlzcGxheTogbm9uZTsKfQouY29udGVudEJveCA+Pj4gLnZ1ZS13YXRlcmZhbGwtZWFzeS1zY3JvbGwgewogICAgc2Nyb2xsYmFyLXdpZHRoOiBub25lOyAvKiBmaXJlZm94ICovCiAgICAtbXMtb3ZlcmZsb3ctc3R5bGU6IG5vbmU7IC8qIElFIDEwKyAqLwogICAgb3ZlcmZsb3cteDogaGlkZGVuOwogICAgb3ZlcmZsb3cteTogYXV0bzsKfQouc29tZS1pbmZvCiAgICBwYWRkaW5nOiA3cHg7CiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKLlJlZnJlc2gKICAgIGZvbnQtc2l6ZSAxMnB4CiAgICBjb2xvciAjMTg5MEZGCiAgICBjdXJzb3IgcG9pbnRlcgogICAgbGluZS1oZWlnaHQ6IDM1cHgKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jawoubmV3c19waWMKICAgIHdpZHRoOiAxMDAlCiAgICBoZWlnaHQ6IDE1MHB4CiAgICBvdmVyZmxvdzogaGlkZGVuCiAgICBwb3NpdGlvbjogcmVsYXRpdmUKICAgIGJhY2tncm91bmQtc2l6ZTogMTAwJQogICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIGNlbnRlcgogICAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwIDAKICAgIHBhZGRpbmcgMTBweAogICAgYm94LXNpemluZyBib3JkZXItYm94CiAgICBkaXNwbGF5IGZsZXgKICAgIGZsZXgtZGlyZWN0aW9uIGNvbHVtbgogICAgYWxpZ24taXRlbXM6IGZsZXgtZW5kCi5uZXdzX3NwCiAgICBmb250LXNpemUgMTJweAogICAgY29sb3IgIzAwMDAwMAogICAgYmFja2dyb3VuZCAjZmZmCiAgICB3aWR0aCAxMDAlCiAgICBoZWlnaHQgMzhweAogICAgbGluZS1oZWlnaHQgMzhweAogICAgcGFkZGluZyAwIDEycHgKICAgIGJveC1zaXppbmcgYm9yZGVyLWJveAogICAgZGlzcGxheTogYmxvY2s7Ci5uZXdzX2NlbnQKICAgIHdpZHRoIDEwMCUKICAgIGhlaWdodCBhdXRvCiAgICBiYWNrZ3JvdW5kICNmZmYKICAgIGJvcmRlci10b3A6IDFweCBkYXNoZWQgI2VlZTsKICAgIGRpc3BsYXkgZmxleAogICAgcGFkZGluZyAxMHB4CiAgICBib3gtc2l6aW5nIGJvcmRlci1ib3gKICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbgogICAgLm5ld3Nfc3AxCiAgICAgICAgZm9udC1zaXplIDEycHgKICAgICAgICBjb2xvciAjMDAwMDAwCiAgICAgICAgd2lkdGg6IDcxJTsKICAgIC5uZXdzX2NlbnRfaW1nCiAgICAgICAgd2lkdGggODFweAogICAgICAgIGhlaWdodCA0NnB4CiAgICAgICAgYm9yZGVyLXJhZGl1cyA2cHgKICAgICAgICBvdmVyZmxvdyBoaWRkZW4KICAgICAgICBpbWcKICAgICAgICAgICAgd2lkdGggMTAwJQogICAgICAgICAgICBoZWlnaHQgMTAwJQoubmV3c19waWMgPj4+IC5pdnUtYnRuLWVycm9yCiAgICB3aWR0aDoyNHB4ICFpbXBvcnRhbnQ7CiAgICBoZWlnaHQ6MjRweCAhaW1wb3J0YW50OwogICAgYmFja2dyb3VuZDojRkY1RDVGICFpbXBvcnRhbnQ7CiAgICBjb2xvcjogI2ZmZiAhaW1wb3J0YW50OwogICAgYm9yZGVyOjFweCBzb2xpZCAgI2VlZSAhaW1wb3J0YW50OwoubmV3c19waWMgPj4+Lml2dS1idG4tZXJyb3I6aG92ZXIKICAgIGJhY2tncm91bmQ6I0ZGNUQ1RiAhaW1wb3J0YW50OwogICAgYm9yZGVyOjFweCBzb2xpZCAjZmZmICFpbXBvcnRhbnQ7CiAgICBjb2xvcjogI2ZmZiAhaW1wb3J0YW50OwoubmV3c19waWMgPj4+IC5pdnUtYnRuLXN1Y2Nlc3MKICAgIHdpZHRoOjI0cHggIWltcG9ydGFudDsKICAgIGhlaWdodDoyNHB4ICFpbXBvcnRhbnQ7CiAgICBib3JkZXI6MXB4IHNvbGlkICAjZWVlICFpbXBvcnRhbnQ7Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/newsCategory","sourcesContent":["<template>\n    <div :style=\"{ height: scrollerHeight + 'px' || ''}\">\n        <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n            <Form ref=\"formValidate\" :model=\"formValidate\" :label-width=\"80\" label-position=\"left\" class=\"tabform\">\n                <Row :gutter=\"24\" type=\"flex\" justify=\"end\">\n                    <Col span=\"24\">\n                        <Col v-bind=\"grid\" class=\"mr\">\n                            <FormItem label=\"图文搜索：\" prop=\"cate_name\" label-for=\"cate_name\">\n                                <Input  search enter-button placeholder=\"请输入\" element-id=\"cate_name\"  v-model=\"formValidate.cate_name\" @on-search=\"userSearchs\"/>\n                            </FormItem>\n                        </Col>\n                    </Col>\n                </Row>\n                <Row type=\"flex\" v-show=\"$route.path === '/admin/app/wechat/news_category/index'\">\n                    <router-link :to=\"'/admin/app/wechat/news_category/save/0'\">\n                        <Button type=\"primary\" class=\"bnt\" icon=\"md-add\">添加图文消息</Button>\n                    </router-link>\n                </Row>\n            </Form>\n        </Card>\n        <div class=\"contentBox\">\n            <div id=\"content\" :style=\"{ top: contentTop + 'px' || '', width: contentWidth}\" ref=\"content\">\n                <vue-waterfall-easy :imgsArr=\"imgsArr\" :maxCols=\"maxCols\" @click = 'clickFn'  @scrollReachBottom=\"getData\" ref=\"waterfall\" :reachBottomDistance=\"30\">\n                    <div class=\"img-info\" slot-scope=\"props\" v-if=\"props.value.new.length!==0\">\n                        <div  v-for=\"(j, i) in props.value.new\" :key=\"i\">\n                            <div  v-if=\"i === 0\">\n                                <div class=\"news_pic\"   :style=\"{backgroundImage: 'url(' + (j.image_input[0]) + ')',backgroundSize:'100% 100%'}\"  @mouseenter=\"mouseenterOut(j)\"  @mouseleave=\"mouseenterOver(j)\">\n                                    <Button type=\"success\" shape=\"circle\" icon=\"md-create\"  v-show=\"props.value.new[i].isDel && isShow\"  @click=\"clkk(props.value)\"></Button>\n                                    <Button type=\"error\" shape=\"circle\" icon=\"md-trash\"  v-show=\"props.value.new[i].isDel && isShow\" @click=\"del(props.value,'删除图文',i)\" style=\"margin-top: 5px;\"></Button>\n                                    <Button type=\"primary\"  icon=\"md-paper-plane\" v-show=\"props.value.new[i].isDel && isShowSend\"  shape=\"circle\"  @click=\"send(props.value,'发送',i)\">推送</Button>\n                                </div>\n                                <span class=\"news_sp\">{{j.title}}</span>\n                            </div>\n                            <div v-else class=\"news_cent\">\n                                <span class=\"news_sp1\" v-if=\"j.synopsis\">{{j.title}}</span>\n                                <div class=\"news_cent_img\" v-if=\"j.image_input.length!==0\"><img :src=\"j.image_input[0]\"></div>\n                            </div>\n                        </div>\n                        <p class=\"some-info\">{{props.value.id}}</p>\n                    </div>\n                    <div slot=\"waterfall-over\"></div>\n                </vue-waterfall-easy>\n            </div>\n        </div>\n    </div>\n\n</template>\n\n<script>\n    import vueWaterfallEasy from 'vue-waterfall-easy'\n    import { wechatNewsListApi } from '@/api/app'\n    import { mapState } from 'vuex'\n    export default {\n        name: 'newsCategory',\n        props: {\n            scrollerHeight: {\n                type: String,\n                default: '100%'\n            },\n            contentTop: {\n                type: String,\n                default: '230'\n            },\n            contentWidth: {\n                type: String,\n                default: '100%'\n            },\n            maxCols: {\n                type: Number,\n                default: 8\n            },\n            isShow: {\n                type: Boolean,\n                default: false\n            },\n            isShowSend: {\n                type: Boolean,\n                default: false\n            },\n            userIds: {\n                type: String,\n                default: ''\n            }\n        },\n        components: {\n            vueWaterfallEasy\n        },\n        data () {\n            return {\n                isDel: false,\n                imgsArr: [],\n                group: 0, // 当前加载的加载图片的次数\n                fetchImgsArr: [], // 存放每次滚动时下一批要加载的图片的数组\n                orderData: {},\n                gridPic: {\n                    xl: 6,\n                    lg: 8,\n                    md: 8,\n                    sm: 24,\n                    xs: 24\n                },\n                grid: {\n                    xl: 8,\n                    lg: 8,\n                    md: 8,\n                    sm: 24,\n                    xs: 24\n                },\n                formValidate: {\n                    cate_name: '',\n                    page: 1,\n                    limit: 10\n                }\n            }\n        },\n        created () {\n            this.getData()\n        },\n        mounted(){\n            // this.maxNum = 8;\n            // this.screenWidth = document.body.clientWidth\n            // window.onresize = () => {\n            //     return (() => {\n            //         this.screenWidth = document.body.clientWidth\n            //         if (this.screenWidth <= 1060) {\n            //             this.collapsed = true\n            //         } else {\n            //             this.collapsed = false\n            //         }\n            //     })()\n            // }\n        },\n        methods: {\n            // 发送图文消息\n            send (row, tit, num) {\n                let delfromData = {\n                    title: tit,\n                    num: num,\n                    url: `app/wechat/push`,\n                    method: 'post',\n                    ids: {\n                        id: row.id,\n                        user_ids: this.userIds\n                    }\n                }\n                this.$modalSure(delfromData).then((res) => {\n                    this.$Message.success(res.msg)\n                }).catch(res => {\n                    this.$Message.error(res.msg)\n                })\n            },\n            clickFn (event, { index, value }) {\n                event.preventDefault()\n                if (event.target.tagName.toLowerCase() === 'div') {\n                    this.$emit('getCentList', value)\n                }\n            },\n            // 删除\n            del (row, tit, num) {\n                let delfromData = {\n                    title: tit,\n                    num: num,\n                    url: `app/wechat/news/${row.id}`,\n                    method: 'DELETE',\n                    ids: ''\n                }\n                this.$modalSure(delfromData).then((res) => {\n                    this.$Message.success(res.msg)\n                    this.$nextTick(() => {\n                        this.imgsArr = []\n                    })\n                    this.formValidate.page = 1\n                    this.getData()\n                }).catch(res => {\n                    this.$Message.error(res.msg)\n                })\n            },\n            // 删除成功\n            // submitModel () {\n            //     if (this.delfromData.title === '删除图文') {\n            //         // this.imgsArr.splice(this.delfromData.num, 1)\n            //         this.$nextTick(() => {\n            //             this.imgsArr = [];\n            //         })\n            //         this.formValidate.page = 1;\n            //         this.getData();\n            //     }\n            // },\n            // 编辑\n            clkk (item) {\n                this.$router.push({ path: '/admin/app/wechat/news_category/save/' + item.id })\n            },\n            // 鼠标移进\n            mouseenterOut (item) {\n                this.$set(item, 'isDel', true)\n            },\n            // 鼠标移出\n            mouseenterOver (item) {\n                this.$set(item, 'isDel', false)\n            },\n            // 搜索\n            userSearchs () {\n                this.$nextTick(() => {\n                    this.imgsArr = []\n                })\n                this.formValidate.page = 1\n                this.getData()\n            },\n            // 瀑布流数据\n            getData () {\n                wechatNewsListApi(this.formValidate).then(async res => {\n                    if (res.data.list.length === 0) { // 模拟已经无新数据，显示 slot=\"waterfall-over\"\n                        this.imgsArr = []\n                        this.$nextTick(() => {\n                            this.$refs.waterfall.waterfallOver()\n                        })\n                    } else {\n                        let num = Math.ceil(res.data.count / this.formValidate.limit) + 1\n                        res.data.list.map((item) => {\n                            item.isDel = false\n                        })\n                        this.imgsArr = this.imgsArr.concat(res.data.list) || []\n                        this.formValidate.page++\n                        if (this.formValidate.page === num) { // 模拟已经无新数据，显示 slot=\"waterfall-over\"\n                            this.$refs.waterfall.waterfallOver()\n                            return\n                        };\n                    }\n                }).catch(res => {\n                    this.$Message.error(res.msg)\n                })\n            }\n        },\n        computed: {\n\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n    .contentBox\n        height: 100%;\n        width: 100%;\n        position: static;\n        #content {\n            position: absolute;\n            /*top: 280px;*/\n            bottom: 0;\n            width: 86%;\n            /*height 1000px;*/\n        }\n    .contentBox >>> .vue-waterfall-easy{\n        width 100% !important;\n        left:0!important;\n        margin-left 0!important;\n    }\n    .contentBox >>> .vue-waterfall-easy-scroll::-webkit-scrollbar {\n        display: none;\n    }\n    .contentBox >>> .vue-waterfall-easy-scroll {\n        scrollbar-width: none; /* firefox */\n        -ms-overflow-style: none; /* IE 10+ */\n        overflow-x: hidden;\n        overflow-y: auto;\n    }\n    .some-info\n        padding: 7px;\n        box-sizing: border-box;\n        text-align: center;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    .Refresh\n        font-size 12px\n        color #1890FF\n        cursor pointer\n        line-height: 35px\n        display: inline-block\n    .news_pic\n        width: 100%\n        height: 150px\n        overflow: hidden\n        position: relative\n        background-size: 100%\n        background-position: center center\n        border-radius: 5px 5px 0 0\n        padding 10px\n        box-sizing border-box\n        display flex\n        flex-direction column\n        align-items: flex-end\n    .news_sp\n        font-size 12px\n        color #000000\n        background #fff\n        width 100%\n        height 38px\n        line-height 38px\n        padding 0 12px\n        box-sizing border-box\n        display: block;\n    .news_cent\n        width 100%\n        height auto\n        background #fff\n        border-top: 1px dashed #eee;\n        display flex\n        padding 10px\n        box-sizing border-box\n        justify-content: space-between\n        .news_sp1\n            font-size 12px\n            color #000000\n            width: 71%;\n        .news_cent_img\n            width 81px\n            height 46px\n            border-radius 6px\n            overflow hidden\n            img\n                width 100%\n                height 100%\n    .news_pic >>> .ivu-btn-error\n        width:24px !important;\n        height:24px !important;\n        background:#FF5D5F !important;\n        color: #fff !important;\n        border:1px solid  #eee !important;\n    .news_pic >>>.ivu-btn-error:hover\n        background:#FF5D5F !important;\n        border:1px solid #fff !important;\n        color: #fff !important;\n    .news_pic >>> .ivu-btn-success\n        width:24px !important;\n        height:24px !important;\n        border:1px solid  #eee !important;\n</style>\n"]}]}