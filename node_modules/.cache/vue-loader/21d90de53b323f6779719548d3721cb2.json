{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/agent/agentManage.vue?vue&type=style&index=0&id=0d401eec&scoped=true&lang=stylus&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/agent/agentManage.vue","mtime":1610684412000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnBpY0JveAogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgLnVwTG9hZAogICAgICAgIHdpZHRoOiA1OHB4OwogICAgICAgIGhlaWdodDogNThweDsKICAgICAgICBsaW5lLWhlaWdodDogNThweDsKICAgICAgICBib3JkZXI6IDFweCBkb3R0ZWQgcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDIpOwogICAgLnBpY3RydWUKICAgICAgICB3aWR0aDogNjBweDsKICAgICAgICBoZWlnaHQ6IDYwcHg7CiAgICAgICAgYm9yZGVyOiAxcHggZG90dGVkIHJnYmEoMCwgMCwgMCwgMC4xKTsKICAgICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7CiAgICAgICAgaW1nCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAuaWNvbmZvbnQKICAgICAgICBjb2xvcjogIzg5ODk4OTsKLlFScGljCiAgICB3aWR0aCAxODBweAogICAgaGVpZ2h0IDE4MHB4CiAgICBpbWcKICAgICAgICB3aWR0aCAxMDAlCiAgICAgICAgaGVpZ2h0IDEwMCUKLlFScGljX3NwMQogICAgZm9udC1zaXplIDEzcHgKICAgIGNvbG9yICMxOWJlNmIKICAgIGN1cnNvciBwb2ludGVyCi5RUnBpY19zcDIKICAgIGZvbnQtc2l6ZSAxM3B4CiAgICBjb2xvciAjMmQ4Y2YwCiAgICBjdXJzb3IgcG9pbnRlcgppbWcKICAgIGhlaWdodDozNnB4O2Rpc3BsYXk6YmxvY2s7Ci5pdnUtbXQgLm5hbWUgLml0ZW0KICAgIG1hcmdpbjozcHggMDsKLnRhYmZvcm0KICAgIG1hcmdpbi1ib3R0b20gMTBweAouUmVmcmVzaAogICAgZm9udC1zaXplIDEycHgKICAgIGNvbG9yICMxODkwRkYKICAgIGN1cnNvciBwb2ludGVyCi5pdnUtZm9ybS1pdGVtCiAgICBtYXJnaW4tYm90dG9tIDEwcHgKLyouaXZ1LW10ID4+PiAuaXZ1LXRhYmxlLWhlYWRlciovCi8qICAgIGJvcmRlci10b3A6MXB4IGRhc2hlZCAjZGRkIWltcG9ydGFudCovCg=="},{"version":3,"sources":["agentManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"agentManage.vue","sourceRoot":"src/pages/agent","sourcesContent":["<template>\n    <div>\n        <div class=\"i-layout-page-header\">\n          <div class=\"i-layout-page-header\">\n            <span class=\"ivu-page-header-title\">{{$route.meta.title}}</span>\n          </div>\n        </div>\n        <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n            <Form ref=\"formValidate\" :model=\"formValidate\"  :label-width=\"labelWidth\" :label-position=\"labelPosition\" @submit.native.prevent>\n                <Row type=\"flex\" :gutter=\"24\">\n                    <Col span=\"24\">\n                        <FormItem label=\"时间选择：\">\n                            <RadioGroup v-model=\"formValidate.data\" type=\"button\"  @on-change=\"selectChange(formValidate.data)\" class=\"mr\">\n                                <Radio :label=item.val v-for=\"(item,i) in fromList.fromTxt\" :key=\"i\">{{item.text}}</Radio>\n                            </RadioGroup>\n                            <DatePicker :editable=\"false\" @on-change=\"onchangeTime\" :value=\"timeVal\"  format=\"yyyy/MM/dd\" type=\"daterange\" placement=\"bottom-end\" placeholder=\"自定义时间\" style=\"width: 200px;\"></DatePicker>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"搜索：\"  label-for=\"status\">\n                            <Input search enter-button placeholder=\"请输入请输入姓名、电话、UID\"  v-model=\"formValidate.nickname\"  @on-search=\"userSearchs\"/>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\">\n                        <Button v-auth=\"['export-userAgent']\" class=\"export\" icon=\"ios-share-outline\" @click=\"exports\">导出</Button>\n                    </Col>\n                </Row>\n            </Form>\n        </Card>\n        <cards-data :cardLists=\"cardLists\" v-if=\"cardLists.length>=0\"></cards-data>\n        <Card :bordered=\"false\" dis-hover>\n            <Table\n                    ref=\"selection\"\n                    :columns=\"columns\"\n                    :data=\"tableList\"\n                    class=\"ivu-mt\"\n                    :loading=\"loading\"\n                    no-data-text=\"暂无数据\" highlight-row\n                    no-filtered-data-text=\"暂无筛选结果\"\n            >\n                <template slot-scope=\"{ row }\" slot=\"nickname\">\n                    <div class=\"name\">\n                        <div class=\"item\">昵称:{{row.nickname}}</div>\n                        <div class=\"item\">姓名:{{row.real_name}}</div>\n                        <div class=\"item\">电话:{{row.phone}}</div>\n                    </div>\n                </template>\n                <template slot-scope=\"{ row, index }\" slot=\"right\">\n                    <a @click=\"promoters(row,'man')\">推广人</a>\n                    <Divider type=\"vertical\" />\n                    <template>\n                        <Dropdown @on-click=\"changeMenu(row,$event,index)\">\n                            <a href=\"javascript:void(0)\">\n                                更多\n                                <Icon type=\"ios-arrow-down\"></Icon>\n                            </a>\n                            <DropdownMenu slot=\"list\">\n                                <DropdownItem name=\"1\">推广订单</DropdownItem>\n                                <DropdownItem name=\"2\">推广方式</DropdownItem>\n                            </DropdownMenu>\n                        </Dropdown>\n                    </template>\n                </template>\n            </Table>\n            <div class=\"acea-row row-right page\">\n                <Page :total=\"total\" :current=\"formValidate.page\" show-elevator show-total @on-change=\"pageChange\"\n                      :page-size=\"formValidate.limit\"/>\n            </div>\n        </Card>\n        <!-- 推广人列表-->\n        <promoters-list  ref=\"promotersLists\"></promoters-list>\n        <!-- 推广方式-->\n        <Modal v-model=\"modals\"  scrollable  footer-hide closable title=\"推广二维码\" :mask-closable=\"false\"  width=\"600\">\n            <div class=\"acea-row row-around\">\n                <div class=\"acea-row row-column-around row-between-wrapper\">\n                    <div class=\"QRpic\" v-if=\"code_src\"><img v-lazy=\"code_src\"></div>\n                    <span class=\"QRpic_sp1 mt10\" @click=\"getWeChat\">公众号推广二维码</span>\n                </div>\n                <div class=\"acea-row row-column-around row-between-wrapper\">\n                    <div class=\"QRpic\"  v-if=\"code_xcx\"><img v-lazy=\"code_xcx\"></div>\n                    <span class=\"QRpic_sp2 mt10\" @click=\"getXcx\">小程序推广二维码</span>\n                </div>\n                <div class=\"acea-row row-column-around row-between-wrapper\">\n                    <div class=\"QRpic\"  v-if=\"code_h5\"><img v-lazy=\"code_h5\"></div>\n                    <span class=\"QRpic_sp2 mt10\" @click=\"getH5\">H5推广二维码</span>\n                </div>\n            </div>\n            <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\n        </Modal>\n      </div>\n</template>\n\n<script>\n    import cardsData from '@/components/cards/cards'\n    import searchFrom from '@/components/publicSearchFrom'\n    import { mapState } from 'vuex'\n    import { agentListApi, statisticsApi, lookCodeApi, lookxcxCodeApi, lookh5CodeApi, userAgentApi, agentSpreadApi } from '@/api/agent'\n    import promotersList from './handle/promotersList'\n    export default {\n        name: 'agentManage',\n        components: { cardsData, searchFrom, promotersList },\n        data () {\n            return {\n                customerShow: false,\n                promoterShow: false,\n                modals: false,\n                spinShow: false,\n                grid: {\n                    xl: 7,\n                    lg: 10,\n                    md: 12,\n                    sm: 24,\n                    xs: 24\n                },\n                fromList: {\n                    title: '选择时间',\n                    custom: true,\n                    fromTxt: [\n                        { text: '全部', val: '' },\n                        { text: '今天', val: 'today' },\n                        { text: '昨天', val: 'yesterday' },\n                        { text: '最近7天', val: 'lately7' },\n                        { text: '最近30天', val: 'lately30' },\n                        { text: '本月', val: 'month' },\n                        { text: '本年', val: 'year' }\n                    ]\n                },\n                formValidate: {\n                    nickname: '',\n                    data: '',\n                    page: 1,\n                    limit: 15\n                },\n                date: 'all',\n                total: 0,\n                cardLists: [],\n                loading: false,\n                tableList: [],\n                timeVal: [],\n                columns: [\n                    // {\n                    //     type: 'selection',\n                    //     width: 60,\n                    //     align: 'center'\n                    // },\n                    {\n                        title: 'ID',\n                        key: 'uid',\n                        sortable: true,\n                        width: 80\n                    },\n                    {\n                        title: '头像',\n                        key: 'headimgurl',\n                        minWidth: 60,\n                        render: (h, params) => {\n                            return h('viewer', [\n                                h('div', {\n                                    style: {\n                                        width: '36px',\n                                        height: '36px',\n                                        borderRadius: '4px',\n                                        cursor: 'pointer'\n                                } }, [\n                                    h('img', {\n                                        attrs: {\n                                            src: params.row.headimgurl ? params.row.headimgurl : require('../../assets/images/moren.jpg')\n                                        },\n                                        style: {\n                                            width: '100%',\n                                            height: '100%'\n                                        }\n                                    })\n                                ])\n                            ])\n                        }\n                    },\n                    {\n                        title: '用户信息',\n                        slot: 'nickname',\n                        minWidth: 120\n                    },\n                    {\n                        title: '推广用户数量',\n                        key: 'spread_count',\n                        sortable: true,\n                        minWidth: 125\n                    },\n                    {\n                        title: '订单数量',\n                        key: 'order_count',\n                        minWidth: 90\n                    },\n                    {\n                        title: '订单金额',\n                        key: 'order_price',\n                        sortable: true,\n                        minWidth: 120\n                    },\n                    {\n                        title: '佣金金额',\n                        key: 'brokerage_money',\n                        sortable: true,\n                        minWidth: 120\n                    },\n                    {\n                        title: '已提现金额',\n                        key: 'extract_count_price',\n                        sortable: true,\n                        minWidth: 120\n                    },\n                    {\n                        title: '提现次数',\n                        key: 'extract_count_num',\n                        minWidth: 100\n                    },\n                    {\n                        title: '未提现金额',\n                        key: 'new_money',\n                        sortable: true,\n                        minWidth: 105\n                    },\n                    {\n                        title: '上级推广人',\n                        key: 'spread_name',\n                        minWidth: 105\n                    },\n                    {\n                        title: '操作',\n                        slot: 'right',\n                        fixed: 'right',\n                        minWidth: 130\n                    }\n                ],\n                code_src: '',\n                code_xcx: '',\n                code_h5: '',\n                formInline: {\n                    uid:0,\n                    spread_uid:0,\n                    image:''\n                },\n            }\n        },\n        computed: {\n            ...mapState('media', [\n                'isMobile'\n            ]),\n            labelWidth () {\n                return this.isMobile ? undefined : 80\n            },\n            labelPosition () {\n                return this.isMobile ? 'top' : 'right'\n            }\n        },\n        created () {\n            this.getList()\n            this.getStatistics()\n        },\n        methods: {\n            // 导出\n            exports () {\n                let formValidate = this.formValidate\n                let data = {\n                    data: formValidate.data,\n                    nickname: formValidate.nickname\n                }\n                userAgentApi(data).then(res => {\n                    location.href = res.data[0]\n                }).catch(res => {\n                    this.$Message.error(res.msg)\n                })\n            },\n            // 操作\n            changeMenu(row, name, index) {\n                switch (name) {\n                    case '1':\n                        this.promoters(row, 'order')\n                        break\n                    default:\n                        this.spreadQR(row)\n                        break\n                }\n            },\n            edit (row) {\n                this.promoterShow = true;\n                this.formInline.uid = row.uid;\n            },\n            cancel (name) {\n                this.promoterShow = false;\n                this.$refs[name].resetFields();\n            },\n            // 推广人列表 订单\n            promoters (row, tit) {\n                this.$refs.promotersLists.modals = true\n                this.$refs.promotersLists.getList(row, tit)\n            },\n            // 统计\n            getStatistics () {\n                let data = {\n                    nickname: this.formValidate.nickname,\n                    data: this.formValidate.data\n                }\n                statisticsApi(data).then(async res => {\n                    let data = res.data\n                    this.cardLists = data.res\n                }).catch(res => {\n                    this.$Message.error(res.msg)\n                })\n            },\n            // 具体日期\n            onchangeTime (e) {\n                this.timeVal = e\n                this.formValidate.data = this.timeVal.join('-')\n                this.formValidate.page = 1\n                if(!e[0]){\n                    this.formValidate.data = '';\n                }\n                this.getList()\n                this.getStatistics()\n            },\n            // 选择时间\n            selectChange (tab) {\n                this.formValidate.page = 1\n                this.formValidate.data = tab\n                this.timeVal = []\n                this.getList()\n                this.getStatistics()\n            },\n            // 列表\n            getList () {\n                this.loading = true\n                agentListApi(this.formValidate).then(async res => {\n                    let data = res.data\n                    this.tableList = data.list\n                    this.total = res.data.count\n                    this.loading = false\n                }).catch(res => {\n                    this.loading = false\n                    this.$Message.error(res.msg)\n                })\n            },\n            pageChange (index) {\n                this.formValidate.page = index\n                this.getList()\n            },\n            // 表格搜索\n            userSearchs () {\n                this.formValidate.page = 1\n                this.getList()\n                this.getStatistics()\n            },\n            // 二维码\n            spreadQR (row) {\n                this.modals = true\n                this.rows = row\n                // this.getWeChat(row);\n                // this.getXcx(row);\n            },\n            // 公众号推广二维码\n            getWeChat () {\n                this.spinShow = true\n                let data = {\n                    uid: this.rows.uid,\n                    action: 'wechant_code'\n                }\n                lookCodeApi(data).then(async res => {\n                    let data = res.data\n                    this.code_src = data.code_src\n                    this.spinShow = false\n                }).catch(res => {\n                    this.spinShow = false\n                    this.$Message.error(res.msg)\n                })\n            },\n            // 小程序推广二维码\n            getXcx () {\n                this.spinShow = true\n                let data = {\n                    uid: this.rows.uid\n                }\n                lookxcxCodeApi(data).then(async res => {\n                    let data = res.data\n                    this.code_xcx = data.code_src\n                    this.spinShow = false\n                }).catch(res => {\n                    this.spinShow = false\n                    this.$Message.error(res.msg)\n                })\n            },\n            getH5 () {\n                this.spinShow = true\n                let data = {\n                    uid: this.rows.uid\n                }\n                lookh5CodeApi(data).then(async res => {\n                    let data = res.data\n                    this.code_h5 = data.code_src\n                    this.spinShow = false\n                }).catch(res => {\n                    this.spinShow = false\n                    this.$Message.error(res.msg)\n                })\n            }\n        }\n    }\n</script>\n<style scoped lang=\"stylus\">\n    .picBox\n        display: inline-block;\n        cursor: pointer;\n        .upLoad\n            width: 58px;\n            height: 58px;\n            line-height: 58px;\n            border: 1px dotted rgba(0, 0, 0, 0.1);\n            border-radius: 4px;\n            background: rgba(0, 0, 0, 0.02);\n        .pictrue\n            width: 60px;\n            height: 60px;\n            border: 1px dotted rgba(0, 0, 0, 0.1);\n            margin-right: 10px;\n            img\n                width: 100%;\n                height: 100%;\n        .iconfont\n            color: #898989;\n    .QRpic\n        width 180px\n        height 180px\n        img\n            width 100%\n            height 100%\n    .QRpic_sp1\n        font-size 13px\n        color #19be6b\n        cursor pointer\n    .QRpic_sp2\n        font-size 13px\n        color #2d8cf0\n        cursor pointer\n    img\n        height:36px;display:block;\n    .ivu-mt .name .item\n        margin:3px 0;\n    .tabform\n        margin-bottom 10px\n    .Refresh\n        font-size 12px\n        color #1890FF\n        cursor pointer\n    .ivu-form-item\n        margin-bottom 10px\n    /*.ivu-mt >>> .ivu-table-header*/\n    /*    border-top:1px dashed #ddd!important*/\n</style>\n"]}]}