{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/components/rightConfig/index.vue?vue&type=style&index=0&id=c733c8be&scoped=true&lang=stylus&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/components/rightConfig/index.vue","mtime":1619502992000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5yaWdodC1ib3gKICAgIHdpZHRoIDQwMHB4CiAgICBtYXJnaW4tbGVmdCA1MHB4CiAgICBib3JkZXI6MXB4IHNvbGlkICNkZGQ7CiAgICBib3JkZXItcmFkaXVzIDRweAogICAgaGVpZ2h0IDcwMHB4CiAgICBvdmVyZmxvdy15IHNjcm9sbAogICAgJjo6LXdlYmtpdC1zY3JvbGxiYXIgewogICAgICAgIC8q5rua5Yqo5p2h5pW05L2T5qC35byPKi8KICAgICAgICB3aWR0aCA6IDRweDsgIC8q6auY5a695YiG5Yir5a+55bqU5qiq56uW5rua5Yqo5p2h55qE5bC65a+4Ki8KICAgICAgICBoZWlnaHQ6IDFweDsKICAgIH0KICAgICY6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHsKICAgICAgICAvKua7muWKqOadoemHjOmdouWwj+aWueWdlyovCiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgIGJveC1zaGFkb3cgICA6IGluc2V0IDAgMCA1cHggcmdiYSgwLCAwLCAwLCAwLjIpOwogICAgICAgIGJhY2tncm91bmQgICA6ICM1MzUzNTM7CiAgICB9CiAgICAmOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7CiAgICAgICAgLyrmu5rliqjmnaHph4zpnaLovajpgZMqLwogICAgICAgIGJveC1zaGFkb3cgICA6IGluc2V0IDAgMCA1cHggI2ZmZjsKICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgYmFja2dyb3VuZCAgIDogI2ZmZjsKICAgIH0KLnRpdGxlLWJhcgogICAgd2lkdGggMTAwJQogICAgaGVpZ2h0IDM4cHgKICAgIGxpbmUtaGVpZ2h0IDM4cHgKICAgIHBhZGRpbmctbGVmdCAyNHB4CiAgICBjb2xvciAjMzMzCiAgICBib3JkZXItcmFkaXVzIDRweAogICAgYm9yZGVyLWJvdHRvbSAxcHggc29saWQgI2VlZQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/rightConfig","sourcesContent":["<template>\n    <div class=\"right-box\" v-if=\"rCom.length\">\n        <div class=\"title-bar\">模块配置</div>\n        <div class=\"mobile-config\" v-if=\"rCom.length\">\n\n            <div v-for=\"(item,key) in rCom\" :key=\"key\">\n                <component :is=\"item.components.name\" :name=\"item.configNme\" :configData=\"configData\"></component>\n            </div>\n            <div style=\"text-align: center;\" v-if=\"rCom.length\">\n                <Button type=\"primary\" style=\"width:100%;margin:0 auto;height: 40px\" @click=\"saveConfig\">保存</Button>\n            </div>\n        </div>\n    </div>\n\n</template>\n\n<script>\n    import { getCategory, getByCategory, getProduct, diySave, storeStatus } from '@/api/diy'\n    import toolCom from '@/components/diyComponents/index.js'\n    import { mapMutations } from 'vuex'\n    import { mapState } from 'vuex'\n    export default {\n        name: \"rightConfig\",\n        components:{\n          ...toolCom\n        },\n        props:{\n            name: {\n                type: null,\n                default:''\n            },\n            pageId: {\n                type: Number,\n                default: 0\n            }\n        },\n        computed:{\n            // ...mapState({\n            //     defultArr:(state)=>state.goodSelect.component,\n            // })\n            defultArr(){\n                let names = this.$store.state.userInfo.pageName;\n                return this.$store.state[names].component;\n            }\n        },\n        watch:{\n            name:{\n                handler (nVal, oVal) {\r\n\t\t\t\t\tconsole.log(nVal)\r\n\t\t\t\t\tconsole.log(oVal)\n                    this.rCom = [];\n                    let diy = this.$store.state.userInfo.pageName;\r\n\t\t\t\t\tconsole.log(diy)\n                    this.configData = this.$store.state[diy].defaultConfig[nVal];\r\n\t\t\t\t\tconsole.log(this.configData)\n                    this.rCom = this.$store.state[diy].component[nVal].list;\r\n\t\t\t\t\tconsole.log(this.rCom)\n                    if(this.configData.selectConfig){\n                        let type = this.configData.selectConfig.type?this.configData.selectConfig.type:'';\n                        this.configData.selectConfig.list = this.categoryList;\n                        if(type){\n                            this.getByCategory();\n                        }else {\n                            this.getCategory();\n                        }\n                    }\n                },\n                deep: true\n            },\n            'defultArr': {\n                handler (nVal, oVal) {\n                    this.rCom = []\n                    let tempArr = this.objToArray(nVal)\n                    this.rCom =nVal [this.name].list\n                },\n                deep: true\n            }\n        },\n        data(){\n            return {\n                rCom:[],\n                configData:{},\n                isShow:true,\n                categoryList:[],\n                status:0\n            }\n        },\n        mounted() {\n            this.storeStatus();\n        },\n        methods:{\n            storeStatus(){\n                storeStatus().then(res=>{\n                    this.status = parseInt(res.data.store_status);\n                })\n            },\n            getCategory () {\n                getCategory().then(res => {\n                    let data = [];\n                    res.data.map(item => {\n                        data.push({ title: item.title, pid: item.pid, activeValue: item.id.toString() });\n                    });\n                    this.categoryList = data;\n                    this.bus.$emit('upData',data)\n                })\n            },\n            //获取二级分类\n            getByCategory () {\n                getByCategory().then(res=>{\n                    let data = [];\n                    res.data.map(item => {\n                        data.push({ title: item.cate_name, pid: item.pid, activeValue: item.id.toString() });\n                    });\n                    this.categoryList = data;\n                    this.bus.$emit('upData',data)\n                })\n            },\n            // 保存数据\n            saveConfig(){\n                let diy = this.$store.state.userInfo.pageName;\n                let data = this.$store.state[diy].defaultConfig;\n                let periphery = this.$store.state[diy].periphery;\n                if(this.name=='z_tabBar'){\n                    if(!periphery||!this.status){\n                        let list = data.z_tabBar.tabBarList.list;\n                        for(let i = 0;i<list.length;i++){\n                            if(list[i].link=='/pages/storeList/index' || list[i].link=='pages/storeList/index'){\n                                return this.$Message.error('请先开启您的周边功能(/pages/storeList/index)');\n                            }\n                        }\n                    }\n                    if(data.z_tabBar.tabBarList.list.length<2){\n                        return this.$Message.error('您最少应添加2个导航');\n                    }\n                }\n                diySave(this.pageId,{\n                    value:data\n                }).then(res=>{\n                    this.$Message.success('保存成功')\n                })\n            },\n            // 对象转数组\n            objToArray(array) {\n                var arr = []\n                for (var i in array) {\n                    arr.push(array[i]);\n                }\n                return arr;\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n    .right-box\n        width 400px\n        margin-left 50px\n        border:1px solid #ddd;\n        border-radius 4px\n        height 700px\n        overflow-y scroll\n        &::-webkit-scrollbar {\n            /*滚动条整体样式*/\n            width : 4px;  /*高宽分别对应横竖滚动条的尺寸*/\n            height: 1px;\n        }\n        &::-webkit-scrollbar-thumb {\n            /*滚动条里面小方块*/\n            border-radius: 4px;\n            box-shadow   : inset 0 0 5px rgba(0, 0, 0, 0.2);\n            background   : #535353;\n        }\n        &::-webkit-scrollbar-track {\n            /*滚动条里面轨道*/\n            box-shadow   : inset 0 0 5px #fff;\n            border-radius: 4px;\n            background   : #fff;\n        }\n    .title-bar\n        width 100%\n        height 38px\n        line-height 38px\n        padding-left 24px\n        color #333\n        border-radius 4px\n        border-bottom 1px solid #eee\n</style>\n"]}]}