{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/kefu/mobile/chat_list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/kefu/mobile/chat_list.vue","mtime":1610680940000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB1dGlsIGZyb20gJ0AvbGlicy91dGlsJzsKaW1wb3J0IHtTb2NrZXR9IGZyb20gJ0AvbGlicy9zb2NrZXQnOwppbXBvcnQge3JlY29yZH0gZnJvbSAnQC9hcGkva2VmdS5qcycKaW1wb3J0IHtzZXJ2aWNlSW5mb30gZnJvbSAnQC9hcGkva2VmdV9tb2JpbGUnCmltcG9ydCB7SGFwcHlTY3JvbGx9IGZyb20gJ3Z1ZS1oYXBweS1zY3JvbGwnCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCB7Z2V0Q29va2llc30gZnJvbSAnQC9saWJzL3V0aWwnCmltcG9ydCBlbXB0eSBmcm9tICIuLi9jb21wb25lbnRzL2VtcHR5IjsKdmFyIG1wMyA9IHJlcXVpcmUoJ0AvYXNzZXRzL3ZpZGVvL25vdGljZS5tcDMnKTsKdmFyIG1wMyA9IG5ldyBBdWRpbyhtcDMpOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiY2hhdF9saXN0LnZ1ZSIsCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgSGFwcHlTY3JvbGwsCiAgICAgICAgZW1wdHkKICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG9wczp7CiAgICAgICAgICAgICAgICB2dWVzY3JvbGw6ewogICAgICAgICAgICAgICAgICAgIG1vZGU6ICdzbGlkZScsCiAgICAgICAgICAgICAgICAgICAgZW5hYmxlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICB0aXBzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZlOiAnUHVzaCB0byBMb2FkJywKICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiAnUmVsZWFzZSB0byBMb2FkJywKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6ICdMb2FkaW5nLi4uJywKICAgICAgICAgICAgICAgICAgICAgICAgYmVmb3JlRGVhY3RpdmU6ICdMb2FkIFN1Y2Nlc3NmdWxseSEnCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBhdXRvOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBhdXRvTG9hZERpc3RhbmNlOiAwLAogICAgICAgICAgICAgICAgICAgIHB1bGxSZWZyZXNoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHB1c2hMb2FkOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgYXV0bzogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0xvYWREaXN0YW5jZTogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYmFyOnsKICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDonIzM5MzIzMicsCiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6Jy41JywKICAgICAgICAgICAgICAgICAgc2l6ZTonMnB4JwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBsaXN0OiBbXSwKICAgICAgICAgICAgcGFnZTogMSwKICAgICAgICAgICAgbGltaXQ6IDEwLAogICAgICAgICAgICBpc1Njcm9sbDogdHJ1ZSwKICAgICAgICAgICAgc2VhcmNoVHh0OiAnJywKICAgICAgICAgICAgaXNPcGVuOiB0cnVlLAogICAgICAgICAgICBrZWZ1SW5mbzoge30sCiAgICAgICAgICAgIGlzT25MaW5lOiBmYWxzZSwKICAgICAgICAgICAgdGFiQ3VyOjAsCiAgICAgICAgICAgIHRhYkxpc3Q6WwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGtleTowLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOifnlKjmiLfliJfooagnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGtleToxLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOifmuLjlrqLliJfooagnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIHdzTG9naW46SlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ3c0xvZ2luIikpCiAgICAgICAgfQogICAgfSwKICAgIGZpbHRlcnM6IHsKICAgICAgICB0b0RheTogZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgIGlmICghdmFsdWUpIHJldHVybiAnJwogICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7Ly/ml7bpl7TmiLPkuLoxMOS9jemcgCoxMDAw77yM5pe26Ze05oiz5Li6MTPkvY3nmoTor53kuI3pnIDkuZgxMDAwCiAgICAgICAgICAgIHZhciBZID0gZGF0ZS5nZXRGdWxsWWVhcigpICsgJy0nOwogICAgICAgICAgICB2YXIgTSA9IChkYXRlLmdldE1vbnRoKCkgKyAxIDwgMTAgPyAnMCcgKyAoZGF0ZS5nZXRNb250aCgpICsgMSkgOiBkYXRlLmdldE1vbnRoKCkgKyAxKSArICctJzsKICAgICAgICAgICAgdmFyIEQgPSAoZGF0ZS5nZXREYXRlKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0RGF0ZSgpIDogZGF0ZS5nZXREYXRlKCkpICsgJyAnOwogICAgICAgICAgICB2YXIgaCA9IChkYXRlLmdldEhvdXJzKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0SG91cnMoKSA6IGRhdGUuZ2V0SG91cnMoKSkgKyAnOic7CiAgICAgICAgICAgIHZhciBtID0gKGRhdGUuZ2V0TWludXRlcygpIDwgMTAgPyAnMCcgKyBkYXRlLmdldE1pbnV0ZXMoKSA6IGRhdGUuZ2V0TWludXRlcygpKTsKICAgICAgICAgICAgdmFyIHMgPSAoZGF0ZS5nZXRTZWNvbmRzKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0U2Vjb25kcygpIDogZGF0ZS5nZXRTZWNvbmRzKCkpOwoKICAgICAgICAgICAgdmFsdWUgPSBNICsgRCArIGggKyBtOwogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgUHJvbWlzZS5hbGwoW3RoaXMuZ2V0S2VmdUluZm8oKSwgdGhpcy5nZXRMaXN0KCldKTsKICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgICAvLyDnm5HlkKzpobXpnaLliLfmlrAKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgZSA9PiB7CiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oIndzTG9naW4iLCBmYWxzZSk7CiAgICAgICAgfSk7CiAgICAgICAgLy8g6I635Y+W5piv5ZCm55m75b2V55qEa2V5CiAgICAgICAgdGhpcy53c0xvZ2luID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ3c0xvZ2luIikpOwogICAgICAgIGxldCB0b2tlbiA9IGdldENvb2tpZXMoImtlZnVfdG9rZW4iKQogICAgICAgIFNvY2tldC50aGVuKHdzPT57CiAgICAgICAgICAgIGlmKCF0aGF0LndzTG9naW4gJiYgdG9rZW4pewogICAgICAgICAgICAgICAgd3Muc2VuZCh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2tlZnVfbG9naW4nLAogICAgICAgICAgICAgICAgICAgIGRhdGE6IGdldENvb2tpZXMoJ2tlZnVfdG9rZW4nKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgICAgICAvL+eUqOaIt+acquivu+a2iOaBr+adoeaVsOabtOaUuQogICAgICAgICAgICB3cy4kb24oJ3RyYW5zZmVyJywgZGF0YSA9PiB7CiAgICAgICAgICAgICAgICBpZihkYXRhLnJlY29yZWQuaWQpewogICAgICAgICAgICAgICAgICAgIGxldCBzdGF0dXMgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9MCA7aTx0aGlzLmxpc3QubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEucmVjb3JlZC5pZCA9PSB0aGlzLmxpc3RbaV0uaWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMubGlzdCwgaSwgZGF0YS5yZWNvcmVkKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKCFzdGF0dXMpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3QudW5zaGlmdChkYXRhLnJlY29yZWQpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSkKICAgICAgICAgICAgd3MuJG9uKCdtc3NhZ2VfbnVtJywgZGF0YSA9PiB7CiAgICAgICAgICAgICAgICBpZihkYXRhLm51bT4wKXsKICAgICAgICAgICAgICAgICAgICBtcDMucGxheSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoZGF0YS5yZWNvcmVkLmlkKXsKCiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXR1cyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgLy8gZm9yKGxldCBpID0wIDtpPHRoaXMubGlzdC5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgICAvLyAgICAgaWYoZGF0YS5yZWNvcmVkLmlkID09IHRoaXMubGlzdFtpXS5pZCl7CiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBzdGF0dXMgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLiRzZXQodGhpcy5saXN0LCBpLCBkYXRhLnJlY29yZWQpCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgICAgIHRoYXQubGlzdC5mb3JFYWNoKChlbCxpbmRleCxhcnIpPT57CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEucmVjb3JlZC5pZCA9PSBlbC5pZCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnJlY29yZWQuaXNfdG91cmlzdCA9PSB0aGF0LnRhYkN1cil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9sZFZhbCA9IGRhdGEucmVjb3JlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyci5zcGxpY2UoaW5kZXgsMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnIudW5zaGlmdChvbGRWYWwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBpZighc3RhdHVzKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5yZWNvcmVkLmlzX3RvdXJpc3QgPT0gdGhpcy50YWJDdXIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3QudW5zaGlmdChkYXRhLnJlY29yZWQpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKGRhdGEucmVjb3JlZC5pc190b3VyaXN0ICE9IHRoaXMudGFiQ3VyICYmIGRhdGEucmVjb3JlZC5pZCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5pbmZvKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRhYkN1cj8n55So5oi35Y+R5p2l5raI5oGv5ZWm77yBJzon5ri45a6i5Y+R5p2l5raI5oGv5ZWm77yBJywKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLy8gd3PnmbvlvZXmiJDlip8KICAgICAgICAgICAgd3MuJG9uKCJzdWNjZXNzIixkYXRhPT57CiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJ3c0xvZ2luIiwgdHJ1ZSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSk7CgogICAgfSwKICAgIGJlZm9yZURlc3Ryb3koKSB7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC4uLm1hcEFjdGlvbnMoJ2tlZnUvJywgWwogICAgICAgICAgICAnbG9nb3V0JywKICAgICAgICAgICAgJ2xvZ291dEtlZnUnCiAgICAgICAgXSksCiAgICAgICAgLy8g5YiX6KGo5YiH5o2iCiAgICAgICAgY2hhbmdlQ2xhc3MoaXRlbSl7CiAgICAgICAgICAgIGlmKHRoaXMudGFiQ3VyID09IGl0ZW0ua2V5KSByZXR1cm4KICAgICAgICAgICAgdGhpcy50YWJDdXIgPSBpdGVtLmtleQogICAgICAgICAgICB0aGlzLnBhZ2UgPSAxCiAgICAgICAgICAgIHRoaXMubGlzdCA9IFtdCiAgICAgICAgICAgIHRoaXMuaXNTY3JvbGwgPSB0cnVlCiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICAgICAgfSwKICAgICAgICAvLyDlrqLmnI3kuIrkuIvnur8KICAgICAgICBjaGFuZ09ubGluZShrZXkpewogICAgICAgICAgICB0aGlzLmtlZnVJbmZvLm9ubGluZSA9IGtleQogICAgICAgICAgICB0aGlzLmlzT25MaW5lID0gZmFsc2UKICAgICAgICAgICAgU29ja2V0LnRoZW4od3M9PnsKICAgICAgICAgICAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgICAgICAgICAgIHdzLnNlbmQoewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdvbmxpbmUnLAogICAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgb25saW5lOmtleQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIC8vIOWuouacjeivpue7huS/oeaBrwogICAgICAgIGdldEtlZnVJbmZvKCkgewogICAgICAgICAgICBzZXJ2aWNlSW5mbygpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMua2VmdUluZm8gPSByZXMuZGF0YQogICAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LnRpdGxlID0gYCR7cmVzLmRhdGEuc2l0ZV9uYW1lfSAtIOa2iOaBr+WIl+ihqGAKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGdldExpc3QoKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5pc1Njcm9sbCkgcmV0dXJuCiAgICAgICAgICAgIHJlY29yZCh7CiAgICAgICAgICAgICAgICBuaWNrbmFtZTogdGhpcy5zZWFyY2hUeHQsCiAgICAgICAgICAgICAgICBwYWdlOiB0aGlzLnBhZ2UsCiAgICAgICAgICAgICAgICBsaW1pdDogdGhpcy5saW1pdCwKICAgICAgICAgICAgICAgIGlzX3RvdXJpc3Q6IHRoaXMudGFiQ3VyCiAgICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuaXNTY3JvbGwgPSByZXMuZGF0YS5sZW5ndGggPj0gdGhpcy5saW1pdAogICAgICAgICAgICAgICAgdGhpcy5saXN0ID0gdGhpcy5saXN0LmNvbmNhdChyZXMuZGF0YSkKICAgICAgICAgICAgICAgIHRoaXMucGFnZSsrCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnZzLnJlZnJlc2goKTsKICAgICAgICAgICAgICAgIH0sIDEwMCkKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOWuouacjemAgOWHugogICAgICAgIG91dExvZ2luKCkgewogICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXMKICAgICAgICAgICAgdGhpcy4kTW9kYWwuY29uZmlybSh7CiAgICAgICAgICAgICAgICB0aXRsZTogJ+mAgOWHuueZu+W9leehruiupCcsCiAgICAgICAgICAgICAgICBjb250ZW50OiAn5oKo56Gu5a6a6YCA5Ye655m75b2V5b2T5YmN6LSm5oi35ZCX77yf5omT5byA55qE5qCH562+6aG15ZKM5Liq5Lq66K6+572u5bCG5Lya5L+d5a2Y44CCJywKICAgICAgICAgICAgICAgIG9uT2s6ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBzZWxmLmxvZ291dEtlZnUoewogICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgdm06IHNlbGYKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gewogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIC8vIOaQnOe0ogogICAgICAgIGJpbmRTZWFyY2goZSkgewogICAgICAgICAgICB0aGlzLnBhZ2UgPSAxCiAgICAgICAgICAgIHRoaXMubGlzdCA9IFtdCiAgICAgICAgICAgIHRoaXMuaXNTY3JvbGwgPSB0cnVlCiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICAgICAgfSwKICAgICAgICAvLyDov5vlhaXlr7nor50KICAgICAgICBnb1BhZ2UoaXRlbSl7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgIHBhdGg6J21vYmlsZV9jaGF0JywKICAgICAgICAgICAgICAgIHF1ZXJ5OnsKICAgICAgICAgICAgICAgICAgICB0b1VpZDppdGVtLnRvX3VpZCwKICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZTppdGVtLm5pY2tuYW1lLAogICAgICAgICAgICAgICAgICAgIGlzX3RvdXJpc3Q6IHRoaXMudGFiQ3VyCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVCZWZvcmVEZWFjdGl2YXRlKHZtLCByZWZyZXNoRG9tLCBkb25lKSB7CiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICAgICAgICBkb25lKCk7CiAgICAgICAgfSwKCgoKCiAgICB9Cn0K"},{"version":3,"sources":["chat_list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA","file":"chat_list.vue","sourceRoot":"src/pages/kefu/mobile","sourcesContent":["<template>\n    <div class=\"chat-list\">\n        <div class=\"head-box\">\n            <div class=\"hd\">\n                <div class=\"left-wrapper\">\n                    <img v-lazy=\"kefuInfo.avatar\">\n                    <div class=\"info\" @click=\"isOnLine = !isOnLine\">\n                        <div>{{kefuInfo.nickname}}</div>\n                        <div class=\"status\">\n                            <span class=\"doc\" :class=\"{off:!kefuInfo.online}\"></span>\n                            <span>{{kefuInfo.online?'在线':'离线'}}</span>\n                        </div>\n                    </div>\n                    <div class=\"down-wrapper\" v-show=\"isOnLine\">\n                        <div class=\"item\" @click=\"changOnline(1)\">\n                            <span class=\"dot green\"></span>在线\n                            <span class=\"iconfont iconduihao\" v-if=\"kefuInfo.online\"></span>\n                        </div>\n                        <div class=\"item\" @click=\"changOnline(0)\">\n                            <span class=\"dot\"></span>离线\n                            <span class=\"iconfont iconduihao\" v-if=\"!kefuInfo.online\"></span>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"right-wrapper\" @click=\"outLogin\">\n                    <div class=\"icon-box\"><span class=\"iconfont icontuichu\"></span></div>\n\n                    <div style=\"margin-left: 5px;\">退出登录</div>\n                </div>\n            </div>\n            <div class=\"tab-box\">\n                <div class=\"tab-item\" :class=\"{on:tabCur == item.key}\" v-for=\"(item,index) in tabList\" @click=\"changeClass(item)\">{{item.title}}</div>\n            </div>\n            <div class=\"search-box\">\n                <Input v-model=\"searchTxt\" placeholder=\"搜索用户名称\" @on-enter=\"bindSearch\"/>\n            </div>\n        </div>\n        <div class=\"list-box\" v-if=\"list.length>0\">\n            <vue-scroll ref=\"vs\" :ops=\"ops\"\n                @load-before-deactivate=\"handleBeforeDeactivate\"\n            >\n                <div class=\"item\" v-for=\"(item,index) in list\" :key=\"index\" @click=\"goPage(item)\">\n                    <div class=\"left-wrapper\">\n                        <div class=\"img-box\">\n                            <img v-lazy=\"item.avatar\">\n                            <div class=\"online\" :class=\"{on:item.online}\"></div>\n                        </div>\n                        <div class=\"info\">\n                            <div class=\"title\">\n                                <span class=\"line1\">{{item.nickname}}</span>\n                                <template v-if=\"item.type == 2\">\n                                    <span class=\"label\">小程序</span>\n                                </template>\n                                <template v-if=\"item.type == 3\">\n                                    <span class=\"label h5\">H5</span>\n                                </template>\n                                <template v-if=\"item.type == 1\">\n                                    <span class=\"label wx\">公众号</span>\n                                </template>\n                                <template v-if=\"item.type == 0\">\n                                    <span class=\"label pc\">PC端</span>\n                                </template>\n                            </div>\n                            <div class=\"msg line1\" v-if=\"item.message_type == 1\">{{item.message}}</div>\n                            <div class=\"msg\" v-if=\"item.message_type == 2\">[表情]</div>\n                            <div class=\"msg\" v-if=\"item.message_type == 3\">[图片]</div>\n                            <div class=\"msg\" v-if=\"item.message_type == 5\">[商品]</div>\n                            <div class=\"msg\" v-if=\"item.message_type == 6\">[订单]</div>\n                        </div>\n                    </div>\n                    <div class=\"right-wrapper\">\n                        <div class=\"time\">{{item.update_time | toDay}}</div>\n                        <span class=\"num\" v-if=\"item.mssage_num>0\">{{item.mssage_num}}</span>\n                    </div>\n                </div>\n                <div class=\"slot-load\" slot=\"load-deactive\"></div>\n                <div class=\"slot-load\" slot=\"load-active\">下滑加载更多</div>\n\n            </vue-scroll>\n        </div>\n        <empty v-else status=\"3\" msg=\"暂无用户列表\"></empty>\n    </div>\n</template>\n\n<script>\n    import util from '@/libs/util';\n    import {Socket} from '@/libs/socket';\n    import {record} from '@/api/kefu.js'\n    import {serviceInfo} from '@/api/kefu_mobile'\n    import {HappyScroll} from 'vue-happy-scroll'\n    import { mapState, mapActions } from 'vuex';\n    import {getCookies} from '@/libs/util'\n    import empty from \"../components/empty\";\n    var mp3 = require('@/assets/video/notice.mp3');\n    var mp3 = new Audio(mp3);\n    export default {\n        name: \"chat_list.vue\",\n        components: {\n            HappyScroll,\n            empty\n        },\n        data() {\n            return {\n                ops:{\n                    vuescroll:{\n                        mode: 'slide',\n                        enable: false,\n                        tips: {\n                            deactive: 'Push to Load',\n                            active: 'Release to Load',\n                            start: 'Loading...',\n                            beforeDeactive: 'Load Successfully!'\n                        },\n                        auto: false,\n                        autoLoadDistance: 0,\n                        pullRefresh: {\n                            enable: false\n                        },\n                        pushLoad: {\n                            enable: true,\n                            auto: true,\n                            autoLoadDistance: 10\n                        }\n                    },\n                    bar:{\n                      background:'#393232',\n                      opacity:'.5',\n                      size:'2px'\n                    }\n                },\n                list: [],\n                page: 1,\n                limit: 10,\n                isScroll: true,\n                searchTxt: '',\n                isOpen: true,\n                kefuInfo: {},\n                isOnLine: false,\n                tabCur:0,\n                tabList:[\n                    {\n                        key:0,\n                        title:'用户列表'\n                    },\n                    {\n                        key:1,\n                        title:'游客列表'\n                    }\n                ],\n                wsLogin:JSON.parse(sessionStorage.getItem(\"wsLogin\"))\n            }\n        },\n        filters: {\n            toDay: function (value) {\n                if (!value) return ''\n                var date = new Date();//时间戳为10位需*1000，时间戳为13位的话不需乘1000\n                var Y = date.getFullYear() + '-';\n                var M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n                var D = (date.getDate() < 10 ? '0' + date.getDate() : date.getDate()) + ' ';\n                var h = (date.getHours() < 10 ? '0' + date.getHours() : date.getHours()) + ':';\n                var m = (date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes());\n                var s = (date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds());\n\n                value = M + D + h + m;\n                return value;\n            }\n        },\n        created() {\n            Promise.all([this.getKefuInfo(), this.getList()]);\n        },\n        mounted() {\n            let that = this;\n            // 监听页面刷新\n            window.addEventListener('beforeunload', e => {\n                sessionStorage.setItem(\"wsLogin\", false);\n            });\n            // 获取是否登录的key\n            this.wsLogin = JSON.parse(sessionStorage.getItem(\"wsLogin\"));\n            let token = getCookies(\"kefu_token\")\n            Socket.then(ws=>{\n                if(!that.wsLogin && token){\n                    ws.send({\n                        type: 'kefu_login',\n                        data: getCookies('kefu_token')\n                    })\n                }\n                //用户未读消息条数更改\n                ws.$on('transfer', data => {\n                    if(data.recored.id){\n                        let status = false\n                        for(let i =0 ;i<this.list.length;i++){\n                            if(data.recored.id == this.list[i].id){\n                                status = true\n                                this.$set(this.list, i, data.recored)\n                            }\n                        }\n                        if(!status){\n                            this.list.unshift(data.recored)\n                        }\n                    }\n\n                })\n                ws.$on('mssage_num', data => {\n                    if(data.num>0){\n                        mp3.play();\n                    }\n                    if(data.recored.id){\n\n                        let status = false\n                        // for(let i =0 ;i<this.list.length;i++){\n                        //     if(data.recored.id == this.list[i].id){\n                        //         status = true\n                        //         this.$set(this.list, i, data.recored)\n                        //         break\n                        //     }\n                        // }\n                        that.list.forEach((el,index,arr)=>{\n                            if(data.recored.id == el.id){\n                                status = true\n                                if(data.recored.is_tourist == that.tabCur){\n                                    let oldVal = data.recored\n                                    arr.splice(index,1)\n                                    arr.unshift(oldVal)\n                                }\n\n                            }\n                        })\n                        if(!status){\n                            if(data.recored.is_tourist == this.tabCur)\n                                this.list.unshift(data.recored)\n                        }\n                        if(data.recored.is_tourist != this.tabCur && data.recored.id){\n                            this.$Notice.info({\n                                title: this.tabCur?'用户发来消息啦！':'游客发来消息啦！',\n                            });\n                        }\n                    }\n\n                })\n                // ws登录成功\n                ws.$on(\"success\",data=>{\n                    sessionStorage.setItem(\"wsLogin\", true);\n                })\n            });\n\n        },\n        beforeDestroy() {\n        },\n        methods: {\n            ...mapActions('kefu/', [\n                'logout',\n                'logoutKefu'\n            ]),\n            // 列表切换\n            changeClass(item){\n                if(this.tabCur == item.key) return\n                this.tabCur = item.key\n                this.page = 1\n                this.list = []\n                this.isScroll = true\n                this.getList()\n            },\n            // 客服上下线\n            changOnline(key){\n                this.kefuInfo.online = key\n                this.isOnLine = false\n                Socket.then(ws=>{\n                    let that = this;\n                    ws.send({\n                        type: 'online',\n                        data: {\n                            online:key\n                        },\n                    })\n                });\n            },\n            // 客服详细信息\n            getKefuInfo() {\n                serviceInfo().then(res => {\n                    this.kefuInfo = res.data\n                    window.document.title = `${res.data.site_name} - 消息列表`\n                })\n            },\n            getList() {\n                if (!this.isScroll) return\n                record({\n                    nickname: this.searchTxt,\n                    page: this.page,\n                    limit: this.limit,\n                    is_tourist: this.tabCur\n                }).then(res => {\n                    this.isScroll = res.data.length >= this.limit\n                    this.list = this.list.concat(res.data)\n                    this.page++\n                    setTimeout(() => {\n                        this.$refs.vs.refresh();\n                    }, 100)\n                })\n            },\n            // 客服退出\n            outLogin() {\n                let self = this\n                this.$Modal.confirm({\n                    title: '退出登录确认',\n                    content: '您确定退出登录当前账户吗？打开的标签页和个人设置将会保存。',\n                    onOk: () => {\n                        self.logoutKefu({\n                            confirm: false,\n                            vm: self\n                        });\n                    },\n                    onCancel: () => {\n                    }\n                });\n            },\n            // 搜索\n            bindSearch(e) {\n                this.page = 1\n                this.list = []\n                this.isScroll = true\n                this.getList()\n            },\n            // 进入对话\n            goPage(item){\n                this.$router.push({\n                    path:'mobile_chat',\n                    query:{\n                        toUid:item.to_uid,\n                        nickname:item.nickname,\n                        is_tourist: this.tabCur\n                    }\n                })\n            },\n            handleBeforeDeactivate(vm, refreshDom, done) {\n                this.getList();\n                done();\n            },\n\n\n\n\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n    .chat-list {\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        height: 100%;\n        padding-bottom 0.15rem;\n        background: #fff;\n\n        .head-box {\n            .hd {\n                position: relative;\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                height: 1rem;\n                padding: 0 .3rem;\n                background: linear-gradient(90deg, #3875EA 0%, #1890FC 100%);\n\n                .left-wrapper {\n                    position: relative;\n                    display: flex;\n                    align-items: center;\n                    color: #fff;\n                    font-size: .26rem;\n\n                    img {\n                        width: .58rem;\n                        height: .58rem;\n                        border-radius: 50%;\n                    }\n\n                    .info {\n                        margin-left: .12rem;\n\n                        .status {\n                            display: flex;\n                            align-items: center;\n                            font-size: .2rem;\n\n                            .doc {\n                                width: .14rem;\n                                height: .14rem;\n                                margin-right: .1rem;\n                                background-color: #27F2CB;\n                                border-radius: 50%;\n                                margin-top: .04rem;\n\n                                &.off {\n                                    background: #919191;\n                                }\n                            }\n                        }\n                    }\n\n                    .down-wrapper {\n                        z-index: 50;\n                        position: absolute;\n                        left: 0;\n                        bottom: -1.9rem;\n                        width: 2.14rem;\n                        background: #434343;\n                        border-radius: .1rem;\n\n                        .item {\n                            display: flex;\n                            align-items: center;\n                            height: .8rem;\n                            padding-left: .3rem;\n                            border-bottom: 1px solid rgba(240, 241, 242, 0.16);\n                            font-size: .28rem;\n\n                            &:last-child {\n                                border-bottom: none;\n                            }\n\n                            .dot {\n                                width: .12rem;\n                                height: .12rem;\n                                margin-right: .16rem;\n                                border-radius: 50%;\n                                background: linear-gradient(180deg, #BCBCBC 0%, #919191 100%);\n\n                                &.green {\n                                    background: linear-gradient(143deg, #27F2CB 0%, #14E3B4 100%);\n                                }\n                            }\n\n                            .iconfont {\n                                margin-left: .36rem;\n                                color: #B9B9B9;\n                                font-size: .18rem;\n                            }\n                        }\n                    }\n                }\n\n                .right-wrapper {\n                    display: flex;\n                    align-items: center;\n                    color: #fff;\n                    font-size: .24rem;\n                }\n            }\n\n            .search-box {\n                padding: 0 .3rem .2rem;\n                border-bottom: 1px solid #ECEFF8;\n\n\n                >>> .ivu-input {\n                    display: block;\n                    width: 100%;\n                    height: .68rem;\n                    background #F5F6F9\n                    border-radius: .39rem;\n                    box-sizing: border-box;\n                    font-size: .28rem;\n                    border-radius: .39rem;\n                    text-align center\n                }\n                >>> .ivu-input, .ivu-input:hover, .ivu-input:focus {\n                    border transparent\n                    box-shadow: none;\n                }\n            }\n            .tab-box{\n                display flex\n                padding .2rem 0\n\n                .tab-item{\n                    flex 1\n                    height 100%\n                    line-height .6rem\n                    text-align center\n                    font-size .3rem\n                    &.on{\n                        color #3875ea\n                    }\n                    &:first-child{\n                        border-right 1px solid #ddd\n                    }\n                }\n            }\n        }\n\n        .list-box {\n            flex: 1;\n            overflow hidden\n\n            .item {\n                display: flex;\n                justify-content: space-between;\n                padding: .23rem .3rem;\n                height: 1.5rem;\n\n                .left-wrapper {\n                    display: flex;\n                    align-items: center;\n                    .img-box{\n                        width .96rem\n                        height .96rem\n                        position relative\n                    }\n                    .online{\n                        position absolute\n                        right: 0.1rem;\n                        bottom: 1px;\n                        width .16rem\n                        height .16rem\n                        background: linear-gradient(143deg, #BCBCBC 0%, #919191 100%);\n                        border-radius 50%\n                        border: 1px solid #FFFFFF;\n                        &.on{\n                            background: linear-gradient(143deg, #27F2CB 0%, #14E3B4 100%);\n                        }\n                    }\n                    img {\n                        width: .96rem;\n                        height: .96rem;\n                        border-radius: 50%;\n                    }\n\n                    .info {\n                        margin-left: .2rem;\n                        width: 3.5rem;\n                        height: .96rem;\n                        display: flex;\n                        flex-direction: column;\n                        justify-content: space-between;\n\n                        .title {\n                            display: flex;\n                            align-items: center;\n                            font-size: .3rem;\n\n                            .label {\n                                margin-left: .15rem;\n                                font-size: .2rem;\n                                padding: 0.05rem 0.1rem;\n                                background: rgba(56, 117, 234, 0.14);\n                                color: $kf-theme;\n                                border-radius: 0.04rem;\n\n                                &.h5 {\n                                    background: rgba(255, 162, 0, 0.18);\n                                    color: #D08800;\n                                }\n\n                                &.wx {\n                                    background: rgba(0, 186, 100, 0.14);\n                                    color: #00A219;\n                                }\n\n                                &.pc {\n                                    background: rgba(133, 64, 227, 0.14);\n                                    color: #820ADB;\n                                }\n                            }\n                        }\n\n                        .msg {\n                            font-size: .24rem;\n                            color: #9F9F9F;\n                        }\n                    }\n                }\n\n                .right-wrapper {\n                    height: .96rem;\n                    color: #9F9F9F;\n                    font-size: .22rem;\n                    text-align right\n\n                    .num {\n                        min-width: .12rem;\n                        background-color: #F74C31;\n                        color: #fff;\n                        border-radius: .15rem;\n                        right: 0 rpx;\n                        bottom: 0 rpx;\n                        font-size: .2rem;\n                        padding: 0 0.08rem;\n                    }\n                }\n            }\n        }\n    }\n</style>\n"]}]}