{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/system/auth/index.vue?vue&type=style&index=0&id=461f9392&scoped=true&lang=stylus&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/system/auth/index.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYXV0aCB7CiAgICBwYWRkaW5nOiA5cHggMTZweCA5cHggMTBweDsKfQoKLmF1dGggLmljb25Jb3MgewogICAgZm9udC1zaXplOiA0MHB4OwogICAgbWFyZ2luLXJpZ2h0OiAxMHB4OwogICAgY29sb3I6ICMwMDE1Mjk7Cn0KCi5hdXRoIC50ZXh0IHsKICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICBjb2xvcjogcmdiYSgwLCAwLCAwLCAxKTsKICAgIGZvbnQtc2l6ZTogMThweDsKfQoKLmF1dGggLnRleHQgLmNvZGUgewogICAgZm9udC1zaXplOiAxNHB4OwogICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC41KTsKfQoKLmF1dGggLmJsdWUgewogICAgY29sb3I6ICMxODkwRkYgIWltcG9ydGFudDsKfQoKLmF1dGggLnJlZCB7CiAgICBjb2xvcjogI0VENDAxNCAhaW1wb3J0YW50Owp9CgouZ3JleSB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjOTk5OTk5OwogICAgYm9yZGVyLWNvbG9yOiAjOTk5OTk5OwogICAgY29sb3I6ICNmZmY7Cn0KCi5zdWJtaXQgewogICAgd2lkdGg6IDEwMCU7Cn0KCi5jb2RlIC5pbnB1dCB7CiAgICB3aWR0aDogODMlOwp9CgouY29kZSAuaW5wdXQgLml2dS1pbnB1dCB7CiAgICBib3JkZXItcmFkaXVzOiA0cHggMCAwIDRweCAhaW1wb3J0YW50Owp9CgouY29kZSAucGljdHJ1ZSB7CiAgICBoZWlnaHQ6IDMycHg7CiAgICB3aWR0aDogMTclOwp9CgouY3VzdG9tZXIgewogICAgYm9yZGVyLXJpZ2h0OiAwOwp9CgouY3VzdG9tZXIgYSB7CiAgICBmb250LXNpemU6IDEycHg7Cn0KCi5pdnUtaW5wdXQtZ3JvdXAtcHJlcGVuZCwgLml2dS1pbnB1dC1ncm91cC1hcHBlbmQgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKfQoKLml2dS1pbnB1dC1ncm91cCAuaXZ1LWlucHV0IHsKICAgIGJvcmRlci1yaWdodDogMCAhaW1wb3J0YW50Owp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+LA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/system/auth","sourcesContent":["<template>\n    <div>\n        <div class=\"i-layout-page-header\">\n          <div class=\"i-layout-page-header\">\n            <span class=\"ivu-page-header-title\">{{$route.meta.title}}</span>\n          </div>\n        </div>\n        <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n            <div class=\"auth acea-row row-between-wrapper\">\n                <div class=\"acea-row row-middle\">\n                    <Icon type=\"ios-bulb-outline\" class=\"iconIos blue\"/>\n                    <div class=\"text\" v-if=\"status === -1 || status === -9\">\n                        <div>体验时间剩余 {{dayNum}}天</div>\n                        <div class=\"code\">到期后后台将不能正常使用，如果您对我们的系统满意，请支持正版！</div>\n                    </div>\n                    <div class=\"text\" v-else-if=\"status === 2\">\n                        <div>体验时间剩余 {{dayNum}}天</div>\n                        <div class=\"code red\">审核未通过</div>\n                    </div>\n                    <div class=\"text\" v-else-if=\"status === 1\">\n                        <div>商业授权</div>\n                        <div class=\"code\">授权码：{{ authCode }}</div>\n                    </div>\n                    <div class=\"text\" v-else-if=\"status === 0\">\n                        <div>体验时间剩余 {{dayNum}}天</div>\n                        <div class=\"code blue\">授权申请已提交，请等待审核</div>\n                    </div>\n                </div>\n                <Button @click=\"toCrmeb()\" v-if=\"status === 1\">进入官网</Button>\n                <Button type=\"primary\" @click=\"isTemplate = true\" v-else-if=\"status === -1 || status === -9\">申请授权</Button>\n                <Button type=\"primary\" @click=\"isTemplate = true\" v-else-if=\"status === 2\">重新申请</Button>\n                <Button class=\"grey\" v-else-if=\"status === 0\">审核中</Button>\n            </div>\n        </Card>\n        <Modal v-model=\"isTemplate\" scrollable footer-hide closable title=\"申请商业授权\" :z-index=\"1\" width=\"640\"\n               @on-cancel=\"cancel\">\n            <div class=\"article-manager\">\n                <Card :bordered=\"false\" dis-hover>\n                    <Form ref=\"formItem\" :model=\"formItem\" :label-width=\"labelWidth\" :label-position=\"labelPosition\"\n                          :rules=\"ruleValidate\" @submit.native.prevent>\n                        <Row type=\"flex\" :gutter=\"24\">\n                            <Col span=\"24\">\n                                <Col>\n                                    <FormItem label=\"企业名称：\" prop=\"company_name\" label-for=\"company_name\">\n                                        <Input v-model=\"formItem.company_name\" placeholder=\"请填写您的企业名称\"/>\n                                    </FormItem>\n                                </Col>\n                            </Col>\n                            <Col span=\"24\">\n                                <Col>\n                                    <FormItem label=\"企业域名：\" prop=\"domain_name\" label-for=\"domain_name\">\n                                        <Input v-model=\"formItem.domain_name\" :disabled=\"true\" placeholder=\"请输入域名，格式：baidu.com\"/>\n                                    </FormItem>\n                                </Col>\n                            </Col>\n                            <Col span=\"24\">\n                                <Col>\n                                    <FormItem label=\"订单号：\" label-for=\"order_id\" prop=\"order_id\">\n                                        <Input v-model=\"formItem.order_id\" placeholder=\"请输入您在淘宝或小程序购买的源码订单号\"\n                                               class=\"customer\">\n                                            <a slot=\"append\" target=\"_blank\" href=\"http://www.crmeb.com/web/auth/query.html\">联系客服获取订单号</a>\n                                        </Input>\n                                    </FormItem>\n                                </Col>\n                            </Col>\n                            <Col span=\"24\">\n                                <Col>\n                                    <FormItem label=\"手机号：\" label-for=\"phone\" prop=\"phone\">\n                                        <Input v-model=\"formItem.phone\" type=\"number\" placeholder=\"负责人电话\"/>\n                                    </FormItem>\n                                </Col>\n                            </Col>\n                            <Col span=\"24\">\n                                <Col>\n                                    <FormItem label=\"验证码：\" label-for=\"captcha\" prop=\"captcha\">\n                                        <div class=\"acea-row row-middle code\">\n                                            <Input v-model=\"formItem.captcha\" placeholder=\"验证码\" class=\"input\"/>\n                                            <img @click=\"captchsChang\" :src=\"captchs\"\n                                                 class=\"pictrue\"/>\n                                        </div>\n                                    </FormItem>\n                                </Col>\n                            </Col>\n                        </Row>\n                        <Row type=\"flex\">\n                            <Col span=\"24\">\n                                <Button type=\"primary\" @click=\"handleSubmit('formItem')\" class=\"submit\">提交</Button>\n                            </Col>\n                        </Row>\n                    </Form>\n                </Card>\n            </div>\n        </Modal>\n    </div>\n</template>\n<script>\n    import { auth, authApply } from '@/api/system'\n    import { mapState } from 'vuex'\n\n    export default {\n        name: 'system_auth',\n        computed: {\n            ...mapState('media', [\n                'isMobile'\n            ]),\n            ...mapState('userLevel', [\n                'categoryId'\n            ]),\n            labelWidth () {\n                return this.isMobile ? undefined : 85\n            },\n            labelPosition () {\n                return this.isMobile ? 'top' : 'right'\n            }\n        },\n        data () {\n            return {\n                captchs: 'http://authorize.crmeb.net/api/captchs/',\n                authCode: '',\n                status: 1,\n                dayNum: 0,\n                isTemplate: false,\n                formItem: {\n                    company_name: '',\n                    order_id: '',\n                    phone: '',\n                    captcha: '',\n                    domain_name: location.hostname,\n                },\n                ruleValidate: {\n                    company_name: [\n                        { required: true, message: '请填写您的企业名称', trigger: 'blur' }\n                    ],\n                    domain_name: [\n                        { required: true, message: '请输入域名，格式：baidu.com', trigger: 'blur' }\n                    ],\n                    order_id: [\n                        { required: true, message: '请输入您在淘宝或小程序购买的源码订单号', trigger: 'blur' }\n                    ],\n                    phone: [\n                        { required: true, message: '请输入负责人电话', trigger: 'blur' }\n                    ],\n                    captcha: [\n                        { required: true, message: '请输入验证码', trigger: 'blur' }\n                    ]\n                }\n            }\n        },\n        mounted () {\n            this.getAuth()\n            this.captchsChang()\n        },\n        methods: {\n            captchsChang () {\n                this.captchs = this.captchs + Date.parse(new Date())\n            },\n            cancel () {\n                this.isTemplate = false\n            },\n            // 提交\n            handleSubmit (name) {\n                this.$refs[name].validate((valid) => {\n                    if (valid) {\n                        authApply(this.formItem).then(res => {\n                            this.isTemplate = false\n                            this.getAuth()\n                            return this.$Message.success(res.msg)\n                        }).catch(res => {\n                            this.captchsChang()\n                            return this.$Message.error(res.msg)\n                        })\n                    } else {\n                        return false\n                    }\n                })\n            },\n            getAuth () {\n                auth().then(res => {\n                    let data = res.data || {}\n                    this.authCode = data.authCode || ''\n                    this.status = data.status === undefined ? -1 : data.status\n                    this.dayNum = data.day || 0\n                })\n            },\n            toCrmeb () {\n                window.open('http://www.crmeb.com')\n            }\n        }\n    }\n</script>\n<style scoped lang=\"stylus\">\n    .auth {\n        padding: 9px 16px 9px 10px;\n    }\n\n    .auth .iconIos {\n        font-size: 40px;\n        margin-right: 10px;\n        color: #001529;\n    }\n\n    .auth .text {\n        font-weight: 400;\n        color: rgba(0, 0, 0, 1);\n        font-size: 18px;\n    }\n\n    .auth .text .code {\n        font-size: 14px;\n        color: rgba(0, 0, 0, 0.5);\n    }\n\n    .auth .blue {\n        color: #1890FF !important;\n    }\n\n    .auth .red {\n        color: #ED4014 !important;\n    }\n\n    .grey {\n        background-color: #999999;\n        border-color: #999999;\n        color: #fff;\n    }\n\n    .submit {\n        width: 100%;\n    }\n\n    .code .input {\n        width: 83%;\n    }\n\n    .code .input .ivu-input {\n        border-radius: 4px 0 0 4px !important;\n    }\n\n    .code .pictrue {\n        height: 32px;\n        width: 17%;\n    }\n\n    .customer {\n        border-right: 0;\n    }\n\n    .customer a {\n        font-size: 12px;\n    }\n\n    .ivu-input-group-prepend, .ivu-input-group-append {\n        background-color: #fff;\n    }\n\n    .ivu-input-group .ivu-input {\n        border-right: 0 !important;\n    }\n</style>\n"]}]}