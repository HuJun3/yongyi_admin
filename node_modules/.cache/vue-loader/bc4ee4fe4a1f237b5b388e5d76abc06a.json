{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/components/main/components/header-notice/index.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/components/main/components/header-notice/index.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/less-loader/dist/cjs.js","mtime":1625101332743},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKLmhlYWRlci1ub3RpY2V7CiAgbWFyZ2luLXJpZ2h0OiAzMHB4Owp9Ci5oZWFkZXItbm90aWNlIC5pdnUtZHJvcGRvd24taXRlbXsKICBmb250LXNpemU6IDE0cHghaW1wb3J0YW50OwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgbGluZS1oZWlnaHQ6IDIycHg7CiAgY29sb3I6ICM1MTVhNmU7Cn0KLmhlYWRlci1ub3RpY2UgLml2dS1kcm9wZG93bi1pdGVtfi5pdnUtZHJvcGRvd24taXRlbXsKICBib3JkZXItdG9wOiAxcHggc29saWQgI2U4ZWFlYzsKfQouaGVhZGVyLW5vdGljZSAuaWNvbkltZ3sKICB3aWR0aDogMzJweDsKICBoZWlnaHQ6IDMycHg7CiAgbGluZS1oZWlnaHQ6IDMycHg7CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIGNvbG9yOiAjZmZmOwogIGZvbnQtc2l6ZTogMThweDsKICBtYXJnaW4tcmlnaHQ6IDEwcHg7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKfQouaGVhZGVyLW5vdGljZSAuaXZ1LWRyb3Bkb3duewogIGhlaWdodDogMzBweDsKICBsaW5lLWhlaWdodDogMzBweDsKfQouaGVhZGVyLW5vdGljZSAuaXZ1LWRyb3Bkb3duIC5pdnUtc2VsZWN0LWRyb3Bkb3duewogIG1hcmdpbi10b3A6IDIycHg7Cn0KLmhlYWRlci1ub3RpY2UgLml2dS1iYWRnZS1kb3R7CiAgei1pbmRleDogMCFpbXBvcnRhbnQ7Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/main/components/header-notice","sourcesContent":["<template>\n  <div class=\"header-notice\">\n    <Dropdown @on-click=\"jumpUrl\">\n      <div>\n        <Badge dot :count=\"needList.length?needList.length:0\">\n          <Icon type=\"ios-notifications-outline\" size=\"26\"></Icon>\n        </Badge>\n      </div>\n      <DropdownMenu slot=\"list\">\n        <DropdownItem :name=\"item.url\" v-for=\"(item,index) in needList\" :key=\"index\"><Icon :type=\"item.icon\" :style=\"'background-color:'+item.iconColor\" class=\"iconImg\" />{{item.title}}</DropdownItem>\n      </DropdownMenu>\n    </Dropdown>\n  </div>\n</template>\n<style lang=\"less\">\n  .header-notice{\n    margin-right: 30px;\n  }\n  .header-notice .ivu-dropdown-item{\n    font-size: 14px!important;\n    font-weight: 400;\n    line-height: 22px;\n    color: #515a6e;\n  }\n  .header-notice .ivu-dropdown-item~.ivu-dropdown-item{\n    border-top: 1px solid #e8eaec;\n  }\n  .header-notice .iconImg{\n    width: 32px;\n    height: 32px;\n    line-height: 32px;\n    border-radius: 50%;\n    color: #fff;\n    font-size: 18px;\n    margin-right: 10px;\n    vertical-align: middle;\n  }\n  .header-notice .ivu-dropdown{\n    height: 30px;\n    line-height: 30px;\n  }\n  .header-notice .ivu-dropdown .ivu-select-dropdown{\n    margin-top: 22px;\n  }\n  .header-notice .ivu-badge-dot{\n    z-index: 0!important;\n  }\n</style>\n<script>\n    let newOrderAudioLink = new Audio(require('@/assets/video/newOrderAudioLink.mp3'));\n    import { jnoticeRequest } from '@/api/common'\n    import {adminSocket} from '@/libs/socket';\n    import { getCookies, removeCookies,setCookies } from '@/libs/util'\n    export default {\n        name: 'User',\n        data () {\n            return {\n                needList: [],\n              newOrderAudioLink:null\n            }\n        },\n        mounted () {\n          this.getNotict()\n          this.newOrderAudioLink = newOrderAudioLink;\n          adminSocket.then(ws=>{\n            ws.send({\n              type: 'login',\n              data: getCookies('token')\n            })\n            let that = this;\n            that.$on('ADMIN_NEW_PUSH', function (data) {\n              that.getNotict();\n            })\n\n            that.$on('NEW_ORDER', function (data) {\n              console.log(data);\n              that.$Notice.info({\n                title: '新订单',\n                duration: 8,\n                desc: '您有一个新的订单(' + data.order_id + '),请注意查看'\n              });\n              if (this.newOrderAudioLink) this.newOrderAudioLink.play();\n              that.messageList.push({\n                title: '新订单提醒',\n                icon: 'md-bulb',\n                iconColor: '#87d068',\n                time: 0,\n                read: 0\n              });\n            });\n            that.$on('NEW_REFUND_ORDER', function (data) {\n              that.$Notice.warning({\n                title: '退款订单提醒',\n                duration: 8,\n                desc: '您有一个订单(' + data.order_id + ')申请退款,请注意查看'\n              });\n              if (window.newOrderAudioLink) this.newOrderAudioLink.play();\n              that.messageList.push({\n                title: '退款订单提醒',\n                icon: 'md-information',\n                iconColor: '#fe5c57',\n                time: 0,\n                read: 0\n              });\n            });\n            that.$on('WITHDRAW', function (data) {\n              that.$Notice.warning({\n                title: '提现提醒',\n                duration: 8,\n                desc: '有用户申请提现(' + data.id + '),请注意查看'\n              });\n              that.messageList.push({\n                title: '退款订单提醒',\n                icon: 'md-people',\n                iconColor: '#f06292',\n                time: 0,\n                read: 0\n              });\n            });\n            that.$on('STORE_STOCK', function (data) {\n              that.$Notice.warning({\n                title: '库存预警',\n                duration: 8,\n                desc: '(' + data.id + ')商品库存不足,请注意查看'\n              })\n              that.messageList.push({\n                title: '库存预警',\n                icon: 'md-information',\n                iconColor: '#fe5c57',\n                time: 0,\n                read: 0\n              });\n            });\n            that.$on('PAY_SMS_SUCCESS', function (data) {\n              that.$Notice.info({\n                title: '短信充值成功',\n                duration: 8,\n                desc: '恭喜您充值' + data.price + '元，获得' + data.number + '条短信'\n              });\n              that.messageList.push({\n                title: '短信充值成功',\n                icon: 'md-bulb',\n                iconColor: '#87d068',\n                time: 0,\n                read: 0\n              });\n            });\n          })\n        },\n        methods: {\n            getNotict () {\n                jnoticeRequest().then(res => {\n                    this.needList = res.data || []\n                }).catch(() => {})\n            },\n            jumpUrl (url) {\n                this.$router.push({ path: url })\n            }\n        }\n    }\n</script>\n"]}]}