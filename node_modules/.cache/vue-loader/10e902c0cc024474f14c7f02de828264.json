{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/notify/smsPay/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/notify/smsPay/index.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHNtc1ByaWNlQXBpLCBwYXlDb2RlQXBpLCBpc0xvZ2luQXBpLCBzZXJ2ZUluZm9BcGkgfSBmcm9tICdAL2FwaS9zZXR0aW5nJzsKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ3Ntc1BheScsCiAgICBkYXRhICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBhbGw6IHsgJ3Ntcyc6ICfnn63kv6EnLCAnY29weSc6ICfllYblk4Hph4fpm4YnLCAnZXhwcl9xdWVyeSc6ICfnianmtYHmn6Xor6InLCAnZXhwcl9kdW1wJzogJ+eUteWtkOmdouWNleaJk+WNsCcgfSwKICAgICAgICAgICAgaXNDaGVja2VkOiAnc21zJywKICAgICAgICAgICAgbnVtYmVyczogJycsCiAgICAgICAgICAgIGFjY291bnQ6ICcnLAogICAgICAgICAgICBsaXN0OiBbXSwKICAgICAgICAgICAgY3VycmVudDogMCwKICAgICAgICAgICAgY2hlY2tMaXN0OiB7fSwKICAgICAgICAgICAgc3BpblNob3c6IGZhbHNlLAogICAgICAgICAgICBjb2RlOiB7fQogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkICgpIHsKICAgICAgICB0aGlzLmlzQ2hlY2tlZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnR5cGU7CiAgICAgICAgdGhpcy5vbklzTG9naW4oKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLy8g5p+l55yL5piv5ZCm55m75b2VCiAgICAgICAgb25Jc0xvZ2luICgpIHsKICAgICAgICAgICAgdGhpcy5zcGluU2hvdyA9IHRydWU7CiAgICAgICAgICAgIGlzTG9naW5BcGkoKS50aGVuKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgaWYgKCFkYXRhLnN0YXR1cykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn6K+35YWI55m75b2VJyk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9hZG1pbi9zZXR0aW5nL3Ntcy9zbXNfY29uZmlnL2luZGV4P3VybD0nICsgdGhpcy4kcm91dGUucGF0aCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2VydmVJbmZvKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRQcmljZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaChyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOW5s+WPsOeUqOaIt+S/oeaBrwogICAgICAgIGdldFNlcnZlSW5mbyAoKSB7CiAgICAgICAgICAgIHNlcnZlSW5mb0FwaSgpLnRoZW4oYXN5bmMgcmVzID0+IHsKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuaXNDaGVja2VkKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc21zJzoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5udW1iZXJzID0gZGF0YS5zbXMubnVtCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvcHknOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm51bWJlcnMgPSBkYXRhLmNvcHkubnVtCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2V4cHJfZHVtcCc6CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubnVtYmVycyA9IGRhdGEuZHVtcC5udW0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5udW1iZXJzID0gZGF0YS5xdWVyeS5udW0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgb25DaGFuZ2VUeXBlICh2YWwpIHsKICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gMDsKICAgICAgICAgICAgdGhpcy5nZXRQcmljZSgpOwogICAgICAgICAgICB0aGlzLmdldFNlcnZlSW5mbygpOwogICAgICAgIH0sCiAgICAgICAgLy8g5pSv5LuY5aWX6aSQCiAgICAgICAgZ2V0UHJpY2UgKCkgewogICAgICAgICAgICB0aGlzLnNwaW5TaG93ID0gdHJ1ZTsKICAgICAgICAgICAgc21zUHJpY2VBcGkoeyB0eXBlOiB0aGlzLmlzQ2hlY2tlZCB9KS50aGVuKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNwaW5TaG93ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9LCA4MDApOwogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgICAgICAgIHRoaXMubGlzdCA9IGRhdGEuZGF0YTsKICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tMaXN0ID0gdGhpcy5saXN0WzBdOwogICAgICAgICAgICAgICAgdGhpcy5nZXRDb2RlKHRoaXMuY2hlY2tMaXN0KTsKICAgICAgICAgICAgfSkuY2F0Y2gocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuc3BpblNob3cgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgICAgICB0aGlzLmxpc3QgPSBbXTsKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOmAieS4rQogICAgICAgIGNoZWNrIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICB0aGlzLnNwaW5TaG93ID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gaW5kZXg7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5nZXRDb2RlKGl0ZW0pOwogICAgICAgICAgICAgICAgdGhpcy5jaGVja0xpc3QgPSBpdGVtOwogICAgICAgICAgICAgICAgdGhpcy5zcGluU2hvdyA9IGZhbHNlOwogICAgICAgICAgICB9LCA4MDApOwogICAgICAgIH0sCiAgICAgICAgLy8g5pSv5LuY56CBCiAgICAgICAgZ2V0Q29kZSAoaXRlbSkgewogICAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgICAgIHBheV90eXBlOiAnd2VpeGluJywKICAgICAgICAgICAgICAgIG1lYWxfaWQ6IGl0ZW0uaWQsCiAgICAgICAgICAgICAgICBwcmljZTogaXRlbS5wcmljZSwKICAgICAgICAgICAgICAgIG51bTogaXRlbS5udW0sCiAgICAgICAgICAgICAgICB0eXBlOiBpdGVtLnR5cGUKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcGF5Q29kZUFwaShkYXRhKS50aGVuKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmNvZGUgPSByZXMuZGF0YTsKICAgICAgICAgICAgfSkuY2F0Y2gocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuY29kZSA9ICcnOwogICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/notify/smsPay","sourcesContent":["<template>\n    <div>\n        <div class=\"i-layout-page-header\">\n            <div class=\"i-layout-page-header\">\n                <router-link :to=\"{path:'/admin/setting/sms/sms_config/index'}\"><Button icon=\"ios-arrow-back\" size=\"small\"  class=\"mr20\">返回</Button></router-link>\n                <span class=\"ivu-page-header-title mr20\">{{$route.meta.title}}</span>\n            </div>\n        </div>\n        <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n            <Tabs v-model=\"isChecked\" @on-click=\"onChangeType\">\n                <TabPane label=\"短信\" name=\"sms\"></TabPane>\n                <TabPane label=\"商品采集\" name=\"copy\"></TabPane>\n                <TabPane label=\"物流查询\" name=\"expr_query\"></TabPane>\n            </Tabs>\n            <Row :gutter=\"16\" class=\"mt50\">\n                <Col span=\"24\" class=\"ivu-text-left mb20\">\n                    <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"2\" class=\"mr20\">\n                        <span class=\"ivu-text-right ivu-block\">当前剩余条数：</span>\n                    </Col>\n                    <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n                        <span>{{numbers}}</span>\n                    </Col>\n                </Col>\n                <Col span=\"24\" class=\"ivu-text-left mb20\">\n                    <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"2\" class=\"mr20\">\n                        <span class=\"ivu-text-right ivu-block\">选择套餐：</span>\n                    </Col>\n                    <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n                        <Row :gutter=\"20\">\n                            <Col v-for=\"(item, index) in list\" :key=\"index\" :xxl=\"4\" :xl=\"8\" :lg=\"8\" :md=\"12\" :sm=\"24\"\n                                 :xs=\"24\">\n                                <div class=\"list-goods-list-item mb15\" :class=\"{active:index === current}\"\n                                     @click=\"check(item,index)\">\n                                    <div class=\"list-goods-list-item-title\" :class=\"{active:index === current}\">¥ <i>{{item.price }}</i></div>\n                                    <div class=\"list-goods-list-item-price\" :class=\"{active:index === current}\">\n                                        <span>{{all[isChecked]}}条数: {{ item.num }}</span>\n                                    </div>\n                                </div>\n                            </Col>\n                        </Row>\n                    </Col>\n                </Col>\n                <Col span=\"24\" class=\"ivu-text-left mb20\" v-if=\"checkList\">\n                    <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"2\" class=\"mr20\">\n                        <span class=\"ivu-text-right ivu-block\">充值条数：</span>\n                    </Col>\n                    <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n                        <span>{{checkList.num}}</span>\n                    </Col>\n                </Col>\n                <Col span=\"24\" class=\"ivu-text-left mb20\" v-if=\"checkList\">\n                    <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"2\" class=\"mr20\">\n                        <span class=\"ivu-text-right ivu-block\">支付金额：</span>\n                    </Col>\n                    <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n                        <span class=\"list-goods-list-item-number\">￥{{checkList.price}}</span>\n                    </Col>\n                </Col>\n                <Col span=\"24\" class=\"ivu-text-left mb20\">\n                    <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"2\" class=\"mr20\">\n                        <span class=\"ivu-text-right ivu-block\">付款方式：</span>\n                    </Col>\n                    <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n                        <span class=\"list-goods-list-item-pay\">微信支付<i v-if=\"code.invalid\">{{'  （ 支付码过期时间：' + code.invalid + ' ）' }}</i></span>\n                    </Col>\n                </Col>\n                <Col span=\"24\">\n                    <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"3\" class=\"mr20\">&nbsp;</Col>\n                    <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n                        <div class=\"list-goods-list-item-code mr20\"><img v-lazy=\"code.code_url\" v-if=\"code.code_url\"></div>\n                    </Col>\n                </Col>\n                <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\n            </Row>\n        </Card>\n    </div>\n</template>\n\n<script>\n    import { smsPriceApi, payCodeApi, isLoginApi, serveInfoApi } from '@/api/setting';\n    export default {\n        name: 'smsPay',\n        data () {\n            return {\n                all: { 'sms': '短信', 'copy': '商品采集', 'expr_query': '物流查询', 'expr_dump': '电子面单打印' },\n                isChecked: 'sms',\n                numbers: '',\n                account: '',\n                list: [],\n                current: 0,\n                checkList: {},\n                spinShow: false,\n                code: {}\n            }\n        },\n        created () {\n            this.isChecked = this.$route.query.type;\n            this.onIsLogin();\n        },\n        methods: {\n            // 查看是否登录\n            onIsLogin () {\n                this.spinShow = true;\n                isLoginApi().then(async res => {\n                    let data = res.data;\n                    if (!data.status) {\n                        this.$Message.warning('请先登录');\n                        this.$router.push('/admin/setting/sms/sms_config/index?url=' + this.$route.path);\n                    } else {\n                        this.getServeInfo();\n                        this.getPrice();\n                    }\n                }).catch(res => {\n                    this.$Message.error(res.msg);\n                })\n            },\n            // 平台用户信息\n            getServeInfo () {\n                serveInfoApi().then(async res => {\n                    let data = res.data;\n                    switch (this.isChecked) {\n                        case 'sms':\n                            this.numbers = data.sms.num\n                            break;\n                        case 'copy':\n                            this.numbers = data.copy.num\n                            break;\n                        case 'expr_dump':\n                            this.numbers = data.dump.num\n                            break;\n                        default:\n                            this.numbers = data.query.num\n                            break;\n                    }\n                }).catch(res => {\n                    this.$Message.error(res.msg);\n                })\n            },\n            onChangeType (val) {\n                this.current = 0;\n                this.getPrice();\n                this.getServeInfo();\n            },\n            // 支付套餐\n            getPrice () {\n                this.spinShow = true;\n                smsPriceApi({ type: this.isChecked }).then(async res => {\n                    setTimeout(() => {\n                        this.spinShow = false;\n                    }, 800);\n                    let data = res.data;\n                    this.list = data.data;\n                    this.checkList = this.list[0];\n                    this.getCode(this.checkList);\n                }).catch(res => {\n                    this.spinShow = false;\n                    this.$Message.error(res.msg);\n                    this.list = [];\n                })\n            },\n            // 选中\n            check (item, index) {\n                this.spinShow = true;\n                this.current = index;\n                setTimeout(() => {\n                    this.getCode(item);\n                    this.checkList = item;\n                    this.spinShow = false;\n                }, 800);\n            },\n            // 支付码\n            getCode (item) {\n                let data = {\n                    pay_type: 'weixin',\n                    meal_id: item.id,\n                    price: item.price,\n                    num: item.num,\n                    type: item.type\n                };\n                payCodeApi(data).then(async res => {\n                    this.code = res.data;\n                }).catch(res => {\n                    this.code = '';\n                    this.$Message.error(res.msg);\n                })\n            }\n        }\n    }\n</script>\n\n<style lang=\"less\" scoped>\n    .active{\n        background: #0091FF;\n        box-shadow:0px 6px 20px 0px rgba(0, 145, 255, 0.3);\n        color: #fff !important;\n    }\n    .list-goods-list-item{\n        border: 1px solid #DADFE6;\n        padding: 20px 10px;\n        box-sizing: border-box;\n        border-radius:3px;\n    }\n    .list-goods-list{\n        &-item{\n            text-align: center;\n            position: relative;\n            cursor: pointer;\n            img{\n                width: 60%;\n            }\n            .ivu-tag{\n                position: absolute;\n                top: 10px;\n                right: 10px;\n            }\n            &-title{\n                font-size: 16px;\n                font-weight: bold;\n                color: #0091FF;\n                margin-bottom: 3px;\n                i{\n                    font-size: 30px;\n                    font-style: normal;\n                }\n            }\n            &-desc{\n                font-size: 14px;\n                color: #808695;\n            }\n            &-price{\n                font-size: 14px;\n                color: #000000;\n                s{\n                    color: #c5c8ce;\n                }\n            }\n            &-number{\n                font-size: 14px;\n                color: #ED4014;\n            }\n            &-pay{\n                font-size: 14px;\n                color: #00C050;\n                i{\n                    font-size: 12px;\n                    font-style: normal;\n                    color: #6D7278;\n                }\n            }\n            &-code{\n                width: 130px;\n                height: 130px;\n                img{\n                    width: 100%;\n                    height: 100%;\n                }\n            }\n        }\n    }\n</style>\n"]}]}