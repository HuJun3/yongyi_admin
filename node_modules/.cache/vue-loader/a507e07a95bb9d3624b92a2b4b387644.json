{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/notify/smsConfig/components/register.vue?vue&type=style&index=0&id=54868eb4&scoped=true&lang=stylus&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/notify/smsConfig/components/register.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubWF4SW5wdHsKICAgIG1heC13aWR0aCA0MDBweAogICAgbWFyZ2luLWxlZnQgYXV0bwogICAgbWFyZ2luLXJpZ2h0IGF1dG8KfQoucGFnZS1hY2NvdW50LWNvbnRhaW5lcnsKICAgIHRleHQtYWxpZ24gY2VudGVyCiAgICBwYWRkaW5nIDUwcHggMAp9Ci5wYWdlLWFjY291bnQtdG9wewogICAgbWFyZ2luLWJvdHRvbSAyMHB4Cn0KLnBhZ2UtYWNjb3VudC10b3AtdGl0CiAgICBmb250LXNpemUgMjFweAogICAgY29sb3IgIzE4OTBGRgoucGFnZS1hY2NvdW50LW90aGVyCiAgICB0ZXh0LWFsaWduIGNlbnRlcgogICAgY29sb3IgIzE4OTBGRgogICAgZm9udC1zaXplIDEycHgKICAgIHNwYW4KICAgICAgICBjdXJzb3IgcG9pbnRlcgouY29kZSB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwp9Cg=="},{"version":3,"sources":["register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"register.vue","sourceRoot":"src/pages/notify/smsConfig/components","sourcesContent":["<template>\n    <Row type=\"flex\">\n        <Col span=\"24\">\n            <div class=\"index_from page-account-container\">\n                <div class=\"page-account-top \">\n                    <span class=\"page-account-top-tit\">一号通账户注册</span>\n                </div>\n                <Form ref=\"formInline\" :model=\"formInline\" :rules=\"ruleInline\" @submit.native.prevent>\n                    <!--<FormItem prop=\"account\">-->\n                    <!--<Input type=\"text\" v-model=\"formInline.account\" prefix=\"ios-contact-outline\"-->\n                    <!--placeholder=\"请输入短信平台账号\" />-->\n                    <!--</FormItem>-->\n                    <FormItem prop=\"phone\" class=\"maxInpt\">\n                        <Input type=\"number\" v-model=\"formInline.phone\" prefix=\"ios-contact-outline\"\n                               placeholder=\"请输入您的手机号\" />\n                    </FormItem>\n                    <FormItem prop=\"password\" class=\"maxInpt\">\n                        <Input type=\"password\" v-model=\"formInline.password\" prefix=\"ios-lock-outline\"\n                               placeholder=\"请输入短信平台密码/token\" />\n                    </FormItem>\n                    <!--<FormItem prop=\"password\">-->\n                    <!--<Input type=\"password\" v-model=\"formInline.password\" prefix=\"ios-lock-outline\"-->\n                    <!--placeholder=\"请确认短信平台密码/token\" />-->\n                    <!--</FormItem>-->\n                    <FormItem prop=\"url\" class=\"maxInpt\">\n                        <Input type=\"text\" v-model=\"formInline.url\" prefix=\"ios-contact-outline\"\n                               placeholder=\"请输入网址域名\" />\n                    </FormItem>\n                    <!--<FormItem prop=\"sign\">-->\n                    <!--<Input type=\"text\" v-model=\"formInline.sign\" prefix=\"ios-contact-outline\"-->\n                    <!--placeholder=\"请输入短信签名，例如：CRMEB\" />-->\n                    <!--</FormItem>-->\n                    <FormItem prop=\"verify_code\" class=\"maxInpt\">\n                        <div class=\"code\">\n                            <Input type=\"text\" v-model=\"formInline.verify_code\" prefix=\"ios-keypad-outline\"\n                                   placeholder=\"请输入验证码\" />\n                            <Button :disabled=!canClick @click=\"cutDown\">{{cutNUm}}</Button>\n                        </div>\n                    </FormItem>\n                    <FormItem class=\"maxInpt\">\n                        <Button type=\"primary\" long size=\"large\" @click=\"handleSubmit('formInline')\" class=\"btn\">注册</Button>\n                    </FormItem>\n                </Form>\n                <div class=\"page-account-other\">\n                    <span @click=\"changelogo\">立即登录</span>\n                </div>\n            </div>\n        </Col>\n    </Row>\n</template>\n\n<script>\n    import { captchaApi, registerApi } from '@/api/setting';\n    export default {\n        name: 'register',\n        data () {\n            const validatePhone = (rule, value, callback) => {\n                if (!value) {\n                    return callback(new Error('请填写手机号'));\n                } else if (!/^1[3456789]\\d{9}$/.test(value)) {\n                    callback(new Error('手机号格式不正确!'));\n                } else {\n                    callback();\n                }\n            };\n            return {\n                cutNUm: '获取验证码',\n                canClick: true,\n                formInline: {\n                    url: '',\n                    password: '',\n                    verify_code: '',\n                    phone: ''\n                },\n                ruleInline: {\n                    account: [\n                        { required: true, message: '请输入短信平台账号', trigger: 'blur' }\n                    ],\n                    password: [\n                        { required: true, message: '请输入短信平台密码/token', trigger: 'blur' }\n                    ],\n                    url: [\n                        { required: true, message: '请输入网址域名', trigger: 'blur' }\n                    ],\n                    phone: [\n                        { required: true, validator: validatePhone, trigger: 'blur' }\n                    ],\n                    sign: [\n                        { required: true, message: '请输入短信签名', trigger: 'blur' }\n                    ],\n                    verify_code: [\n                        { required: true, message: '请输入验证码', trigger: 'blur' }\n                    ]\n                }\n            }\n        },\n        methods: {\n            // 短信验证码\n            cutDown () {\n                if (this.formInline.phone) {\n                    if (!this.canClick) return;\n                    this.canClick = false;\n                    this.cutNUm = 60;\n                    let data = {\n                        phone: this.formInline.phone\n                    };\n                    captchaApi(data).then(async res => {\n                        this.$Message.success(res.msg);\n                    }).catch(res => {\n                        this.$Message.error(res.msg);\n                    })\n                    let time = setInterval(() => {\n                        this.cutNUm--;\n                        if (this.cutNUm === 0) {\n                            this.cutNUm = '获取验证码';\n                            this.canClick = true;\n                            clearInterval(time)\n                        }\n                    }, 1000)\n                } else {\n                    this.$Message.warning('请填写手机号!');\n                }\n            },\n            // 注册\n            handleSubmit (name) {\n                this.$refs[name].validate((valid) => {\n                    if (valid) {\n                        registerApi(this.formInline).then(async res => {\n                            this.$Message.success(res.msg);\n                            setTimeout(() => {\n                                this.changelogo();\n                            }, 1000);\n                        }).catch(res => {\n                            this.$Message.error(res.msg);\n                        })\n                    } else {\n                        return false;\n                    }\n                })\n            },\n            // 立即登录\n            changelogo () {\n                this.$emit('on-change')\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n    .maxInpt{\n        max-width 400px\n        margin-left auto\n        margin-right auto\n    }\n    .page-account-container{\n        text-align center\n        padding 50px 0\n    }\n    .page-account-top{\n        margin-bottom 20px\n    }\n    .page-account-top-tit\n        font-size 21px\n        color #1890FF\n    .page-account-other\n        text-align center\n        color #1890FF\n        font-size 12px\n        span\n            cursor pointer\n    .code {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n</style>\n"]}]}