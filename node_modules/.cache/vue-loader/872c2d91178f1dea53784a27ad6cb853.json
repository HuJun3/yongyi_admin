{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/product/productReply/index.vue?vue&type=style&index=0&id=0fc3d6bc&scoped=true&lang=stylus&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/product/productReply/index.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNvbnRlbnRfZm9udAogICAgY29sb3IgIzJiODVlNAouc2VhcmNoCiAgICA+Pj4gLml2dS1mb3JtLWl0ZW0tY29udGVudAogICAgICAgbWFyZ2luLWxlZnQgMCAhaW1wb3J0YW50Ci5pdnUtbXQgLkJ1dHRvbiAuYm50e21hcmdpbi1yaWdodDo2cHg7fQouaXZ1LW10IC5pdnUtdGFibGUtcm93e2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnJnYmEoMCwwLDAsMC42NSk7fQouaXZ1LW10ID4+PiAuaXZ1LXRhYmxlLWNlbGx7cGFkZGluZzoxMHB4IDAhaW1wb3J0YW50fQoucGljdHJ1ZXtoZWlnaHQ6MzZweDtkaXNwbGF5IGlubGluZS1ibG9jaztjdXJzb3IgcG9pbnRlcn0KLnBpY3RydWUgaW1ne2hlaWdodDoxMDAlO2Rpc3BsYXk6YmxvY2s7fQouaXZ1LW10IC5pbWdQaWMgLmluZm97d2lkdGg6NjAlO21hcmdpbi1sZWZ0OjEwcHg7fQouaXZ1LW10IC5waWNMaXN0IC5waWN0cnVle2hlaWdodDozNnB4O21hcmdpbjo3cHggM3B4IDAgM3B4O30KLml2dS1tdCAucGljTGlzdCAucGljdHJ1ZSBpbWd7aGVpZ2h0OjEwMCU7ZGlzcGxheTpibG9jazt9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAySA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/product/productReply","sourcesContent":["<template>\n    <div class=\"article-manager\">\n        <div class=\"i-layout-page-header\">\n          <div class=\"i-layout-page-header\">\n            <router-link :to=\"{path:'/admin/product/product_list'}\" v-if=\"$route.params.id\"><Button icon=\"ios-arrow-back\" size=\"small\"  class=\"mr20\">返回</Button></router-link>\n            <span class=\"ivu-page-header-title mr20\">商品评论管理</span>\n          </div>\n        </div>\n        <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n            <Form ref=\"formValidate\" :model=\"formValidate\"  :label-width=\"75\" label-position=\"left\" @submit.native.prevent>\n                <Row type=\"flex\" :gutter=\"24\">\n                    <Col span=\"24\">\n                        <FormItem label=\"时间选择：\">\n                            <RadioGroup v-model=\"formValidate.data\" type=\"button\"  @on-change=\"selectChange(formValidate.data)\" class=\"mr\">\n                                <Radio :label=item.val v-for=\"(item,i) in fromList.fromTxt\" :key=\"i\">{{item.text}}</Radio>\n                            </RadioGroup>\n                            <DatePicker :editable=\"false\" @on-change=\"onchangeTime\" :value=\"timeVal\"  format=\"yyyy/MM/dd\" type=\"daterange\" placement=\"bottom-end\" placeholder=\"自定义时间\" style=\"width: 200px;\"></DatePicker>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"评价状态：\">\n                            <Select v-model=\"formValidate.is_reply\" placeholder=\"请选择\" clearable @on-change=\"userSearchs\">\n                                <Option value=\"1\">已回复</Option>\n                                <Option value=\"0\">未回复</Option>\n                            </Select>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\" v-if=\"!$route.params.id\">\n                        <FormItem label=\"商品信息：\"  label-for=\"store_name\">\n                            <Input size=\"default\" enter-button placeholder=\"请输入商品ID或者商品信息\" clearable v-model=\"formValidate.store_name\"/>\n                        </FormItem>\n                    </Col>\n                    <Col v-bind=\"grid\">\n                        <FormItem label=\"用户名称：\"  label-for=\"account\">\n                            <Input size=\"default\" enter-button placeholder=\"请输入\" clearable v-model=\"formValidate.account\"/>\n                        </FormItem>\n                    </Col>\n                    <Col :xl=\"3\" :lg=\"3\" :md=\"12\" :sm=\"12\" :xs=\"24\" class=\"search\">\n                        <FormItem>\n                            <Button  type=\"primary\" icon=\"ios-search\" @click=\"userSearchs\">搜索</Button>\n                        </FormItem>\n                    </Col>\n                </Row>\n            </Form>\n<!--            <div class=\"Button\">-->\n<!--                <Button type=\"primary\" class=\"bnt\" icon=\"md-add\">添加评论</Button>-->\n<!--            </div>-->\n            <Row type=\"flex\">\n                <Col v-bind=\"grid\">\n                    <Button v-auth=\"['product-reply-save_fictitious_reply']\" type=\"primary\"  icon=\"md-add\" @click=\"add\">添加虚拟评论</Button>\n                </Col>\n            </Row>\n            <Table\n                    ref=\"table\"\n                    :columns=\"columns\"\n                    :data=\"tableList\"\n                    class=\"ivu-mt\"\n                    :loading=\"loading\"\n                    no-data-text=\"暂无数据\"\n                    no-filtered-data-text=\"暂无筛选结果\"\n            >\n                <template slot-scope=\"{ row }\" slot=\"info\">\n                    <div class=\"imgPic acea-row row-middle\">\n                        <div class=\"pictrue\" v-viewer><img v-lazy=\"row.image\"/></div>\n                        <div class=\"info\">{{row.store_name}}</div>\n                    </div>\n                </template>\n                <template slot-scope=\"{ row }\" slot=\"content\">\n                    <div class=\"mb5 content_font\">{{row.comment}}</div>\n                    <div v-viewer class=\"pictrue mr10\" v-for=\"(item,index) in row.pics || []\" :key=\"index\"><img v-lazy=\"item\" :src=\"item\" /></div>\n                </template>\n                <template slot-scope=\"{ row, index }\" slot=\"action\">\n                    <a @click=\"reply(row)\">回复</a>\n                    <Divider type=\"vertical\" />\n                    <a @click=\"del(row, '删除评论', index)\">删除</a>\n                </template>\n            </Table>\n            <div class=\"acea-row row-right page\">\n                <Page :total=\"total\" :current=\"formValidate.page\" show-elevator show-total @on-change=\"pageChange\"\n                      :page-size=\"formValidate.limit\"/>\n            </div>\n        </Card>\n        <Modal v-model=\"modals\" scrollable title=\"回复内容\"  closable>\n            <Form ref=\"contents\" :model=\"contents\" :rules=\"ruleInline\" label-position=\"right\" @submit.native.prevent>\n                <FormItem prop=\"content\">\n                    <Input v-model=\"contents.content\" type=\"textarea\" :rows=\"4\" placeholder=\"请输入回复内容\" />\n                </FormItem>\n            </Form>\n            <div slot=\"footer\">\n                <Button type=\"primary\"   @click=\"oks\">确定</Button>\n                <Button  @click=\"cancels\">取消</Button>\n            </div>\n        </Modal>\n    </div>\n</template>\n\n<script>\n    import { mapState } from 'vuex'\n    import { replyListApi, setReplyApi, fictitiousReply } from '@/api/product'\n    export default {\n        name: 'product_productEvaluate',\n        data () {\n            return {\n                modals: false,\n                grid: {\n                    xl: 7,\n                    lg: 10,\n                    md: 12,\n                    sm: 12,\n                    xs: 24\n                },\n                formValidate: {\n                    is_reply: '',\n                    data: '',\n                    store_name: '',\n                    account: '',\n                    product_id: this.$route.params.id === undefined ? 0 : this.$route.params.id,\n                    page: 1,\n                    limit: 15\n                },\n                fromList: {\n                    title: '选择时间',\n                    custom: true,\n                    fromTxt: [\n                        { text: '全部', val: '' },\n                        { text: '今天', val: 'today' },\n                        { text: '昨天', val: 'yesterday' },\n                        { text: '最近7天', val: 'lately7' },\n                        { text: '最近30天', val: 'lately30' },\n                        { text: '本月', val: 'month' },\n                        { text: '本年', val: 'year' }\n                    ]\n                },\n                value: '45',\n                tableList: [],\n                total: 0,\n                loading: false,\n                columns: [\n                    {\n                        title: '评论ID',\n                        key: 'id',\n                        width: 80\n                    },\n                    {\n                        title: '商品信息',\n                        slot: 'info',\n                        minWidth: 230\n                    },\n                    {\n                        title: '用户名称',\n                        key: 'nickname',\n                        minWidth: 150\n                    },\n                    {\n                        title: '评分',\n                        key: 'score',\n                        sortable: true,\n                        minWidth: 90\n                    },\n                    {\n                        title: '评价内容',\n                        slot: 'content',\n                        minWidth: 210\n                    },\n                    {\n                        title: '回复内容',\n                        key: 'merchant_reply_content',\n                        minWidth: 250\n                    },\n                    {\n                        title: '评价时间',\n                        key: 'add_time',\n                        sortable: true,\n                        minWidth: 150\n                    },\n                    {\n                        title: '操作',\n                        slot: 'action',\n                        fixed: 'right',\n                        minWidth: 150\n                    }\n                ],\n                timeVal: [],\n                contents: {\n                    content: ''\n                },\n                ruleInline: {\n                    content: [\n                        { required: true, message: '请输入回复内容', trigger: 'blur' }\n                    ]\n                },\n                rows: {}\n            }\n        },\n        computed: {\n        },\n        created () {\n            this.getList()\n        },\n        watch: {\n            '$route.params.id' (to, from) {\n                this.formValidate.product_id = 0\n                this.getList()\n            }\n        },\n        methods: {\n            // 添加虚拟评论；\n            add () {\n                this.$modalForm(fictitiousReply(this.formValidate.product_id)).then(() => this.getList())\n            },\n            oks () {\n                this.modals = true\n                this.$refs['contents'].validate((valid) => {\n                    if (valid) {\n                        setReplyApi(this.contents, this.rows.id).then(async res => {\n                            this.$Message.success(res.msg)\n                            this.modals = false\n                            this.$refs['contents'].resetFields()\n                            this.getList()\n                        }).catch(res => {\n                            this.$Message.error(res.msg)\n                        })\n                    } else {\n                        return false\n                    }\n                })\n            },\n            cancels () {\n                this.modals = false\n                this.$refs['contents'].resetFields()\n            },\n            // 删除\n            del (row, tit, num) {\n                let delfromData = {\n                    title: tit,\n                    num: num,\n                    url: `product/reply/${row.id}`,\n                    method: 'DELETE',\n                    ids: ''\n                }\n                this.$modalSure(delfromData).then((res) => {\n                    this.$Message.success(res.msg)\n                    this.tableList.splice(num, 1)\n                }).catch(res => {\n                    this.$Message.error(res.msg)\n                })\n            },\n            // 回复\n            reply (row) {\n                this.modals = true\n                this.rows = row\n            },\n            // 具体日期\n            onchangeTime (e) {\n                this.timeVal = e\n                this.formValidate.data = this.timeVal[0] ? this.timeVal.join('-') : ''\n                this.formValidate.page = 1\n                this.getList()\n            },\n            // 选择时间\n            selectChange (tab) {\n                this.formValidate.data = tab\n                this.timeVal = []\n                this.formValidate.page = 1\n                this.getList()\n            },\n            // 列表\n            getList () {\n                this.loading = true\n                this.formValidate.is_reply = this.formValidate.is_reply || ''\n                this.formValidate.store_name = this.formValidate.store_name || ''\n                replyListApi(this.formValidate).then(async res => {\n                    let data = res.data\n                    this.tableList = data.list\n                    this.total = res.data.count\n                    this.loading = false\n                }).catch(res => {\n                    this.loading = false\n                    this.$Message.error(res.msg)\n                })\n            },\n            pageChange (index) {\n                this.formValidate.page = index\n                this.getList()\n            },\n            // 表格搜索\n            userSearchs () {\n                this.formValidate.page = 1\n                this.getList()\n            },\n            search () {\n\n            }\n        }\n    }\n</script>\n<style scoped lang=\"stylus\">\n    .content_font\n        color #2b85e4\n    .search\n        >>> .ivu-form-item-content\n           margin-left 0 !important\n    .ivu-mt .Button .bnt{margin-right:6px;}\n    .ivu-mt .ivu-table-row{font-size:12px;color:rgba(0,0,0,0.65);}\n    .ivu-mt >>> .ivu-table-cell{padding:10px 0!important}\n    .pictrue{height:36px;display inline-block;cursor pointer}\n    .pictrue img{height:100%;display:block;}\n    .ivu-mt .imgPic .info{width:60%;margin-left:10px;}\n    .ivu-mt .picList .pictrue{height:36px;margin:7px 3px 0 3px;}\n    .ivu-mt .picList .pictrue img{height:100%;display:block;}\n</style>\n"]}]}