{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/components/rightConfig/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/components/rightConfig/index.vue","mtime":1619502992000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgICBpbXBvcnQgeyBnZXRDYXRlZ29yeSwgZ2V0QnlDYXRlZ29yeSwgZ2V0UHJvZHVjdCwgZGl5U2F2ZSwgc3RvcmVTdGF0dXMgfSBmcm9tICdAL2FwaS9kaXknCiAgICBpbXBvcnQgdG9vbENvbSBmcm9tICdAL2NvbXBvbmVudHMvZGl5Q29tcG9uZW50cy9pbmRleC5qcycKICAgIGltcG9ydCB7IG1hcE11dGF0aW9ucyB9IGZyb20gJ3Z1ZXgnCiAgICBpbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnCiAgICBleHBvcnQgZGVmYXVsdCB7CiAgICAgICAgbmFtZTogInJpZ2h0Q29uZmlnIiwKICAgICAgICBjb21wb25lbnRzOnsKICAgICAgICAgIC4uLnRvb2xDb20KICAgICAgICB9LAogICAgICAgIHByb3BzOnsKICAgICAgICAgICAgbmFtZTogewogICAgICAgICAgICAgICAgdHlwZTogbnVsbCwKICAgICAgICAgICAgICAgIGRlZmF1bHQ6JycKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGFnZUlkOiB7CiAgICAgICAgICAgICAgICB0eXBlOiBOdW1iZXIsCiAgICAgICAgICAgICAgICBkZWZhdWx0OiAwCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGNvbXB1dGVkOnsKICAgICAgICAgICAgLy8gLi4ubWFwU3RhdGUoewogICAgICAgICAgICAvLyAgICAgZGVmdWx0QXJyOihzdGF0ZSk9PnN0YXRlLmdvb2RTZWxlY3QuY29tcG9uZW50LAogICAgICAgICAgICAvLyB9KQogICAgICAgICAgICBkZWZ1bHRBcnIoKXsKICAgICAgICAgICAgICAgIGxldCBuYW1lcyA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvLnBhZ2VOYW1lOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlW25hbWVzXS5jb21wb25lbnQ7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHdhdGNoOnsKICAgICAgICAgICAgbmFtZTp7CiAgICAgICAgICAgICAgICBoYW5kbGVyIChuVmFsLCBvVmFsKSB7CgkJCQkJY29uc29sZS5sb2coblZhbCkKCQkJCQljb25zb2xlLmxvZyhvVmFsKQogICAgICAgICAgICAgICAgICAgIHRoaXMuckNvbSA9IFtdOwogICAgICAgICAgICAgICAgICAgIGxldCBkaXkgPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby5wYWdlTmFtZTsKCQkJCQljb25zb2xlLmxvZyhkaXkpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWdEYXRhID0gdGhpcy4kc3RvcmUuc3RhdGVbZGl5XS5kZWZhdWx0Q29uZmlnW25WYWxdOwoJCQkJCWNvbnNvbGUubG9nKHRoaXMuY29uZmlnRGF0YSkKICAgICAgICAgICAgICAgICAgICB0aGlzLnJDb20gPSB0aGlzLiRzdG9yZS5zdGF0ZVtkaXldLmNvbXBvbmVudFtuVmFsXS5saXN0OwoJCQkJCWNvbnNvbGUubG9nKHRoaXMuckNvbSkKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmNvbmZpZ0RhdGEuc2VsZWN0Q29uZmlnKXsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHR5cGUgPSB0aGlzLmNvbmZpZ0RhdGEuc2VsZWN0Q29uZmlnLnR5cGU/dGhpcy5jb25maWdEYXRhLnNlbGVjdENvbmZpZy50eXBlOicnOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ0RhdGEuc2VsZWN0Q29uZmlnLmxpc3QgPSB0aGlzLmNhdGVnb3J5TGlzdDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodHlwZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEJ5Q2F0ZWdvcnkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDYXRlZ29yeSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRlZXA6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ2RlZnVsdEFycic6IHsKICAgICAgICAgICAgICAgIGhhbmRsZXIgKG5WYWwsIG9WYWwpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJDb20gPSBbXQogICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wQXJyID0gdGhpcy5vYmpUb0FycmF5KG5WYWwpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yQ29tID1uVmFsIFt0aGlzLm5hbWVdLmxpc3QKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBkZWVwOiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGRhdGEoKXsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHJDb206W10sCiAgICAgICAgICAgICAgICBjb25maWdEYXRhOnt9LAogICAgICAgICAgICAgICAgaXNTaG93OnRydWUsCiAgICAgICAgICAgICAgICBjYXRlZ29yeUxpc3Q6W10sCiAgICAgICAgICAgICAgICBzdGF0dXM6MAogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBtb3VudGVkKCkgewogICAgICAgICAgICB0aGlzLnN0b3JlU3RhdHVzKCk7CiAgICAgICAgfSwKICAgICAgICBtZXRob2RzOnsKICAgICAgICAgICAgc3RvcmVTdGF0dXMoKXsKICAgICAgICAgICAgICAgIHN0b3JlU3RhdHVzKCkudGhlbihyZXM9PnsKICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9IHBhcnNlSW50KHJlcy5kYXRhLnN0b3JlX3N0YXR1cyk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXRDYXRlZ29yeSAoKSB7CiAgICAgICAgICAgICAgICBnZXRDYXRlZ29yeSgpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IFtdOwogICAgICAgICAgICAgICAgICAgIHJlcy5kYXRhLm1hcChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKHsgdGl0bGU6IGl0ZW0udGl0bGUsIHBpZDogaXRlbS5waWQsIGFjdGl2ZVZhbHVlOiBpdGVtLmlkLnRvU3RyaW5nKCkgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeUxpc3QgPSBkYXRhOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYnVzLiRlbWl0KCd1cERhdGEnLGRhdGEpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICAvL+iOt+WPluS6jOe6p+WIhuexuwogICAgICAgICAgICBnZXRCeUNhdGVnb3J5ICgpIHsKICAgICAgICAgICAgICAgIGdldEJ5Q2F0ZWdvcnkoKS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gW107CiAgICAgICAgICAgICAgICAgICAgcmVzLmRhdGEubWFwKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnB1c2goeyB0aXRsZTogaXRlbS5jYXRlX25hbWUsIHBpZDogaXRlbS5waWQsIGFjdGl2ZVZhbHVlOiBpdGVtLmlkLnRvU3RyaW5nKCkgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeUxpc3QgPSBkYXRhOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYnVzLiRlbWl0KCd1cERhdGEnLGRhdGEpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDkv53lrZjmlbDmja4KICAgICAgICAgICAgc2F2ZUNvbmZpZygpewogICAgICAgICAgICAgICAgbGV0IGRpeSA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvLnBhZ2VOYW1lOwogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB0aGlzLiRzdG9yZS5zdGF0ZVtkaXldLmRlZmF1bHRDb25maWc7CiAgICAgICAgICAgICAgICBsZXQgcGVyaXBoZXJ5ID0gdGhpcy4kc3RvcmUuc3RhdGVbZGl5XS5wZXJpcGhlcnk7CiAgICAgICAgICAgICAgICBpZih0aGlzLm5hbWU9PSd6X3RhYkJhcicpewogICAgICAgICAgICAgICAgICAgIGlmKCFwZXJpcGhlcnl8fCF0aGlzLnN0YXR1cyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsaXN0ID0gZGF0YS56X3RhYkJhci50YWJCYXJMaXN0Lmxpc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7aTxsaXN0Lmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobGlzdFtpXS5saW5rPT0nL3BhZ2VzL3N0b3JlTGlzdC9pbmRleCcgfHwgbGlzdFtpXS5saW5rPT0ncGFnZXMvc3RvcmVMaXN0L2luZGV4Jyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+ivt+WFiOW8gOWQr+aCqOeahOWRqOi+ueWKn+iDvSgvcGFnZXMvc3RvcmVMaXN0L2luZGV4KScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuel90YWJCYXIudGFiQmFyTGlzdC5saXN0Lmxlbmd0aDwyKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+aCqOacgOWwkeW6lOa3u+WKoDLkuKrlr7zoiKonKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkaXlTYXZlKHRoaXMucGFnZUlkLHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTpkYXRhCiAgICAgICAgICAgICAgICB9KS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygn5L+d5a2Y5oiQ5YqfJykKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOWvueixoei9rOaVsOe7hAogICAgICAgICAgICBvYmpUb0FycmF5KGFycmF5KSB7CiAgICAgICAgICAgICAgICB2YXIgYXJyID0gW10KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gYXJyYXkpIHsKICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChhcnJheVtpXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gYXJyOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/rightConfig","sourcesContent":["<template>\n    <div class=\"right-box\" v-if=\"rCom.length\">\n        <div class=\"title-bar\">模块配置</div>\n        <div class=\"mobile-config\" v-if=\"rCom.length\">\n\n            <div v-for=\"(item,key) in rCom\" :key=\"key\">\n                <component :is=\"item.components.name\" :name=\"item.configNme\" :configData=\"configData\"></component>\n            </div>\n            <div style=\"text-align: center;\" v-if=\"rCom.length\">\n                <Button type=\"primary\" style=\"width:100%;margin:0 auto;height: 40px\" @click=\"saveConfig\">保存</Button>\n            </div>\n        </div>\n    </div>\n\n</template>\n\n<script>\n    import { getCategory, getByCategory, getProduct, diySave, storeStatus } from '@/api/diy'\n    import toolCom from '@/components/diyComponents/index.js'\n    import { mapMutations } from 'vuex'\n    import { mapState } from 'vuex'\n    export default {\n        name: \"rightConfig\",\n        components:{\n          ...toolCom\n        },\n        props:{\n            name: {\n                type: null,\n                default:''\n            },\n            pageId: {\n                type: Number,\n                default: 0\n            }\n        },\n        computed:{\n            // ...mapState({\n            //     defultArr:(state)=>state.goodSelect.component,\n            // })\n            defultArr(){\n                let names = this.$store.state.userInfo.pageName;\n                return this.$store.state[names].component;\n            }\n        },\n        watch:{\n            name:{\n                handler (nVal, oVal) {\r\n\t\t\t\t\tconsole.log(nVal)\r\n\t\t\t\t\tconsole.log(oVal)\n                    this.rCom = [];\n                    let diy = this.$store.state.userInfo.pageName;\r\n\t\t\t\t\tconsole.log(diy)\n                    this.configData = this.$store.state[diy].defaultConfig[nVal];\r\n\t\t\t\t\tconsole.log(this.configData)\n                    this.rCom = this.$store.state[diy].component[nVal].list;\r\n\t\t\t\t\tconsole.log(this.rCom)\n                    if(this.configData.selectConfig){\n                        let type = this.configData.selectConfig.type?this.configData.selectConfig.type:'';\n                        this.configData.selectConfig.list = this.categoryList;\n                        if(type){\n                            this.getByCategory();\n                        }else {\n                            this.getCategory();\n                        }\n                    }\n                },\n                deep: true\n            },\n            'defultArr': {\n                handler (nVal, oVal) {\n                    this.rCom = []\n                    let tempArr = this.objToArray(nVal)\n                    this.rCom =nVal [this.name].list\n                },\n                deep: true\n            }\n        },\n        data(){\n            return {\n                rCom:[],\n                configData:{},\n                isShow:true,\n                categoryList:[],\n                status:0\n            }\n        },\n        mounted() {\n            this.storeStatus();\n        },\n        methods:{\n            storeStatus(){\n                storeStatus().then(res=>{\n                    this.status = parseInt(res.data.store_status);\n                })\n            },\n            getCategory () {\n                getCategory().then(res => {\n                    let data = [];\n                    res.data.map(item => {\n                        data.push({ title: item.title, pid: item.pid, activeValue: item.id.toString() });\n                    });\n                    this.categoryList = data;\n                    this.bus.$emit('upData',data)\n                })\n            },\n            //获取二级分类\n            getByCategory () {\n                getByCategory().then(res=>{\n                    let data = [];\n                    res.data.map(item => {\n                        data.push({ title: item.cate_name, pid: item.pid, activeValue: item.id.toString() });\n                    });\n                    this.categoryList = data;\n                    this.bus.$emit('upData',data)\n                })\n            },\n            // 保存数据\n            saveConfig(){\n                let diy = this.$store.state.userInfo.pageName;\n                let data = this.$store.state[diy].defaultConfig;\n                let periphery = this.$store.state[diy].periphery;\n                if(this.name=='z_tabBar'){\n                    if(!periphery||!this.status){\n                        let list = data.z_tabBar.tabBarList.list;\n                        for(let i = 0;i<list.length;i++){\n                            if(list[i].link=='/pages/storeList/index' || list[i].link=='pages/storeList/index'){\n                                return this.$Message.error('请先开启您的周边功能(/pages/storeList/index)');\n                            }\n                        }\n                    }\n                    if(data.z_tabBar.tabBarList.list.length<2){\n                        return this.$Message.error('您最少应添加2个导航');\n                    }\n                }\n                diySave(this.pageId,{\n                    value:data\n                }).then(res=>{\n                    this.$Message.success('保存成功')\n                })\n            },\n            // 对象转数组\n            objToArray(array) {\n                var arr = []\n                for (var i in array) {\n                    arr.push(array[i]);\n                }\n                return arr;\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n    .right-box\n        width 400px\n        margin-left 50px\n        border:1px solid #ddd;\n        border-radius 4px\n        height 700px\n        overflow-y scroll\n        &::-webkit-scrollbar {\n            /*滚动条整体样式*/\n            width : 4px;  /*高宽分别对应横竖滚动条的尺寸*/\n            height: 1px;\n        }\n        &::-webkit-scrollbar-thumb {\n            /*滚动条里面小方块*/\n            border-radius: 4px;\n            box-shadow   : inset 0 0 5px rgba(0, 0, 0, 0.2);\n            background   : #535353;\n        }\n        &::-webkit-scrollbar-track {\n            /*滚动条里面轨道*/\n            box-shadow   : inset 0 0 5px #fff;\n            border-radius: 4px;\n            background   : #fff;\n        }\n    .title-bar\n        width 100%\n        height 38px\n        line-height 38px\n        padding-left 24px\n        color #333\n        border-radius 4px\n        border-bottom 1px solid #eee\n</style>\n"]}]}