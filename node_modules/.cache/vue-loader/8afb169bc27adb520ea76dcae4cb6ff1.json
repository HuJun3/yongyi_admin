{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/kefu/appChat/index.vue?vue&type=style&index=0&id=065536fa&lang=less&scoped=true&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/kefu/appChat/index.vue","mtime":1619614782000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/less-loader/dist/cjs.js","mtime":1625101332743},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICIuLi8uLi8uLi9zdHlsZXMvZW1vamktYXdlc29tZS9jc3MvZ29vZ2xlLm1pbi5jc3MiOwpsaXsKICAgIGxpc3Qtc3R5bGUtdHlwZTpub25lOwp9Ci5jaGF0LXJvb20gewogICAgLnJvb20gewogICAgICAgIGJvcmRlci1yYWRpdXM6MTBweDsKICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgdG9wOiBjYWxjKDUwJSAtIDMyN3B4KTsKICAgICAgICBsZWZ0OiBjYWxjKDUwJSAtIDM2NXB4KTsKICAgICAgICB6LWluZGV4OiA5OTk7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgIHdpZHRoOiA3MzBweDsKICAgICAgICBoZWlnaHQ6IDY1NHB4OwogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7CiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICBib3gtc2hhZG93OiAxcHggMXB4IDE1cHggMCByZ2JhKDAsIDAsIDAsIDAuMSk7CgogICAgICAgICYud2luIHsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICBsZWZ0OiAwOwogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgIH0KCiAgICAgICAgLmhlYWQgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBoZWlnaHQ6IDUwcHg7CiAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IDE1cHg7CiAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMjBweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDI3MGRlZywgIzE4OTBmZiAwJSwgIzM4NzVlYSAxMDAlKTsKCiAgICAgICAgICAgIC5pbWFnZSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMzZweDsKICAgICAgICAgICAgICAgIGhlaWdodDogMzZweDsKICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CgogICAgICAgICAgICAgICAgaW1nIHsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LWZpdDogY292ZXI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC5uYW1lIHsKICAgICAgICAgICAgICAgIGZsZXg6IDE7CiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDA7CiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMTVweDsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOwogICAgICAgICAgICB9CgogICAgICAgICAgICAuaWNvbmZvbnQgewogICAgICAgICAgICAgICAgd2lkdGg6IDI1cHg7CiAgICAgICAgICAgICAgICBoZWlnaHQ6IDI1cHg7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMjVweDsKICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOwogICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAubWFpbiB7CiAgICAgICAgICAgIGZsZXg6IDE7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7CgogICAgICAgICAgICAuY2hhdCB7CiAgICAgICAgICAgICAgICBmbGV4OiAxOwogICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC5yZWNvcmQgewogICAgICAgICAgICAgICAgZmxleDogMTsKICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7CiAgICAgICAgICAgICAgICBvdmVyZmxvdy14OiBoaWRkZW47CiAgICAgICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOwoKICAgICAgICAgICAgICAgICY6Oi13ZWJraXQtc2Nyb2xsYmFyIHsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHVsIHsKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGxpIHsKICAgICAgICAgICAgICAgICAgICB+IGxpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICY6OmFmdGVyIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyOiBib3RoOwogICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBoaWRkZW47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAmLnJpZ2h0IHsKICAgICAgICAgICAgICAgICAgICAgICAgLmF2YXRhciB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdDogcmlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC5jb250ZW50IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgID4gZGl2IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC50aW1lLXRhZyB7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDEwcHg7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDMwcHg7CiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjOTk5OTk5OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC5hdmF0YXIgewogICAgICAgICAgICAgICAgICAgIGZsb2F0OiBsZWZ0OwogICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0MHB4OwogICAgICAgICAgICAgICAgICAgIGhlaWdodDogNDBweDsKICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKCiAgICAgICAgICAgICAgICAgICAgJi5yaWdodCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0OiByaWdodDsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGltZyB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QtZml0OiBjb3ZlcjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLmNvbnRlbnQgewogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogNTZweDsKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogNTZweDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAudGV4dCB7CiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDQxcHg7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTBweCAxMnB4OwogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTsKICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE1cHg7CiAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDIxcHg7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMwMDAwMDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLmltYWdlIHsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiA1MCU7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDsKICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwoKICAgICAgICAgICAgICAgICAgICBpbWcgewogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAuZ29vZHMsCiAgICAgICAgICAgICAgICAub3JkZXIgewogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4OwogICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDMyMHB4OwogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMTNweDsKICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLnRodW1iIHsKICAgICAgICAgICAgICAgICAgICB3aWR0aDogNjBweDsKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDYwcHg7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CgogICAgICAgICAgICAgICAgICAgIGltZyB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAuaW50cm8gewogICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7CiAgICAgICAgICAgICAgICAgICAgbWluLXdpZHRoOiAwOwogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4OwoKICAgICAgICAgICAgICAgICAgICAubmFtZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE1cHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMDAwMDAwOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLmF0dHIgewogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM5OTk5OTk7CgogICAgICAgICAgICAgICAgICAgICAgICBzcGFuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfiBzcGFuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMTBweDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLmdyb3VwIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7CgogICAgICAgICAgICAgICAgICAgICAgICAubW9uZXkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZjAwMDA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGEgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMxODkwZmY7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC5lZGl0b3IgewogICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE2MnB4OwogICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlY2VjZWM7CgogICAgICAgICAgICAgICAgPiBkaXYgewogICAgICAgICAgICAgICAgICAgICY6Zmlyc3QtY2hpbGQgewogICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGJ1dHRvbiB7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKCiAgICAgICAgICAgICAgICAgICAgfiBidXR0b24gewogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMjBweDsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICYuZW5kIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNXB4OwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgJjpob3ZlciB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMTg5MGZmOwoKICAgICAgICAgICAgICAgICAgICAgICAgLmljb25mb250IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMTg5MGZmOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC5lZGl0b3ItaGQgewogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICAgICAgICAgIGhlaWdodDogNTBweDsKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyMHB4OwogICAgICAgICAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMjBweDsKCiAgICAgICAgICAgICAgICAgICAgLmljb25mb250IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMzMzMzMzOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLmVtb2ppLXBhbmVsIHsKICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IDEwMCU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDVweDsKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDM5MHB4OwogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDsKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2VjZWNlYzsKICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4OwogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOwogICAgICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAxcHggMCAxNnB4IDAgcmdiYSgwLCAwLCAwLCAwLjA1KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC5lbSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjhweDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjhweDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMTBweDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJjpob3ZlciB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2VjZWNlYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAuaWNvbi1iaWFvcWluZzEsCiAgICAgICAgICAgICAgICAuaWNvbi10dXBpYW4xIHsKICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDIycHg7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLmljb24tZ3VhbmppIHsKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDVweDsKICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE1cHg7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLmVkaXRvci1iZCB7CiAgICAgICAgICAgICAgICAgICAgZmxleDogMTsKICAgICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAwOwoKICAgICAgICAgICAgICAgICAgICB0ZXh0YXJlYSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyMHB4OwogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBub25lOwogICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7CiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7CgogICAgICAgICAgICAgICAgICAgICAgICAmOjotd2Via2l0LXNjcm9sbGJhciB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC5lZGl0b3ItZnQgewogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsKICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IDIwcHg7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDIwcHg7CgogICAgICAgICAgICAgICAgICAgIGJ1dHRvbiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA2OHB4OwogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDI2cHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzg3NWVhOwogICAgICAgICAgICAgICAgICAgICAgICBvdXRsaW5lOiBub25lOwogICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDEzcHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOwoKICAgICAgICAgICAgICAgICAgICAgICAgJjpkaXNhYmxlZCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2NjY2NjOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAubm90aWNlIHsKICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgICAgICAgICAgd2lkdGg6IDI2MHB4OwogICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZWNlY2VjOwoKICAgICAgICAgICAgICAgIC5yaWNoIHsKICAgICAgICAgICAgICAgICAgICBmbGV4OiAxOwogICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMThweCAxOHB4IDA7CiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3cteDogaGlkZGVuOwogICAgICAgICAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87CgogICAgICAgICAgICAgICAgICAgICY6Oi13ZWJraXQtc2Nyb2xsYmFyIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC9kZWVwLyBpbWcgewogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC9kZWVwLyB2aWRlbyB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAuY29weSB7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDE1cHg7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDE1cHg7CiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgICAgICAgICBhIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNjY2NjY2MhaW1wb3J0YW50OwogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2kBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/kefu/appChat","sourcesContent":["<template>\n    <div class=\"chat-room\">\n        <div\n                class=\"room\"\n                :class=\"{ win: !chatOptions.popup }\"\n                @click=\"roomClick\"\n        >\n            <div v-drag class=\"head\">\n                <div class=\"image\">\n                    <img v-lazy=\"serviceData && serviceData.avatar\" />\n                </div>\n                <div class=\"name\">{{ serviceData && serviceData.nickname }}</div>\n                <div :class=\"['iconfont', muted ? 'icon-shengyinjingyinxianxing' : 'icon-shengyinyinliang']\" @click.stop=\"muted = !muted\"></div>\n                <div class=\"iconfont icon-guanbi5\" @click.stop=\"close\"></div>\n            </div>\n            <div class=\"main\">\n                <div class=\"chat\">\n                    <div class=\"record\" @scroll=\"onScroll\" ref=\"record\">\n                        <div id=\"chat_scroll\" ref=\"scrollBox\">\n                            <Spin v-show=\"loading\">\n                                <Icon type=\"ios-loading\" size=18 class=\"demo-spin-icon-load\"></Icon>\n                                <div>Loading</div>\n                            </Spin>\n                            <ul>\n                                <template v-for=\"item in records\">\n                                    <li :key=\"item.id\" :class=\"{ right: item.uid === serviceData.tourist_uid }\" :id=\"`chat_${item.id}`\">\n                                        <div v-if=\"item.show\" class=\"time-tag\">\n                                            {{ item.add_time }}\n                                        </div>\n                                        <div class=\"avatar\">\n                                            <img v-lazy=\"item.avatar\" />\n                                        </div>\n                                        <div class=\"content\" ref=\"chatContent\">\n                                            <div v-if=\"item.msn_type === 1\" class=\"text\"  v-html=\"item.msn\"></div>\n                                            <div v-if=\"item.msn_type === 2\" class=\"image\">\n                                                <div class=\"text\">\n                                                    <i :class=\"`em ${item.msn}`\"></i>\n                                                </div>\n                                            </div>\n                                            <div v-if=\"item.msn_type === 3\" class=\"image\" v-viewer>\n                                                <img v-lazy=\"item.msn\" />\n                                            </div>\n                                            <div v-if=\"item.msn_type === 5\" class=\"goods\">\n                                                <div class=\"thumb\">\n                                                    <img v-lazy=\"item.productInfo.image\" />\n                                                </div>\n                                                <div class=\"intro\">\n                                                    <div class=\"name\">\n                                                        {{ item.productInfo.store_name }}\n                                                    </div>\n                                                    <div class=\"attr\">\n                                                        <span>库存：{{ item.productInfo.stock }}</span>\n                                                        <span>销量：{{ item.productInfo.sales }}</span>\n                                                    </div>\n                                                    <div class=\"group\">\n                                                        <div class=\"money\">\n                                                            ￥{{ item.productInfo.price }}\n                                                        </div>\n                                                        <span style=\"cursor: pointer\" @click.stop=\"onLook(item.productInfo.id)\">查看商品 ></span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <template v-if=\"item.msn_type === 6\">\n                                                <div\n                                                        v-for=\"itm in item.orderInfo.cartInfo\"\n                                                        :key=\"itm.id\"\n                                                        class=\"order\"\n                                                >\n                                                    <div class=\"thumb\">\n                                                        <img :src=\"itm.productInfo.image\" />\n                                                    </div>\n                                                    <div class=\"intro\">\n                                                        <div class=\"name\">\n                                                            订单ID：{{ item.orderInfo.order_id }}\n                                                        </div>\n                                                        <div class=\"attr\">商品数量：{{ itm.cart_num }}</div>\n                                                        <div class=\"group\">\n                                                            <div class=\"money\">\n                                                                ￥{{ itm.productInfo.price }}\n                                                            </div>\n                                                            <nuxt-link\n                                                                    target=\"_blank\"\n                                                                    :to=\"{\n                                path: '/order_detail',\n                                query: { orderId: item.orderInfo.order_id },\n                              }\"\n                                                            >查看订单 ></nuxt-link\n                                                            >\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </template>\n                                        </div>\n                                    </li>\n                                </template>\n                            </ul>\n                        </div>\n\n                    </div>\n                    <div class=\"editor\">\n                        <div class=\"editor-hd\">\n                            <div>\n                                <button class=\"emoji-btn\" title=\"表情\" @click.stop=\"emojiSwitch\">\n                                    <span class=\"iconfont iconbiaoqing1\"></span>\n                                </button>\n                                <button title=\"图片\" v-if=\"kufuToken\">\n                                    <Upload :show-upload-list=\"false\" :action=\"uploadAction\"\n                                            :before-upload=\"beforeUpload\"\n                                            :format=\"['jpg','jpeg','png','gif']\"\n                                            :on-format-error=\"handleFormatError\"\n                                            :data=\"uploadData\"\n                                            :on-success=\"uploadSuccess\"\n                                            :on-error=\"uploadError\"\n                                            >\n                                        <span class=\"iconfont icontupian1\"></span>\n                                    </Upload>\n                                </button>\n                            </div>\n<!--                            <div>-->\n<!--                                <button class=\"end\" @click=\"chatEnd\">-->\n<!--                                    <i class=\"iconfont icon-guanji\"></i>结束-->\n<!--                                </button>-->\n<!--                            </div>-->\n                            <!-- 表情 -->\n                            <div class=\"emoji-panel\" v-if=\"emojiShow\">\n                                <i class=\"em\" :class=\"emoji\" @click.stop=\"selectEmoji(emoji)\" v-for=\"(emoji, index) in emojiList\" :key=\"index\"></i>\n                            </div>\n                        </div>\n                        <div class=\"editor-bd\">\n              <textarea\n                      v-model=\"chatCont\"\n                      placeholder=\"请输入文字内容\"\n                      @keydown.enter=\"ctrlEnter\"\n              ></textarea>\n                        </div>\n                        <div class=\"editor-ft\">\n                            <button :disabled=\"!chatCont\" @click.stop=\"sendMessage\">发送</button>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"notice\">\n                    <div v-if=\"notice\" class=\"rich\" v-html=\"notice\"></div>\n                    <div class=\"copy\">\n                        <a href=\"https://www.csyongyi.com/\" target=\"_blank\">永益科技提供技术支持</a>\n                    </div>\n                </div>\n            </div>\n            <audio ref=\"audio\" :src=\"audioSrc\"></audio>\n        </div>\n        <feed-back   @closeChange=\"closeChange($event)\"  v-if=\"change\" :change=\"change\"></feed-back>\n    </div>\n</template>\n\n<script>\n    import \"emoji-awesome/dist/css/google.min.css\";\n    import emojiList from \"@/utils/emoji\";\n    import {Socket} from \"@/libs/socket\";\n    import Setting from \"@/setting\";\n    import Cookies from 'js-cookie';\n    import { chatListApi, serviceListApi, getAdvApi, serviceList, getOrderApi,productApi } from '@/api/kefu';\n    import feedBack from './feedback';\n    const chunk = function(arr, num) {\n        num = num * 1 || 1;\n        var ret = [];\n        arr.forEach(function(item, i) {\n            if (i % num === 0) {\n                ret.push([]);\n            }\n            ret[ret.length - 1].push(item);\n        });\n        return ret;\n    };\n    export default {\n        name: \"ChatRoom\",\n        auth: false,\n        components:{\n            feedBack\n        },\n        props: {\n            chatOptions: {\n                type: Object,\n                default: function () {\n                    return {\n                        show: false,\n                    };\n                },\n            },\n        },\n        directives: {\n            drag: {\n                inserted: function (el) {\n                    let x = 0;\n                    let y = 0;\n                    let l = 0;\n                    let t = 0;\n                    let isDown = false;\n                    el.onmousedown = function (e) {\n                        x = e.clientX;\n                        y = e.clientY;\n                        l = el.parentNode.offsetLeft;\n                        t = el.parentNode.offsetTop;\n                        isDown = true;\n                        el.style.cursor = \"move\";\n                        window.onmousemove = function (e) {\n                            if (isDown == false) {\n                                return;\n                            }\n                            let nx = e.clientX;\n                            let ny = e.clientY;\n                            let nl = nx - (x - l);\n                            let nt = ny - (y - t);\n                            el.parentNode.style.left = nl + \"px\";\n                            el.parentNode.style.top = nt + \"px\";\n                        };\n                        window.onmouseup = function () {\n                            isDown = false;\n                            el.style.cursor = \"default\";\n                            window.onmousemove = null;\n                            window.onmouseup = null;\n                        };\n                        return false;\n                    };\n                },\n            },\n        },\n        data() {\n            return {\n                locations: `${location.origin}`,\n                change: false,\n                emojiGroup: chunk(emojiList, 20), // 表情列表\n                emojiList: emojiList,\n                emojiShow: false,\n                recordList: [],\n                limit: 20,\n                loading: false,\n                finished: false,\n                chatCont: \"\",\n                service: null,\n                serviceData: {},\n                uploadAction: '',\n                notice: \"\",\n                audio: null,\n                muted: false,\n                audioSrc: '',\n                upperId: 0,\n                uploadData: {},\n                is_tourist: 1, // 0登录状态，1未登录状态游客\n                text:'',\n                isLoad: false,\n                page: 1,\n                tourist_avatar: '', //游客头像\n                tourist_uid: '', //游客id\n                toUid: '', //客服id\n                kufuToken: '' // token\n            };\n        },\n        watch: {\n            muted(value) {\n                this.audio.muted = value;\n            }\n        },\n        computed: {\n            records() {\n                return this.recordList.map((item, index) => {\n                    if (index) {\n                        if (\n                            new Date(item.add_time) -\n                            new Date(this.recordList[index - 1].add_time) >=\n                            300000\n                        ) {\n                            item.show = true;\n                        } else {\n                            item.show = false;\n                        }\n                    } else {\n                        item.show = false;\n                    }\n                    return item;\n                });\n            },\n        },\n        created() {\n            if(location.href.indexOf('kefu')!=-1) this.uploadAction = Setting.apiBaseURL.replace(/adminapi/, \"kefuapi\")+'/tourist/upload';\n            let token = Cookies.get('auth._token.local1');\n            this.kufuToken = token?token.split(\"Bearer \")[1]: '';\n        },\n        mounted() {\n            let that = this\n            window.addEventListener('click',function(){\n                that.emojiShow = false\n            });\n            if (this.$wechat._isMobile()) this.$router.replace('/kefu/mobile_user_chat');\n            this.getNotice();\n            Socket.then(ws=>{\n                if(this.kufuToken){\n                    ws.send({\n                        type: 'login',\n                        data: this.kufuToken\n                    })\n                }\n                this.getService();\n                ws.$on([\"reply\", \"chat\"], data => {\n                    if(data.msn_type == 1){\n                        data.msn = this.replace_em(data.msn)\n                    }\n                    this.recordList.push(data)\n                    setTimeout(res=>{\n                        this.$nextTick(function () {\n                            this.$refs.record.scrollTop = this.$refs.record.scrollHeight - this.$refs.record.clientHeight;\n                        });\n                    },300)\n\n                });\n                // 监听客服转接\n                ws.$on('to_transfer', data => {\n                    this.toUid = data.toUid;\n                    ws.send({\n                        data: {\n                            id: this.toUid\n                        },\n                        type: 'to_chat'\n                    });\n                });\n                ws.$on(\"socket_error\", () => {\n                    this.$Message.error('连接失败')\n                });\n                ws.$on(\"err_tip\", data => {\n                    this.$Message.error(data.msg)\n                });\n                ws.$on(\"success\", data => {\n                    this.is_tourist = 0;\n                });\n\n            });\n            this.text = this.replace_em('[em-smiling_imp]')\n        },\n        beforeDestroy() {\n            this.socket.close();\n        },\n        methods: {\n            onLook(id){\n                window.open(`${location.origin}/home/goods_detail/${id}`);\n            },\n            // 关闭\n            closeChange(msg){\n                this.change = msg;\n            },\n            // 统一发送处理\n            sendMsg(msn,type) {\n                let obj = {\n                    type:'chat',\n                    data:{\n                        msn,\n                        type,\n                        is_tourist: this.is_tourist,\n                        to_uid: this.toUid,\n                        tourist_uid: this.tourist_uid,\n                        tourist_avatar: this.tourist_avatar,\n                        form_type: this.$wechat.isWeixin() ? 1 : 3,\n                    }\n                }\n                Socket.then(ws=> {\n                    ws.send(obj)\n                })\n            },\n            // 随机客服\n            getService() {\n                serviceListApi({token: this.kufuToken || ''}).then((res) => {\n                    this.serviceData = res.data;\n                    this.upperId = 0\n                    this.toUid = res.data.uid;\n                    this.tourist_uid = res.data.tourist_uid;\n                    this.tourist_avatar = res.data.tourist_avatar;\n                    let obj = {\n                        data: {\n                            id: res.data.uid,\n                            tourist_uid: this.tourist_uid\n                        },\n                        type: 'to_chat'\n                    }\n                    Socket.then(ws=> {\n                        ws.send(obj)\n                    })\n                    if(this.kufuToken){\n                       this.getRecordList();\n                    }\n                }).catch((err) => {\n                    this.$Message.error(err.msg);\n                    this.change = true;\n                });\n            },\n            roomClick(event) {\n                // if (\n                //     !event.target.classList.contains(\"emoji-panel\") &&\n                //     !event.target.classList.contains(\"emoji-btn\") &&\n                //     !event.target.classList.contains(\"icon-biaoqing\") &&\n                //     this.emojiShow\n                // ) {\n                //     this.emojiShow = false;\n                // }\n            },\n            // enter 发送\n            ctrlEnter(e) {\n                if (e.keyCode == 13) {\n                    e.preventDefault();\n                }\n                if (this.chatCont.trim()) {\n                    this.sendMessage();\n                }\n            },\n            // 关闭聊天窗口\n            close() {\n                this.$emit(\"chat-close\");\n            },\n            // 选择表情\n            selectEmoji(data) {\n                let val = `[${data}]`\n                this.chatCont += val\n                this.emojiShow = false;\n            },\n            // 聊天表情转换\n            replace_em(str) {\n                str = str.replace(/\\[em-([a-z_]*)\\]/g, \"<span class='em em-$1'/></span>\");\n                return str;\n            },\n            onScroll(event) {\n                if (event.target.scrollTop <=30) {\n                    if(this.kufuToken){\n                        this.getRecordList();\n                    }\n                }\n            },\n            // 聊天记录\n            getRecordList() {\n                if (this.loading) {\n                    return;\n                }\n                if (this.finished) {\n                    return;\n                }\n                this.loading = true;\n                chatListApi({\n                    uid: this.serviceData.uid,\n                    limit: this.limit,\n                    upperId:this.upperId,\n                    token: this.kufuToken\n                }).then((res) => {\n                   if(res.data.length === 0) return this.loading = false;\n                    res.data.forEach(el=>{\n                        if(el.msn_type == 1){\n                            el.msn = this.replace_em(el.msn)\n                        }\n                    })\n                    let selector = ''\n                    if(this.upperId == 0){\n                        selector = `chat_${res.data[res.data.length-1].id}`;\n                    }else{\n                        selector = `chat_${this.recordList[0].id}`;\n                    }\n                    this.recordList = [...res.data,...this.recordList];\n                    this.upperId = res.data.length>0?res.data[0].id : 0\n                    this.loading = false;\n                    this.finished = res.data.length < this.limit;\n                    this.$nextTick(function () {\n                        this.setPageScrollTo(selector)\n                    });\n                }).catch((err) => {\n                    this.$Message.error(err.msg);\n                    this.loading = false;\n                })\n            },\n            // 设置页面滚动位置\n            setPageScrollTo(selector){\n                this.$nextTick(()=>{\n                    if(selector){\n                        setTimeout(()=>{\n                            let num = parseFloat(document.getElementById(selector).offsetTop)-60\n                            this.$refs.record.scrollTop = num\n                        },0)\n                    }else{\n                        var container =document.querySelector(\"#chat_scroll\");\n                        this.$refs.record.scrollTop = container.offsetHeight\n                        setTimeout(res=>{\n                            if( this.$refs.record.scrollTop != this.$refs.scrollBox.offsetHeight){\n                                this.$refs.record.scrollTop = document.querySelector(\"#chat_scroll\").offsetHeight\n                            }\n                        },300)\n                    }\n                })\n            },\n            // 表情包显示隐藏\n            emojiSwitch() {\n                this.emojiShow = !this.emojiShow;\n            },\n            // 发送消息\n            sendMessage() {\n                this.sendMsg(this.chatCont, 1)\n                this.chatCont = \"\";\n            },\n            chat(data) {\n                if (data.uid != this.$auth.user.uid && this.audio) {\n                    this.audio.play();\n                }\n                this.recordList.push(data);\n                this.$nextTick(() => {\n                    this.$refs.record.scrollTop =\n                        this.$refs.record.scrollHeight - this.$refs.record.clientHeight;\n                });\n            },\n            sendGoods() {\n                if (this.chatOptions.goodsId) {\n                    Socket.then(ws => {\n                        ws.send({\n                            data: {\n                                msn: this.chatOptions.goodsId,\n                                type: 5,\n                                to_uid: this.toUid,\n                            },\n                            type: \"to_chat\"\n                        })\n                    })\n                }\n            },\n            sendOrder() {\n                if (this.chatOptions.orderId) {\n                    Socket.then(ws=> {\n                        ws.send({\n                                data: {\n                                    msn: this.chatOptions.orderId,\n                                    type: 6,\n                                    to_uid: this.toUid,\n                                },\n                            type: \"to_chat\"\n                        })\n                    })\n                }\n            },\n            chatEnd() {\n                if (navigator.userAgent.indexOf(\"MSIE\") > 0) {\n                    if (navigator.userAgent.indexOf(\"MSIE 6.0\") > 0) {\n                        window.opener = null;\n                        window.close();\n                    } else {\n                        window.open('', '_top');\n                        window.top.close();\n                    }\n                }\n                else if (navigator.userAgent.indexOf(\"Firefox\") > 0) {\n                    window.location.href = 'about:blank ';\n                } else {\n                    window.opener = null;\n                    window.open('', '_self', '');\n                    window.close();\n                }\n            },\n            // 广告\n            getNotice() {\n                getAdvApi().then((res) => {\n                    this.notice = res.data.content;\n                });\n            },\n            beforeUpload(file) {\n                this.uploadData = {\n                    filename: file,\n                    token: this.kufuToken\n                }\n                let promise = new Promise((resolve) => {\n                    this.$nextTick(function () {\n                        resolve(true);\n                    });\n                });\n                return promise;\n            },\n            handleFormatError (file) {\n                this.$Message.error(\"上传图片只能是 jpg、jpg、jpeg、gif 格式!\");\n            },\n            uploadSuccess(res) {\n                this.sendMsg(res.data.url,3)\n            },\n            uploadError(error) {\n                this.$Message.error(error);\n            }\n        }\n    };\n</script>\n\n<style lang=\"less\" scoped>\n    @import \"../../../styles/emoji-awesome/css/google.min.css\";\n    li{\n        list-style-type:none;\n    }\n    .chat-room {\n        .room {\n            border-radius:10px;\n            position: fixed;\n            top: calc(50% - 327px);\n            left: calc(50% - 365px);\n            z-index: 999;\n            display: flex;\n            flex-direction: column;\n            width: 730px;\n            height: 654px;\n            background-color: #ffffff;\n            overflow: hidden;\n            box-shadow: 1px 1px 15px 0 rgba(0, 0, 0, 0.1);\n\n            &.win {\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n            }\n\n            .head {\n                display: flex;\n                align-items: center;\n                height: 50px;\n                padding-right: 15px;\n                padding-left: 20px;\n                background: linear-gradient(270deg, #1890ff 0%, #3875ea 100%);\n\n                .image {\n                    width: 36px;\n                    height: 36px;\n                    border-radius: 50%;\n                    overflow: hidden;\n\n                    img {\n                        display: block;\n                        width: 100%;\n                        height: 100%;\n                        object-fit: cover;\n                    }\n                }\n\n                .name {\n                    flex: 1;\n                    min-width: 0;\n                    margin-left: 15px;\n                    font-size: 16px;\n                    color: #ffffff;\n                }\n\n                .iconfont {\n                    width: 25px;\n                    height: 25px;\n                    font-size: 16px;\n                    line-height: 25px;\n                    text-align: center;\n                    color: #ffffff;\n                    cursor: pointer;\n                }\n            }\n\n            .main {\n                flex: 1;\n                display: flex;\n                min-height: 0;\n\n                .chat {\n                    flex: 1;\n                    display: flex;\n                    flex-direction: column;\n                    min-width: 0;\n                }\n\n                .record {\n                    flex: 1;\n                    min-height: 0;\n                    overflow-x: hidden;\n                    overflow-y: auto;\n\n                    &::-webkit-scrollbar {\n                        display: none;\n                    }\n\n                    ul {\n                        padding: 20px;\n                    }\n\n                    li {\n                        ~ li {\n                            margin-top: 20px;\n                        }\n\n                        &::after {\n                            content: \"\";\n                            display: block;\n                            height: 0;\n                            clear: both;\n                            visibility: hidden;\n                        }\n\n                        &.right {\n                            .avatar {\n                                float: right;\n                            }\n\n                            .content {\n                                text-align: right;\n\n                                > div {\n                                    text-align: left;\n                                }\n                            }\n                        }\n                    }\n\n                    .time-tag {\n                        padding-top: 10px;\n                        padding-bottom: 30px;\n                        text-align: center;\n                        color: #999999;\n                    }\n\n                    .avatar {\n                        float: left;\n                        width: 40px;\n                        height: 40px;\n                        border-radius: 50%;\n                        overflow: hidden;\n\n                        &.right {\n                            float: right;\n                        }\n\n                        img {\n                            display: block;\n                            width: 100%;\n                            height: 100%;\n                            object-fit: cover;\n                        }\n                    }\n\n                    .content {\n                        margin-right: 56px;\n                        margin-left: 56px;\n                    }\n\n                    .text {\n                        display: inline-block;\n                        min-height: 41px;\n                        padding: 10px 12px;\n                        border-radius: 10px;\n                        background-color: #f5f5f5;\n                        font-size: 15px;\n                        line-height: 21px;\n                        color: #000000;\n                    }\n\n                    .image {\n                        display: inline-block;\n                        max-width: 50%;\n                        border-radius: 10px;\n                        overflow: hidden;\n\n                        img {\n                            display: block;\n                            max-width: 100%;\n                        }\n                    }\n\n                    .goods,\n                    .order {\n                        display: inline-flex;\n                        align-items: center;\n                        width: 320px;\n                        padding: 10px 13px;\n                        border-radius: 10px;\n                        background-color: #f5f5f5;\n                    }\n\n                    .thumb {\n                        width: 60px;\n                        height: 60px;\n                        border-radius: 5px;\n                        overflow: hidden;\n\n                        img {\n                            display: block;\n                            width: 100%;\n                            height: 100%;\n                        }\n                    }\n\n                    .intro {\n                        flex: 1;\n                        min-width: 0;\n                        margin-left: 10px;\n\n                        .name {\n                            overflow: hidden;\n                            white-space: nowrap;\n                            text-overflow: ellipsis;\n                            font-size: 15px;\n                            color: #000000;\n                        }\n\n                        .attr {\n                            margin-top: 5px;\n                            font-size: 12px;\n                            color: #999999;\n\n                            span {\n                                vertical-align: middle;\n\n                                ~ span {\n                                    margin-left: 10px;\n                                }\n                            }\n                        }\n\n                        .group {\n                            display: flex;\n                            justify-content: space-between;\n                            align-items: center;\n                            margin-top: 5px;\n\n                            .money {\n                                font-size: 14px;\n                                color: #ff0000;\n                            }\n\n                            a {\n                                font-size: 12px;\n                                color: #1890ff;\n                            }\n                        }\n                    }\n                }\n\n                .editor {\n                    display: flex;\n                    flex-direction: column;\n                    height: 162px;\n                    border-top: 1px solid #ececec;\n\n                    > div {\n                        &:first-child {\n                            font-size: 0;\n                        }\n                    }\n\n                    button {\n                        border: none;\n                        background: none;\n                        outline: none;\n\n                        ~ button {\n                            margin-left: 20px;\n                        }\n\n                        &.end {\n                            font-size: 15px;\n                        }\n\n                        &:hover {\n                            color: #1890ff;\n\n                            .iconfont {\n                                color: #1890ff;\n                            }\n                        }\n                    }\n\n                    .editor-hd {\n                        position: relative;\n                        display: flex;\n                        justify-content: space-between;\n                        align-items: center;\n                        height: 50px;\n                        padding-right: 20px;\n                        padding-left: 20px;\n\n                        .iconfont {\n                            line-height: 1;\n                            color: #333333;\n                        }\n\n                        .emoji-panel {\n                            position: absolute;\n                            bottom: 100%;\n                            left: 5px;\n                            width: 390px;\n                            padding-bottom: 10px;\n                            border: 1px solid #ececec;\n                            margin-bottom: 5px;\n                            background-color: #ffffff;\n                            box-shadow: 1px 0 16px 0 rgba(0, 0, 0, 0.05);\n\n                            .em {\n                                width: 28px;\n                                height: 28px;\n                                padding: 4px;\n                                margin-top: 10px;\n                                margin-left: 10px;\n                                box-sizing: border-box;\n\n                                &:hover {\n                                    background-color: #ececec;\n                                }\n                            }\n                        }\n                    }\n\n                    .icon-biaoqing1,\n                    .icon-tupian1 {\n                        font-size: 22px;\n                    }\n\n                    .icon-guanji {\n                        margin-right: 5px;\n                        font-size: 15px;\n                    }\n\n                    .editor-bd {\n                        flex: 1;\n                        min-height: 0;\n\n                        textarea {\n                            display: block;\n                            width: 100%;\n                            height: 100%;\n                            padding-right: 20px;\n                            padding-left: 20px;\n                            border: none;\n                            outline: none;\n                            resize: none;\n                            white-space: pre-wrap;\n                            overflow-wrap: break-word;\n\n                            &::-webkit-scrollbar {\n                                display: none;\n                            }\n                        }\n                    }\n\n                    .editor-ft {\n                        display: flex;\n                        justify-content: flex-end;\n                        align-items: center;\n                        padding-right: 20px;\n                        padding-bottom: 20px;\n\n                        button {\n                            width: 68px;\n                            height: 26px;\n                            border: none;\n                            border-radius: 3px;\n                            background-color: #3875ea;\n                            outline: none;\n                            font-size: 13px;\n                            color: #ffffff;\n\n                            &:disabled {\n                                background-color: #cccccc;\n                            }\n                        }\n                    }\n                }\n\n                .notice {\n                    display: flex;\n                    flex-direction: column;\n                    width: 260px;\n                    border-left: 1px solid #ececec;\n\n                    .rich {\n                        flex: 1;\n                        min-height: 0;\n                        padding: 18px 18px 0;\n                        overflow-x: hidden;\n                        overflow-y: auto;\n\n                        &::-webkit-scrollbar {\n                            display: none;\n                        }\n\n                        /deep/ img {\n                            width: 100%;\n                        }\n\n                        /deep/ video {\n                            width: 100%;\n                        }\n                    }\n\n                    .copy {\n                        padding-top: 15px;\n                        padding-bottom: 15px;\n                        font-size: 12px;\n                        text-align: center;\n                        a {\n                            color: #cccccc!important;\n                            text-decoration: none;\n                        }\n                    }\n                }\n            }\n        }\n    }\n</style>\n"]}]}