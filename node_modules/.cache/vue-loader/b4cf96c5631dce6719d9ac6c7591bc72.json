{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/components/sendCoupons/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/components/sendCoupons/index.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNvdXBvbkFwaSB9IGZyb20gJ0AvYXBpL3VzZXInCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnc2VuZCcsCiAgcHJvcHM6IHsKICAgIHVzZXJJZHM6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfQogIH0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RhbHM6IGZhbHNlLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgY291cG9uTGlzdDogW10sCiAgICAgIGNvbHVtbnM6IFsKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+S8mOaDoOWIuOWQjeensCcsCiAgICAgICAgICBrZXk6ICd0aXRsZScsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogMTAwCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+S8mOaDoOWIuOmdouWAvCcsCiAgICAgICAgICBrZXk6ICdjb3Vwb25fcHJpY2UnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDgwCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+S8mOaDoOWIuOacgOS9jua2iOi0uScsCiAgICAgICAgICBrZXk6ICd1c2VfbWluX3ByaWNlJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiAxNTAKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5LyY5oOg5Yi45pyJ5pWI5pyf6ZmQJywKICAgICAgICAgIGtleTogJ2NvdXBvbl90aW1lJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiAxMjAKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5pON5L2cJywKICAgICAgICAgIHNsb3Q6ICdhY3Rpb24nLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgd2lkdGg6IDEyMAogICAgICAgIH0KICAgICAgXSwKICAgICAgcGFnZTogewogICAgICAgIHBhZ2U6IDEsIC8vIOW9k+WJjemhtQogICAgICAgIGxpbWl0OiAxNSwKICAgICAgICB0aXRsZTogJycKICAgICAgfSwKICAgICAgdG90YWw6IDAgLy8g5oC75p2h5pWwCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDkvJjmg6DliLjliJfooagKICAgIGdldExpc3QgKGlkKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgY291cG9uQXBpKHRoaXMucGFnZSkudGhlbihhc3luYyByZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGEKICAgICAgICAgIHRoaXMuY291cG9uTGlzdCA9IGRhdGEubGlzdAogICAgICAgICAgdGhpcy50b3RhbCA9IGRhdGEuY291bnQKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpCiAgICAgICAgfQogICAgICB9KS5jYXRjaChyZXMgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKQogICAgICB9KQogICAgfSwKICAgIC8vIOihqOagvOaQnOe0ogogICAgdXNlclNlYXJjaHMgKCkgewogICAgICB0aGlzLmdldExpc3QoKQogICAgfSwKICAgIHBhZ2VDaGFuZ2UgKGluZGV4KSB7CiAgICAgIHRoaXMucGFnZS5wYWdlID0gaW5kZXgKICAgICAgdGhpcy5nZXRMaXN0KCkKICAgIH0sCiAgICAvLyDlj5HpgIEKICAgIHNlbmRHcmFudCAocm93LCB0aXQsIG51bSkgewogICAgICBsZXQgZGVsZnJvbURhdGEgPSB7CiAgICAgICAgdGl0bGU6IHRpdCwKICAgICAgICBudW06IG51bSwKICAgICAgICB1cmw6IGBtYXJrZXRpbmcvY291cG9uL3VzZXIvZ3JhbnRgLAogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIGlkczogewogICAgICAgICAgaWQ6IHJvdy5pZCwKICAgICAgICAgIHVpZDogdGhpcy51c2VySWRzCiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuJG1vZGFsU3VyZShkZWxmcm9tRGF0YSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpCiAgICAgIH0pLmNhdGNoKHJlcyA9PiB7CiAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKQogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/sendCoupons","sourcesContent":["<template>\n    <div>\n        <Modal v-model=\"modals\" :z-index=\"100\" scrollable  footer-hide closable title=\"发送优惠券\" :mask-closable=\"false\" width=\"900\">\n            <div class=\"acea-row\">\n                <span class=\"sp\">优惠券名称：</span><Input v-model=\"page.title\" search enter-button placeholder=\"请输入优惠券名称\" style=\"width: 60%;\"  @on-search=\"userSearchs\"/>\n            </div>\n            <Table  :columns=\"columns\" :data=\"couponList\" ref=\"table\" class=\"mt25\"\n                    :loading=\"loading\" highlight-row\n                    no-userFrom-text=\"暂无数据\"\n                    no-filtered-userFrom-text=\"暂无筛选结果\">\n                <template slot-scope=\"{ row, index }\" slot=\"action\">\n                    <a @click=\"sendGrant(row,'发送优惠券',index)\">发送</a>\n                </template>\n            </Table>\n            <div class=\"acea-row row-right page\">\n                <Page :total=\"total\" show-elevator show-total   @on-change=\"pageChange\"\n                      :page-size=\"page.limit\"  /></div>\n        </Modal>\n    </div>\n</template>\n\n<script>\nimport { couponApi } from '@/api/user'\nexport default {\n  name: 'send',\n  props: {\n    userIds: {\n      type: String,\n      default: ''\n    }\n  },\n  data () {\n    return {\n      modals: false,\n      loading: false,\n      couponList: [],\n      columns: [\n        {\n          title: '优惠券名称',\n          key: 'title',\n          align: 'center',\n          minWidth: 100\n        },\n        {\n          title: '优惠券面值',\n          key: 'coupon_price',\n          align: 'center',\n          minWidth: 80\n        },\n        {\n          title: '优惠券最低消费',\n          key: 'use_min_price',\n          align: 'center',\n          minWidth: 150\n        },\n        {\n          title: '优惠券有效期限',\n          key: 'coupon_time',\n          align: 'center',\n          minWidth: 120\n        },\n        {\n          title: '操作',\n          slot: 'action',\n          align: 'center',\n          width: 120\n        }\n      ],\n      page: {\n        page: 1, // 当前页\n        limit: 15,\n        title: ''\n      },\n      total: 0 // 总条数\n    }\n  },\n  methods: {\n    // 优惠券列表\n    getList (id) {\n      this.loading = true\n      couponApi(this.page).then(async res => {\n        if (res.status === 200) {\n          let data = res.data\n          this.couponList = data.list\n          this.total = data.count\n          this.loading = false\n        } else {\n          this.loading = false\n          this.$Message.error(res.msg)\n        }\n      }).catch(res => {\n        this.loading = false\n        this.$Message.error(res.msg)\n      })\n    },\n    // 表格搜索\n    userSearchs () {\n      this.getList()\n    },\n    pageChange (index) {\n      this.page.page = index\n      this.getList()\n    },\n    // 发送\n    sendGrant (row, tit, num) {\n      let delfromData = {\n        title: tit,\n        num: num,\n        url: `marketing/coupon/user/grant`,\n        method: 'post',\n        ids: {\n          id: row.id,\n          uid: this.userIds\n        }\n      }\n      this.$modalSure(delfromData).then((res) => {\n        this.$Message.success(res.msg)\n      }).catch(res => {\n        this.$Message.error(res.msg)\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"stylus\">\n    .sp\n        line-height 32px\n\n</style>\n"]}]}