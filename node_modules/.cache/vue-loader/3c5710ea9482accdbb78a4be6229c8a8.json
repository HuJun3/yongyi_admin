{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/kefu/mobile/goods/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/kefu/mobile/goods/list.vue","mtime":1610680940000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7U29ja2V0fSBmcm9tICdAL2xpYnMvc29ja2V0JzsKaW1wb3J0IHsgcHJvZHVjdENhcnQscHJvZHVjdEhvdCxwcm9kdWN0VmlzaXQgfSBmcm9tICdAL2FwaS9rZWZ1LmpzJwppbXBvcnQgeyBzZXJ2aWNlSW5mbyB9IGZyb20gJ0AvYXBpL2tlZnVfbW9iaWxlJwppbXBvcnQgZW1wdHkgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9lbXB0eSI7CmV4cG9ydCBkZWZhdWx0ewogICAgbmFtZToncHJvZHVjdF9pbmZvJywKICAgIGNvbXBvbmVudHM6ewogICAgICAgIGVtcHR5CiAgICB9LAogICAgZGF0YSgpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgb3BzOnsKICAgICAgICAgICAgICAgIGJhcjp7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDonIzM5MzIzMicsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTonLjUnLAogICAgICAgICAgICAgICAgICAgIHNpemU6JzJweCcKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2VhcmNoVHh0OicnLAogICAgICAgICAgICB0YWJDdXI6MCwKICAgICAgICAgICAgdGFiTGlzdDpbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAga2V5OjAsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6J+i0reS5sCcsCiAgICAgICAgICAgICAgICAgICAgYXBpOidwcm9kdWN0Q2FydCcKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAga2V5OjEsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6J+i2s+i/uScsCiAgICAgICAgICAgICAgICAgICAgYXBpOidwcm9kdWN0SG90JwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBrZXk6MiwKICAgICAgICAgICAgICAgICAgICB0aXRsZTon54Ot6ZSAJywKICAgICAgICAgICAgICAgICAgICBhcGk6J3Byb2R1Y3RWaXNpdCcKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKICAgICAgICAgICAgdG9VaWQ6JycsCiAgICAgICAgICAgIGxpc3Q6W10KICAgICAgICB9CiAgICB9LAogICAgd2F0Y2g6ewogICAgICAgIHRhYkN1cihuVmFsLG9WYWwpewogICAgICAgICAgICB0aGlzLmxpc3QgPSBbXQogICAgICAgICAgICBpZihuVmFsID09IDApIHJldHVybiB0aGlzLmdldEJ1eUxpc3QoKQogICAgICAgICAgICBpZihuVmFsID09IDEpIHJldHVybiB0aGlzLmdldFZpc2l0KCkKICAgICAgICAgICAgaWYoblZhbCA9PSAyKSByZXR1cm4gdGhpcy5nZXRQcm9kdWN0SG90KCkKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICBzZXJ2aWNlSW5mbygpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LnRpdGxlID0gYCR7cmVzLmRhdGEuc2l0ZV9uYW1lfSAtIOWVhuWTgeWIl+ihqGAKICAgICAgICB9KQogICAgICAgIHRoaXMudG9VaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS50b1VpZAogICAgICAgIHRoaXMuZ2V0QnV5TGlzdCgpCiAgICB9LAogICAgbWV0aG9kczp7CiAgICAgICAgLy8g6LSt5Lmw6K6w5b2VCiAgICAgICAgZ2V0QnV5TGlzdCgpewogICAgICAgICAgICBwcm9kdWN0Q2FydCh0aGlzLnRvVWlkLHsKICAgICAgICAgICAgICAgIHN0b3JlX25hbWU6dGhpcy5zZWFyY2hUeHQKICAgICAgICAgICAgfSkudGhlbihyZXM9PnsKICAgICAgICAgICAgICAgIHRoaXMubGlzdCA9IHJlcy5kYXRhCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICAvLyDng63plIDllYblk4EKICAgICAgICBnZXRQcm9kdWN0SG90KCl7CiAgICAgICAgICAgIHByb2R1Y3RIb3QodGhpcy50b1VpZCx7CiAgICAgICAgICAgICAgICBzdG9yZV9uYW1lOnRoaXMuc2VhcmNoVHh0CiAgICAgICAgICAgIH0pLnRoZW4ocmVzPT57CiAgICAgICAgICAgICAgICB0aGlzLmxpc3QgPSByZXMuZGF0YQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgLy8g6Laz6L+5CiAgICAgICAgZ2V0VmlzaXQoKXsKICAgICAgICAgICAgcHJvZHVjdFZpc2l0KHRoaXMudG9VaWQsewogICAgICAgICAgICAgICAgc3RvcmVfbmFtZTp0aGlzLnNlYXJjaFR4dAogICAgICAgICAgICB9KS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgdGhpcy5saXN0ID0gcmVzLmRhdGEKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOaOqOmAgQogICAgICAgIGJpbmdHb29kcyhpdGVtKXsKICAgICAgICAgICAgbGV0IG9iaiA9IHsKICAgICAgICAgICAgICAgIHR5cGU6ICdjaGF0JywKICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICBtc246aXRlbS5pZCwKICAgICAgICAgICAgICAgICAgICB0eXBlOjUsCiAgICAgICAgICAgICAgICAgICAgdG9fdWlkOiB0aGlzLnRvVWlkCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgU29ja2V0LnRoZW4od3MgPT4gewogICAgICAgICAgICAgICAgd3Muc2VuZChvYmopCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvLyB0aGlzLmJ1cy4kZW1pdCgnc2VsZWN0R29vZHMnLGl0ZW0pCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSkKICAgICAgICB9LAogICAgICAgIC8vIOmhtumDqOmAiemhueWNoeWIh+aNogogICAgICAgIGJpbmRUYWIoaXRlbSl7CiAgICAgICAgICAgIHRoaXMudGFiQ3VyID0gaXRlbS5rZXkKICAgICAgICB9LAogICAgICAgIC8vIOaQnOe0ogogICAgICAgIGJpbmRTZWFyY2goKXsKICAgICAgICAgICAgaWYodGhpcy50YWJDdXIgPT0gMCkgcmV0dXJuIHRoaXMuZ2V0QnV5TGlzdCgpCiAgICAgICAgICAgIGlmKHRoaXMudGFiQ3VyID09IDEpIHJldHVybiB0aGlzLmdldFZpc2l0KCkKICAgICAgICAgICAgaWYodGhpcy50YWJDdXIgPT0gMikgcmV0dXJuIHRoaXMuZ2V0UHJvZHVjdEhvdCgpCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/pages/kefu/mobile/goods","sourcesContent":["<template>\n    <div class=\"product_info\">\n        <div class=\"head\">\n            <div class=\"tab-box\">\n                <div class=\"tab-item\" :class=\"{on:index==tabCur}\" v-for=\"(item,index) in tabList\" :key=\"index\" @click=\"bindTab(item)\">{{item.title}}</div>\n            </div>\n            <div class=\"search-box\">\n                <Input type=\"text\" placeholder=\"搜索商品名称/ID\" v-model=\"searchTxt\" style=\"border-radius: .39rem; background: #F5F6F9\" :search=\"true\" @on-search=\"bindSearch\" />\n            </div>\n        </div>\n        <div class=\"scroll-box\" v-if=\"list.length>0\">\n            <vue-scroll :ops=\"ops\">\n                <div class=\"goods-item\" v-for=\"(item,index) in list\" :key=\"index\">\n                    <img :src=\"item.image\" mode=\"\" />\n                    <div class=\"info\">\n                        <div class=\"title line2 mb15\">{{item.store_name}}</div>\n                        <div class=\"num\">\n                            <span class=\"mr15\">库存 {{item.stock}}</span>\n                            <span>销量 {{item.sales}}</span>\n                        </div>\n                    </div>\n                    <div class=\"right\">\n                        <div class=\"price\">￥{{item.price}}</div>\n                        <div class=\"btn\" @click=\"bingGoods(item)\">推送</div>\n                    </div>\n                </div>\n                <div class=\"slot-load\" slot=\"load-deactive\"></div>\n                <div class=\"slot-load\" slot=\"load-active\">下滑加载更多</div>\n            </vue-scroll>\n        </div>\n        <empty v-else msg=\"暂无商品信息\"></empty>\n    </div>\n</template>\n\n<script>\n    import {Socket} from '@/libs/socket';\n    import { productCart,productHot,productVisit } from '@/api/kefu.js'\n    import { serviceInfo } from '@/api/kefu_mobile'\n    import empty from \"../../components/empty\";\n    export default{\n        name:'product_info',\n        components:{\n            empty\n        },\n        data(){\n            return{\n                ops:{\n                    bar:{\n                        background:'#393232',\n                        opacity:'.5',\n                        size:'2px'\n                    }\n                },\n                searchTxt:'',\n                tabCur:0,\n                tabList:[\n                    {\n                        key:0,\n                        title:'购买',\n                        api:'productCart'\n                    },\n                    {\n                        key:1,\n                        title:'足迹',\n                        api:'productHot'\n                    },\n                    {\n                        key:2,\n                        title:'热销',\n                        api:'productVisit'\n                    }\n                ],\n                toUid:'',\n                list:[]\n            }\n        },\n        watch:{\n            tabCur(nVal,oVal){\n                this.list = []\n                if(nVal == 0) return this.getBuyList()\n                if(nVal == 1) return this.getVisit()\n                if(nVal == 2) return this.getProductHot()\n            }\n        },\n        created() {\n            serviceInfo().then(res => {\n                window.document.title = `${res.data.site_name} - 商品列表`\n            })\n            this.toUid = this.$route.query.toUid\n            this.getBuyList()\n        },\n        methods:{\n            // 购买记录\n            getBuyList(){\n                productCart(this.toUid,{\n                    store_name:this.searchTxt\n                }).then(res=>{\n                    this.list = res.data\n                })\n            },\n            // 热销商品\n            getProductHot(){\n                productHot(this.toUid,{\n                    store_name:this.searchTxt\n                }).then(res=>{\n                    this.list = res.data\n                })\n            },\n            // 足迹\n            getVisit(){\n                productVisit(this.toUid,{\n                    store_name:this.searchTxt\n                }).then(res=>{\n                    this.list = res.data\n                })\n            },\n            // 推送\n            bingGoods(item){\n                let obj = {\n                    type: 'chat',\n                    data: {\n                        msn:item.id,\n                        type:5,\n                        to_uid: this.toUid\n                    }\n                }\n                Socket.then(ws => {\n                    ws.send(obj)\n                });\n                // this.bus.$emit('selectGoods',item)\n                this.$router.go(-1)\n            },\n            // 顶部选项卡切换\n            bindTab(item){\n                this.tabCur = item.key\n            },\n            // 搜索\n            bindSearch(){\n                if(this.tabCur == 0) return this.getBuyList()\n                if(this.tabCur == 1) return this.getVisit()\n                if(this.tabCur == 2) return this.getProductHot()\n            }\n        }\n    }\n</script>\n<style>\n    page{\n        height: 100%;\n    }\n</style>\n<style lang=\"stylus\" scoped>\n    .product_info{\n        display: flex;\n        flex-direction: column;\n        height: 100vh;\n        .head{\n            background: #fff;\n            .tab-box{\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                height: .8rem;\n                padding: 0 1.46rem;\n                .tab-item{\n                    height: .8rem;\n                    line-height: .8rem;\n                    padding: 0 .15rem;\n                    font-size: .28rem;\n                    color: #282828;\n                    &.on{\n                        border-bottom: 1px solid #3875EA;\n                    }\n                }\n            }\n            .search-box{\n                display: flex;\n                align-items: center;\n                height: 1.28rem;\n                padding: 0 .3rem;\n                input{\n                    display: block;\n                    width: 100%;\n                    height: .68rem;\n                    padding-left: .7rem;\n                    background: #F5F6F9;\n                    border-radius: .39rem;\n                    box-sizing: border-box;\n                    /*background-image: url(\"../static/search.png\");*/\n                }\n            }\n        }\n        .scroll-box{\n            flex: 1;\n            overflow: hidden;\n            .goods-item{\n                display: flex;\n                padding: .3rem;\n                margin-top: .15rem;\n                background-color: #fff;\n                img{\n                    width: 1.7rem;\n                    height: 1.7rem;\n                    border-radius: 0.06rem;\n                }\n                .info{\n                    width: 3.26rem;\n                    margin-left: .22rem;\n                    .title{\n                        font-size: .28rem;\n                        color: #282828;\n                    }\n                    .num{\n                        margin-top: .1rem;\n                        font-size: .24rem;\n                        color: #9F9F9F;\n                    }\n                }\n                .right{\n                    flex: 1;\n                    display: flex;\n                    flex-direction: column;\n                    justify-content: space-between;\n                    margin-left: .36rem;\n                    .price{\n                        color: #F74C31;\n                    }\n                    .btn{\n                        width: 100%;\n                        height: .6rem;\n                        line-height: .6rem;\n                        text-align: center;\n                        color: #fff;\n                        background: #3875EA;\n                        border-radius: 0.06rem;\n                    }\n                }\n            }\n        }\n    }\n</style>\n"]}]}