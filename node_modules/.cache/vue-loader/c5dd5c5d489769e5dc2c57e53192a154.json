{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/kefu/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/kefu/index.vue","mtime":1610680940000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEFjY291bnRMb2dpbiwgbG9naW5JbmZvQXBpLGdldFNhbkNvZGVLZXksc2NhblN0YXR1cyxrZWZ1Q29uZmlnIH0gZnJvbSAnQC9hcGkva2VmdSc7CmltcG9ydCBtaXhpbnMgZnJvbSAnLi4vYWNjb3VudC9taXhpbnMnOwppbXBvcnQgU2V0dGluZyBmcm9tICdAL3NldHRpbmcnOwppbXBvcnQgdXRpbCBmcm9tICdAL2xpYnMvdXRpbCc7CmltcG9ydCBRUkNvZGUgZnJvbSAncXJjb2RlanMyJwppbXBvcnQgeyBnZXRDb29raWVzLCByZW1vdmVDb29raWVzLHNldENvb2tpZXMgfSBmcm9tICdAL2xpYnMvdXRpbCcKZXhwb3J0IGRlZmF1bHQgewogICAgbWl4aW5zOiBbbWl4aW5zXSwKICAgIGRhdGEgKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGZ1bGxXaWR0aDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLAogICAgICAgICAgICBzd2lwZXJPcHRpb246IHsKICAgICAgICAgICAgICAgIHBhZ2luYXRpb246ICcuc3dpcGVyLXBhZ2luYXRpb24nLAogICAgICAgICAgICAgICAgYXV0b3BsYXk6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbW9kYWxzOiBmYWxzZSwKICAgICAgICAgICAgYXV0b0xvZ2luOiB0cnVlLAogICAgICAgICAgICBpbWdjb2RlOiAnJywKICAgICAgICAgICAgZm9ybUlubGluZTogewogICAgICAgICAgICAgICAgdXNlcm5hbWU6ICcnLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgICAgICAgICAgY29kZTogJycKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcnVsZUlubGluZTogewogICAgICAgICAgICAgICAgdXNlcm5hbWU6IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl55So5oi35ZCNJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBwYXNzd29yZDogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIGNvZGU6IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6aqM6K+B56CBJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXJyb3JOdW06IDAsCiAgICAgICAgICAgIGppZ3NhdzogbnVsbCwKICAgICAgICAgICAgbG9naW5fbG9nbzogJycsCiAgICAgICAgICAgIHN3aXBlckxpc3Q6IFtdLAogICAgICAgICAgICBkZWZhdWx0U3dpcGVyTGlzdDogcmVxdWlyZSgnQC9hc3NldHMvaW1hZ2VzL3N3LmpwZycpLAogICAgICAgICAgICBsb2dpblR5cGU6MCwgLy8gMCDotKblj7cgMSDmiavnoIEKICAgICAgICAgICAgY29kZUtleTonJywKICAgICAgICAgICAgc2NhblRpbWU6JycsCiAgICAgICAgICAgIHJ4cGlyZWQ6ZmFsc2UsIC8vIOaJq+eggeaYr+WQpui/h+acnwogICAgICAgICAgICBpc01vYmlsZTpmYWxzZSwKICAgICAgICAgICAgdmVyc2lvbjonJywgLy/niYjmnKzlj7cKICAgICAgICAgICAgaXNTY2FuOmZhbHNlLAogICAgICAgICAgICB0aW1lTnVtOjAKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCAoKSB7CiAgICAgICAga2VmdUNvbmZpZygpLnRoZW4ocmVzPT57CiAgICAgICAgICAgIHRoaXMudmVyc2lvbiA9IHJlcy5kYXRhLnZlcnNpb24KICAgICAgICAgICAgaWYocmVzLmRhdGEuc2l0ZV9uYW1lKXsKICAgICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHJlcy5kYXRhLnNpdGVfbmFtZTsKICAgICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgdGhpcy5pc01vYmlsZSA9IHRoaXMuJHN0b3JlLnN0YXRlLm1lZGlhLmlzTW9iaWxlCiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICB0b3AgIT0gd2luZG93ICYmICh0b3AubG9jYXRpb24uaHJlZiA9IGxvY2F0aW9uLmhyZWYpOwogICAgICAgIGRvY3VtZW50Lm9ua2V5ZG93biA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy4kcm91dGUubmFtZSA9PT0gJ2xvZ2luJykgewogICAgICAgICAgICAgICAgbGV0IGtleSA9IHdpbmRvdy5ldmVudC5rZXlDb2RlOwogICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gMTMpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVTdWJtaXQoJ2Zvcm1JbmxpbmUnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuaGFuZGxlUmVzaXplKQoKICAgIH0sCiAgICB3YXRjaDogewogICAgICAgIGZ1bGxXaWR0aCAodmFsKSB7CiAgICAgICAgICAgIC8vIOS4uuS6humBv+WFjemikee5geinpuWPkXJlc2l6ZeWHveaVsOWvvOiHtOmhtemdouWNoemhv++8jOS9v+eUqOWumuaXtuWZqAogICAgICAgICAgICBpZiAoIXRoaXMudGltZXIpIHsKICAgICAgICAgICAgICAgIC8vIOS4gOaXpuebkeWQrOWIsOeahHNjcmVlbldpZHRo5YC85pS55Y+Y77yM5bCx5bCG5YW26YeN5paw6LWL57uZZGF0YemHjOeahHNjcmVlbldpZHRoCiAgICAgICAgICAgICAgICB0aGlzLnNjcmVlbldpZHRoID0gdmFsCiAgICAgICAgICAgICAgICB0aGlzLnRpbWVyID0gdHJ1ZQogICAgICAgICAgICAgICAgbGV0IHRoYXQgPSB0aGlzCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAvLyDmiZPljbBzY3JlZW5XaWR0aOWPmOWMlueahOWAvAogICAgICAgICAgICAgICAgICAgIHRoYXQudGltZXIgPSBmYWxzZQogICAgICAgICAgICAgICAgfSwgNDAwKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAkcm91dGUgKG4pIHsKICAgICAgICAgICAgY29uc29sZS5sb2cobik7CiAgICAgICAgICAgIHRoaXMuY2FwdGNoYXMoKTsKICAgICAgICB9LAogICAgfSwKICAgIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgfSk7CgogICAgICAgIHRoaXMuY2FwdGNoYXMoKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLy8g5YiH5o2i5omr56CBCiAgICAgICAgYmluZFNjYW4oKXsKICAgICAgICAgICAgaWYoIXRoaXMuaXNTY2FuKXsKICAgICAgICAgICAgICAgIHRoaXMuaXNTY2FuID0gdHJ1ZQogICAgICAgICAgICAgICAgdGhpcy5nZXRTYW5Db2RlS2V5KCkKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmxvZ2luVHlwZSA9IDEKICAgICAgICB9LAogICAgICAgIC8vIOeUn+aIkOS6jOe7tOeggQogICAgICAgIGNyZWF0UXJDb2RlKCkgewogICAgICAgICAgICBsZXQgdXJsPSBgJHt3aW5kb3cubG9jYXRpb24ucHJvdG9jb2x9Ly8ke3dpbmRvdy5sb2NhdGlvbi5ob3N0fS9wYWdlcy91c2Vycy9zY2FuX2xvZ2luL2luZGV4P2tleT0ke3RoaXMuY29kZUtleX1gOwogICAgICAgICAgICB2YXIgcXJjb2RlID0gbmV3IFFSQ29kZSh0aGlzLiRyZWZzLnFyQ29kZVVybCwgewogICAgICAgICAgICAgICAgdGV4dDogdXJsLCAvLyDpnIDopoHovazmjaLkuLrkuoznu7TnoIHnmoTlhoXlrrkKICAgICAgICAgICAgICAgIHdpZHRoOiAxNjAsCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE2MCwKICAgICAgICAgICAgICAgIGNvbG9yRGFyazogJyMwMDAwMDAnLAogICAgICAgICAgICAgICAgY29sb3JMaWdodDogJyNmZmZmZmYnLAogICAgICAgICAgICAgICAgY29ycmVjdExldmVsOiBRUkNvZGUuQ29ycmVjdExldmVsLkgKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOWFs+mXreaooeaAgeahhgogICAgICAgIGNsb3NlTW9kZWwgKCkgewogICAgICAgICAgICBsZXQgbXNnID0gdGhpcy4kTWVzc2FnZS5sb2FkaW5nKHsKICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICfnmbvlvZXkuK0uLi4nLAogICAgICAgICAgICAgICAgZHVyYXRpb246IDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIEFjY291bnRMb2dpbih7CiAgICAgICAgICAgICAgICBhY2NvdW50OiB0aGlzLmZvcm1JbmxpbmUudXNlcm5hbWUsCiAgICAgICAgICAgICAgICBwYXNzd29yZDogdGhpcy5mb3JtSW5saW5lLnBhc3N3b3JkLAogICAgICAgICAgICAgICAgaW1nY29kZTogdGhpcy5mb3JtSW5saW5lLmNvZGUKICAgICAgICAgICAgfSkudGhlbihhc3luYyByZXMgPT4gewogICAgICAgICAgICAgICAgbXNnKCk7CiAgICAgICAgICAgICAgICBsZXQgZXhwaXJlcyA9IHRoaXMuZ2V0RXhwaXJlc1RpbWUocmVzLmRhdGEuZXhwX3RpbWUpOwogICAgICAgICAgICAgICAgLy8g6K6w5b2V55So5oi355m76ZmG5L+h5oGvCiAgICAgICAgICAgICAgICBzZXRDb29raWVzKCdrZWZ1X3V1aWQnLCByZXMuZGF0YS5rZWZ1SW5mby51aWQsIGV4cGlyZXMpOwogICAgICAgICAgICAgICAgc2V0Q29va2llcygna2VmdV90b2tlbicsIHJlcy5kYXRhLnRva2VuLCBleHBpcmVzKTsKICAgICAgICAgICAgICAgIHNldENvb2tpZXMoJ2tlZnVfZXhwaXJlc190aW1lJywgcmVzLmRhdGEuZXhwX3RpbWUsIGV4cGlyZXMpOwogICAgICAgICAgICAgICAgc2V0Q29va2llcygna2VmdUluZm8nLCByZXMuZGF0YS5rZWZ1SW5mbywgZXhwaXJlcyk7CgogICAgICAgICAgICAgICAgLy8g6K6w5b2V55So5oi35L+h5oGvCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2tlZnUvc2V0SW5mbycsIHJlcy5kYXRhLmtlZnVJbmZvKQoKCgoKICAgICAgICAgICAgICAgIGlmKHRoaXMuJHN0b3JlLnN0YXRlLm1lZGlhLmlzTW9iaWxlKXsKICAgICAgICAgICAgICAgICAgICAvL+aJi+acuumhtemdogogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHBhdGg6IHRoaXMuJHJvdXRlLnF1ZXJ5LnJlZGlyZWN0IHx8ICcva2VmdS9tb2JpbGVfbGlzdCcgfSk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAvLyBwY+mhtemdogogICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogdGhpcy4kcm91dGUucXVlcnkucmVkaXJlY3QgfHwgJy9rZWZ1L3BjX2xpc3QnIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaChyZXMgPT4gewoKICAgICAgICAgICAgICAgIG1zZygpOwogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSByZXMgPT09IHVuZGVmaW5lZCA/IHt9IDogcmVzOwogICAgICAgICAgICAgICAgdGhpcy5lcnJvck51bSsrOwogICAgICAgICAgICAgICAgdGhpcy5jYXB0Y2hhcygpOwogICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihkYXRhLm1zZyB8fCAn55m75b2V5aSx6LSlJyk7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5qaWdzYXcpIHRoaXMuamlnc2F3LnJlc2V0KCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgZ2V0RXhwaXJlc1RpbWUgKGV4cGlyZXNUaW1lKSB7CiAgICAgICAgICAgIGxldCBub3dUaW1lTnVtID0gTWF0aC5yb3VuZChuZXcgRGF0ZSgpIC8gMTAwMCk7CiAgICAgICAgICAgIGxldCBleHBpcmVzVGltZU51bSA9IGV4cGlyZXNUaW1lIC0gbm93VGltZU51bTsKICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQocGFyc2VGbG9hdChwYXJzZUZsb2F0KGV4cGlyZXNUaW1lTnVtIC8gNjApIC8gNjApIC8gMjQpOwogICAgICAgIH0sCiAgICAgICAgY2xvc2VmYWlsICgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuamlnc2F3KSB0aGlzLmppZ3Nhdy5yZXNldCgpOwogICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKCfmoKHpqozplJnor68nKTsKICAgICAgICB9LAogICAgICAgIGhhbmRsZVJlc2l6ZSAoZXZlbnQpIHsKICAgICAgICAgICAgdGhpcy5mdWxsV2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgKCiAgICAgICAgfSwKICAgICAgICBjYXB0Y2hhczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLmltZ2NvZGUgPSBTZXR0aW5nLmFwaUJhc2VVUkwgKyAnL2NhcHRjaGFfcHJvPycgKyBEYXRlLnBhcnNlKG5ldyBEYXRlKCkpOwogICAgICAgIH0sCiAgICAgICAgaGFuZGxlU3VibWl0IChuYW1lKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnNbbmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTW9kZWwoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOiOt+WPluWuouacjeaJq+eggWtleQogICAgICAgIGdldFNhbkNvZGVLZXkoKXsKICAgICAgICAgICAgZ2V0U2FuQ29kZUtleSgpLnRoZW4ocmVzPT57CiAgICAgICAgICAgICAgICB0aGlzLmNvZGVLZXkgPSByZXMuZGF0YS5rZXkKICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRRckNvZGUoKQogICAgICAgICAgICAgICAgdGhpcy5zY2FuVGltZSA9IHNldEludGVydmFsKCgpPT57CiAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lTnVtKysKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnRpbWVOdW0+PTYwKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lTnVtID0gMAogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnNjYW5UaW1lKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJ4cGlyZWQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2NhblN0YXR1cygpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0sMTAwMCkKICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3I9PnsKICAgICAgICAgICAgICAgIHRoaXMudGltZU51bSA9IDAKICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuc2NhblRpbWUpCiAgICAgICAgICAgICAgICB0aGlzLnJ4cGlyZWQgPSB0cnVlCiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKGVycm9yLm1zZykKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOaJq+eggeeZu+W9leaDheWGtQogICAgICAgIGdldFNjYW5TdGF0dXMoKXsKICAgICAgICAgICAgc2NhblN0YXR1cyh0aGlzLmNvZGVLZXkpLnRoZW4oYXN5bmMgcmVzPT57CiAgICAgICAgICAgICAgICAvLyAwID0g5LqM57u056CB6L+H5pyf6ZyA6KaB6YeN5paw6I635Y+W5o6I5p2D5Yet6K+BCiAgICAgICAgICAgICAgICBpZihyZXMuZGF0YS5zdGF0dXMgPT0gMCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lTnVtID0gMAogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuc2NhblRpbWUpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yeHBpcmVkID0gdHJ1ZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gMT3mraPlnKjmiavmj48KICAgICAgICAgICAgICAgIGlmKHJlcy5kYXRhLnN0YXR1cyA9PSAxKXsKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyAzIOaJq+aPj+aIkOWKn+ato+WcqOeZu+W9lQogICAgICAgICAgICAgICAgaWYocmVzLmRhdGEuc3RhdHVzID09IDMpewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuc2NhblRpbWUpCiAgICAgICAgICAgICAgICAgICAgbGV0IGV4cGlyZXMgPSB0aGlzLmdldEV4cGlyZXNUaW1lKHJlcy5kYXRhLmV4cF90aW1lKTsKICAgICAgICAgICAgICAgICAgICAvLyDorrDlvZXnlKjmiLfnmbvpmYbkv6Hmga8KICAgICAgICAgICAgICAgICAgICBzZXRDb29raWVzKCdrZWZ1X3V1aWQnLCByZXMuZGF0YS5rZWZ1SW5mby51aWQsIGV4cGlyZXMpOwogICAgICAgICAgICAgICAgICAgIHNldENvb2tpZXMoJ2tlZnVfdG9rZW4nLCByZXMuZGF0YS50b2tlbiwgZXhwaXJlcyk7CiAgICAgICAgICAgICAgICAgICAgc2V0Q29va2llcygna2VmdV9leHBpcmVzX3RpbWUnLCByZXMuZGF0YS5leHBfdGltZSwgZXhwaXJlcyk7CiAgICAgICAgICAgICAgICAgICAgc2V0Q29va2llcygna2VmdUluZm8nLCByZXMuZGF0YS5rZWZ1SW5mbywgZXhwaXJlcyk7CiAgICAgICAgICAgICAgICAgICAgLy8g6K6w5b2V55So5oi35L+h5oGvCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdrZWZ1L3NldEluZm8nLCByZXMuZGF0YS5rZWZ1SW5mbykKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLiRzdG9yZS5zdGF0ZS5tZWRpYS5pc01vYmlsZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIC8v5omL5py66aG16Z2iCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHBhdGg6IHRoaXMuJHJvdXRlLnF1ZXJ5LnJlZGlyZWN0IHx8ICcva2VmdS9tb2JpbGVfbGlzdCcgfSk7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBj6aG16Z2iCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHBhdGg6IHRoaXMuJHJvdXRlLnF1ZXJ5LnJlZGlyZWN0IHx8ICcva2VmdS9wY19saXN0JyB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yPT57CiAgICAgICAgICAgICAgICB0aGlzLiRNb2RhbC5lcnJvcih7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfmj5DnpLonLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGVycm9yLm1zZwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLnRpbWVOdW0gPSAwCiAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnNjYW5UaW1lKQogICAgICAgICAgICAgICAgdGhpcy5yeHBpcmVkID0gdHJ1ZQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgLy8g5Yi35paw5LqM57u056CBCiAgICAgICAgYmluZFJlZnJlc2goKXsKICAgICAgICAgICAgdGhpcy4kcmVmcy5xckNvZGVVcmwuaW5uZXJIVE1MID0gJycKICAgICAgICAgICAgdGhpcy5yeHBpcmVkID0gZmFsc2UKICAgICAgICAgICAgdGhpcy5nZXRTYW5Db2RlS2V5KCkKICAgICAgICB9CiAgICB9LAogICAgYmVmb3JlQ3JlYXRlICgpIHsKCiAgICB9LAogICAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMudGltZU51bSA9IDAKICAgICAgICB0aGlzLiRyZWZzLnFyQ29kZVVybC5pbm5lckhUTUwgPSAnJwogICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuc2NhblRpbWUpCiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuaGFuZGxlUmVzaXplKTsKICAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnY2FudmFzJylbMF0ucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycsICdpbmRleF9iZycpOwogICAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/kefu","sourcesContent":["<template>\n    <div class=\"wrapper-box\">\n        <div class=\"page-account kf\">\n            <div class=\"container\" :class=\"[ fullWidth > 768 ? 'containerSamll':'containerBig']\">\n                <div class=\"index_from page-account-container\">\n                    <div :style=\"{display:!loginType?'block':'none'}\">\n                        <div class=\"page-account-top\">\n                            <div class=\"page-account-top-logo\">客服登录</div>\n                        </div>\n                        <Form ref=\"formInline\" :model=\"formInline\" :rules=\"ruleInline\"\n                              @keyup.enter=\"handleSubmit('formInline')\">\n                            <FormItem prop=\"username\">\n                                <Input type=\"text\" v-model=\"formInline.username\"\n                                       placeholder=\"请输入用户名\" size=\"large\"/>\n                            </FormItem>\n                            <FormItem prop=\"password\">\n                                <Input type=\"password\" v-model=\"formInline.password\"\n                                       placeholder=\"请输入密码\" size=\"large\"/>\n                            </FormItem>\n                            <FormItem>\n                                <Button type=\"primary\" long size=\"large\" @click=\"handleSubmit('formInline')\" class=\"btn\">登录\n                                </Button>\n                            </FormItem>\n                        </Form>\n                        <div class=\"qh_box\" v-if=\"!isMobile\" @click=\"bindScan\"><span class=\"iconfont iconerweima2\"></span></div>\n                    </div>\n                    <div :style=\"{display:loginType?'block':'none'}\">\n                        <div class=\"page-account-top\">\n                            <div class=\"page-account-top-logo\">微信扫码登录</div>\n                        </div>\n                        <div class=\"code-box\">\n                            <div class=\"qrcode\" ref=\"qrCodeUrl\"></div>\n                            <div class=\"rxpired-box\" v-show=\"rxpired\">\n                                <p>已过期</p>\n                                <Button type=\"primary\" @click=\"bindRefresh\">点击刷新</Button>\n                            </div>\n                        </div>\n                        <div class=\"qh_box\" @click=\"loginType = 0\"><span class=\"iconfont iconzhanghaomima\"></span></div>\n                    </div>\n                </div>\n            </div>\n            <!--            <Modal v-model=\"modals\" scrollable footer-hide closable title=\"请完成安全校验\" :mask-closable=\"false\" :z-index=\"2\"-->\n            <!--                   width=\"342\">-->\n            <!--                <div class=\"captchaBox\">-->\n            <!--                    <div id=\"captcha\" style=\"position: relative\" ref=\"captcha\"></div>-->\n            <!--                    <div id=\"msg\"></div>-->\n            <!--                </div>-->\n            <!--            </Modal>-->\n        </div>\n        <div class=\"foot-box\">\n            Copyright © 2020 西安众邦网络科技有限公司 | {{version}} 客服系统\n        </div>\n    </div>\n</template>\n<script>\n    import { AccountLogin, loginInfoApi,getSanCodeKey,scanStatus,kefuConfig } from '@/api/kefu';\n    import mixins from '../account/mixins';\n    import Setting from '@/setting';\n    import util from '@/libs/util';\n    import QRCode from 'qrcodejs2'\n    import { getCookies, removeCookies,setCookies } from '@/libs/util'\n    export default {\n        mixins: [mixins],\n        data () {\n            return {\n                fullWidth: document.documentElement.clientWidth,\n                swiperOption: {\n                    pagination: '.swiper-pagination',\n                    autoplay: true\n                },\n                modals: false,\n                autoLogin: true,\n                imgcode: '',\n                formInline: {\n                    username: '',\n                    password: '',\n                    code: ''\n                },\n                ruleInline: {\n                    username: [\n                        { required: true, message: '请输入用户名', trigger: 'blur' }\n                    ],\n                    password: [\n                        { required: true, message: '请输入密码', trigger: 'blur' }\n                    ],\n                    code: [\n                        { required: true, message: '请输入验证码', trigger: 'blur' }\n                    ]\n                },\n                errorNum: 0,\n                jigsaw: null,\n                login_logo: '',\n                swiperList: [],\n                defaultSwiperList: require('@/assets/images/sw.jpg'),\n                loginType:0, // 0 账号 1 扫码\n                codeKey:'',\n                scanTime:'',\n                rxpired:false, // 扫码是否过期\n                isMobile:false,\n                version:'', //版本号\n                isScan:false,\n                timeNum:0\n            }\n        },\n        created () {\n            kefuConfig().then(res=>{\n                this.version = res.data.version\n                if(res.data.site_name){\n                  document.title = res.data.site_name;\n                }\n            })\n            this.isMobile = this.$store.state.media.isMobile\n            var _this = this;\n            top != window && (top.location.href = location.href);\n            document.onkeydown = function (e) {\n                if (_this.$route.name === 'login') {\n                    let key = window.event.keyCode;\n                    if (key === 13) {\n                        _this.handleSubmit('formInline');\n                    }\n                }\n            };\n            window.addEventListener('resize', this.handleResize)\n\n        },\n        watch: {\n            fullWidth (val) {\n                // 为了避免频繁触发resize函数导致页面卡顿，使用定时器\n                if (!this.timer) {\n                    // 一旦监听到的screenWidth值改变，就将其重新赋给data里的screenWidth\n                    this.screenWidth = val\n                    this.timer = true\n                    let that = this\n                    setTimeout(function () {\n                        // 打印screenWidth变化的值\n                        that.timer = false\n                    }, 400)\n                }\n            },\n            $route (n) {\n                console.log(n);\n                this.captchas();\n            },\n        },\n        mounted: function () {\n            this.$nextTick(() => {\n            });\n\n            this.captchas();\n        },\n        methods: {\n            // 切换扫码\n            bindScan(){\n                if(!this.isScan){\n                    this.isScan = true\n                    this.getSanCodeKey()\n                }\n                this.loginType = 1\n            },\n            // 生成二维码\n            creatQrCode() {\n                let url= `${window.location.protocol}//${window.location.host}/pages/users/scan_login/index?key=${this.codeKey}`;\n                var qrcode = new QRCode(this.$refs.qrCodeUrl, {\n                    text: url, // 需要转换为二维码的内容\n                    width: 160,\n                    height: 160,\n                    colorDark: '#000000',\n                    colorLight: '#ffffff',\n                    correctLevel: QRCode.CorrectLevel.H\n                })\n            },\n            // 关闭模态框\n            closeModel () {\n                let msg = this.$Message.loading({\n                    content: '登录中...',\n                    duration: 0\n                });\n                AccountLogin({\n                    account: this.formInline.username,\n                    password: this.formInline.password,\n                    imgcode: this.formInline.code\n                }).then(async res => {\n                    msg();\n                    let expires = this.getExpiresTime(res.data.exp_time);\n                    // 记录用户登陆信息\n                    setCookies('kefu_uuid', res.data.kefuInfo.uid, expires);\n                    setCookies('kefu_token', res.data.token, expires);\n                    setCookies('kefu_expires_time', res.data.exp_time, expires);\n                    setCookies('kefuInfo', res.data.kefuInfo, expires);\n\n                    // 记录用户信息\n                    this.$store.commit('kefu/setInfo', res.data.kefuInfo)\n\n\n\n\n                    if(this.$store.state.media.isMobile){\n                        //手机页面\n                        return this.$router.replace({ path: this.$route.query.redirect || '/kefu/mobile_list' });\n                    }else{\n                        // pc页面\n                       return this.$router.replace({ path: this.$route.query.redirect || '/kefu/pc_list' });\n                    }\n                }).catch(res => {\n\n                    msg();\n                    let data = res === undefined ? {} : res;\n                    this.errorNum++;\n                    this.captchas();\n                    this.$Message.error(data.msg || '登录失败');\n                    if (this.jigsaw) this.jigsaw.reset();\n                });\n            },\n            getExpiresTime (expiresTime) {\n                let nowTimeNum = Math.round(new Date() / 1000);\n                let expiresTimeNum = expiresTime - nowTimeNum;\n                return parseFloat(parseFloat(parseFloat(expiresTimeNum / 60) / 60) / 24);\n            },\n            closefail () {\n                if (this.jigsaw) this.jigsaw.reset();\n                this.$Message.error('校验错误');\n            },\n            handleResize (event) {\n                this.fullWidth = document.documentElement.clientWidth\n\n            },\n            captchas: function () {\n                this.imgcode = Setting.apiBaseURL + '/captcha_pro?' + Date.parse(new Date());\n            },\n            handleSubmit (name) {\n                this.$refs[name].validate((valid) => {\n                    if (valid) {\n                        this.closeModel();\n                    }\n                })\n            },\n            // 获取客服扫码key\n            getSanCodeKey(){\n                getSanCodeKey().then(res=>{\n                    this.codeKey = res.data.key\n                    this.creatQrCode()\n                    this.scanTime = setInterval(()=>{\n                        this.timeNum++\n                        if(this.timeNum>=60){\n                            this.timeNum = 0\n                            window.clearInterval(this.scanTime)\n                            this.rxpired = true\n                        }else{\n                            this.getScanStatus()\n                        }\n\n                    },1000)\n                }).catch(error=>{\n                    this.timeNum = 0\n                    window.clearInterval(this.scanTime)\n                    this.rxpired = true\n                    this.$Message.error(error.msg)\n                })\n            },\n            // 扫码登录情况\n            getScanStatus(){\n                scanStatus(this.codeKey).then(async res=>{\n                    // 0 = 二维码过期需要重新获取授权凭证\n                    if(res.data.status == 0){\n                        this.timeNum = 0\n                        window.clearInterval(this.scanTime)\n                        this.rxpired = true\n                    }\n                    // 1=正在扫描\n                    if(res.data.status == 1){\n\n                    }\n                    // 3 扫描成功正在登录\n                    if(res.data.status == 3){\n                        window.clearInterval(this.scanTime)\n                        let expires = this.getExpiresTime(res.data.exp_time);\n                        // 记录用户登陆信息\n                        setCookies('kefu_uuid', res.data.kefuInfo.uid, expires);\n                        setCookies('kefu_token', res.data.token, expires);\n                        setCookies('kefu_expires_time', res.data.exp_time, expires);\n                        setCookies('kefuInfo', res.data.kefuInfo, expires);\n                        // 记录用户信息\n                        this.$store.commit('kefu/setInfo', res.data.kefuInfo)\n                        if(this.$store.state.media.isMobile){\n                            //手机页面\n                            return this.$router.replace({ path: this.$route.query.redirect || '/kefu/mobile_list' });\n                        }else{\n                            // pc页面\n                            return this.$router.replace({ path: this.$route.query.redirect || '/kefu/pc_list' });\n                        }\n                    }\n                }).catch(error=>{\n                    this.$Modal.error({\n                        title: '提示',\n                        content: error.msg\n                    });\n                    this.timeNum = 0\n                    window.clearInterval(this.scanTime)\n                    this.rxpired = true\n                })\n            },\n            // 刷新二维码\n            bindRefresh(){\n                this.$refs.qrCodeUrl.innerHTML = ''\n                this.rxpired = false\n                this.getSanCodeKey()\n            }\n        },\n        beforeCreate () {\n\n        },\n        beforeDestroy: function () {\n            this.timeNum = 0\n            this.$refs.qrCodeUrl.innerHTML = ''\n            window.clearInterval(this.scanTime)\n            window.removeEventListener('resize', this.handleResize);\n            // document.getElementsByTagName('canvas')[0].removeAttribute('class', 'index_bg');\n        }\n    };\n</script>\n<style scoped lang=\"stylus\">\n    .page-account {\n        display: flex;\n        width: 100%;\n        background-image: url('~@/assets/images/kfbg.jpg');\n        background-size: cover;\n        background-position: center;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        height: 100vh;\n        overflow: auto;\n    }\n    .code-box\n        position relative\n        display flex\n        align-items center\n        justify-content center\n        .qrcode\n            display flex\n            align-items center\n            justify-content center\n            width 180px\n            height 180px\n            border 1px solid #E5E5E6\n        .rxpired-box\n            display flex\n            flex-direction column\n            align-items center\n            justify-content center\n            position absolute\n            left 50%\n            top 50%\n            transform translate(-50%,-50%)\n            width 160px\n            height 160px\n            background rgba(0,0,0,0.6)\n            p\n                margin-bottom 10px\n                font-size 15px\n                color #fff\n    .page-account-top-logo\n        color #000000\n        font-size 21px\n    .wrapper-box\n        display flex\n        flex-direction column\n        height: 100vh\n        .foot-box\n            padding 20px 0\n            font-size 14px\n            color #666666\n            text-align center\n            box-sizing border-box\n    .page-account {\n        display: flex;\n        flex 1\n    }\n\n    .page-account .code {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n\n    .page-account .code .pictrue {\n        height: 40px;\n    }\n\n    .swiperPross {\n        border-radius: 6px 0px 0px 6px;\n    }\n\n    .swiperPross, .swiperPic, .swiperPic img {\n        width: 510px;\n        height: 100%;\n    }\n\n    .swiperPic img {\n        width: 100%;\n        height: 100%;\n    }\n\n    .container {\n        height: 400px !important;\n        padding: 0 !important;\n        /*overflow: hidden;*/\n        border-radius: 6px;\n        z-index: 1;\n        display: flex;\n    }\n\n    .containerSamll {\n        width: 384px !important;\n        margin-left 30%\n        background: #fff !important;\n    }\n\n    .containerBig {\n        width: 90%;\n        padding-bottom 20px\n        margin-top: 84px;\n        background: #f7f7f7 !important;\n        height auto!important\n        box-shadow: 0px 3px 20px rgba(0, 20, 41, 0.06);\n    }\n\n    .index_from {\n        position: relative;\n        padding: 40px 40px 32px 40px;\n        height: 400px;\n        width 100%\n        box-sizing: border-box;\n    }\n    .containerBig .index_from{\n        padding 20px\n        height auto!important\n    }\n    .index_from .qh_box\n        position:absolute;\n        right 12px\n        top 0\n        cursor pointer\n        .iconfont\n            color #265BED\n            font-size 36px\n\n\n    .page-account-top {\n        padding: 20px 0 50px !important;\n        box-sizing: border-box !important;\n        display: flex;\n        justify-content: center;\n    }\n\n    .page-account-container {\n        border-radius: 0px 6px 6px 0px;\n    }\n\n    .btn {\n        background: #265BED;\n    }\n\n    .captchaBox {\n        width: 310px;\n    }\n\n    input {\n        display: block;\n        width: 290px;\n        line-height: 40px;\n        margin: 10px 0;\n        padding: 0 10px;\n        outline: none;\n        border: 1px solid #c8cccf;\n        border-radius: 4px;\n        color: #6a6f77;\n    }\n\n    #msg {\n        width: 100%;\n        line-height: 40px;\n        font-size: 14px;\n        text-align: center;\n    }\n\n    a:link, a:visited, a:hover, a:active {\n        margin-left: 100px;\n        color: #0366D6;\n    }\n\n    .index_from >>> .ivu-input-large\n        font-size:14px!important\n\n</style>\n<style>\n    @media screen and (min-width:320px) and (max-width:960px){\n        .page-account {\n            background-image: url(\"~@/assets/images/m_bg.png\") !important;\n            background-size: 100% auto !important;\n            background-repeat: no-repeat;\n            background-position: left top !important;\n\n        }\n        .index_from{\n            box-shadow: 0px 3px 20px rgba(0, 20, 41, 0.06);\n            background: #fff;\n        }\n        .wrapper-box .foot-box{\n            padding: 20px 66px !important;\n            color: #ADADAD !important;\n            font-size: .22rem !important;\n        }\n        .containerBig{\n            width: 86% !important;\n            border-radius: .2rem !important;\n            overflow: hidden;\n        }\n        .btn{\n            background: linear-gradient(90deg, #3875EA 0%, #1890FC 100%) !important;\n\n            border-radius: .41rem;\n        }\n        .ivu-input{\n            border: 1px solid #dcdee2;\n            -webkit-appearance:none;/*去除阴影边框*/\n            outline: none;\n            -webkit-tap-highlight-color:rgba(0,0,0,0);/*点击高亮的颜色*/\n        }\n    }\n</style>\n"]}]}