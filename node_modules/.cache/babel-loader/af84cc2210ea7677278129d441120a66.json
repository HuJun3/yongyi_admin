{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js!/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/components/uploadVideo/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/components/uploadVideo/index.vue","mtime":1610681472000},{"path":"/Users/hujun/Downloads/永益科技后端/.babelrc","mtime":1610587842000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmZ1bmN0aW9uLm5hbWUiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBwcm9kdWN0R2V0VGVtcEtleXNBcGkgfSBmcm9tICdAL2FwaS9wcm9kdWN0JzsKaW1wb3J0ICIuLi8uLi8uLi9wdWJsaWMvVUVkaXRvci9kaWFsb2dzL2ludGVybmFsIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICd2aWRlMTFvJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXBsb2FkOiB7CiAgICAgICAgdmlkZW9Jbmc6IGZhbHNlIC8vIOaYr+WQpuaYvuekuui/m+W6puadoe+8mwoKICAgICAgfSwKICAgICAgcHJvZ3Jlc3M6IDAsCiAgICAgIC8vIOi/m+W6puadoem7mOiupDAKICAgICAgdmlkZW9MaW5rOiAnJywKICAgICAgZm9ybVZhbGlkYXRlOiB7CiAgICAgICAgdmlkZW9fbGluazogJycKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWIoOmZpOinhumike+8mwogICAgZGVsVmlkZW86IGZ1bmN0aW9uIGRlbFZpZGVvKCkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuJHNldCh0aGF0LmZvcm1WYWxpZGF0ZSwgJ3ZpZGVvX2xpbmsnLCAnJyk7CiAgICB9LAogICAgemhfdXBsb2FkRmlsZTogZnVuY3Rpb24gemhfdXBsb2FkRmlsZSgpIHsKICAgICAgaWYgKHRoaXMudmlkZW9MaW5rKSB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUudmlkZW9fbGluayA9IHRoaXMudmlkZW9MaW5rOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJlZnMucmVmaWQuY2xpY2soKTsKICAgICAgfQogICAgfSwKICAgIHpoX3VwbG9hZEZpbGVfY2hhbmdlOiBmdW5jdGlvbiB6aF91cGxvYWRGaWxlX2NoYW5nZShldmZpbGUpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB2YXIgc3VmZml4ID0gZXZmaWxlLnRhcmdldC5maWxlc1swXS5uYW1lLnN1YnN0cihldmZpbGUudGFyZ2V0LmZpbGVzWzBdLm5hbWUuaW5kZXhPZignLicpKTsKCiAgICAgIGlmIChzdWZmaXggIT09ICcubXA0JykgewogICAgICAgIHJldHVybiB0aGF0LiRNZXNzYWdlLmVycm9yKCflj6rog73kuIrkvKBNUDTmlofku7YnKTsKICAgICAgfQoKICAgICAgcHJvZHVjdEdldFRlbXBLZXlzQXBpKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdGhhdC4kdmlkZW9DbG91ZC52aWRlb1VwbG9hZCh7CiAgICAgICAgICB0eXBlOiByZXMuZGF0YS50eXBlLAogICAgICAgICAgZXZmaWxlOiBldmZpbGUsCiAgICAgICAgICByZXM6IHJlcywKICAgICAgICAgIHVwbG9hZGluZzogZnVuY3Rpb24gdXBsb2FkaW5nKHN0YXR1cywgcHJvZ3Jlc3MpIHsKICAgICAgICAgICAgdGhhdC51cGxvYWQudmlkZW9JbmcgPSBzdGF0dXM7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0YXR1cywgcHJvZ3Jlc3MpOwogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdGhhdC5mb3JtVmFsaWRhdGUudmlkZW9fbGluayA9IHJlcy51cmw7CiAgICAgICAgICB0aGF0LiRNZXNzYWdlLnN1Y2Nlc3MoJ+inhumikeS4iuS8oOaIkOWKnycpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHRoYXQuJE1lc3NhZ2UuZXJyb3IocmVzKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgdXBsb2FkczogZnVuY3Rpb24gdXBsb2FkcygpIHsKICAgICAgbm93RWRpdG9yLmRpYWxvZy5jbG9zZSh0cnVlKTsKICAgICAgbm93RWRpdG9yLmVkaXRvci5leGVjQ29tbWFuZCgnaW5zZXJ0aHRtbCcsICc8cD48dmlkZW8gc3JjPVwnIiArIHRoaXMuZm9ybVZhbGlkYXRlLnZpZGVvX2xpbmsgKyAiXCcgY29udHJvbHM9XCdjb250cm9sc1wnPjwvdmlkZW8+PGJyLz48L3A+Jyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA,SAAA,qBAAA,QAAA,eAAA;AACA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,MAAA,EAAA;AACA,QAAA,QAAA,EAAA,KADA,CACA;;AADA,OADA;AAIA,MAAA,QAAA,EAAA,CAJA;AAIA;AACA,MAAA,SAAA,EAAA,EALA;AAMA,MAAA,YAAA,EAAA;AACA,QAAA,UAAA,EAAA;AADA;AANA,KAAA;AAUA,GAbA;AAcA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,QAFA,sBAEA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,MAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA,YAAA,EAAA,YAAA,EAAA,EAAA;AACA,KALA;AAMA,IAAA,aANA,2BAMA;AACA,UAAA,KAAA,SAAA,EAAA;AACA,aAAA,YAAA,CAAA,UAAA,GAAA,KAAA,SAAA;AACA,OAFA,MAEA;AACA,aAAA,KAAA,CAAA,KAAA,CAAA,KAAA;AACA;AACA,KAZA;AAaA,IAAA,oBAbA,gCAaA,MAbA,EAaA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,UAAA,MAAA,GAAA,MAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,EAAA,IAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,EAAA,IAAA,CAAA,OAAA,CAAA,GAAA,CAAA,CAAA;;AACA,UAAA,MAAA,KAAA,MAAA,EAAA;AACA,eAAA,IAAA,CAAA,QAAA,CAAA,KAAA,CAAA,WAAA,CAAA;AACA;;AACA,MAAA,qBAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,IAAA,CAAA,WAAA,CAAA,WAAA,CAAA;AACA,UAAA,IAAA,EAAA,GAAA,CAAA,IAAA,CAAA,IADA;AAEA,UAAA,MAAA,EAAA,MAFA;AAGA,UAAA,GAAA,EAAA,GAHA;AAIA,UAAA,SAJA,qBAIA,MAJA,EAIA,QAJA,EAIA;AACA,YAAA,IAAA,CAAA,MAAA,CAAA,QAAA,GAAA,MAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,MAAA,EAAA,QAAA;AACA;AAPA,SAAA,EAQA,IARA,CAQA,UAAA,GAAA,EAAA;AACA,UAAA,IAAA,CAAA,YAAA,CAAA,UAAA,GAAA,GAAA,CAAA,GAAA;AACA,UAAA,IAAA,CAAA,QAAA,CAAA,OAAA,CAAA,QAAA;AACA,SAXA,EAWA,KAXA,CAWA,UAAA,GAAA,EAAA;AACA,UAAA,IAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA;AACA,SAbA;AAcA,OAfA;AAgBA,KAnCA;AAoCA,IAAA,OApCA,qBAoCA;AACA,MAAA,SAAA,CAAA,MAAA,CAAA,KAAA,CAAA,IAAA;AACA,MAAA,SAAA,CAAA,MAAA,CAAA,WAAA,CAAA,YAAA,EAAA,gGAAA;AACA;AAvCA;AAdA,CAAA","sourcesContent":["<template>\n    <div>\n        <div class=\"mt20 ml20\">\n            <Input class=\"perW35\"  v-model=\"videoLink\" placeholder=\"请输入视频链接\"/>\n            <input type=\"file\" ref='refid' style=\"display:none\" @change=\"zh_uploadFile_change\">\n            <Button type=\"primary\" icon=\"ios-cloud-upload-outline\" class=\"ml10\" @click=\"zh_uploadFile\">{{videoLink ? '确认添加' : '上传视频'}}</Button>\n            <Progress :percent = progress :stroke-width=\"5\" v-if=\"upload.videoIng\" />\n            <div class=\"iview-video-style\" v-if=\"formValidate.video_link\">\n                <video style=\"width:100%;height: 100%!important;border-radius: 10px;\" :src=\"formValidate.video_link\" controls=\"controls\">\n                    您的浏览器不支持 video 标签。\n                </video>\n                <div class=\"mark\">\n                </div>\n                <Icon type=\"ios-trash-outline\" class=\"iconv\" @click=\"delVideo\"/>\n            </div>\n        </div>\n        <div class=\"mt50 ml20\">\n            <Button type=\"primary\" @click=\"uploads\">确认</Button>\n        </div>\n    </div>\n</template>\n\n<script>\n    import { productGetTempKeysApi } from '@/api/product'\n    import '../../../public/UEditor/dialogs/internal'\n    export default {\n        name: 'vide11o',\n        data () {\n            return {\n                upload: {\n                    videoIng: false // 是否显示进度条；\n                },\n                progress: 0, // 进度条默认0\n                videoLink: '',\n                formValidate: {\n                    video_link: ''\n                }\n            }\n        },\n        methods: {\n            // 删除视频；\n            delVideo () {\n                let that = this\n                that.$set(that.formValidate, 'video_link', '')\n            },\n            zh_uploadFile () {\n                if (this.videoLink) {\n                    this.formValidate.video_link = this.videoLink\n                } else {\n                    this.$refs.refid.click()\n                }\n            },\n            zh_uploadFile_change (evfile) {\n                let that = this\n                let suffix = evfile.target.files[0].name.substr(evfile.target.files[0].name.indexOf('.'))\n                if (suffix !== '.mp4') {\n                    return that.$Message.error('只能上传MP4文件')\n                }\n                productGetTempKeysApi().then(res => {\n                    that.$videoCloud.videoUpload({\n                        type: res.data.type,\n                        evfile: evfile,\n                        res: res,\n                        uploading (status, progress) {\n                            that.upload.videoIng = status\n                            console.log(status, progress)\n                        }\n                    }).then(res => {\n                        that.formValidate.video_link = res.url\n                        that.$Message.success('视频上传成功')\n                    }).catch(res => {\n                        that.$Message.error(res)\n                    })\n                })\n            },\n            uploads () {\n                nowEditor.dialog.close(true)\n                nowEditor.editor.execCommand('inserthtml', '<p><video src=\\'\" + this.formValidate.video_link + \"\\' controls=\\'controls\\'></video><br/></p>')\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .iview-video-style{\n        width: 40%;\n        height: 180px;\n        border-radius: 10px;\n        background-color: #707070;\n        margin-top: 10px;\n        position: relative;\n        overflow: hidden;\n    }\n    .iview-video-style .iconv{\n        color: #fff;\n        line-height: 180px;\n        width: 50px;\n        height: 50px;\n        display: inherit;\n        font-size: 26px;\n        position: absolute;\n        top: -74px;\n        left: 50%;\n        margin-left: -25px;\n    }\n    .iview-video-style .mark{\n        position: absolute;\n        width: 100%;\n        height: 30px;\n        top: 0;\n        background-color: rgba(0,0,0,.5);\n        text-align: center;\n    }\n</style>\n"],"sourceRoot":"src/components/uploadVideo"}]}