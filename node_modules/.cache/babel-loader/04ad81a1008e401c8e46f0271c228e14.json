{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js!/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/components/userLabel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/components/userLabel.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/.babelrc","mtime":1610587842000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm51bWJlci5jb25zdHJ1Y3RvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGdldFVzZXJMYWJlbCwgcHV0VXNlckxhYmVsIH0gZnJvbSAnQC9hcGkvdXNlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAidXNlckxhYmVsIiwKICBwcm9wczogewogICAgdWlkOiB7CiAgICAgIHR5cGU6IFN0cmluZyB8IE51bWJlciwKICAgICAgZGVmYXVsdDogJycKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsYWJlbExpc3Q6IFtdLAogICAgICBhY3RpdmVJZHM6IFtdCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHVpZDogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5WYWwsIG9WYWwpIHsKICAgICAgICBpZiAoblZhbCAhPSBvVmFsKSB7CiAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBnZXRVc2VyTGFiZWwodGhpcy51aWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHJlcy5kYXRhLm1hcChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIGVsLmxhYmVsLm1hcChmdW5jdGlvbiAobGFiZWwpIHsKICAgICAgICAgICAgaWYgKGxhYmVsLmRpc2FibGVkKSB7CiAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlSWRzLnB1c2gobGFiZWwuaWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBfdGhpcy5sYWJlbExpc3QgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgc2VsZWN0TGFiZWw6IGZ1bmN0aW9uIHNlbGVjdExhYmVsKGxhYmVsKSB7CiAgICAgIGlmIChsYWJlbC5kaXNhYmxlZCkgewogICAgICAgIHZhciBpbmRleCA9IHRoaXMuYWN0aXZlSWRzLmluZGV4T2YobGFiZWwuaWQpOwogICAgICAgIHRoaXMuYWN0aXZlSWRzLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgbGFiZWwuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFjdGl2ZUlkcy5wdXNoKGxhYmVsLmlkKTsKICAgICAgICBsYWJlbC5kaXNhYmxlZCA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICAvLyDnoa7lrpoKICAgIHN1YkJ0bjogZnVuY3Rpb24gc3ViQnRuKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciB1bkxhYmVyaWRzID0gW107CiAgICAgIHRoaXMubGFiZWxMaXN0Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGl0ZW0ubGFiZWwubWFwKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICBpZiAoaS5kaXNhYmxlZCA9PSBmYWxzZSkgewogICAgICAgICAgICB1bkxhYmVyaWRzLnB1c2goaS5pZCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBwdXRVc2VyTGFiZWwodGhpcy51aWQsIHsKICAgICAgICBsYWJlbF9pZHM6IHRoaXMuYWN0aXZlSWRzLAogICAgICAgIHVuX2xhYmVsX2lkczogdW5MYWJlcmlkcwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIuYWN0aXZlSWRzID0gW107CiAgICAgICAgX3RoaXMyLmxhYmVsTGlzdCA9IFtdOwoKICAgICAgICBfdGhpczIuJE1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKCiAgICAgICAgX3RoaXMyLiRlbWl0KCdjbG9zZScpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBfdGhpczIuJE1lc3NhZ2UuZXJyb3IoZXJyb3IubXNnKTsKICAgICAgfSk7CiAgICB9LAogICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIHRoaXMuYWN0aXZlSWRzID0gW107CiAgICAgIHRoaXMubGFiZWxMaXN0ID0gW107CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["userLabel.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"label-wrapper\">\n        <div class=\"label-box\" v-for=\"(item,index) in labelList\" :key=\"index\">\n            <div class=\"title\">{{item.name}}</div>\n            <div class=\"list\">\n                <div class=\"label-item\" :class=\"{on:label.disabled}\" v-for=\"(label,j) in item.label\" :key=\"j\" @click=\"selectLabel(label)\">{{label.label_name}}</div>\n            </div>\n        </div>\n        <div class=\"footer\">\n            <Button type=\"primary\" class=\"btns\" @click=\"subBtn\">确定</Button>\n            <Button type=\"primary\" class=\"btns\" ghost @click=\"cancel\">取消</Button>\n        </div>\n    </div>\n</template>\n\n<script>\n    import { getUserLabel,putUserLabel } from '@/api/user'\n    export default {\n        name: \"userLabel\",\n        props:{\n            uid:{\n                type:String | Number,\n                default:''\n            }\n        },\n        data(){\n            return {\n                labelList:[],\n                activeIds:[]\n            }\n        },\n        watch:{\n            uid:{\n                handler(nVal,oVal){\n                    if(nVal!=oVal){\n                        this.getList()\n                    }\n                },\n                deep:true\n            }\n        },\n        mounted() {\n            this.getList()\n        },\n        methods:{\n            getList(){\n                getUserLabel(this.uid).then(res=>{\n                    res.data.map(el=>{\n                        el.label.map(label=>{\n                            if(label.disabled){\n                                this.activeIds.push(label.id)\n                            }\n                        })\n                    })\n                    this.labelList =res.data\n                })\n            },\n            selectLabel(label){\n                if(label.disabled){\n                    let index = this.activeIds.indexOf(label.id)\n                    this.activeIds.splice(index,1)\n                    label.disabled = false\n                }else{\n                    this.activeIds.push(label.id)\n                    label.disabled = true\n                }\n            },\n            // 确定\n            subBtn(){\n                let unLaberids = [];\n                this.labelList.map(item=>{\n                    item.label.map( i => {\n                        if(i.disabled == false){\n                            unLaberids.push(i.id);\n                        }\n                    });\n                });\n                putUserLabel(this.uid,{\n                    label_ids: this.activeIds,\n                    un_label_ids: unLaberids\n                }).then(res=>{\n                    this.activeIds = []\n                    this.labelList = []\n                    this.$Message.success(res.msg)\n                    this.$emit('close')\n                }).catch(error=>{\n                    this.$Message.error(error.msg)\n                })\n            },\n            cancel(){\n                this.activeIds = []\n                this.labelList = []\n                this.$emit('close')\n            }\n        }\n    }\n</script>\n\n<style lang=\"stylus\" scoped>\n.label-wrapper\n    .list\n        display flex\n        flex-wrap wrap\n        .label-item\n            margin 10px 8px 10px 0\n            padding: 3px 8px;\n            background #EEEEEE\n            color #333333\n            border-radius 2px\n            cursor pointer\n            font-size 12px\n            &.on\n                color #fff\n                background #1890FF\n    .footer\n        display flex\n        justify-content flex-end\n        margin-top 40px\n        button\n            margin-left 10px\n.btn\n    width 60px\n    height 24px\n.title\n    font-size 13px\n\n</style>\n"],"sourceRoot":"src/components"}]}