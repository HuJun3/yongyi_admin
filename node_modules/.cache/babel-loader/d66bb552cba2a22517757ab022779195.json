{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js!/Users/hujun/Downloads/永益科技后端/src/libs/request.js","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/libs/request.js","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/.babelrc","mtime":1610587842000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC5yZXBsYWNlIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJ2l2aWV3JzsKaW1wb3J0IHsgZ2V0Q29va2llcywgcmVtb3ZlQ29va2llcyB9IGZyb20gJ0AvbGlicy91dGlsJzsKaW1wb3J0IFNldHRpbmcgZnJvbSAnQC9zZXR0aW5nJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBTZXR0aW5nLmFwaUJhc2VVUkwsCiAgdGltZW91dDogMTAwMDAgLy8g6K+35rGC6LaF5pe25pe26Ze0Cgp9KTsKYXhpb3MuZGVmYXVsdHMud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTsgLy8g5pC65bimY29va2llCi8vIOivt+axguaLpuaIquWZqAoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGlmIChjb25maWcua2VmdSkgewogICAgdmFyIGJhc2VVcmwgPSBTZXR0aW5nLmFwaUJhc2VVUkwucmVwbGFjZSgvYWRtaW5hcGkvLCAia2VmdWFwaSIpOwogICAgY29uZmlnLmJhc2VVUkwgPSBiYXNlVXJsOwogIH0gZWxzZSB7CiAgICBjb25maWcuYmFzZVVSTCA9IFNldHRpbmcuYXBpQmFzZVVSTDsKICB9CgogIHZhciB0b2tlbiA9IGdldENvb2tpZXMoJ3Rva2VuJyk7CiAgdmFyIGtlZnVUb2tlbiA9IGdldENvb2tpZXMoJ2tlZnVfdG9rZW4nKTsKCiAgaWYgKHRva2VuIHx8IGtlZnVUb2tlbikgewogICAgY29uZmlnLmhlYWRlcnNbJ0F1dGhvcmktemF0aW9uJ10gPSBjb25maWcua2VmdSA/ICdCZWFyZXIgJyArIGtlZnVUb2tlbiA6ICdCZWFyZXIgJyArIHRva2VuOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgLy8gZG8gc29tZXRoaW5nIHdpdGggcmVxdWVzdCBlcnJvcgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOyAvLyByZXNwb25zZSBpbnRlcmNlcHRvcgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIHZhciBzdGF0dXMgPSByZXNwb25zZS5kYXRhID8gcmVzcG9uc2UuZGF0YS5zdGF0dXMgOiAwOwogIHZhciBjb2RlID0gc3RhdHVzOwoKICBzd2l0Y2ggKGNvZGUpIHsKICAgIGNhc2UgMjAwOgogICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKCiAgICBjYXNlIDQwMDoKICAgIGNhc2UgNDAwMDExOgogICAgY2FzZSA0MDAwMTI6CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZS5kYXRhIHx8IHsKICAgICAgICBtc2c6ICfmnKrnn6XplJnor68nCiAgICAgIH0pOwoKICAgIGNhc2UgNDEwMDAwOgogICAgY2FzZSA0MTAwMDE6CiAgICBjYXNlIDQxMDAwMjoKICAgICAgY29uc29sZS5sb2coY29kZSk7CiAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpOwogICAgICByZW1vdmVDb29raWVzKCd0b2tlbicpOwogICAgICByZW1vdmVDb29raWVzKCdleHBpcmVzX3RpbWUnKTsKICAgICAgcmVtb3ZlQ29va2llcygndXVpZCcpOwogICAgICByb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgcGF0aDogJy9hZG1pbi9sb2dpbicKICAgICAgfSk7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgNDEwMDAzOgogICAgICByZW1vdmVDb29raWVzKCdrZWZ1SW5mbycpOwogICAgICByZW1vdmVDb29raWVzKCdrZWZ1X3Rva2VuJyk7CiAgICAgIHJlbW92ZUNvb2tpZXMoJ2tlZnVfZXhwaXJlc190aW1lJyk7CiAgICAgIHJlbW92ZUNvb2tpZXMoJ2tlZnVfdXVpZCcpOwogICAgICByb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgcGF0aDogJy9rZWZ1JwogICAgICB9KTsKCiAgICBkZWZhdWx0OgogICAgICBicmVhazsKICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIE1lc3NhZ2UuZXJyb3IoZXJyb3IubXNnKTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["/Users/hujun/Downloads/永益科技后端/src/libs/request.js"],"names":["axios","Message","getCookies","removeCookies","Setting","router","service","create","baseURL","apiBaseURL","timeout","defaults","withCredentials","interceptors","request","use","config","kefu","baseUrl","replace","token","kefuToken","headers","error","Promise","reject","response","status","data","code","msg","console","log","localStorage","clear","path"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport { Message } from 'iview'\nimport { getCookies, removeCookies } from '@/libs/util'\nimport Setting from '@/setting'\nimport router from '@/router'\nconst service = axios.create({\n    baseURL: Setting.apiBaseURL,\n    timeout: 10000 // 请求超时时间\n})\n\naxios.defaults.withCredentials = true// 携带cookie\n\n// 请求拦截器\nservice.interceptors.request.use(\n    config => {\n        if(config.kefu){\n            let baseUrl =   Setting.apiBaseURL.replace(/adminapi/, \"kefuapi\")\n            config.baseURL = baseUrl\n        }else{\n            config.baseURL = Setting.apiBaseURL\n        }\n        const token = getCookies('token')\n        const kefuToken = getCookies('kefu_token');\n        if (token || kefuToken ) {\n            config.headers['Authori-zation'] = config.kefu?'Bearer ' + kefuToken: 'Bearer ' + token;\n        }\n        return config\n    },\n    error => {\n        // do something with request error\n        return Promise.reject(error)\n    }\n)\n\n// response interceptor\nservice.interceptors.response.use(\n\n    response => {\n        let status = response.data ? response.data.status : 0\n        const code = status\n        switch (code) {\n        case 200:\n            return response.data\n        case 400:case 400011:case 400012:\n            return Promise.reject(response.data || { msg: '未知错误' })\n        case 410000:\n        case 410001:\n        case 410002:\n          console.log(code);\n            localStorage.clear()\n            removeCookies('token')\n            removeCookies('expires_time')\n            removeCookies('uuid')\n            router.replace({path:'/admin/login'})\n            break\n        case 410003:\n            removeCookies('kefuInfo')\n            removeCookies('kefu_token')\n            removeCookies('kefu_expires_time')\n            removeCookies('kefu_uuid')\n            router.replace({path:'/kefu'})\n        default:\n            break\n        }\n    },\n    error => {\n        Message.error(error.msg)\n        return Promise.reject(error)\n    }\n)\n\nexport default service\n"]}]}