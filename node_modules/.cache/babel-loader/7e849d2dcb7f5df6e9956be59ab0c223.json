{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js!/Users/hujun/Downloads/永益科技后端/src/utils/auth.js","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/utils/auth.js","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/.babelrc","mtime":1610587842000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2h1anVuL0Rvd25sb2Fkcy9cdTZDMzhcdTc2Q0FcdTc5RDFcdTYyODBcdTU0MEVcdTdBRUYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lLWNvcmVqczIvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CgovKioKICogQGRlc2NyaXB0aW9uIOmJtOadg+aMh+S7pAogKiDlvZPkvKDlhaXnmoTmnYPpmZDlvZPliY3nlKjmiLfmsqHmnInml7bvvIzkvJrnp7vpmaTor6Xnu4Tku7YKICog55So5L6L77yaPGRpdiB2LWF1dGg9IlsnYWRtaW4nXSI+dGV4dDwvZGl2PgogKiAqLwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCB7IGluY2x1ZGVBcnJheSB9IGZyb20gJ0AvbGlicy9hdXRoJzsKZXhwb3J0IGRlZmF1bHQgewogIGluc3RhbGw6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBfaW5zdGFsbCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShWdWUsIG9wdGlvbnMpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIFZ1ZS5kaXJlY3RpdmUoJ2F1dGgnLCB7CiAgICAgICAgICAgICAgICBpbnNlcnRlZDogZnVuY3Rpb24gaW5zZXJ0ZWQoZWwsIGJpbmRpbmcsIHZub2RlKSB7CiAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJpbmRpbmcudmFsdWU7CiAgICAgICAgICAgICAgICAgIHZhciBhY2Nlc3MgPSBzdG9yZS5zdGF0ZS51c2VySW5mby5hY2Nlc3M7CgogICAgICAgICAgICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheSAmJiB2YWx1ZS5sZW5ndGggJiYgYWNjZXNzICYmIGFjY2Vzcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaXNQZXJtaXNzaW9uID0gaW5jbHVkZUFycmF5KHZhbHVlLCBhY2Nlc3MpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUGVybWlzc2lvbikgewogICAgICAgICAgICAgICAgICAgICAgZWwucGFyZW50Tm9kZSAmJiBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgZnVuY3Rpb24gaW5zdGFsbChfeCwgX3gyKSB7CiAgICAgIHJldHVybiBfaW5zdGFsbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIHJldHVybiBpbnN0YWxsOwogIH0oKQp9Ow=="},{"version":3,"sources":["/Users/hujun/Downloads/永益科技后端/src/utils/auth.js"],"names":["store","includeArray","install","Vue","options","directive","inserted","el","binding","vnode","value","access","state","userInfo","Array","length","isPermission","parentNode","removeChild"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAP,MAAkB,SAAlB;AACA,SAASC,YAAT,QAA6B,aAA7B;AACA,eAAe;AACLC,EAAAA,OADK;AAAA,4FACIC,GADJ,EACSC,OADT;AAAA;AAAA;AAAA;AAAA;AAEPD,cAAAA,GAAG,CAACE,SAAJ,CAAc,MAAd,EAAsB;AAClBC,gBAAAA,QADkB,oBACRC,EADQ,EACJC,OADI,EACKC,KADL,EACY;AAAA,sBAClBC,KADkB,GACRF,OADQ,CAClBE,KADkB;AAE1B,sBAAMC,MAAM,GAAGX,KAAK,CAACY,KAAN,CAAYC,QAAZ,CAAqBF,MAApC;;AAEA,sBAAID,KAAK,IAAIA,KAAK,YAAYI,KAA1B,IAAmCJ,KAAK,CAACK,MAAzC,IAAmDJ,MAAnD,IAA6DA,MAAM,CAACI,MAAxE,EAAgF;AAC5E,wBAAMC,YAAY,GAAGf,YAAY,CAACS,KAAD,EAAQC,MAAR,CAAjC;;AACA,wBAAI,CAACK,YAAL,EAAmB;AACfT,sBAAAA,EAAE,CAACU,UAAH,IAAiBV,EAAE,CAACU,UAAH,CAAcC,WAAd,CAA0BX,EAA1B,CAAjB;AACH;AACJ;AACJ;AAXiB,eAAtB;;AAFO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAf","sourcesContent":["/**\n * @description 鉴权指令\n * 当传入的权限当前用户没有时，会移除该组件\n * 用例：<div v-auth=\"['admin']\">text</div>\n * */\nimport store from '@/store'\nimport { includeArray } from '@/libs/auth'\nexport default {\n    async install (Vue, options) {\n        Vue.directive('auth', {\n            inserted (el, binding, vnode) {\n                const { value } = binding\n                const access = store.state.userInfo.access\n\n                if (value && value instanceof Array && value.length && access && access.length) {\n                    const isPermission = includeArray(value, access)\n                    if (!isPermission) {\n                        el.parentNode && el.parentNode.removeChild(el)\n                    }\n                }\n            }\n        })\n    }\n}\n"]}]}