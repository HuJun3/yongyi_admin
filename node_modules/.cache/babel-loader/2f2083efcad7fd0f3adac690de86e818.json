{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js!/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/product/productAttr/addAttr.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/product/productAttr/addAttr.vue","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/.babelrc","mtime":1610587842000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmZ1bmN0aW9uLm5hbWUiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBydWxlQWRkQXBpLCBydWxlSW5mb0FwaSB9IGZyb20gJ0AvYXBpL3Byb2R1Y3QnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2FkZEF0dHInLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzcGluU2hvdzogZmFsc2UsCiAgICAgIG1vZGFsX2xvYWRpbmc6IGZhbHNlLAogICAgICBncmlkOiB7CiAgICAgICAgeGw6IDMsCiAgICAgICAgbGc6IDMsCiAgICAgICAgbWQ6IDEyLAogICAgICAgIHNtOiAyNCwKICAgICAgICB4czogMjQKICAgICAgfSwKICAgICAgbW9kYWw6IGZhbHNlLAogICAgICBpbmRleDogMSwKICAgICAgcnVsZXM6IHsKICAgICAgICBydWxlX25hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXop4TmoLzlkI3np7AnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgZm9ybUR5bmFtaWM6IHsKICAgICAgICBydWxlX25hbWU6ICcnLAogICAgICAgIHNwZWM6IFtdCiAgICAgIH0sCiAgICAgIGF0dHJzTmFtZTogJycsCiAgICAgIGF0dHJzVmFsOiAnJywKICAgICAgZm9ybUR5bmFtaWNOYW1lRGF0YTogW10sCiAgICAgIGlzQnRuOiBmYWxzZSwKICAgICAgZm9ybUR5bmFtaWNOYW1lOiBbXSwKICAgICAgcmVzdWx0czogW10sCiAgICAgIHJlc3VsdDogW10sCiAgICAgIGlkczogMAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7fSwKICBtZXRob2RzOiB7CiAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7CiAgICAgIHRoaXMuY2xlYXIoKTsKICAgIH0sCiAgICAvLyDmt7vliqDmjInpkq4KICAgIGFkZEJ0bjogZnVuY3Rpb24gYWRkQnRuKCkgewogICAgICB0aGlzLmlzQnRuID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDor6bmg4UKICAgIGdldElvZm86IGZ1bmN0aW9uIGdldElvZm8ocm93KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLnNwaW5TaG93ID0gdHJ1ZTsKICAgICAgdGhpcy5pZHMgPSByb3cuaWQ7CiAgICAgIHJ1bGVJbmZvQXBpKHJvdy5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMuZm9ybUR5bmFtaWMgPSByZXMuZGF0YS5pbmZvOwogICAgICAgIF90aGlzLnNwaW5TaG93ID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5zcGluU2hvdyA9IGZhbHNlOwoKICAgICAgICBfdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5o+Q5LqkCiAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChuYW1lKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVmc1tuYW1lXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmIChfdGhpczIuZm9ybUR5bmFtaWMuc3BlYy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzMi4kTWVzc2FnZS53YXJuaW5nKCfor7foh7PlsJHmt7vliqDkuIDmnaHllYblk4Hop4TmoLzvvIEnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczIubW9kYWxfbG9hZGluZyA9IHRydWU7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcnVsZUFkZEFwaShfdGhpczIuZm9ybUR5bmFtaWMsIF90aGlzMi5pZHMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzMi4kTWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwoKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzMi5tb2RhbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXMyLm1vZGFsX2xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICB9LCA1MDApOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgX3RoaXMyLiRlbWl0KCdnZXRMaXN0Jyk7CgogICAgICAgICAgICAgICAgX3RoaXMyLmNsZWFyKCk7CiAgICAgICAgICAgICAgfSwgNjAwKTsKICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzMi5tb2RhbF9sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgIF90aGlzMi4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9LCAxMjAwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCkgewogICAgICB0aGlzLiRyZWZzWydmb3JtRHluYW1pYyddLnJlc2V0RmllbGRzKCk7CiAgICAgIHRoaXMuZm9ybUR5bmFtaWMuc3BlYyA9IFtdOwogICAgICB0aGlzLmlzQnRuID0gZmFsc2U7CiAgICAgIHRoaXMuYXR0cnNOYW1lID0gJyc7CiAgICAgIHRoaXMuYXR0cnNWYWwgPSAnJzsKICAgIH0sCiAgICAvLyDlj5bmtogKICAgIG9mZkF0dHJOYW1lOiBmdW5jdGlvbiBvZmZBdHRyTmFtZSgpIHsKICAgICAgdGhpcy5pc0J0biA9IGZhbHNlOwogICAgfSwKICAgIC8vIOWIoOmZpAogICAgaGFuZGxlUmVtb3ZlOiBmdW5jdGlvbiBoYW5kbGVSZW1vdmUoaW5kZXgpIHsKICAgICAgdGhpcy5mb3JtRHluYW1pYy5zcGVjLnNwbGljZShpbmRleCwgMSk7CiAgICB9LAogICAgLy8g5Yig6Zmk5bGe5oCnCiAgICBoYW5kbGVSZW1vdmUyOiBmdW5jdGlvbiBoYW5kbGVSZW1vdmUyKGl0ZW0sIGluZGV4KSB7CiAgICAgIGl0ZW0uc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICAvLyDmt7vliqDop4TliJnlkI3np7AKICAgIGNyZWF0ZUF0dHJOYW1lOiBmdW5jdGlvbiBjcmVhdGVBdHRyTmFtZSgpIHsKICAgICAgaWYgKHRoaXMuYXR0cnNOYW1lICYmIHRoaXMuYXR0cnNWYWwpIHsKICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgIHZhbHVlOiB0aGlzLmF0dHJzTmFtZSwKICAgICAgICAgIGRldGFpbDogW3RoaXMuYXR0cnNWYWxdCiAgICAgICAgfTsKICAgICAgICB0aGlzLmZvcm1EeW5hbWljLnNwZWMucHVzaChkYXRhKTsKICAgICAgICB2YXIgaGFzaCA9IHt9OwogICAgICAgIHRoaXMuZm9ybUR5bmFtaWMuc3BlYyA9IHRoaXMuZm9ybUR5bmFtaWMuc3BlYy5yZWR1Y2UoZnVuY3Rpb24gKGl0ZW0sIG5leHQpIHsKICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlICovCiAgICAgICAgICBoYXNoW25leHQudmFsdWVdID8gJycgOiBoYXNoW25leHQudmFsdWVdID0gdHJ1ZSAmJiBpdGVtLnB1c2gobmV4dCk7CiAgICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICB9LCBbXSk7CiAgICAgICAgdGhpcy5hdHRyc05hbWUgPSAnJzsKICAgICAgICB0aGlzLmF0dHJzVmFsID0gJyc7CiAgICAgICAgdGhpcy5pc0J0biA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn6K+35re75Yqg6KeE5qC85ZCN56ew5oiW6KeE5qC85YC8Jyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmt7vliqDlsZ7mgKcKICAgIGNyZWF0ZUF0dHI6IGZ1bmN0aW9uIGNyZWF0ZUF0dHIobnVtLCBpZHgpIHsKICAgICAgaWYgKG51bSkgewogICAgICAgIHRoaXMuZm9ybUR5bmFtaWMuc3BlY1tpZHhdLmRldGFpbC5wdXNoKG51bSk7CiAgICAgICAgdmFyIGhhc2ggPSB7fTsKICAgICAgICB0aGlzLmZvcm1EeW5hbWljLnNwZWNbaWR4XS5kZXRhaWwgPSB0aGlzLmZvcm1EeW5hbWljLnNwZWNbaWR4XS5kZXRhaWwucmVkdWNlKGZ1bmN0aW9uIChpdGVtLCBuZXh0KSB7CiAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSAqLwogICAgICAgICAgaGFzaFtuZXh0XSA/ICcnIDogaGFzaFtuZXh0XSA9IHRydWUgJiYgaXRlbS5wdXNoKG5leHQpOwogICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgfSwgW10pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn6K+35re75Yqg5bGe5oCnJyk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["addAttr.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <Modal\n             scrollable\n            v-model=\"modal\"\n            @on-cancel=\"onCancel\"\n            title=\"添加商品规格\"\n            width=\"950\">\n        <Form  ref=\"formDynamic\" :model=\"formDynamic\" :rules=\"rules\" class=\"attrFrom\" :label-width=\"110\" label-position=\"right\" @submit.native.prevent>\n            <Row :gutter=\"24\">\n                <Col span=\"24\">\n                    <Col span=\"8\" class=\"mb15\">\n                        <FormItem label=\"规格模板名称：\" prop=\"rule_name\">\n                            <Input  placeholder=\"请输入标题名称\" :maxlength=\"20\" v-model=\"formDynamic.rule_name\"  />\n                        </FormItem>\n                    </Col>\n                </Col>\n                <Col span=\"23\" class=\"noForm\"  v-for=\"(item, index) in formDynamic.spec\" :key=\"index\">\n                    <FormItem>\n                        <div class=\"acea-row row-middle\"><span class=\"mr5\">{{item.value}}</span><Icon type=\"ios-close-circle\" @click=\"handleRemove(index)\"/></div>\n                        <div class=\"rulesBox\">\n                            <Tag type=\"dot\" class=\"mb5\" closable color=\"primary\" v-for=\"(j, indexn) in item.detail\" :key=\"indexn\" :name=\"j\"  @on-close=\"handleRemove2(item.detail,indexn)\">{{j}}</Tag>\n                            <Input search enter-button=\"添加\" placeholder=\"请输入属性名称\" v-model=\"item.detail.attrsVal\" @on-search=\"createAttr(item.detail.attrsVal,index)\" style=\"width: 150px\"/>\n                        </div>\n                    </FormItem>\n                </Col>\n                <Col span=\"24\" v-if=\"isBtn\" class=\"mt10\">\n                    <Col span=\"8\" class=\"mr15\">\n                        <FormItem label=\"规格名称：\">\n                            <Input  placeholder=\"请输入规格\" v-model=\"attrsName\"  />\n                        </FormItem>\n                    </Col>\n                    <Col span=\"8\" class=\"mr20\">\n                        <FormItem label=\"规格值：\">\n                            <Input v-model=\"attrsVal\" placeholder=\"请输入规格值\"  />\n                        </FormItem>\n                    </Col>\n                    <Col span=\"2\">\n                        <Button type=\"primary\"  @click=\"createAttrName\">确定</Button>\n                    </Col>\n                    <Col span=\"2\">\n                        <Button  @click=\"offAttrName\">取消</Button>\n                    </Col>\n                </Col>\n                <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\n            </Row>\n            <Button type=\"primary\" icon=\"md-add\" @click=\"addBtn\" v-if=\"!isBtn\" class=\"ml95 mt10\">添加新规格</Button>\n        </Form>\n        <div slot=\"footer\">\n            <Button type=\"primary\" :loading=\"modal_loading\"   @click=\"handleSubmit('formDynamic')\">确定</Button>\n        </div>\n    </Modal>\n</template>\n\n<script>\n    import { mapState } from 'vuex'\n    import { ruleAddApi, ruleInfoApi } from '@/api/product'\n    export default {\n        name: 'addAttr',\n        data () {\n            return {\n                spinShow: false,\n                modal_loading: false,\n                grid: {\n                    xl: 3,\n                    lg: 3,\n                    md: 12,\n                    sm: 24,\n                    xs: 24\n                },\n                modal: false,\n                index: 1,\n                rules: {\n                    rule_name: [\n                        { required: true, message: '请输入规格名称', trigger: 'blur' }\n                    ]\n                },\n                formDynamic: {\n                    rule_name: '',\n                    spec: []\n                },\n                attrsName: '',\n                attrsVal: '',\n                formDynamicNameData: [],\n                isBtn: false,\n                formDynamicName: [],\n                results: [],\n                result: [],\n                ids: 0\n            }\n        },\n        computed: {\n        },\n        methods: {\n            onCancel () {\n                this.clear()\n            },\n            // 添加按钮\n            addBtn () {\n                this.isBtn = true\n            },\n            // 详情\n            getIofo (row) {\n                this.spinShow = true\n                this.ids = row.id\n                ruleInfoApi(row.id).then(res => {\n                    this.formDynamic = res.data.info\n                    this.spinShow = false\n                }).catch(res => {\n                    this.spinShow = false\n                    this.$Message.error(res.msg)\n                })\n            },\n            // 提交\n            handleSubmit (name) {\n                this.$refs[name].validate((valid) => {\n                    if (valid) {\n                        if (this.formDynamic.spec.length === 0) {\n                            return this.$Message.warning('请至少添加一条商品规格！')\n                        }\n                        this.modal_loading = true\n                        setTimeout(() => {\n                            ruleAddApi(this.formDynamic, this.ids).then(res => {\n                                this.$Message.success(res.msg)\n                                setTimeout(() => {\n                                    this.modal = false\n                                    this.modal_loading = false\n                                }, 500)\n                                setTimeout(() => {\n                                    this.$emit('getList')\n                                    this.clear()\n                                }, 600)\n                            }).catch(res => {\n                                this.modal_loading = false\n                                this.$Message.error(res.msg)\n                            })\n                        }, 1200)\n                    } else {\n                        return false\n                    }\n                })\n            },\n            clear () {\n                this.$refs['formDynamic'].resetFields()\n                this.formDynamic.spec = []\n                this.isBtn = false\n                this.attrsName = ''\n                this.attrsVal = ''\n            },\n            // 取消\n            offAttrName () {\n                this.isBtn = false\n            },\n            // 删除\n            handleRemove (index) {\n                this.formDynamic.spec.splice(index, 1)\n            },\n            // 删除属性\n            handleRemove2 (item, index) {\n                item.splice(index, 1)\n            },\n            // 添加规则名称\n            createAttrName () {\n                if (this.attrsName && this.attrsVal) {\n                    let data = {\n                        value: this.attrsName,\n                        detail: [\n                            this.attrsVal\n                        ]\n                    }\n                    this.formDynamic.spec.push(data)\n                    var hash = {}\n                    this.formDynamic.spec = this.formDynamic.spec.reduce(function (item, next) {\n                        /* eslint-disable */\n                        hash[next.value] ? '' : hash[next.value] = true && item.push(next);\n                        return item\n                    }, [])\n                     this.attrsName = '';\n                     this.attrsVal = '';\n                    this.isBtn = false;\n                } else {\n                    this.$Message.warning('请添加规格名称或规格值');\n                }\n            },\n            // 添加属性\n            createAttr (num, idx) {\n                if (num) {\n                    this.formDynamic.spec[idx].detail.push(num);\n                    var hash = {};\n                    this.formDynamic.spec[idx].detail = this.formDynamic.spec[idx].detail.reduce(function (item, next) {\n                        /* eslint-disable */\n                        hash[next] ? '' : hash[next] = true && item.push(next);\n                        return item\n                    }, [])\n                } else {\n                    this.$Message.warning('请添加属性');\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n    .rulesBox\n        display flex\n        flex-wrap: wrap;\n    .attrFrom\n        >>> .ivu-form-item\n         margin-bottom 0px !important\n</style>\n"],"sourceRoot":"src/pages/product/productAttr"}]}