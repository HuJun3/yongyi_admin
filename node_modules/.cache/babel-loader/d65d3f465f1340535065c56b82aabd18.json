{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js!/Users/hujun/Downloads/永益科技后端/src/assets/js/jigsaw.js","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/assets/js/jigsaw.js","mtime":1610587842000},{"path":"/Users/hujun/Downloads/永益科技后端/.babelrc","mtime":1610587842000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvaHVqdW4vRG93bmxvYWRzL1x1NkMzOFx1NzZDQVx1NzlEMVx1NjI4MFx1NTQwRVx1N0FFRi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMi9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL2h1anVuL0Rvd25sb2Fkcy9cdTZDMzhcdTc2Q0FcdTc5RDFcdTYyODBcdTU0MEVcdTdBRUYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lLWNvcmVqczIvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgIi4vamlnc2F3LmNzcyI7CnZhciB3ID0gMzEwOyAvLyBjYW52YXPlrr3luqYKCnZhciBoID0gMTU1OyAvLyBjYW52YXPpq5jluqYKCnZhciBsID0gNDI7IC8vIOa7keWdl+i+uemVvwoKdmFyIHIgPSA5OyAvLyDmu5HlnZfljYrlvoQKCnZhciBQSSA9IE1hdGguUEk7CnZhciBMID0gbCArIHIgKiAyICsgMzsgLy8g5ruR5Z2X5a6e6ZmF6L656ZW/CgpmdW5jdGlvbiBnZXRSYW5kb21OdW1iZXJCeVJhbmdlKHN0YXJ0LCBlbmQpIHsKICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKGVuZCAtIHN0YXJ0KSArIHN0YXJ0KTsKfQoKZnVuY3Rpb24gY3JlYXRlQ2FudmFzKHdpZHRoLCBoZWlnaHQpIHsKICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgY2FudmFzLndpZHRoID0gd2lkdGg7CiAgY2FudmFzLmhlaWdodCA9IGhlaWdodDsKICByZXR1cm4gY2FudmFzOwp9CgpmdW5jdGlvbiBjcmVhdGVJbWcob25sb2FkKSB7CiAgdmFyIGltZyA9IG5ldyBJbWFnZSgpOwogIGltZy5jcm9zc09yaWdpbiA9ICdBbm9ueW1vdXMnOwogIGltZy5vbmxvYWQgPSBvbmxvYWQ7CgogIGltZy5vbmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgaW1nLnNldFNyYyhnZXRSYW5kb21JbWdTcmMoKSk7CiAgfTsKCiAgaW1nLnNldFNyYyA9IGZ1bmN0aW9uIChzcmMpIHsKICAgIHZhciBpc0lFID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignVHJpZGVudCcpID4gLTE7CgogICAgaWYgKGlzSUUpIHsKICAgICAgLy8gSUXmtY/op4jlmajml6Dms5XpgJrov4dpbWcuY3Jvc3NPcmlnaW7ot6jln5/vvIzkvb/nlKhhamF46I635Y+W5Zu+54mHYmxvYueEtuWQjui9rOS4umRhdGFVUkzmmL7npLoKICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwoKICAgICAgeGhyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIGZpbGUgPSBuZXcgRmlsZVJlYWRlcigpOyAvLyBGaWxlUmVhZGVy5LuF5pSv5oyBSUUxMCsKCiAgICAgICAgZmlsZS5yZWFkQXNEYXRhVVJMKGUudGFyZ2V0LnJlc3BvbnNlKTsKCiAgICAgICAgZmlsZS5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgaW1nLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgICB9OwogICAgICB9OwoKICAgICAgeGhyLm9wZW4oJ0dFVCcsIHNyYyk7CiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYic7CiAgICAgIHhoci5zZW5kKCk7CiAgICB9IGVsc2UgaW1nLnNyYyA9IHNyYzsKICB9OwoKICBpbWcuc2V0U3JjKGdldFJhbmRvbUltZ1NyYygpKTsKICByZXR1cm4gaW1nOwp9CgpmdW5jdGlvbiBjcmVhdGVFbGVtZW50KHRhZ05hbWUsIGNsYXNzTmFtZSkgewogIHZhciBlbG1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpOwogIGVsbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWU7CiAgcmV0dXJuIGVsbWVudDsKfQoKZnVuY3Rpb24gYWRkQ2xhc3ModGFnLCBjbGFzc05hbWUpIHsKICB0YWcuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpOwp9CgpmdW5jdGlvbiByZW1vdmVDbGFzcyh0YWcsIGNsYXNzTmFtZSkgewogIHRhZy5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7Cn0KCmZ1bmN0aW9uIGdldFJhbmRvbUltZ1NyYygpIHsKICByZXR1cm4gImh0dHBzOi8vcGljc3VtLnBob3Rvcy8iLmNvbmNhdCh3LCAiLyIpLmNvbmNhdChoLCAiLz9pbWFnZT0iKS5jb25jYXQoZ2V0UmFuZG9tTnVtYmVyQnlSYW5nZSgwLCAxMDg0KSk7Cn0KCmZ1bmN0aW9uIF9kcmF3KGN0eCwgeCwgeSwgb3BlcmF0aW9uKSB7CiAgY3R4LmJlZ2luUGF0aCgpOwogIGN0eC5tb3ZlVG8oeCwgeSk7CiAgY3R4LmFyYyh4ICsgbCAvIDIsIHkgLSByICsgMiwgciwgMC43MiAqIFBJLCAyLjI2ICogUEkpOwogIGN0eC5saW5lVG8oeCArIGwsIHkpOwogIGN0eC5hcmMoeCArIGwgKyByIC0gMiwgeSArIGwgLyAyLCByLCAxLjIxICogUEksIDIuNzggKiBQSSk7CiAgY3R4LmxpbmVUbyh4ICsgbCwgeSArIGwpOwogIGN0eC5saW5lVG8oeCwgeSArIGwpOwogIGN0eC5hcmMoeCArIHIgLSAyLCB5ICsgbCAvIDIsIHIgKyAwLjQsIDIuNzYgKiBQSSwgMS4yNCAqIFBJLCB0cnVlKTsKICBjdHgubGluZVRvKHgsIHkpOwogIGN0eC5saW5lV2lkdGggPSAyOwogIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjcpJzsKICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjcpJzsKICBjdHguc3Ryb2tlKCk7CiAgY3R4W29wZXJhdGlvbl0oKTsKICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2Rlc3RpbmF0aW9uLW92ZXInOwp9CgpmdW5jdGlvbiBzdW0oeCwgeSkgewogIHJldHVybiB4ICsgeTsKfQoKZnVuY3Rpb24gc3F1YXJlKHgpIHsKICByZXR1cm4geCAqIHg7Cn0KCnZhciBqaWdzYXcgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIGppZ3NhdyhfcmVmKSB7CiAgICB2YXIgZWwgPSBfcmVmLmVsLAogICAgICAgIF9yZWYkd2lkdGggPSBfcmVmLndpZHRoLAogICAgICAgIHdpZHRoID0gX3JlZiR3aWR0aCA9PT0gdm9pZCAwID8gMzEwIDogX3JlZiR3aWR0aCwKICAgICAgICBfcmVmJGhlaWdodCA9IF9yZWYuaGVpZ2h0LAogICAgICAgIGhlaWdodCA9IF9yZWYkaGVpZ2h0ID09PSB2b2lkIDAgPyAxNTUgOiBfcmVmJGhlaWdodCwKICAgICAgICBvblN1Y2Nlc3MgPSBfcmVmLm9uU3VjY2VzcywKICAgICAgICBvbkZhaWwgPSBfcmVmLm9uRmFpbCwKICAgICAgICBvblJlZnJlc2ggPSBfcmVmLm9uUmVmcmVzaDsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgamlnc2F3KTsKCiAgICB3ID0gd2lkdGg7CiAgICBoID0gaGVpZ2h0OwogICAgY29uc29sZS5sb2coZWwpOwogICAgZWwuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnOwogICAgZWwuc3R5bGUud2lkdGggPSB3ICsgJ3B4JzsKICAgIE9iamVjdC5hc3NpZ24oZWwuc3R5bGUsIHsKICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsCiAgICAgIHdpZHRoOiB3ICsgJ3B4JywKICAgICAgbWFyZ2luOiAnMCBhdXRvJwogICAgfSk7CiAgICB0aGlzLmVsID0gZWw7CiAgICB0aGlzLm9uU3VjY2VzcyA9IG9uU3VjY2VzczsKICAgIHRoaXMub25GYWlsID0gb25GYWlsOwogICAgdGhpcy5vblJlZnJlc2ggPSBvblJlZnJlc2g7CiAgfQoKICBfY3JlYXRlQ2xhc3Moamlnc2F3LCBbewogICAga2V5OiAiaW5pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdGhpcy5pbml0RE9NKCk7CiAgICAgIHRoaXMuaW5pdEltZygpOwogICAgICB0aGlzLmJpbmRFdmVudHMoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbml0RE9NIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0RE9NKCkgewogICAgICB2YXIgY2FudmFzID0gY3JlYXRlQ2FudmFzKHcsIGgpOyAvLyDnlLvluIMKCiAgICAgIHZhciBibG9jayA9IGNhbnZhcy5jbG9uZU5vZGUodHJ1ZSk7IC8vIOa7keWdlwoKICAgICAgdmFyIHNsaWRlckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsICdzbGlkZXJDb250YWluZXInKTsKICAgICAgc2xpZGVyQ29udGFpbmVyLnN0eWxlLndpZHRoID0gdyArICdweCc7CiAgICAgIHZhciByZWZyZXNoSWNvbiA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsICdyZWZyZXNoSWNvbicpOwogICAgICB2YXIgc2xpZGVyTWFzayA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsICdzbGlkZXJNYXNrJyk7CiAgICAgIHZhciBzbGlkZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCAnc2xpZGVyJyk7CiAgICAgIHZhciBzbGlkZXJJY29uID0gY3JlYXRlRWxlbWVudCgnc3BhbicsICdzbGlkZXJJY29uJyk7CiAgICAgIHZhciB0ZXh0ID0gY3JlYXRlRWxlbWVudCgnc3BhbicsICdzbGlkZXJUZXh0Jyk7CiAgICAgIGJsb2NrLmNsYXNzTmFtZSA9ICdibG9jayc7CiAgICAgIHRleHQuaW5uZXJIVE1MID0gJ+WQkeWPs+a7keWKqOWhq+WFheaLvOWbvic7CiAgICAgIHZhciBlbCA9IHRoaXMuZWw7CiAgICAgIGVsLmFwcGVuZENoaWxkKGNhbnZhcyk7CiAgICAgIGVsLmFwcGVuZENoaWxkKHJlZnJlc2hJY29uKTsKICAgICAgZWwuYXBwZW5kQ2hpbGQoYmxvY2spOwogICAgICBzbGlkZXIuYXBwZW5kQ2hpbGQoc2xpZGVySWNvbik7CiAgICAgIHNsaWRlck1hc2suYXBwZW5kQ2hpbGQoc2xpZGVyKTsKICAgICAgc2xpZGVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHNsaWRlck1hc2spOwogICAgICBzbGlkZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dCk7CiAgICAgIGVsLmFwcGVuZENoaWxkKHNsaWRlckNvbnRhaW5lcik7CiAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgewogICAgICAgIGNhbnZhczogY2FudmFzLAogICAgICAgIGJsb2NrOiBibG9jaywKICAgICAgICBzbGlkZXJDb250YWluZXI6IHNsaWRlckNvbnRhaW5lciwKICAgICAgICByZWZyZXNoSWNvbjogcmVmcmVzaEljb24sCiAgICAgICAgc2xpZGVyOiBzbGlkZXIsCiAgICAgICAgc2xpZGVyTWFzazogc2xpZGVyTWFzaywKICAgICAgICBzbGlkZXJJY29uOiBzbGlkZXJJY29uLAogICAgICAgIHRleHQ6IHRleHQsCiAgICAgICAgY2FudmFzQ3R4OiBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSwKICAgICAgICBibG9ja0N0eDogYmxvY2suZ2V0Q29udGV4dCgnMmQnKQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbml0SW1nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0SW1nKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGltZyA9IGNyZWF0ZUltZyhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuZHJhdygpOwoKICAgICAgICBfdGhpcy5jYW52YXNDdHguZHJhd0ltYWdlKGltZywgMCwgMCwgdywgaCk7CgogICAgICAgIF90aGlzLmJsb2NrQ3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIHcsIGgpOwoKICAgICAgICB2YXIgeSA9IF90aGlzLnkgLSByICogMiAtIDE7CgogICAgICAgIHZhciBJbWFnZURhdGEgPSBfdGhpcy5ibG9ja0N0eC5nZXRJbWFnZURhdGEoX3RoaXMueCAtIDMsIHksIEwsIEwpOwoKICAgICAgICBfdGhpcy5ibG9jay53aWR0aCA9IEw7CgogICAgICAgIF90aGlzLmJsb2NrQ3R4LnB1dEltYWdlRGF0YShJbWFnZURhdGEsIDAsIHkpOwogICAgICB9KTsKICAgICAgdGhpcy5pbWcgPSBpbWc7CiAgICB9CiAgfSwgewogICAga2V5OiAiZHJhdyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZHJhdygpIHsKICAgICAgLy8g6ZqP5py65Yib5bu65ruR5Z2X55qE5L2N572uCiAgICAgIHRoaXMueCA9IGdldFJhbmRvbU51bWJlckJ5UmFuZ2UoTCArIDEwLCB3IC0gKEwgKyAxMCkpOwogICAgICB0aGlzLnkgPSBnZXRSYW5kb21OdW1iZXJCeVJhbmdlKDEwICsgciAqIDIsIGggLSAoTCArIDEwKSk7CgogICAgICBfZHJhdyh0aGlzLmNhbnZhc0N0eCwgdGhpcy54LCB0aGlzLnksICdmaWxsJyk7CgogICAgICBfZHJhdyh0aGlzLmJsb2NrQ3R4LCB0aGlzLngsIHRoaXMueSwgJ2NsaXAnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbGVhbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYW4oKSB7CiAgICAgIHRoaXMuY2FudmFzQ3R4LmNsZWFyUmVjdCgwLCAwLCB3LCBoKTsKICAgICAgdGhpcy5ibG9ja0N0eC5jbGVhclJlY3QoMCwgMCwgdywgaCk7CiAgICAgIHRoaXMuYmxvY2sud2lkdGggPSB3OwogICAgfQogIH0sIHsKICAgIGtleTogImJpbmRFdmVudHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5lbC5vbnNlbGVjdHN0YXJ0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfTsKCiAgICAgIHRoaXMucmVmcmVzaEljb24ub25jbGljayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIucmVzZXQoKTsKCiAgICAgICAgdHlwZW9mIF90aGlzMi5vblJlZnJlc2ggPT09ICdmdW5jdGlvbicgJiYgX3RoaXMyLm9uUmVmcmVzaCgpOwogICAgICB9OwoKICAgICAgdmFyIG9yaWdpblgsCiAgICAgICAgICBvcmlnaW5ZLAogICAgICAgICAgdHJhaWwgPSBbXSwKICAgICAgICAgIGlzTW91c2VEb3duID0gZmFsc2U7CgogICAgICB2YXIgaGFuZGxlRHJhZ1N0YXJ0ID0gZnVuY3Rpb24gaGFuZGxlRHJhZ1N0YXJ0KGUpIHsKICAgICAgICBvcmlnaW5YID0gZS5jbGllbnRYIHx8IGUudG91Y2hlc1swXS5jbGllbnRYOwogICAgICAgIG9yaWdpblkgPSBlLmNsaWVudFkgfHwgZS50b3VjaGVzWzBdLmNsaWVudFk7CiAgICAgICAgaXNNb3VzZURvd24gPSB0cnVlOwogICAgICB9OwoKICAgICAgdmFyIGhhbmRsZURyYWdNb3ZlID0gZnVuY3Rpb24gaGFuZGxlRHJhZ01vdmUoZSkgewogICAgICAgIGlmICghaXNNb3VzZURvd24pIHJldHVybiBmYWxzZTsKICAgICAgICB2YXIgZXZlbnRYID0gZS5jbGllbnRYIHx8IGUudG91Y2hlc1swXS5jbGllbnRYOwogICAgICAgIHZhciBldmVudFkgPSBlLmNsaWVudFkgfHwgZS50b3VjaGVzWzBdLmNsaWVudFk7CiAgICAgICAgdmFyIG1vdmVYID0gZXZlbnRYIC0gb3JpZ2luWDsKICAgICAgICB2YXIgbW92ZVkgPSBldmVudFkgLSBvcmlnaW5ZOwogICAgICAgIGlmIChtb3ZlWCA8IDAgfHwgbW92ZVggKyAzOCA+PSB3KSByZXR1cm4gZmFsc2U7CiAgICAgICAgX3RoaXMyLnNsaWRlci5zdHlsZS5sZWZ0ID0gbW92ZVggKyAncHgnOwogICAgICAgIHZhciBibG9ja0xlZnQgPSAodyAtIDQwIC0gMjApIC8gKHcgLSA0MCkgKiBtb3ZlWDsKICAgICAgICBfdGhpczIuYmxvY2suc3R5bGUubGVmdCA9IGJsb2NrTGVmdCArICdweCc7CiAgICAgICAgYWRkQ2xhc3MoX3RoaXMyLnNsaWRlckNvbnRhaW5lciwgJ3NsaWRlckNvbnRhaW5lcl9hY3RpdmUnKTsKICAgICAgICBfdGhpczIuc2xpZGVyTWFzay5zdHlsZS53aWR0aCA9IG1vdmVYICsgJ3B4JzsKICAgICAgICB0cmFpbC5wdXNoKG1vdmVZKTsKICAgICAgfTsKCiAgICAgIHZhciBoYW5kbGVEcmFnRW5kID0gZnVuY3Rpb24gaGFuZGxlRHJhZ0VuZChlKSB7CiAgICAgICAgaWYgKCFpc01vdXNlRG93bikgcmV0dXJuIGZhbHNlOwogICAgICAgIGlzTW91c2VEb3duID0gZmFsc2U7CiAgICAgICAgdmFyIGV2ZW50WCA9IGUuY2xpZW50WCB8fCBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7CiAgICAgICAgaWYgKGV2ZW50WCA9PT0gb3JpZ2luWCkgcmV0dXJuIGZhbHNlOwogICAgICAgIHJlbW92ZUNsYXNzKF90aGlzMi5zbGlkZXJDb250YWluZXIsICdzbGlkZXJDb250YWluZXJfYWN0aXZlJyk7CiAgICAgICAgX3RoaXMyLnRyYWlsID0gdHJhaWw7CgogICAgICAgIHZhciBfdGhpczIkdmVyaWZ5ID0gX3RoaXMyLnZlcmlmeSgpLAogICAgICAgICAgICBzcGxpY2VkID0gX3RoaXMyJHZlcmlmeS5zcGxpY2VkLAogICAgICAgICAgICB2ZXJpZmllZCA9IF90aGlzMiR2ZXJpZnkudmVyaWZpZWQ7CgogICAgICAgIGlmIChzcGxpY2VkKSB7CiAgICAgICAgICBpZiAodmVyaWZpZWQpIHsKICAgICAgICAgICAgYWRkQ2xhc3MoX3RoaXMyLnNsaWRlckNvbnRhaW5lciwgJ3NsaWRlckNvbnRhaW5lcl9zdWNjZXNzJyk7CiAgICAgICAgICAgIHR5cGVvZiBfdGhpczIub25TdWNjZXNzID09PSAnZnVuY3Rpb24nICYmIF90aGlzMi5vblN1Y2Nlc3MoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFkZENsYXNzKF90aGlzMi5zbGlkZXJDb250YWluZXIsICdzbGlkZXJDb250YWluZXJfZmFpbCcpOwogICAgICAgICAgICBfdGhpczIudGV4dC5pbm5lckhUTUwgPSAn6K+35YaN6K+V5LiA5qyhJzsKCiAgICAgICAgICAgIF90aGlzMi5yZXNldCgpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhZGRDbGFzcyhfdGhpczIuc2xpZGVyQ29udGFpbmVyLCAnc2xpZGVyQ29udGFpbmVyX2ZhaWwnKTsKICAgICAgICAgIHR5cGVvZiBfdGhpczIub25GYWlsID09PSAnZnVuY3Rpb24nICYmIF90aGlzMi5vbkZhaWwoKTsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpczIucmVzZXQoKTsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIHRoaXMuc2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZURyYWdTdGFydCk7CiAgICAgIHRoaXMuc2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBoYW5kbGVEcmFnU3RhcnQpOwogICAgICB0aGlzLmJsb2NrLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZURyYWdTdGFydCk7CiAgICAgIHRoaXMuYmxvY2suYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGhhbmRsZURyYWdTdGFydCk7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZURyYWdNb3ZlKTsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgaGFuZGxlRHJhZ01vdmUpOwogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlRHJhZ0VuZCk7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgaGFuZGxlRHJhZ0VuZCk7CiAgICB9CiAgfSwgewogICAga2V5OiAidmVyaWZ5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiB2ZXJpZnkoKSB7CiAgICAgIHZhciBhcnIgPSB0aGlzLnRyYWlsOyAvLyDmi5bliqjml7Z56L2055qE56e75Yqo6Led56a7CgogICAgICB2YXIgYXZlcmFnZSA9IGFyci5yZWR1Y2Uoc3VtKSAvIGFyci5sZW5ndGg7CiAgICAgIHZhciBkZXZpYXRpb25zID0gYXJyLm1hcChmdW5jdGlvbiAoeCkgewogICAgICAgIHJldHVybiB4IC0gYXZlcmFnZTsKICAgICAgfSk7CiAgICAgIHZhciBzdGRkZXYgPSBNYXRoLnNxcnQoZGV2aWF0aW9ucy5tYXAoc3F1YXJlKS5yZWR1Y2Uoc3VtKSAvIGFyci5sZW5ndGgpOwogICAgICB2YXIgbGVmdCA9IHBhcnNlSW50KHRoaXMuYmxvY2suc3R5bGUubGVmdCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgc3BsaWNlZDogTWF0aC5hYnMobGVmdCAtIHRoaXMueCkgPCAxMCwKICAgICAgICB2ZXJpZmllZDogc3RkZGV2ICE9PSAwIC8vIOeugOWNlemqjOivgeaLluWKqOi9qOi/ue+8jOS4uumbtuaXtuihqOekulnovbTkuIrkuIvmsqHmnInms6LliqjvvIzlj6/og73pnZ7kurrkuLrmk43kvZwKCiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAicmVzZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB0aGlzLnNsaWRlckNvbnRhaW5lci5jbGFzc05hbWUgPSAnc2xpZGVyQ29udGFpbmVyJzsKICAgICAgdGhpcy5zbGlkZXIuc3R5bGUubGVmdCA9IDA7CiAgICAgIHRoaXMuYmxvY2suc3R5bGUubGVmdCA9IDA7CiAgICAgIHRoaXMuc2xpZGVyTWFzay5zdHlsZS53aWR0aCA9IDA7CiAgICAgIHRoaXMuY2xlYW4oKTsKICAgICAgdGhpcy5pbWcuc2V0U3JjKGdldFJhbmRvbUltZ1NyYygpKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBqaWdzYXc7Cn0oKTsKCndpbmRvdy5qaWdzYXcgPSB7CiAgaW5pdDogZnVuY3Rpb24gaW5pdChvcHRzKSB7CiAgICB2YXIgJGppZ3NhdyA9IG5ldyBqaWdzYXcob3B0cyk7CiAgICAkamlnc2F3LmluaXQoKTsKICAgIHJldHVybiAkamlnc2F3OwogIH0KfTs="},{"version":3,"sources":["/Users/hujun/Downloads/永益科技后端/src/assets/js/jigsaw.js"],"names":["w","h","l","r","PI","Math","L","getRandomNumberByRange","start","end","round","random","createCanvas","width","height","canvas","document","createElement","createImg","onload","img","Image","crossOrigin","onerror","setSrc","getRandomImgSrc","src","isIE","window","navigator","userAgent","indexOf","xhr","XMLHttpRequest","onloadend","e","file","FileReader","readAsDataURL","target","response","result","open","responseType","send","tagName","className","elment","addClass","tag","classList","add","removeClass","remove","draw","ctx","x","y","operation","beginPath","moveTo","arc","lineTo","lineWidth","fillStyle","strokeStyle","stroke","globalCompositeOperation","sum","square","jigsaw","el","onSuccess","onFail","onRefresh","console","log","style","position","Object","assign","margin","initDOM","initImg","bindEvents","block","cloneNode","sliderContainer","refreshIcon","sliderMask","slider","sliderIcon","text","innerHTML","appendChild","canvasCtx","getContext","blockCtx","drawImage","ImageData","getImageData","putImageData","clearRect","onselectstart","onclick","reset","originX","originY","trail","isMouseDown","handleDragStart","clientX","touches","clientY","handleDragMove","eventX","eventY","moveX","moveY","left","blockLeft","push","handleDragEnd","changedTouches","verify","spliced","verified","setTimeout","addEventListener","arr","average","reduce","length","deviations","map","stddev","sqrt","parseInt","abs","clean","init","opts","$jigsaw"],"mappings":"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","sourcesContent":["import './jigsaw.css'\n\nlet w = 310; // canvas宽度\nlet h = 155; // canvas高度\nconst l = 42; // 滑块边长\nconst r = 9; // 滑块半径\nconst PI = Math.PI;\nconst L = l + r * 2 + 3; // 滑块实际边长\n\nfunction getRandomNumberByRange(start, end) {\n    return Math.round(Math.random() * (end - start) + start)\n}\n\nfunction createCanvas(width, height) {\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    return canvas\n}\n\nfunction createImg(onload) {\n    const img = new Image();\n    img.crossOrigin = 'Anonymous';\n    img.onload = onload;\n    img.onerror = () => {\n        img.setSrc(getRandomImgSrc())\n    };\n\n    img.setSrc = function (src) {\n        const isIE = window.navigator.userAgent.indexOf('Trident') > -1;\n        if (isIE) { // IE浏览器无法通过img.crossOrigin跨域，使用ajax获取图片blob然后转为dataURL显示\n            const xhr = new XMLHttpRequest();\n            xhr.onloadend = function (e) {\n                const file = new FileReader(); // FileReader仅支持IE10+\n                file.readAsDataURL(e.target.response);\n                file.onloadend = function (e) {\n                    img.src = e.target.result\n                }\n            };\n            xhr.open('GET', src);\n            xhr.responseType = 'blob';\n            xhr.send()\n        } else img.src = src\n    };\n\n    img.setSrc(getRandomImgSrc());\n    return img\n}\n\nfunction createElement(tagName, className) {\n    const elment = document.createElement(tagName);\n    elment.className = className;\n    return elment\n}\n\nfunction addClass(tag, className) {\n    tag.classList.add(className)\n}\n\nfunction removeClass(tag, className) {\n    tag.classList.remove(className)\n}\n\nfunction getRandomImgSrc() {\n    return `https://picsum.photos/${w}/${h}/?image=${getRandomNumberByRange(0, 1084)}`\n}\n\nfunction draw(ctx, x, y, operation) {\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n    ctx.arc(x + l / 2, y - r + 2, r, 0.72 * PI, 2.26 * PI);\n    ctx.lineTo(x + l, y);\n    ctx.arc(x + l + r - 2, y + l / 2, r, 1.21 * PI, 2.78 * PI);\n    ctx.lineTo(x + l, y + l);\n    ctx.lineTo(x, y + l);\n    ctx.arc(x + r - 2, y + l / 2, r + 0.4, 2.76 * PI, 1.24 * PI, true);\n    ctx.lineTo(x, y);\n    ctx.lineWidth = 2;\n    ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';\n    ctx.strokeStyle = 'rgba(255, 255, 255, 0.7)';\n    ctx.stroke();\n    ctx[operation]();\n    ctx.globalCompositeOperation = 'destination-over'\n}\n\nfunction sum(x, y) {\n    return x + y\n}\n\nfunction square(x) {\n    return x * x\n}\n\nclass jigsaw {\n    constructor({el, width = 310, height = 155, onSuccess, onFail, onRefresh}) {\n        w = width;\n        h = height;\n        console.log(el);\n        el.style.position = 'relative';\n        el.style.width = w + 'px';\n        Object.assign(el.style, {\n            position: 'relative',\n            width: w + 'px',\n            margin: '0 auto'\n        });\n        this.el = el;\n        this.onSuccess = onSuccess;\n        this.onFail = onFail;\n        this.onRefresh = onRefresh\n    }\n\n    init() {\n        this.initDOM();\n        this.initImg();\n        this.bindEvents()\n    }\n\n    initDOM() {\n        const canvas = createCanvas(w, h); // 画布\n        const block = canvas.cloneNode(true); // 滑块\n        const sliderContainer = createElement('div', 'sliderContainer');\n        sliderContainer.style.width = w + 'px';\n        const refreshIcon = createElement('div', 'refreshIcon');\n        const sliderMask = createElement('div', 'sliderMask');\n        const slider = createElement('div', 'slider');\n        const sliderIcon = createElement('span', 'sliderIcon');\n        const text = createElement('span', 'sliderText');\n\n        block.className = 'block';\n        text.innerHTML = '向右滑动填充拼图';\n\n        const el = this.el;\n        el.appendChild(canvas);\n        el.appendChild(refreshIcon);\n        el.appendChild(block);\n        slider.appendChild(sliderIcon);\n        sliderMask.appendChild(slider);\n        sliderContainer.appendChild(sliderMask);\n        sliderContainer.appendChild(text);\n        el.appendChild(sliderContainer);\n\n        Object.assign(this, {\n            canvas,\n            block,\n            sliderContainer,\n            refreshIcon,\n            slider,\n            sliderMask,\n            sliderIcon,\n            text,\n            canvasCtx: canvas.getContext('2d'),\n            blockCtx: block.getContext('2d')\n        })\n    }\n\n    initImg() {\n        const img = createImg(() => {\n            this.draw();\n            this.canvasCtx.drawImage(img, 0, 0, w, h);\n            this.blockCtx.drawImage(img, 0, 0, w, h);\n            const y = this.y - r * 2 - 1;\n            const ImageData = this.blockCtx.getImageData(this.x - 3, y, L, L);\n            this.block.width = L;\n            this.blockCtx.putImageData(ImageData, 0, y)\n        });\n        this.img = img\n    }\n\n    draw() {\n        // 随机创建滑块的位置\n        this.x = getRandomNumberByRange(L + 10, w - (L + 10));\n        this.y = getRandomNumberByRange(10 + r * 2, h - (L + 10));\n        draw(this.canvasCtx, this.x, this.y, 'fill');\n        draw(this.blockCtx, this.x, this.y, 'clip')\n    }\n\n    clean() {\n        this.canvasCtx.clearRect(0, 0, w, h);\n        this.blockCtx.clearRect(0, 0, w, h);\n        this.block.width = w\n    }\n\n    bindEvents() {\n        this.el.onselectstart = () => false;\n        this.refreshIcon.onclick = () => {\n            this.reset();\n            typeof this.onRefresh === 'function' && this.onRefresh()\n        };\n\n        let originX, originY, trail = [], isMouseDown = false;\n\n        const handleDragStart = function (e) {\n            originX = e.clientX || e.touches[0].clientX;\n            originY = e.clientY || e.touches[0].clientY;\n            isMouseDown = true\n        };\n\n        const handleDragMove = (e) => {\n            if (!isMouseDown) return false;\n            const eventX = e.clientX || e.touches[0].clientX;\n            const eventY = e.clientY || e.touches[0].clientY;\n            const moveX = eventX - originX;\n            const moveY = eventY - originY;\n            if (moveX < 0 || moveX + 38 >= w) return false;\n            this.slider.style.left = moveX + 'px';\n            const blockLeft = (w - 40 - 20) / (w - 40) * moveX;\n            this.block.style.left = blockLeft + 'px';\n\n            addClass(this.sliderContainer, 'sliderContainer_active');\n            this.sliderMask.style.width = moveX + 'px';\n            trail.push(moveY)\n        };\n\n        const handleDragEnd = (e) => {\n            if (!isMouseDown) return false;\n            isMouseDown = false;\n            const eventX = e.clientX || e.changedTouches[0].clientX;\n            if (eventX === originX) return false;\n            removeClass(this.sliderContainer, 'sliderContainer_active');\n            this.trail = trail;\n            const {spliced, verified} = this.verify();\n            if (spliced) {\n                if (verified) {\n                    addClass(this.sliderContainer, 'sliderContainer_success');\n                    typeof this.onSuccess === 'function' && this.onSuccess()\n                } else {\n                    addClass(this.sliderContainer, 'sliderContainer_fail');\n                    this.text.innerHTML = '请再试一次';\n                    this.reset()\n                }\n            } else {\n                addClass(this.sliderContainer, 'sliderContainer_fail');\n                typeof this.onFail === 'function' && this.onFail();\n                setTimeout(() => {\n                    this.reset()\n                }, 1000)\n            }\n        };\n        this.slider.addEventListener('mousedown', handleDragStart);\n        this.slider.addEventListener('touchstart', handleDragStart);\n        this.block.addEventListener('mousedown', handleDragStart);\n        this.block.addEventListener('touchstart', handleDragStart);\n        document.addEventListener('mousemove', handleDragMove);\n        document.addEventListener('touchmove', handleDragMove);\n        document.addEventListener('mouseup', handleDragEnd);\n        document.addEventListener('touchend', handleDragEnd)\n    }\n\n    verify() {\n        const arr = this.trail; // 拖动时y轴的移动距离\n        const average = arr.reduce(sum) / arr.length;\n        const deviations = arr.map(x => x - average);\n        const stddev = Math.sqrt(deviations.map(square).reduce(sum) / arr.length);\n        const left = parseInt(this.block.style.left);\n        return {\n            spliced: Math.abs(left - this.x) < 10,\n            verified: stddev !== 0 // 简单验证拖动轨迹，为零时表示Y轴上下没有波动，可能非人为操作\n        }\n    }\n\n    reset() {\n        this.sliderContainer.className = 'sliderContainer';\n        this.slider.style.left = 0;\n        this.block.style.left = 0;\n        this.sliderMask.style.width = 0;\n        this.clean();\n        this.img.setSrc(getRandomImgSrc())\n    }\n}\n\nwindow.jigsaw = {\n    init: function (opts) {\n        let $jigsaw = new jigsaw(opts);\n        $jigsaw.init();\n        return $jigsaw;\n    }\n};\n\n"]}]}