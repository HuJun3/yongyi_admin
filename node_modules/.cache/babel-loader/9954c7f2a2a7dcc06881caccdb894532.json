{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js!/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/kefu/mobile/chat_list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/kefu/mobile/chat_list.vue","mtime":1610680940000},{"path":"/Users/hujun/Downloads/永益科技后端/.babelrc","mtime":1610587842000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvaHVqdW4vRG93bmxvYWRzL1x1NkMzOFx1NzZDQVx1NzlEMVx1NjI4MFx1NTQwRVx1N0FFRi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMi9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB1dGlsIGZyb20gJ0AvbGlicy91dGlsJzsKaW1wb3J0IHsgU29ja2V0IH0gZnJvbSAnQC9saWJzL3NvY2tldCc7CmltcG9ydCB7IHJlY29yZCB9IGZyb20gJ0AvYXBpL2tlZnUuanMnOwppbXBvcnQgeyBzZXJ2aWNlSW5mbyB9IGZyb20gJ0AvYXBpL2tlZnVfbW9iaWxlJzsKaW1wb3J0IHsgSGFwcHlTY3JvbGwgfSBmcm9tICd2dWUtaGFwcHktc2Nyb2xsJzsKaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgZ2V0Q29va2llcyB9IGZyb20gJ0AvbGlicy91dGlsJzsKaW1wb3J0IGVtcHR5IGZyb20gIi4uL2NvbXBvbmVudHMvZW1wdHkiOwoKdmFyIG1wMyA9IHJlcXVpcmUoJ0AvYXNzZXRzL3ZpZGVvL25vdGljZS5tcDMnKTsKCnZhciBtcDMgPSBuZXcgQXVkaW8obXAzKTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJjaGF0X2xpc3QudnVlIiwKICBjb21wb25lbnRzOiB7CiAgICBIYXBweVNjcm9sbDogSGFwcHlTY3JvbGwsCiAgICBlbXB0eTogZW1wdHkKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvcHM6IHsKICAgICAgICB2dWVzY3JvbGw6IHsKICAgICAgICAgIG1vZGU6ICdzbGlkZScsCiAgICAgICAgICBlbmFibGU6IGZhbHNlLAogICAgICAgICAgdGlwczogewogICAgICAgICAgICBkZWFjdGl2ZTogJ1B1c2ggdG8gTG9hZCcsCiAgICAgICAgICAgIGFjdGl2ZTogJ1JlbGVhc2UgdG8gTG9hZCcsCiAgICAgICAgICAgIHN0YXJ0OiAnTG9hZGluZy4uLicsCiAgICAgICAgICAgIGJlZm9yZURlYWN0aXZlOiAnTG9hZCBTdWNjZXNzZnVsbHkhJwogICAgICAgICAgfSwKICAgICAgICAgIGF1dG86IGZhbHNlLAogICAgICAgICAgYXV0b0xvYWREaXN0YW5jZTogMCwKICAgICAgICAgIHB1bGxSZWZyZXNoOiB7CiAgICAgICAgICAgIGVuYWJsZTogZmFsc2UKICAgICAgICAgIH0sCiAgICAgICAgICBwdXNoTG9hZDogewogICAgICAgICAgICBlbmFibGU6IHRydWUsCiAgICAgICAgICAgIGF1dG86IHRydWUsCiAgICAgICAgICAgIGF1dG9Mb2FkRGlzdGFuY2U6IDEwCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBiYXI6IHsKICAgICAgICAgIGJhY2tncm91bmQ6ICcjMzkzMjMyJywKICAgICAgICAgIG9wYWNpdHk6ICcuNScsCiAgICAgICAgICBzaXplOiAnMnB4JwogICAgICAgIH0KICAgICAgfSwKICAgICAgbGlzdDogW10sCiAgICAgIHBhZ2U6IDEsCiAgICAgIGxpbWl0OiAxMCwKICAgICAgaXNTY3JvbGw6IHRydWUsCiAgICAgIHNlYXJjaFR4dDogJycsCiAgICAgIGlzT3BlbjogdHJ1ZSwKICAgICAga2VmdUluZm86IHt9LAogICAgICBpc09uTGluZTogZmFsc2UsCiAgICAgIHRhYkN1cjogMCwKICAgICAgdGFiTGlzdDogW3sKICAgICAgICBrZXk6IDAsCiAgICAgICAgdGl0bGU6ICfnlKjmiLfliJfooagnCiAgICAgIH0sIHsKICAgICAgICBrZXk6IDEsCiAgICAgICAgdGl0bGU6ICfmuLjlrqLliJfooagnCiAgICAgIH1dLAogICAgICB3c0xvZ2luOiBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oIndzTG9naW4iKSkKICAgIH07CiAgfSwKICBmaWx0ZXJzOiB7CiAgICB0b0RheTogZnVuY3Rpb24gdG9EYXkodmFsdWUpIHsKICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuICcnOwogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7IC8v5pe26Ze05oiz5Li6MTDkvY3pnIAqMTAwMO+8jOaXtumXtOaIs+S4ujEz5L2N55qE6K+d5LiN6ZyA5LmYMTAwMAoKICAgICAgdmFyIFkgPSBkYXRlLmdldEZ1bGxZZWFyKCkgKyAnLSc7CiAgICAgIHZhciBNID0gKGRhdGUuZ2V0TW9udGgoKSArIDEgPCAxMCA/ICcwJyArIChkYXRlLmdldE1vbnRoKCkgKyAxKSA6IGRhdGUuZ2V0TW9udGgoKSArIDEpICsgJy0nOwogICAgICB2YXIgRCA9IChkYXRlLmdldERhdGUoKSA8IDEwID8gJzAnICsgZGF0ZS5nZXREYXRlKCkgOiBkYXRlLmdldERhdGUoKSkgKyAnICc7CiAgICAgIHZhciBoID0gKGRhdGUuZ2V0SG91cnMoKSA8IDEwID8gJzAnICsgZGF0ZS5nZXRIb3VycygpIDogZGF0ZS5nZXRIb3VycygpKSArICc6JzsKICAgICAgdmFyIG0gPSBkYXRlLmdldE1pbnV0ZXMoKSA8IDEwID8gJzAnICsgZGF0ZS5nZXRNaW51dGVzKCkgOiBkYXRlLmdldE1pbnV0ZXMoKTsKICAgICAgdmFyIHMgPSBkYXRlLmdldFNlY29uZHMoKSA8IDEwID8gJzAnICsgZGF0ZS5nZXRTZWNvbmRzKCkgOiBkYXRlLmdldFNlY29uZHMoKTsKICAgICAgdmFsdWUgPSBNICsgRCArIGggKyBtOwogICAgICByZXR1cm4gdmFsdWU7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgUHJvbWlzZS5hbGwoW3RoaXMuZ2V0S2VmdUluZm8oKSwgdGhpcy5nZXRMaXN0KCldKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciB0aGF0ID0gdGhpczsgLy8g55uR5ZCs6aG16Z2i5Yi35pawCgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oIndzTG9naW4iLCBmYWxzZSk7CiAgICB9KTsgLy8g6I635Y+W5piv5ZCm55m75b2V55qEa2V5CgogICAgdGhpcy53c0xvZ2luID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ3c0xvZ2luIikpOwogICAgdmFyIHRva2VuID0gZ2V0Q29va2llcygia2VmdV90b2tlbiIpOwogICAgU29ja2V0LnRoZW4oZnVuY3Rpb24gKHdzKSB7CiAgICAgIGlmICghdGhhdC53c0xvZ2luICYmIHRva2VuKSB7CiAgICAgICAgd3Muc2VuZCh7CiAgICAgICAgICB0eXBlOiAna2VmdV9sb2dpbicsCiAgICAgICAgICBkYXRhOiBnZXRDb29raWVzKCdrZWZ1X3Rva2VuJykKICAgICAgICB9KTsKICAgICAgfSAvL+eUqOaIt+acquivu+a2iOaBr+adoeaVsOabtOaUuQoKCiAgICAgIHdzLiRvbigndHJhbnNmZXInLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIGlmIChkYXRhLnJlY29yZWQuaWQpIHsKICAgICAgICAgIHZhciBzdGF0dXMgPSBmYWxzZTsKCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90aGlzLmxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGRhdGEucmVjb3JlZC5pZCA9PSBfdGhpcy5saXN0W2ldLmlkKSB7CiAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTsKCiAgICAgICAgICAgICAgX3RoaXMuJHNldChfdGhpcy5saXN0LCBpLCBkYXRhLnJlY29yZWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFzdGF0dXMpIHsKICAgICAgICAgICAgX3RoaXMubGlzdC51bnNoaWZ0KGRhdGEucmVjb3JlZCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgd3MuJG9uKCdtc3NhZ2VfbnVtJywgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBpZiAoZGF0YS5udW0gPiAwKSB7CiAgICAgICAgICBtcDMucGxheSgpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGRhdGEucmVjb3JlZC5pZCkgewogICAgICAgICAgdmFyIHN0YXR1cyA9IGZhbHNlOyAvLyBmb3IobGV0IGkgPTAgO2k8dGhpcy5saXN0Lmxlbmd0aDtpKyspewogICAgICAgICAgLy8gICAgIGlmKGRhdGEucmVjb3JlZC5pZCA9PSB0aGlzLmxpc3RbaV0uaWQpewogICAgICAgICAgLy8gICAgICAgICBzdGF0dXMgPSB0cnVlCiAgICAgICAgICAvLyAgICAgICAgIHRoaXMuJHNldCh0aGlzLmxpc3QsIGksIGRhdGEucmVjb3JlZCkKICAgICAgICAgIC8vICAgICAgICAgYnJlYWsKICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAvLyB9CgogICAgICAgICAgdGhhdC5saXN0LmZvckVhY2goZnVuY3Rpb24gKGVsLCBpbmRleCwgYXJyKSB7CiAgICAgICAgICAgIGlmIChkYXRhLnJlY29yZWQuaWQgPT0gZWwuaWQpIHsKICAgICAgICAgICAgICBzdGF0dXMgPSB0cnVlOwoKICAgICAgICAgICAgICBpZiAoZGF0YS5yZWNvcmVkLmlzX3RvdXJpc3QgPT0gdGhhdC50YWJDdXIpIHsKICAgICAgICAgICAgICAgIHZhciBvbGRWYWwgPSBkYXRhLnJlY29yZWQ7CiAgICAgICAgICAgICAgICBhcnIuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgICAgICAgIGFyci51bnNoaWZ0KG9sZFZhbCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoIXN0YXR1cykgewogICAgICAgICAgICBpZiAoZGF0YS5yZWNvcmVkLmlzX3RvdXJpc3QgPT0gX3RoaXMudGFiQ3VyKSBfdGhpcy5saXN0LnVuc2hpZnQoZGF0YS5yZWNvcmVkKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZGF0YS5yZWNvcmVkLmlzX3RvdXJpc3QgIT0gX3RoaXMudGFiQ3VyICYmIGRhdGEucmVjb3JlZC5pZCkgewogICAgICAgICAgICBfdGhpcy4kTm90aWNlLmluZm8oewogICAgICAgICAgICAgIHRpdGxlOiBfdGhpcy50YWJDdXIgPyAn55So5oi35Y+R5p2l5raI5oGv5ZWm77yBJyA6ICfmuLjlrqLlj5HmnaXmtojmga/llabvvIEnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7IC8vIHdz55m75b2V5oiQ5YqfCgogICAgICB3cy4kb24oInN1Y2Nlc3MiLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oIndzTG9naW4iLCB0cnVlKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7fSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEFjdGlvbnMoJ2tlZnUvJywgWydsb2dvdXQnLCAnbG9nb3V0S2VmdSddKSksIHt9LCB7CiAgICAvLyDliJfooajliIfmjaIKICAgIGNoYW5nZUNsYXNzOiBmdW5jdGlvbiBjaGFuZ2VDbGFzcyhpdGVtKSB7CiAgICAgIGlmICh0aGlzLnRhYkN1ciA9PSBpdGVtLmtleSkgcmV0dXJuOwogICAgICB0aGlzLnRhYkN1ciA9IGl0ZW0ua2V5OwogICAgICB0aGlzLnBhZ2UgPSAxOwogICAgICB0aGlzLmxpc3QgPSBbXTsKICAgICAgdGhpcy5pc1Njcm9sbCA9IHRydWU7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIC8vIOWuouacjeS4iuS4i+e6vwogICAgY2hhbmdPbmxpbmU6IGZ1bmN0aW9uIGNoYW5nT25saW5lKGtleSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMua2VmdUluZm8ub25saW5lID0ga2V5OwogICAgICB0aGlzLmlzT25MaW5lID0gZmFsc2U7CiAgICAgIFNvY2tldC50aGVuKGZ1bmN0aW9uICh3cykgewogICAgICAgIHZhciB0aGF0ID0gX3RoaXMyOwogICAgICAgIHdzLnNlbmQoewogICAgICAgICAgdHlwZTogJ29ubGluZScsCiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIG9ubGluZToga2V5CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWuouacjeivpue7huS/oeaBrwogICAgZ2V0S2VmdUluZm86IGZ1bmN0aW9uIGdldEtlZnVJbmZvKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHNlcnZpY2VJbmZvKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMzLmtlZnVJbmZvID0gcmVzLmRhdGE7CiAgICAgICAgd2luZG93LmRvY3VtZW50LnRpdGxlID0gIiIuY29uY2F0KHJlcy5kYXRhLnNpdGVfbmFtZSwgIiAtIFx1NkQ4OFx1NjA2Rlx1NTIxN1x1ODg2OCIpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5pc1Njcm9sbCkgcmV0dXJuOwogICAgICByZWNvcmQoewogICAgICAgIG5pY2tuYW1lOiB0aGlzLnNlYXJjaFR4dCwKICAgICAgICBwYWdlOiB0aGlzLnBhZ2UsCiAgICAgICAgbGltaXQ6IHRoaXMubGltaXQsCiAgICAgICAgaXNfdG91cmlzdDogdGhpcy50YWJDdXIKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXM0LmlzU2Nyb2xsID0gcmVzLmRhdGEubGVuZ3RoID49IF90aGlzNC5saW1pdDsKICAgICAgICBfdGhpczQubGlzdCA9IF90aGlzNC5saXN0LmNvbmNhdChyZXMuZGF0YSk7CiAgICAgICAgX3RoaXM0LnBhZ2UrKzsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzNC4kcmVmcy52cy5yZWZyZXNoKCk7CiAgICAgICAgfSwgMTAwKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5a6i5pyN6YCA5Ye6CiAgICBvdXRMb2dpbjogZnVuY3Rpb24gb3V0TG9naW4oKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdGhpcy4kTW9kYWwuY29uZmlybSh7CiAgICAgICAgdGl0bGU6ICfpgIDlh7rnmbvlvZXnoa7orqQnLAogICAgICAgIGNvbnRlbnQ6ICfmgqjnoa7lrprpgIDlh7rnmbvlvZXlvZPliY3otKbmiLflkJfvvJ/miZPlvIDnmoTmoIfnrb7pobXlkozkuKrkurrorr7nva7lsIbkvJrkv53lrZjjgIInLAogICAgICAgIG9uT2s6IGZ1bmN0aW9uIG9uT2soKSB7CiAgICAgICAgICBzZWxmLmxvZ291dEtlZnUoewogICAgICAgICAgICBjb25maXJtOiBmYWxzZSwKICAgICAgICAgICAgdm06IHNlbGYKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgb25DYW5jZWw6IGZ1bmN0aW9uIG9uQ2FuY2VsKCkge30KICAgICAgfSk7CiAgICB9LAogICAgLy8g5pCc57SiCiAgICBiaW5kU2VhcmNoOiBmdW5jdGlvbiBiaW5kU2VhcmNoKGUpIHsKICAgICAgdGhpcy5wYWdlID0gMTsKICAgICAgdGhpcy5saXN0ID0gW107CiAgICAgIHRoaXMuaXNTY3JvbGwgPSB0cnVlOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICAvLyDov5vlhaXlr7nor50KICAgIGdvUGFnZTogZnVuY3Rpb24gZ29QYWdlKGl0ZW0pIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICdtb2JpbGVfY2hhdCcsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIHRvVWlkOiBpdGVtLnRvX3VpZCwKICAgICAgICAgIG5pY2tuYW1lOiBpdGVtLm5pY2tuYW1lLAogICAgICAgICAgaXNfdG91cmlzdDogdGhpcy50YWJDdXIKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUJlZm9yZURlYWN0aXZhdGU6IGZ1bmN0aW9uIGhhbmRsZUJlZm9yZURlYWN0aXZhdGUodm0sIHJlZnJlc2hEb20sIGRvbmUpIHsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgIGRvbmUoKTsKICAgIH0KICB9KQp9Ow=="},{"version":3,"sources":["chat_list.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"chat-list\">\n        <div class=\"head-box\">\n            <div class=\"hd\">\n                <div class=\"left-wrapper\">\n                    <img v-lazy=\"kefuInfo.avatar\">\n                    <div class=\"info\" @click=\"isOnLine = !isOnLine\">\n                        <div>{{kefuInfo.nickname}}</div>\n                        <div class=\"status\">\n                            <span class=\"doc\" :class=\"{off:!kefuInfo.online}\"></span>\n                            <span>{{kefuInfo.online?'在线':'离线'}}</span>\n                        </div>\n                    </div>\n                    <div class=\"down-wrapper\" v-show=\"isOnLine\">\n                        <div class=\"item\" @click=\"changOnline(1)\">\n                            <span class=\"dot green\"></span>在线\n                            <span class=\"iconfont iconduihao\" v-if=\"kefuInfo.online\"></span>\n                        </div>\n                        <div class=\"item\" @click=\"changOnline(0)\">\n                            <span class=\"dot\"></span>离线\n                            <span class=\"iconfont iconduihao\" v-if=\"!kefuInfo.online\"></span>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"right-wrapper\" @click=\"outLogin\">\n                    <div class=\"icon-box\"><span class=\"iconfont icontuichu\"></span></div>\n\n                    <div style=\"margin-left: 5px;\">退出登录</div>\n                </div>\n            </div>\n            <div class=\"tab-box\">\n                <div class=\"tab-item\" :class=\"{on:tabCur == item.key}\" v-for=\"(item,index) in tabList\" @click=\"changeClass(item)\">{{item.title}}</div>\n            </div>\n            <div class=\"search-box\">\n                <Input v-model=\"searchTxt\" placeholder=\"搜索用户名称\" @on-enter=\"bindSearch\"/>\n            </div>\n        </div>\n        <div class=\"list-box\" v-if=\"list.length>0\">\n            <vue-scroll ref=\"vs\" :ops=\"ops\"\n                @load-before-deactivate=\"handleBeforeDeactivate\"\n            >\n                <div class=\"item\" v-for=\"(item,index) in list\" :key=\"index\" @click=\"goPage(item)\">\n                    <div class=\"left-wrapper\">\n                        <div class=\"img-box\">\n                            <img v-lazy=\"item.avatar\">\n                            <div class=\"online\" :class=\"{on:item.online}\"></div>\n                        </div>\n                        <div class=\"info\">\n                            <div class=\"title\">\n                                <span class=\"line1\">{{item.nickname}}</span>\n                                <template v-if=\"item.type == 2\">\n                                    <span class=\"label\">小程序</span>\n                                </template>\n                                <template v-if=\"item.type == 3\">\n                                    <span class=\"label h5\">H5</span>\n                                </template>\n                                <template v-if=\"item.type == 1\">\n                                    <span class=\"label wx\">公众号</span>\n                                </template>\n                                <template v-if=\"item.type == 0\">\n                                    <span class=\"label pc\">PC端</span>\n                                </template>\n                            </div>\n                            <div class=\"msg line1\" v-if=\"item.message_type == 1\">{{item.message}}</div>\n                            <div class=\"msg\" v-if=\"item.message_type == 2\">[表情]</div>\n                            <div class=\"msg\" v-if=\"item.message_type == 3\">[图片]</div>\n                            <div class=\"msg\" v-if=\"item.message_type == 5\">[商品]</div>\n                            <div class=\"msg\" v-if=\"item.message_type == 6\">[订单]</div>\n                        </div>\n                    </div>\n                    <div class=\"right-wrapper\">\n                        <div class=\"time\">{{item.update_time | toDay}}</div>\n                        <span class=\"num\" v-if=\"item.mssage_num>0\">{{item.mssage_num}}</span>\n                    </div>\n                </div>\n                <div class=\"slot-load\" slot=\"load-deactive\"></div>\n                <div class=\"slot-load\" slot=\"load-active\">下滑加载更多</div>\n\n            </vue-scroll>\n        </div>\n        <empty v-else status=\"3\" msg=\"暂无用户列表\"></empty>\n    </div>\n</template>\n\n<script>\n    import util from '@/libs/util';\n    import {Socket} from '@/libs/socket';\n    import {record} from '@/api/kefu.js'\n    import {serviceInfo} from '@/api/kefu_mobile'\n    import {HappyScroll} from 'vue-happy-scroll'\n    import { mapState, mapActions } from 'vuex';\n    import {getCookies} from '@/libs/util'\n    import empty from \"../components/empty\";\n    var mp3 = require('@/assets/video/notice.mp3');\n    var mp3 = new Audio(mp3);\n    export default {\n        name: \"chat_list.vue\",\n        components: {\n            HappyScroll,\n            empty\n        },\n        data() {\n            return {\n                ops:{\n                    vuescroll:{\n                        mode: 'slide',\n                        enable: false,\n                        tips: {\n                            deactive: 'Push to Load',\n                            active: 'Release to Load',\n                            start: 'Loading...',\n                            beforeDeactive: 'Load Successfully!'\n                        },\n                        auto: false,\n                        autoLoadDistance: 0,\n                        pullRefresh: {\n                            enable: false\n                        },\n                        pushLoad: {\n                            enable: true,\n                            auto: true,\n                            autoLoadDistance: 10\n                        }\n                    },\n                    bar:{\n                      background:'#393232',\n                      opacity:'.5',\n                      size:'2px'\n                    }\n                },\n                list: [],\n                page: 1,\n                limit: 10,\n                isScroll: true,\n                searchTxt: '',\n                isOpen: true,\n                kefuInfo: {},\n                isOnLine: false,\n                tabCur:0,\n                tabList:[\n                    {\n                        key:0,\n                        title:'用户列表'\n                    },\n                    {\n                        key:1,\n                        title:'游客列表'\n                    }\n                ],\n                wsLogin:JSON.parse(sessionStorage.getItem(\"wsLogin\"))\n            }\n        },\n        filters: {\n            toDay: function (value) {\n                if (!value) return ''\n                var date = new Date();//时间戳为10位需*1000，时间戳为13位的话不需乘1000\n                var Y = date.getFullYear() + '-';\n                var M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n                var D = (date.getDate() < 10 ? '0' + date.getDate() : date.getDate()) + ' ';\n                var h = (date.getHours() < 10 ? '0' + date.getHours() : date.getHours()) + ':';\n                var m = (date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes());\n                var s = (date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds());\n\n                value = M + D + h + m;\n                return value;\n            }\n        },\n        created() {\n            Promise.all([this.getKefuInfo(), this.getList()]);\n        },\n        mounted() {\n            let that = this;\n            // 监听页面刷新\n            window.addEventListener('beforeunload', e => {\n                sessionStorage.setItem(\"wsLogin\", false);\n            });\n            // 获取是否登录的key\n            this.wsLogin = JSON.parse(sessionStorage.getItem(\"wsLogin\"));\n            let token = getCookies(\"kefu_token\")\n            Socket.then(ws=>{\n                if(!that.wsLogin && token){\n                    ws.send({\n                        type: 'kefu_login',\n                        data: getCookies('kefu_token')\n                    })\n                }\n                //用户未读消息条数更改\n                ws.$on('transfer', data => {\n                    if(data.recored.id){\n                        let status = false\n                        for(let i =0 ;i<this.list.length;i++){\n                            if(data.recored.id == this.list[i].id){\n                                status = true\n                                this.$set(this.list, i, data.recored)\n                            }\n                        }\n                        if(!status){\n                            this.list.unshift(data.recored)\n                        }\n                    }\n\n                })\n                ws.$on('mssage_num', data => {\n                    if(data.num>0){\n                        mp3.play();\n                    }\n                    if(data.recored.id){\n\n                        let status = false\n                        // for(let i =0 ;i<this.list.length;i++){\n                        //     if(data.recored.id == this.list[i].id){\n                        //         status = true\n                        //         this.$set(this.list, i, data.recored)\n                        //         break\n                        //     }\n                        // }\n                        that.list.forEach((el,index,arr)=>{\n                            if(data.recored.id == el.id){\n                                status = true\n                                if(data.recored.is_tourist == that.tabCur){\n                                    let oldVal = data.recored\n                                    arr.splice(index,1)\n                                    arr.unshift(oldVal)\n                                }\n\n                            }\n                        })\n                        if(!status){\n                            if(data.recored.is_tourist == this.tabCur)\n                                this.list.unshift(data.recored)\n                        }\n                        if(data.recored.is_tourist != this.tabCur && data.recored.id){\n                            this.$Notice.info({\n                                title: this.tabCur?'用户发来消息啦！':'游客发来消息啦！',\n                            });\n                        }\n                    }\n\n                })\n                // ws登录成功\n                ws.$on(\"success\",data=>{\n                    sessionStorage.setItem(\"wsLogin\", true);\n                })\n            });\n\n        },\n        beforeDestroy() {\n        },\n        methods: {\n            ...mapActions('kefu/', [\n                'logout',\n                'logoutKefu'\n            ]),\n            // 列表切换\n            changeClass(item){\n                if(this.tabCur == item.key) return\n                this.tabCur = item.key\n                this.page = 1\n                this.list = []\n                this.isScroll = true\n                this.getList()\n            },\n            // 客服上下线\n            changOnline(key){\n                this.kefuInfo.online = key\n                this.isOnLine = false\n                Socket.then(ws=>{\n                    let that = this;\n                    ws.send({\n                        type: 'online',\n                        data: {\n                            online:key\n                        },\n                    })\n                });\n            },\n            // 客服详细信息\n            getKefuInfo() {\n                serviceInfo().then(res => {\n                    this.kefuInfo = res.data\n                    window.document.title = `${res.data.site_name} - 消息列表`\n                })\n            },\n            getList() {\n                if (!this.isScroll) return\n                record({\n                    nickname: this.searchTxt,\n                    page: this.page,\n                    limit: this.limit,\n                    is_tourist: this.tabCur\n                }).then(res => {\n                    this.isScroll = res.data.length >= this.limit\n                    this.list = this.list.concat(res.data)\n                    this.page++\n                    setTimeout(() => {\n                        this.$refs.vs.refresh();\n                    }, 100)\n                })\n            },\n            // 客服退出\n            outLogin() {\n                let self = this\n                this.$Modal.confirm({\n                    title: '退出登录确认',\n                    content: '您确定退出登录当前账户吗？打开的标签页和个人设置将会保存。',\n                    onOk: () => {\n                        self.logoutKefu({\n                            confirm: false,\n                            vm: self\n                        });\n                    },\n                    onCancel: () => {\n                    }\n                });\n            },\n            // 搜索\n            bindSearch(e) {\n                this.page = 1\n                this.list = []\n                this.isScroll = true\n                this.getList()\n            },\n            // 进入对话\n            goPage(item){\n                this.$router.push({\n                    path:'mobile_chat',\n                    query:{\n                        toUid:item.to_uid,\n                        nickname:item.nickname,\n                        is_tourist: this.tabCur\n                    }\n                })\n            },\n            handleBeforeDeactivate(vm, refreshDom, done) {\n                this.getList();\n                done();\n            },\n\n\n\n\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n    .chat-list {\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        height: 100%;\n        padding-bottom 0.15rem;\n        background: #fff;\n\n        .head-box {\n            .hd {\n                position: relative;\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                height: 1rem;\n                padding: 0 .3rem;\n                background: linear-gradient(90deg, #3875EA 0%, #1890FC 100%);\n\n                .left-wrapper {\n                    position: relative;\n                    display: flex;\n                    align-items: center;\n                    color: #fff;\n                    font-size: .26rem;\n\n                    img {\n                        width: .58rem;\n                        height: .58rem;\n                        border-radius: 50%;\n                    }\n\n                    .info {\n                        margin-left: .12rem;\n\n                        .status {\n                            display: flex;\n                            align-items: center;\n                            font-size: .2rem;\n\n                            .doc {\n                                width: .14rem;\n                                height: .14rem;\n                                margin-right: .1rem;\n                                background-color: #27F2CB;\n                                border-radius: 50%;\n                                margin-top: .04rem;\n\n                                &.off {\n                                    background: #919191;\n                                }\n                            }\n                        }\n                    }\n\n                    .down-wrapper {\n                        z-index: 50;\n                        position: absolute;\n                        left: 0;\n                        bottom: -1.9rem;\n                        width: 2.14rem;\n                        background: #434343;\n                        border-radius: .1rem;\n\n                        .item {\n                            display: flex;\n                            align-items: center;\n                            height: .8rem;\n                            padding-left: .3rem;\n                            border-bottom: 1px solid rgba(240, 241, 242, 0.16);\n                            font-size: .28rem;\n\n                            &:last-child {\n                                border-bottom: none;\n                            }\n\n                            .dot {\n                                width: .12rem;\n                                height: .12rem;\n                                margin-right: .16rem;\n                                border-radius: 50%;\n                                background: linear-gradient(180deg, #BCBCBC 0%, #919191 100%);\n\n                                &.green {\n                                    background: linear-gradient(143deg, #27F2CB 0%, #14E3B4 100%);\n                                }\n                            }\n\n                            .iconfont {\n                                margin-left: .36rem;\n                                color: #B9B9B9;\n                                font-size: .18rem;\n                            }\n                        }\n                    }\n                }\n\n                .right-wrapper {\n                    display: flex;\n                    align-items: center;\n                    color: #fff;\n                    font-size: .24rem;\n                }\n            }\n\n            .search-box {\n                padding: 0 .3rem .2rem;\n                border-bottom: 1px solid #ECEFF8;\n\n\n                >>> .ivu-input {\n                    display: block;\n                    width: 100%;\n                    height: .68rem;\n                    background #F5F6F9\n                    border-radius: .39rem;\n                    box-sizing: border-box;\n                    font-size: .28rem;\n                    border-radius: .39rem;\n                    text-align center\n                }\n                >>> .ivu-input, .ivu-input:hover, .ivu-input:focus {\n                    border transparent\n                    box-shadow: none;\n                }\n            }\n            .tab-box{\n                display flex\n                padding .2rem 0\n\n                .tab-item{\n                    flex 1\n                    height 100%\n                    line-height .6rem\n                    text-align center\n                    font-size .3rem\n                    &.on{\n                        color #3875ea\n                    }\n                    &:first-child{\n                        border-right 1px solid #ddd\n                    }\n                }\n            }\n        }\n\n        .list-box {\n            flex: 1;\n            overflow hidden\n\n            .item {\n                display: flex;\n                justify-content: space-between;\n                padding: .23rem .3rem;\n                height: 1.5rem;\n\n                .left-wrapper {\n                    display: flex;\n                    align-items: center;\n                    .img-box{\n                        width .96rem\n                        height .96rem\n                        position relative\n                    }\n                    .online{\n                        position absolute\n                        right: 0.1rem;\n                        bottom: 1px;\n                        width .16rem\n                        height .16rem\n                        background: linear-gradient(143deg, #BCBCBC 0%, #919191 100%);\n                        border-radius 50%\n                        border: 1px solid #FFFFFF;\n                        &.on{\n                            background: linear-gradient(143deg, #27F2CB 0%, #14E3B4 100%);\n                        }\n                    }\n                    img {\n                        width: .96rem;\n                        height: .96rem;\n                        border-radius: 50%;\n                    }\n\n                    .info {\n                        margin-left: .2rem;\n                        width: 3.5rem;\n                        height: .96rem;\n                        display: flex;\n                        flex-direction: column;\n                        justify-content: space-between;\n\n                        .title {\n                            display: flex;\n                            align-items: center;\n                            font-size: .3rem;\n\n                            .label {\n                                margin-left: .15rem;\n                                font-size: .2rem;\n                                padding: 0.05rem 0.1rem;\n                                background: rgba(56, 117, 234, 0.14);\n                                color: $kf-theme;\n                                border-radius: 0.04rem;\n\n                                &.h5 {\n                                    background: rgba(255, 162, 0, 0.18);\n                                    color: #D08800;\n                                }\n\n                                &.wx {\n                                    background: rgba(0, 186, 100, 0.14);\n                                    color: #00A219;\n                                }\n\n                                &.pc {\n                                    background: rgba(133, 64, 227, 0.14);\n                                    color: #820ADB;\n                                }\n                            }\n                        }\n\n                        .msg {\n                            font-size: .24rem;\n                            color: #9F9F9F;\n                        }\n                    }\n                }\n\n                .right-wrapper {\n                    height: .96rem;\n                    color: #9F9F9F;\n                    font-size: .22rem;\n                    text-align right\n\n                    .num {\n                        min-width: .12rem;\n                        background-color: #F74C31;\n                        color: #fff;\n                        border-radius: .15rem;\n                        right: 0 rpx;\n                        bottom: 0 rpx;\n                        font-size: .2rem;\n                        padding: 0 0.08rem;\n                    }\n                }\n            }\n        }\n    }\n</style>\n"],"sourceRoot":"src/pages/kefu/mobile"}]}