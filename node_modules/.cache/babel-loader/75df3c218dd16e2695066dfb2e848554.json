{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js!/Users/hujun/Downloads/永益科技后端/src/store/module/kefu.js","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/store/module/kefu.js","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/.babelrc","mtime":1610587842000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2h1anVuL0Rvd25sb2Fkcy9cdTZDMzhcdTc2Q0FcdTc5RDFcdTYyODBcdTU0MEVcdTdBRUYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lLWNvcmVqczIvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IEFjY291bnRMb2dvdXRLZWZ1IH0gZnJvbSAnQC9hcGkva2VmdSc7CmltcG9ydCB7IGdldENvb2tpZXMsIHJlbW92ZUNvb2tpZXMsIHNldENvb2tpZXMgfSBmcm9tICdAL2xpYnMvdXRpbCc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgeyBNb2RhbCB9IGZyb20gJ3ZpZXctZGVzaWduJzsKaW1wb3J0IHsgU29ja2V0IH0gZnJvbSAnQC9saWJzL3NvY2tldCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICBrZWZ1SW5mbzogbnVsbAogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBzZXRJbmZvOiBmdW5jdGlvbiBzZXRJbmZvKHN0YXRlLCB2YWwpIHsKICAgICAgc3RhdGUua2VmdUluZm8gPSB2YWw7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDpgIDlh7rnmbvlvZUKICAgICAqICovCiAgICBsb2dvdXRLZWZ1OiBmdW5jdGlvbiBsb2dvdXRLZWZ1KF9yZWYpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0LAogICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoOwoKICAgICAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fSwKICAgICAgICAgIF9yZWYyJGNvbmZpcm0gPSBfcmVmMi5jb25maXJtLAogICAgICAgICAgY29uZmlybSA9IF9yZWYyJGNvbmZpcm0gPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjIkY29uZmlybSwKICAgICAgICAgIHZtID0gX3JlZjIudm07CgogICAgICBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgICAgcmV0dXJuIF9sb2dvdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gX2xvZ291dCgpIHsKICAgICAgICBfbG9nb3V0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBBY2NvdW50TG9nb3V0S2VmdSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIFNvY2tldC50aGVuKGZ1bmN0aW9uICh3cykgewogICAgICAgICAgICAgICAgICAgICAgd3Muc2VuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdsb2dvdXQnLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdWlkOiBnZXRDb29raWVzKCdrZWZ1X3V1aWQnKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsgLy8gbG9jYWxTdG9yYWdlLmNsZWFyKCk7CgogICAgICAgICAgICAgICAgICAgIHJlbW92ZUNvb2tpZXMoJ2tlZnVfdG9rZW4nKTsKICAgICAgICAgICAgICAgICAgICByZW1vdmVDb29raWVzKCdrZWZ1X2V4cGlyZXNfdGltZScpOwogICAgICAgICAgICAgICAgICAgIHJlbW92ZUNvb2tpZXMoJ2tlZnVJbmZvJyk7CiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ29va2llcygna2VmdV91dWlkJyk7IC8vIOWIoOmZpGxvY2FsU3RvcmFnZQogICAgICAgICAgICAgICAgICAgIC8vIOa4heepuiB2dWV4IOeUqOaIt+S/oeaBrwogICAgICAgICAgICAgICAgICAgIC8vIOi3s+i9rOi3r+eUsQoKICAgICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICBwYXRoOiAnL2tlZnUnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgfSkpOwogICAgICAgIHJldHVybiBfbG9nb3V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIGxvZ291dCgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/hujun/Downloads/永益科技后端/src/store/module/kefu.js"],"names":["AccountLogoutKefu","getCookies","removeCookies","setCookies","router","Modal","Socket","namespaced","state","kefuInfo","mutations","setInfo","val","actions","logoutKefu","commit","dispatch","confirm","vm","logout","then","ws","send","type","data","uid","push","path","catch","res","console","log"],"mappings":";;AAAA,SAASA,iBAAT,QAAkC,YAAlC;AACA,SAASC,UAAT,EAAqBC,aAArB,EAAmCC,UAAnC,QAAqD,aAArD;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,KAAT,QAAsB,aAAtB;AACA,SAAQC,MAAR,QAAqB,eAArB;AACA,eAAe;AACXC,EAAAA,UAAU,EAAE,IADD;AAEXC,EAAAA,KAAK,EAAE;AACHC,IAAAA,QAAQ,EAAE;AADP,GAFI;AAKXC,EAAAA,SAAS,EAAE;AACPC,IAAAA,OADO,mBACEH,KADF,EACSI,GADT,EACc;AACjBJ,MAAAA,KAAK,CAACC,QAAN,GAAiBG,GAAjB;AACH;AAHM,GALA;AAUXC,EAAAA,OAAO,EAAE;AACL;AACR;AACA;AACQC,IAAAA,UAJK,4BAI2D;AAAA,UAAlDC,MAAkD,QAAlDA,MAAkD;AAAA,UAA1CC,QAA0C,QAA1CA,QAA0C;;AAAA,sFAAJ,EAAI;AAAA,gCAA5BC,OAA4B;AAAA,UAA5BA,OAA4B,8BAAlB,KAAkB;AAAA,UAAXC,EAAW,SAAXA,EAAW;;AAAA,eAC7CC,MAD6C;AAAA;AAAA;;AAAA;AAAA,0EAC5D;AAAA;AAAA;AAAA;AAAA;AACInB,kBAAAA,iBAAiB,GAAGoB,IAApB,CAAyB,YAAM;AAC3Bd,oBAAAA,MAAM,CAACc,IAAP,CAAY,UAAAC,EAAE,EAAE;AACZA,sBAAAA,EAAE,CAACC,IAAH,CAAQ;AACJC,wBAAAA,IAAI,EAAE,QADF;AAEJC,wBAAAA,IAAI,EAAE;AAAEC,0BAAAA,GAAG,EAACxB,UAAU,CAAC,WAAD;AAAhB;AAFF,uBAAR;AAIH,qBALD,EAD2B,CAO3B;;AACAC,oBAAAA,aAAa,CAAC,YAAD,CAAb;AACAA,oBAAAA,aAAa,CAAC,mBAAD,CAAb;AACAA,oBAAAA,aAAa,CAAC,UAAD,CAAb;AACAA,oBAAAA,aAAa,CAAC,WAAD,CAAb,CAX2B,CAY3B;AACA;AACA;;AACAE,oBAAAA,MAAM,CAACsB,IAAP,CAAY;AACRC,sBAAAA,IAAI,EAAE;AADE,qBAAZ;AAGH,mBAlBD,EAkBGC,KAlBH,CAkBS,UAAAC,GAAG,EAAI;AACZC,oBAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,mBApBD;;AADJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAD4D;AAAA;AAAA;;AAwB5DV,MAAAA,MAAM;AACT;AA7BI;AAVE,CAAf","sourcesContent":["import { AccountLogoutKefu } from '@/api/kefu';\nimport { getCookies, removeCookies,setCookies } from '@/libs/util'\nimport router from '@/router';\nimport { Modal } from 'view-design';\nimport {Socket} from '@/libs/socket';\nexport default {\n    namespaced: true,\n    state: {\n        kefuInfo: null,\n    },\n    mutations: {\n        setInfo (state, val) {\n            state.kefuInfo = val\n        },\n    },\n    actions: {\n        /**\n         * @description 退出登录\n         * */\n        logoutKefu ({ commit, dispatch }, { confirm = false, vm } = {}) {\n            async function logout () {\n                AccountLogoutKefu().then(() => {\n                    Socket.then(ws=>{\n                        ws.send({\n                            type: 'logout',\n                            data: { uid:getCookies('kefu_uuid') }\n                        })\n                    });\n                    // localStorage.clear();\n                    removeCookies('kefu_token')\n                    removeCookies('kefu_expires_time')\n                    removeCookies('kefuInfo')\n                    removeCookies('kefu_uuid')\n                    // 删除localStorage\n                    // 清空 vuex 用户信息\n                    // 跳转路由\n                    router.push({\n                        path: '/kefu'\n                    });\n                }).catch(res => {\n                    console.log(res)\n                })\n            }\n            logout();\n        },\n    }\n}\n"]}]}