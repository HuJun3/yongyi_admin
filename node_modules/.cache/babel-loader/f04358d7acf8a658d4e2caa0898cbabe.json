{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js!/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hujun/Downloads/永益科技后端/src/pages/kefu/appChat/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/pages/kefu/appChat/index.vue","mtime":1619614782000},{"path":"/Users/hujun/Downloads/永益科技后端/.babelrc","mtime":1610587842000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvaHVqdW4vRG93bmxvYWRzL1x1NkMzOFx1NzZDQVx1NzlEMVx1NjI4MFx1NTQwRVx1N0FFRi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMi9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5yZWdleHAuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYucmVnZXhwLnJlcGxhY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICJlbW9qaS1hd2Vzb21lL2Rpc3QvY3NzL2dvb2dsZS5taW4uY3NzIjsKaW1wb3J0IGVtb2ppTGlzdCBmcm9tICJAL3V0aWxzL2Vtb2ppIjsKaW1wb3J0IHsgU29ja2V0IH0gZnJvbSAiQC9saWJzL3NvY2tldCI7CmltcG9ydCBTZXR0aW5nIGZyb20gIkAvc2V0dGluZyI7CmltcG9ydCBDb29raWVzIGZyb20gJ2pzLWNvb2tpZSc7CmltcG9ydCB7IGNoYXRMaXN0QXBpLCBzZXJ2aWNlTGlzdEFwaSwgZ2V0QWR2QXBpLCBzZXJ2aWNlTGlzdCwgZ2V0T3JkZXJBcGksIHByb2R1Y3RBcGkgfSBmcm9tICdAL2FwaS9rZWZ1JzsKaW1wb3J0IGZlZWRCYWNrIGZyb20gIi4vZmVlZGJhY2siOwoKdmFyIGNodW5rID0gZnVuY3Rpb24gY2h1bmsoYXJyLCBudW0pIHsKICBudW0gPSBudW0gKiAxIHx8IDE7CiAgdmFyIHJldCA9IFtdOwogIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpKSB7CiAgICBpZiAoaSAlIG51bSA9PT0gMCkgewogICAgICByZXQucHVzaChbXSk7CiAgICB9CgogICAgcmV0W3JldC5sZW5ndGggLSAxXS5wdXNoKGl0ZW0pOwogIH0pOwogIHJldHVybiByZXQ7Cn07CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNoYXRSb29tIiwKICBhdXRoOiBmYWxzZSwKICBjb21wb25lbnRzOiB7CiAgICBmZWVkQmFjazogZmVlZEJhY2sKICB9LAogIHByb3BzOiB7CiAgICBjaGF0T3B0aW9uczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBzaG93OiBmYWxzZQogICAgICAgIH07CiAgICAgIH0KICAgIH0KICB9LAogIGRpcmVjdGl2ZXM6IHsKICAgIGRyYWc6IHsKICAgICAgaW5zZXJ0ZWQ6IGZ1bmN0aW9uIGluc2VydGVkKGVsKSB7CiAgICAgICAgdmFyIHggPSAwOwogICAgICAgIHZhciB5ID0gMDsKICAgICAgICB2YXIgbCA9IDA7CiAgICAgICAgdmFyIHQgPSAwOwogICAgICAgIHZhciBpc0Rvd24gPSBmYWxzZTsKCiAgICAgICAgZWwub25tb3VzZWRvd24gPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgeCA9IGUuY2xpZW50WDsKICAgICAgICAgIHkgPSBlLmNsaWVudFk7CiAgICAgICAgICBsID0gZWwucGFyZW50Tm9kZS5vZmZzZXRMZWZ0OwogICAgICAgICAgdCA9IGVsLnBhcmVudE5vZGUub2Zmc2V0VG9wOwogICAgICAgICAgaXNEb3duID0gdHJ1ZTsKICAgICAgICAgIGVsLnN0eWxlLmN1cnNvciA9ICJtb3ZlIjsKCiAgICAgICAgICB3aW5kb3cub25tb3VzZW1vdmUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAoaXNEb3duID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgbnggPSBlLmNsaWVudFg7CiAgICAgICAgICAgIHZhciBueSA9IGUuY2xpZW50WTsKICAgICAgICAgICAgdmFyIG5sID0gbnggLSAoeCAtIGwpOwogICAgICAgICAgICB2YXIgbnQgPSBueSAtICh5IC0gdCk7CiAgICAgICAgICAgIGVsLnBhcmVudE5vZGUuc3R5bGUubGVmdCA9IG5sICsgInB4IjsKICAgICAgICAgICAgZWwucGFyZW50Tm9kZS5zdHlsZS50b3AgPSBudCArICJweCI7CiAgICAgICAgICB9OwoKICAgICAgICAgIHdpbmRvdy5vbm1vdXNldXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlzRG93biA9IGZhbHNlOwogICAgICAgICAgICBlbC5zdHlsZS5jdXJzb3IgPSAiZGVmYXVsdCI7CiAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNlbW92ZSA9IG51bGw7CiAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNldXAgPSBudWxsOwogICAgICAgICAgfTsKCiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvY2F0aW9uczogIiIuY29uY2F0KGxvY2F0aW9uLm9yaWdpbiksCiAgICAgIGNoYW5nZTogZmFsc2UsCiAgICAgIGVtb2ppR3JvdXA6IGNodW5rKGVtb2ppTGlzdCwgMjApLAogICAgICAvLyDooajmg4XliJfooagKICAgICAgZW1vamlMaXN0OiBlbW9qaUxpc3QsCiAgICAgIGVtb2ppU2hvdzogZmFsc2UsCiAgICAgIHJlY29yZExpc3Q6IFtdLAogICAgICBsaW1pdDogMjAsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBmaW5pc2hlZDogZmFsc2UsCiAgICAgIGNoYXRDb250OiAiIiwKICAgICAgc2VydmljZTogbnVsbCwKICAgICAgc2VydmljZURhdGE6IHt9LAogICAgICB1cGxvYWRBY3Rpb246ICcnLAogICAgICBub3RpY2U6ICIiLAogICAgICBhdWRpbzogbnVsbCwKICAgICAgbXV0ZWQ6IGZhbHNlLAogICAgICBhdWRpb1NyYzogJycsCiAgICAgIHVwcGVySWQ6IDAsCiAgICAgIHVwbG9hZERhdGE6IHt9LAogICAgICBpc190b3VyaXN0OiAxLAogICAgICAvLyAw55m75b2V54q25oCB77yMMeacqueZu+W9leeKtuaAgea4uOWuogogICAgICB0ZXh0OiAnJywKICAgICAgaXNMb2FkOiBmYWxzZSwKICAgICAgcGFnZTogMSwKICAgICAgdG91cmlzdF9hdmF0YXI6ICcnLAogICAgICAvL+a4uOWuouWktOWDjwogICAgICB0b3VyaXN0X3VpZDogJycsCiAgICAgIC8v5ri45a6iaWQKICAgICAgdG9VaWQ6ICcnLAogICAgICAvL+WuouacjWlkCiAgICAgIGt1ZnVUb2tlbjogJycgLy8gdG9rZW4KCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIG11dGVkOiBmdW5jdGlvbiBtdXRlZCh2YWx1ZSkgewogICAgICB0aGlzLmF1ZGlvLm11dGVkID0gdmFsdWU7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgcmVjb3JkczogZnVuY3Rpb24gcmVjb3JkcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiB0aGlzLnJlY29yZExpc3QubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgIGlmIChpbmRleCkgewogICAgICAgICAgaWYgKG5ldyBEYXRlKGl0ZW0uYWRkX3RpbWUpIC0gbmV3IERhdGUoX3RoaXMucmVjb3JkTGlzdFtpbmRleCAtIDFdLmFkZF90aW1lKSA+PSAzMDAwMDApIHsKICAgICAgICAgICAgaXRlbS5zaG93ID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGl0ZW0uc2hvdyA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpdGVtLnNob3cgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBpdGVtOwogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBpZiAobG9jYXRpb24uaHJlZi5pbmRleE9mKCdrZWZ1JykgIT0gLTEpIHRoaXMudXBsb2FkQWN0aW9uID0gU2V0dGluZy5hcGlCYXNlVVJMLnJlcGxhY2UoL2FkbWluYXBpLywgImtlZnVhcGkiKSArICcvdG91cmlzdC91cGxvYWQnOwogICAgdmFyIHRva2VuID0gQ29va2llcy5nZXQoJ2F1dGguX3Rva2VuLmxvY2FsMScpOwogICAgdGhpcy5rdWZ1VG9rZW4gPSB0b2tlbiA/IHRva2VuLnNwbGl0KCJCZWFyZXIgIilbMV0gOiAnJzsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgIHRoYXQuZW1vamlTaG93ID0gZmFsc2U7CiAgICB9KTsKICAgIGlmICh0aGlzLiR3ZWNoYXQuX2lzTW9iaWxlKCkpIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcva2VmdS9tb2JpbGVfdXNlcl9jaGF0Jyk7CiAgICB0aGlzLmdldE5vdGljZSgpOwogICAgU29ja2V0LnRoZW4oZnVuY3Rpb24gKHdzKSB7CiAgICAgIGlmIChfdGhpczIua3VmdVRva2VuKSB7CiAgICAgICAgd3Muc2VuZCh7CiAgICAgICAgICB0eXBlOiAnbG9naW4nLAogICAgICAgICAgZGF0YTogX3RoaXMyLmt1ZnVUb2tlbgogICAgICAgIH0pOwogICAgICB9CgogICAgICBfdGhpczIuZ2V0U2VydmljZSgpOwoKICAgICAgd3MuJG9uKFsicmVwbHkiLCAiY2hhdCJdLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIGlmIChkYXRhLm1zbl90eXBlID09IDEpIHsKICAgICAgICAgIGRhdGEubXNuID0gX3RoaXMyLnJlcGxhY2VfZW0oZGF0YS5tc24pOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMyLnJlY29yZExpc3QucHVzaChkYXRhKTsKCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpczIuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5yZWNvcmQuc2Nyb2xsVG9wID0gdGhpcy4kcmVmcy5yZWNvcmQuc2Nyb2xsSGVpZ2h0IC0gdGhpcy4kcmVmcy5yZWNvcmQuY2xpZW50SGVpZ2h0OwogICAgICAgICAgfSk7CiAgICAgICAgfSwgMzAwKTsKICAgICAgfSk7IC8vIOebkeWQrOWuouacjei9rOaOpQoKICAgICAgd3MuJG9uKCd0b190cmFuc2ZlcicsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMyLnRvVWlkID0gZGF0YS50b1VpZDsKICAgICAgICB3cy5zZW5kKHsKICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgaWQ6IF90aGlzMi50b1VpZAogICAgICAgICAgfSwKICAgICAgICAgIHR5cGU6ICd0b19jaGF0JwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgd3MuJG9uKCJzb2NrZXRfZXJyb3IiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLiRNZXNzYWdlLmVycm9yKCfov57mjqXlpLHotKUnKTsKICAgICAgfSk7CiAgICAgIHdzLiRvbigiZXJyX3RpcCIsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMyLiRNZXNzYWdlLmVycm9yKGRhdGEubXNnKTsKICAgICAgfSk7CiAgICAgIHdzLiRvbigic3VjY2VzcyIsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMyLmlzX3RvdXJpc3QgPSAwOwogICAgICB9KTsKICAgIH0pOwogICAgdGhpcy50ZXh0ID0gdGhpcy5yZXBsYWNlX2VtKCdbZW0tc21pbGluZ19pbXBdJyk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy5zb2NrZXQuY2xvc2UoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uTG9vazogZnVuY3Rpb24gb25Mb29rKGlkKSB7CiAgICAgIHdpbmRvdy5vcGVuKCIiLmNvbmNhdChsb2NhdGlvbi5vcmlnaW4sICIvaG9tZS9nb29kc19kZXRhaWwvIikuY29uY2F0KGlkKSk7CiAgICB9LAogICAgLy8g5YWz6ZetCiAgICBjbG9zZUNoYW5nZTogZnVuY3Rpb24gY2xvc2VDaGFuZ2UobXNnKSB7CiAgICAgIHRoaXMuY2hhbmdlID0gbXNnOwogICAgfSwKICAgIC8vIOe7n+S4gOWPkemAgeWkhOeQhgogICAgc2VuZE1zZzogZnVuY3Rpb24gc2VuZE1zZyhtc24sIHR5cGUpIHsKICAgICAgdmFyIG9iaiA9IHsKICAgICAgICB0eXBlOiAnY2hhdCcsCiAgICAgICAgZGF0YTogewogICAgICAgICAgbXNuOiBtc24sCiAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgaXNfdG91cmlzdDogdGhpcy5pc190b3VyaXN0LAogICAgICAgICAgdG9fdWlkOiB0aGlzLnRvVWlkLAogICAgICAgICAgdG91cmlzdF91aWQ6IHRoaXMudG91cmlzdF91aWQsCiAgICAgICAgICB0b3VyaXN0X2F2YXRhcjogdGhpcy50b3VyaXN0X2F2YXRhciwKICAgICAgICAgIGZvcm1fdHlwZTogdGhpcy4kd2VjaGF0LmlzV2VpeGluKCkgPyAxIDogMwogICAgICAgIH0KICAgICAgfTsKICAgICAgU29ja2V0LnRoZW4oZnVuY3Rpb24gKHdzKSB7CiAgICAgICAgd3Muc2VuZChvYmopOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDpmo/mnLrlrqLmnI0KICAgIGdldFNlcnZpY2U6IGZ1bmN0aW9uIGdldFNlcnZpY2UoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgc2VydmljZUxpc3RBcGkoewogICAgICAgIHRva2VuOiB0aGlzLmt1ZnVUb2tlbiB8fCAnJwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczMuc2VydmljZURhdGEgPSByZXMuZGF0YTsKICAgICAgICBfdGhpczMudXBwZXJJZCA9IDA7CiAgICAgICAgX3RoaXMzLnRvVWlkID0gcmVzLmRhdGEudWlkOwogICAgICAgIF90aGlzMy50b3VyaXN0X3VpZCA9IHJlcy5kYXRhLnRvdXJpc3RfdWlkOwogICAgICAgIF90aGlzMy50b3VyaXN0X2F2YXRhciA9IHJlcy5kYXRhLnRvdXJpc3RfYXZhdGFyOwogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIGlkOiByZXMuZGF0YS51aWQsCiAgICAgICAgICAgIHRvdXJpc3RfdWlkOiBfdGhpczMudG91cmlzdF91aWQKICAgICAgICAgIH0sCiAgICAgICAgICB0eXBlOiAndG9fY2hhdCcKICAgICAgICB9OwogICAgICAgIFNvY2tldC50aGVuKGZ1bmN0aW9uICh3cykgewogICAgICAgICAgd3Muc2VuZChvYmopOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoX3RoaXMzLmt1ZnVUb2tlbikgewogICAgICAgICAgX3RoaXMzLmdldFJlY29yZExpc3QoKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpczMuJE1lc3NhZ2UuZXJyb3IoZXJyLm1zZyk7CgogICAgICAgIF90aGlzMy5jaGFuZ2UgPSB0cnVlOwogICAgICB9KTsKICAgIH0sCiAgICByb29tQ2xpY2s6IGZ1bmN0aW9uIHJvb21DbGljayhldmVudCkgey8vIGlmICgKICAgICAgLy8gICAgICFldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCJlbW9qaS1wYW5lbCIpICYmCiAgICAgIC8vICAgICAhZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygiZW1vamktYnRuIikgJiYKICAgICAgLy8gICAgICFldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCJpY29uLWJpYW9xaW5nIikgJiYKICAgICAgLy8gICAgIHRoaXMuZW1vamlTaG93CiAgICAgIC8vICkgewogICAgICAvLyAgICAgdGhpcy5lbW9qaVNob3cgPSBmYWxzZTsKICAgICAgLy8gfQogICAgfSwKICAgIC8vIGVudGVyIOWPkemAgQogICAgY3RybEVudGVyOiBmdW5jdGlvbiBjdHJsRW50ZXIoZSkgewogICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CgogICAgICBpZiAodGhpcy5jaGF0Q29udC50cmltKCkpIHsKICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDlhbPpl63ogYrlpKnnqpflj6MKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2hhdC1jbG9zZSIpOwogICAgfSwKICAgIC8vIOmAieaLqeihqOaDhQogICAgc2VsZWN0RW1vamk6IGZ1bmN0aW9uIHNlbGVjdEVtb2ppKGRhdGEpIHsKICAgICAgdmFyIHZhbCA9ICJbIi5jb25jYXQoZGF0YSwgIl0iKTsKICAgICAgdGhpcy5jaGF0Q29udCArPSB2YWw7CiAgICAgIHRoaXMuZW1vamlTaG93ID0gZmFsc2U7CiAgICB9LAogICAgLy8g6IGK5aSp6KGo5oOF6L2s5o2iCiAgICByZXBsYWNlX2VtOiBmdW5jdGlvbiByZXBsYWNlX2VtKHN0cikgewogICAgICBzdHIgPSBzdHIucmVwbGFjZSgvXFtlbS0oW2Etel9dKilcXS9nLCAiPHNwYW4gY2xhc3M9J2VtIGVtLSQxJy8+PC9zcGFuPiIpOwogICAgICByZXR1cm4gc3RyOwogICAgfSwKICAgIG9uU2Nyb2xsOiBmdW5jdGlvbiBvblNjcm9sbChldmVudCkgewogICAgICBpZiAoZXZlbnQudGFyZ2V0LnNjcm9sbFRvcCA8PSAzMCkgewogICAgICAgIGlmICh0aGlzLmt1ZnVUb2tlbikgewogICAgICAgICAgdGhpcy5nZXRSZWNvcmRMaXN0KCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g6IGK5aSp6K6w5b2VCiAgICBnZXRSZWNvcmRMaXN0OiBmdW5jdGlvbiBnZXRSZWNvcmRMaXN0KCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmxvYWRpbmcpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmZpbmlzaGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBjaGF0TGlzdEFwaSh7CiAgICAgICAgdWlkOiB0aGlzLnNlcnZpY2VEYXRhLnVpZCwKICAgICAgICBsaW1pdDogdGhpcy5saW1pdCwKICAgICAgICB1cHBlcklkOiB0aGlzLnVwcGVySWQsCiAgICAgICAgdG9rZW46IHRoaXMua3VmdVRva2VuCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5sZW5ndGggPT09IDApIHJldHVybiBfdGhpczQubG9hZGluZyA9IGZhbHNlOwogICAgICAgIHJlcy5kYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICBpZiAoZWwubXNuX3R5cGUgPT0gMSkgewogICAgICAgICAgICBlbC5tc24gPSBfdGhpczQucmVwbGFjZV9lbShlbC5tc24pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBzZWxlY3RvciA9ICcnOwoKICAgICAgICBpZiAoX3RoaXM0LnVwcGVySWQgPT0gMCkgewogICAgICAgICAgc2VsZWN0b3IgPSAiY2hhdF8iLmNvbmNhdChyZXMuZGF0YVtyZXMuZGF0YS5sZW5ndGggLSAxXS5pZCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNlbGVjdG9yID0gImNoYXRfIi5jb25jYXQoX3RoaXM0LnJlY29yZExpc3RbMF0uaWQpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXM0LnJlY29yZExpc3QgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5kYXRhKSwgX3RvQ29uc3VtYWJsZUFycmF5KF90aGlzNC5yZWNvcmRMaXN0KSk7CiAgICAgICAgX3RoaXM0LnVwcGVySWQgPSByZXMuZGF0YS5sZW5ndGggPiAwID8gcmVzLmRhdGFbMF0uaWQgOiAwOwogICAgICAgIF90aGlzNC5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgX3RoaXM0LmZpbmlzaGVkID0gcmVzLmRhdGEubGVuZ3RoIDwgX3RoaXM0LmxpbWl0OwoKICAgICAgICBfdGhpczQuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRoaXMuc2V0UGFnZVNjcm9sbFRvKHNlbGVjdG9yKTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzNC4kTWVzc2FnZS5lcnJvcihlcnIubXNnKTsKCiAgICAgICAgX3RoaXM0LmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6K6+572u6aG16Z2i5rua5Yqo5L2N572uCiAgICBzZXRQYWdlU2Nyb2xsVG86IGZ1bmN0aW9uIHNldFBhZ2VTY3JvbGxUbyhzZWxlY3RvcikgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoc2VsZWN0b3IpIHsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgbnVtID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3Rvcikub2Zmc2V0VG9wKSAtIDYwOwogICAgICAgICAgICBfdGhpczUuJHJlZnMucmVjb3JkLnNjcm9sbFRvcCA9IG51bTsKICAgICAgICAgIH0sIDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2NoYXRfc2Nyb2xsIik7CiAgICAgICAgICBfdGhpczUuJHJlZnMucmVjb3JkLnNjcm9sbFRvcCA9IGNvbnRhaW5lci5vZmZzZXRIZWlnaHQ7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgaWYgKF90aGlzNS4kcmVmcy5yZWNvcmQuc2Nyb2xsVG9wICE9IF90aGlzNS4kcmVmcy5zY3JvbGxCb3gub2Zmc2V0SGVpZ2h0KSB7CiAgICAgICAgICAgICAgX3RoaXM1LiRyZWZzLnJlY29yZC5zY3JvbGxUb3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjY2hhdF9zY3JvbGwiKS5vZmZzZXRIZWlnaHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDooajmg4XljIXmmL7npLrpmpDol48KICAgIGVtb2ppU3dpdGNoOiBmdW5jdGlvbiBlbW9qaVN3aXRjaCgpIHsKICAgICAgdGhpcy5lbW9qaVNob3cgPSAhdGhpcy5lbW9qaVNob3c7CiAgICB9LAogICAgLy8g5Y+R6YCB5raI5oGvCiAgICBzZW5kTWVzc2FnZTogZnVuY3Rpb24gc2VuZE1lc3NhZ2UoKSB7CiAgICAgIHRoaXMuc2VuZE1zZyh0aGlzLmNoYXRDb250LCAxKTsKICAgICAgdGhpcy5jaGF0Q29udCA9ICIiOwogICAgfSwKICAgIGNoYXQ6IGZ1bmN0aW9uIGNoYXQoZGF0YSkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIGlmIChkYXRhLnVpZCAhPSB0aGlzLiRhdXRoLnVzZXIudWlkICYmIHRoaXMuYXVkaW8pIHsKICAgICAgICB0aGlzLmF1ZGlvLnBsYXkoKTsKICAgICAgfQoKICAgICAgdGhpcy5yZWNvcmRMaXN0LnB1c2goZGF0YSk7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczYuJHJlZnMucmVjb3JkLnNjcm9sbFRvcCA9IF90aGlzNi4kcmVmcy5yZWNvcmQuc2Nyb2xsSGVpZ2h0IC0gX3RoaXM2LiRyZWZzLnJlY29yZC5jbGllbnRIZWlnaHQ7CiAgICAgIH0pOwogICAgfSwKICAgIHNlbmRHb29kczogZnVuY3Rpb24gc2VuZEdvb2RzKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmNoYXRPcHRpb25zLmdvb2RzSWQpIHsKICAgICAgICBTb2NrZXQudGhlbihmdW5jdGlvbiAod3MpIHsKICAgICAgICAgIHdzLnNlbmQoewogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgbXNuOiBfdGhpczcuY2hhdE9wdGlvbnMuZ29vZHNJZCwKICAgICAgICAgICAgICB0eXBlOiA1LAogICAgICAgICAgICAgIHRvX3VpZDogX3RoaXM3LnRvVWlkCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHR5cGU6ICJ0b19jaGF0IgogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBzZW5kT3JkZXI6IGZ1bmN0aW9uIHNlbmRPcmRlcigpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICBpZiAodGhpcy5jaGF0T3B0aW9ucy5vcmRlcklkKSB7CiAgICAgICAgU29ja2V0LnRoZW4oZnVuY3Rpb24gKHdzKSB7CiAgICAgICAgICB3cy5zZW5kKHsKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgIG1zbjogX3RoaXM4LmNoYXRPcHRpb25zLm9yZGVySWQsCiAgICAgICAgICAgICAgdHlwZTogNiwKICAgICAgICAgICAgICB0b191aWQ6IF90aGlzOC50b1VpZAogICAgICAgICAgICB9LAogICAgICAgICAgICB0eXBlOiAidG9fY2hhdCIKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgY2hhdEVuZDogZnVuY3Rpb24gY2hhdEVuZCgpIHsKICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSIpID4gMCkgewogICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1TSUUgNi4wIikgPiAwKSB7CiAgICAgICAgICB3aW5kb3cub3BlbmVyID0gbnVsbDsKICAgICAgICAgIHdpbmRvdy5jbG9zZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB3aW5kb3cub3BlbignJywgJ190b3AnKTsKICAgICAgICAgIHdpbmRvdy50b3AuY2xvc2UoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJGaXJlZm94IikgPiAwKSB7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnYWJvdXQ6YmxhbmsgJzsKICAgICAgfSBlbHNlIHsKICAgICAgICB3aW5kb3cub3BlbmVyID0gbnVsbDsKICAgICAgICB3aW5kb3cub3BlbignJywgJ19zZWxmJywgJycpOwogICAgICAgIHdpbmRvdy5jbG9zZSgpOwogICAgICB9CiAgICB9LAogICAgLy8g5bm/5ZGKCiAgICBnZXROb3RpY2U6IGZ1bmN0aW9uIGdldE5vdGljZSgpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICBnZXRBZHZBcGkoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczkubm90aWNlID0gcmVzLmRhdGEuY29udGVudDsKICAgICAgfSk7CiAgICB9LAogICAgYmVmb3JlVXBsb2FkOiBmdW5jdGlvbiBiZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICB0aGlzLnVwbG9hZERhdGEgPSB7CiAgICAgICAgZmlsZW5hbWU6IGZpbGUsCiAgICAgICAgdG9rZW46IHRoaXMua3VmdVRva2VuCiAgICAgIH07CiAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICBfdGhpczEwLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIHByb21pc2U7CiAgICB9LAogICAgaGFuZGxlRm9ybWF0RXJyb3I6IGZ1bmN0aW9uIGhhbmRsZUZvcm1hdEVycm9yKGZpbGUpIHsKICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcigi5LiK5Lyg5Zu+54mH5Y+q6IO95pivIGpwZ+OAgWpwZ+OAgWpwZWfjgIFnaWYg5qC85byPISIpOwogICAgfSwKICAgIHVwbG9hZFN1Y2Nlc3M6IGZ1bmN0aW9uIHVwbG9hZFN1Y2Nlc3MocmVzKSB7CiAgICAgIHRoaXMuc2VuZE1zZyhyZXMuZGF0YS51cmwsIDMpOwogICAgfSwKICAgIHVwbG9hZEVycm9yOiBmdW5jdGlvbiB1cGxvYWRFcnJvcihlcnJvcikgewogICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKGVycm9yKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0JA,OAAA,uCAAA;AACA,OAAA,SAAA,MAAA,eAAA;AACA,SAAA,MAAA,QAAA,eAAA;AACA,OAAA,OAAA,MAAA,WAAA;AACA,OAAA,OAAA,MAAA,WAAA;AACA,SAAA,WAAA,EAAA,cAAA,EAAA,SAAA,EAAA,WAAA,EAAA,WAAA,EAAA,UAAA,QAAA,YAAA;AACA,OAAA,QAAA;;AACA,IAAA,KAAA,GAAA,SAAA,KAAA,CAAA,GAAA,EAAA,GAAA,EAAA;AACA,EAAA,GAAA,GAAA,GAAA,GAAA,CAAA,IAAA,CAAA;AACA,MAAA,GAAA,GAAA,EAAA;AACA,EAAA,GAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA,CAAA,EAAA;AACA,QAAA,CAAA,GAAA,GAAA,KAAA,CAAA,EAAA;AACA,MAAA,GAAA,CAAA,IAAA,CAAA,EAAA;AACA;;AACA,IAAA,GAAA,CAAA,GAAA,CAAA,MAAA,GAAA,CAAA,CAAA,CAAA,IAAA,CAAA,IAAA;AACA,GALA;AAMA,SAAA,GAAA;AACA,CAVA;;AAWA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAAA,EAAA,KAFA;AAGA,EAAA,UAAA,EAAA;AACA,IAAA,QAAA,EAAA;AADA,GAHA;AAMA,EAAA,KAAA,EAAA;AACA,IAAA,WAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,oBAAA;AACA,eAAA;AACA,UAAA,IAAA,EAAA;AADA,SAAA;AAGA;AANA;AADA,GANA;AAgBA,EAAA,UAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,QAAA,EAAA,kBAAA,EAAA,EAAA;AACA,YAAA,CAAA,GAAA,CAAA;AACA,YAAA,CAAA,GAAA,CAAA;AACA,YAAA,CAAA,GAAA,CAAA;AACA,YAAA,CAAA,GAAA,CAAA;AACA,YAAA,MAAA,GAAA,KAAA;;AACA,QAAA,EAAA,CAAA,WAAA,GAAA,UAAA,CAAA,EAAA;AACA,UAAA,CAAA,GAAA,CAAA,CAAA,OAAA;AACA,UAAA,CAAA,GAAA,CAAA,CAAA,OAAA;AACA,UAAA,CAAA,GAAA,EAAA,CAAA,UAAA,CAAA,UAAA;AACA,UAAA,CAAA,GAAA,EAAA,CAAA,UAAA,CAAA,SAAA;AACA,UAAA,MAAA,GAAA,IAAA;AACA,UAAA,EAAA,CAAA,KAAA,CAAA,MAAA,GAAA,MAAA;;AACA,UAAA,MAAA,CAAA,WAAA,GAAA,UAAA,CAAA,EAAA;AACA,gBAAA,MAAA,IAAA,KAAA,EAAA;AACA;AACA;;AACA,gBAAA,EAAA,GAAA,CAAA,CAAA,OAAA;AACA,gBAAA,EAAA,GAAA,CAAA,CAAA,OAAA;AACA,gBAAA,EAAA,GAAA,EAAA,IAAA,CAAA,GAAA,CAAA,CAAA;AACA,gBAAA,EAAA,GAAA,EAAA,IAAA,CAAA,GAAA,CAAA,CAAA;AACA,YAAA,EAAA,CAAA,UAAA,CAAA,KAAA,CAAA,IAAA,GAAA,EAAA,GAAA,IAAA;AACA,YAAA,EAAA,CAAA,UAAA,CAAA,KAAA,CAAA,GAAA,GAAA,EAAA,GAAA,IAAA;AACA,WAVA;;AAWA,UAAA,MAAA,CAAA,SAAA,GAAA,YAAA;AACA,YAAA,MAAA,GAAA,KAAA;AACA,YAAA,EAAA,CAAA,KAAA,CAAA,MAAA,GAAA,SAAA;AACA,YAAA,MAAA,CAAA,WAAA,GAAA,IAAA;AACA,YAAA,MAAA,CAAA,SAAA,GAAA,IAAA;AACA,WALA;;AAMA,iBAAA,KAAA;AACA,SAzBA;AA0BA;AAjCA;AADA,GAhBA;AAqDA,EAAA,IArDA,kBAqDA;AACA,WAAA;AACA,MAAA,SAAA,YAAA,QAAA,CAAA,MAAA,CADA;AAEA,MAAA,MAAA,EAAA,KAFA;AAGA,MAAA,UAAA,EAAA,KAAA,CAAA,SAAA,EAAA,EAAA,CAHA;AAGA;AACA,MAAA,SAAA,EAAA,SAJA;AAKA,MAAA,SAAA,EAAA,KALA;AAMA,MAAA,UAAA,EAAA,EANA;AAOA,MAAA,KAAA,EAAA,EAPA;AAQA,MAAA,OAAA,EAAA,KARA;AASA,MAAA,QAAA,EAAA,KATA;AAUA,MAAA,QAAA,EAAA,EAVA;AAWA,MAAA,OAAA,EAAA,IAXA;AAYA,MAAA,WAAA,EAAA,EAZA;AAaA,MAAA,YAAA,EAAA,EAbA;AAcA,MAAA,MAAA,EAAA,EAdA;AAeA,MAAA,KAAA,EAAA,IAfA;AAgBA,MAAA,KAAA,EAAA,KAhBA;AAiBA,MAAA,QAAA,EAAA,EAjBA;AAkBA,MAAA,OAAA,EAAA,CAlBA;AAmBA,MAAA,UAAA,EAAA,EAnBA;AAoBA,MAAA,UAAA,EAAA,CApBA;AAoBA;AACA,MAAA,IAAA,EAAA,EArBA;AAsBA,MAAA,MAAA,EAAA,KAtBA;AAuBA,MAAA,IAAA,EAAA,CAvBA;AAwBA,MAAA,cAAA,EAAA,EAxBA;AAwBA;AACA,MAAA,WAAA,EAAA,EAzBA;AAyBA;AACA,MAAA,KAAA,EAAA,EA1BA;AA0BA;AACA,MAAA,SAAA,EAAA,EA3BA,CA2BA;;AA3BA,KAAA;AA6BA,GAnFA;AAoFA,EAAA,KAAA,EAAA;AACA,IAAA,KADA,iBACA,KADA,EACA;AACA,WAAA,KAAA,CAAA,KAAA,GAAA,KAAA;AACA;AAHA,GApFA;AAyFA,EAAA,QAAA,EAAA;AACA,IAAA,OADA,qBACA;AAAA;;AACA,aAAA,KAAA,UAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA,KAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,cACA,IAAA,IAAA,CAAA,IAAA,CAAA,QAAA,IACA,IAAA,IAAA,CAAA,KAAA,CAAA,UAAA,CAAA,KAAA,GAAA,CAAA,EAAA,QAAA,CADA,IAEA,MAHA,EAIA;AACA,YAAA,IAAA,CAAA,IAAA,GAAA,IAAA;AACA,WANA,MAMA;AACA,YAAA,IAAA,CAAA,IAAA,GAAA,KAAA;AACA;AACA,SAVA,MAUA;AACA,UAAA,IAAA,CAAA,IAAA,GAAA,KAAA;AACA;;AACA,eAAA,IAAA;AACA,OAfA,CAAA;AAgBA;AAlBA,GAzFA;AA6GA,EAAA,OA7GA,qBA6GA;AACA,QAAA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,KAAA,CAAA,CAAA,EAAA,KAAA,YAAA,GAAA,OAAA,CAAA,UAAA,CAAA,OAAA,CAAA,UAAA,EAAA,SAAA,IAAA,iBAAA;AACA,QAAA,KAAA,GAAA,OAAA,CAAA,GAAA,CAAA,oBAAA,CAAA;AACA,SAAA,SAAA,GAAA,KAAA,GAAA,KAAA,CAAA,KAAA,CAAA,SAAA,EAAA,CAAA,CAAA,GAAA,EAAA;AACA,GAjHA;AAkHA,EAAA,OAlHA,qBAkHA;AAAA;;AACA,QAAA,IAAA,GAAA,IAAA;AACA,IAAA,MAAA,CAAA,gBAAA,CAAA,OAAA,EAAA,YAAA;AACA,MAAA,IAAA,CAAA,SAAA,GAAA,KAAA;AACA,KAFA;AAGA,QAAA,KAAA,OAAA,CAAA,SAAA,EAAA,EAAA,KAAA,OAAA,CAAA,OAAA,CAAA,wBAAA;AACA,SAAA,SAAA;AACA,IAAA,MAAA,CAAA,IAAA,CAAA,UAAA,EAAA,EAAA;AACA,UAAA,MAAA,CAAA,SAAA,EAAA;AACA,QAAA,EAAA,CAAA,IAAA,CAAA;AACA,UAAA,IAAA,EAAA,OADA;AAEA,UAAA,IAAA,EAAA,MAAA,CAAA;AAFA,SAAA;AAIA;;AACA,MAAA,MAAA,CAAA,UAAA;;AACA,MAAA,EAAA,CAAA,GAAA,CAAA,CAAA,OAAA,EAAA,MAAA,CAAA,EAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,QAAA,IAAA,CAAA,EAAA;AACA,UAAA,IAAA,CAAA,GAAA,GAAA,MAAA,CAAA,UAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AACA;;AACA,QAAA,MAAA,CAAA,UAAA,CAAA,IAAA,CAAA,IAAA;;AACA,QAAA,UAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,SAAA,CAAA,YAAA;AACA,iBAAA,KAAA,CAAA,MAAA,CAAA,SAAA,GAAA,KAAA,KAAA,CAAA,MAAA,CAAA,YAAA,GAAA,KAAA,KAAA,CAAA,MAAA,CAAA,YAAA;AACA,WAFA;AAGA,SAJA,EAIA,GAJA,CAAA;AAMA,OAXA,EARA,CAoBA;;AACA,MAAA,EAAA,CAAA,GAAA,CAAA,aAAA,EAAA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA;AACA,QAAA,EAAA,CAAA,IAAA,CAAA;AACA,UAAA,IAAA,EAAA;AACA,YAAA,EAAA,EAAA,MAAA,CAAA;AADA,WADA;AAIA,UAAA,IAAA,EAAA;AAJA,SAAA;AAMA,OARA;AASA,MAAA,EAAA,CAAA,GAAA,CAAA,cAAA,EAAA,YAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,MAAA;AACA,OAFA;AAGA,MAAA,EAAA,CAAA,GAAA,CAAA,SAAA,EAAA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,IAAA,CAAA,GAAA;AACA,OAFA;AAGA,MAAA,EAAA,CAAA,GAAA,CAAA,SAAA,EAAA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,UAAA,GAAA,CAAA;AACA,OAFA;AAIA,KAxCA;AAyCA,SAAA,IAAA,GAAA,KAAA,UAAA,CAAA,kBAAA,CAAA;AACA,GAnKA;AAoKA,EAAA,aApKA,2BAoKA;AACA,SAAA,MAAA,CAAA,KAAA;AACA,GAtKA;AAuKA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,kBACA,EADA,EACA;AACA,MAAA,MAAA,CAAA,IAAA,WAAA,QAAA,CAAA,MAAA,gCAAA,EAAA;AACA,KAHA;AAIA;AACA,IAAA,WALA,uBAKA,GALA,EAKA;AACA,WAAA,MAAA,GAAA,GAAA;AACA,KAPA;AAQA;AACA,IAAA,OATA,mBASA,GATA,EASA,IATA,EASA;AACA,UAAA,GAAA,GAAA;AACA,QAAA,IAAA,EAAA,MADA;AAEA,QAAA,IAAA,EAAA;AACA,UAAA,GAAA,EAAA,GADA;AAEA,UAAA,IAAA,EAAA,IAFA;AAGA,UAAA,UAAA,EAAA,KAAA,UAHA;AAIA,UAAA,MAAA,EAAA,KAAA,KAJA;AAKA,UAAA,WAAA,EAAA,KAAA,WALA;AAMA,UAAA,cAAA,EAAA,KAAA,cANA;AAOA,UAAA,SAAA,EAAA,KAAA,OAAA,CAAA,QAAA,KAAA,CAAA,GAAA;AAPA;AAFA,OAAA;AAYA,MAAA,MAAA,CAAA,IAAA,CAAA,UAAA,EAAA,EAAA;AACA,QAAA,EAAA,CAAA,IAAA,CAAA,GAAA;AACA,OAFA;AAGA,KAzBA;AA0BA;AACA,IAAA,UA3BA,wBA2BA;AAAA;;AACA,MAAA,cAAA,CAAA;AAAA,QAAA,KAAA,EAAA,KAAA,SAAA,IAAA;AAAA,OAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,WAAA,GAAA,GAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,CAAA;AACA,QAAA,MAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,GAAA;AACA,QAAA,MAAA,CAAA,WAAA,GAAA,GAAA,CAAA,IAAA,CAAA,WAAA;AACA,QAAA,MAAA,CAAA,cAAA,GAAA,GAAA,CAAA,IAAA,CAAA,cAAA;AACA,YAAA,GAAA,GAAA;AACA,UAAA,IAAA,EAAA;AACA,YAAA,EAAA,EAAA,GAAA,CAAA,IAAA,CAAA,GADA;AAEA,YAAA,WAAA,EAAA,MAAA,CAAA;AAFA,WADA;AAKA,UAAA,IAAA,EAAA;AALA,SAAA;AAOA,QAAA,MAAA,CAAA,IAAA,CAAA,UAAA,EAAA,EAAA;AACA,UAAA,EAAA,CAAA,IAAA,CAAA,GAAA;AACA,SAFA;;AAGA,YAAA,MAAA,CAAA,SAAA,EAAA;AACA,UAAA,MAAA,CAAA,aAAA;AACA;AACA,OAnBA,EAmBA,KAnBA,CAmBA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,CAAA,GAAA;;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,IAAA;AACA,OAtBA;AAuBA,KAnDA;AAoDA,IAAA,SApDA,qBAoDA,KApDA,EAoDA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA7DA;AA8DA;AACA,IAAA,SA/DA,qBA+DA,CA/DA,EA+DA;AACA,UAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA;AACA,QAAA,CAAA,CAAA,cAAA;AACA;;AACA,UAAA,KAAA,QAAA,CAAA,IAAA,EAAA,EAAA;AACA,aAAA,WAAA;AACA;AACA,KAtEA;AAuEA;AACA,IAAA,KAxEA,mBAwEA;AACA,WAAA,KAAA,CAAA,YAAA;AACA,KA1EA;AA2EA;AACA,IAAA,WA5EA,uBA4EA,IA5EA,EA4EA;AACA,UAAA,GAAA,cAAA,IAAA,MAAA;AACA,WAAA,QAAA,IAAA,GAAA;AACA,WAAA,SAAA,GAAA,KAAA;AACA,KAhFA;AAiFA;AACA,IAAA,UAlFA,sBAkFA,GAlFA,EAkFA;AACA,MAAA,GAAA,GAAA,GAAA,CAAA,OAAA,CAAA,mBAAA,EAAA,iCAAA,CAAA;AACA,aAAA,GAAA;AACA,KArFA;AAsFA,IAAA,QAtFA,oBAsFA,KAtFA,EAsFA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,SAAA,IAAA,EAAA,EAAA;AACA,YAAA,KAAA,SAAA,EAAA;AACA,eAAA,aAAA;AACA;AACA;AACA,KA5FA;AA6FA;AACA,IAAA,aA9FA,2BA8FA;AAAA;;AACA,UAAA,KAAA,OAAA,EAAA;AACA;AACA;;AACA,UAAA,KAAA,QAAA,EAAA;AACA;AACA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,MAAA,WAAA,CAAA;AACA,QAAA,GAAA,EAAA,KAAA,WAAA,CAAA,GADA;AAEA,QAAA,KAAA,EAAA,KAAA,KAFA;AAGA,QAAA,OAAA,EAAA,KAAA,OAHA;AAIA,QAAA,KAAA,EAAA,KAAA;AAJA,OAAA,CAAA,CAKA,IALA,CAKA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA,OAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA,QAAA,GAAA,CAAA,IAAA,CAAA,OAAA,CAAA,UAAA,EAAA,EAAA;AACA,cAAA,EAAA,CAAA,QAAA,IAAA,CAAA,EAAA;AACA,YAAA,EAAA,CAAA,GAAA,GAAA,MAAA,CAAA,UAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AACA;AACA,SAJA;AAKA,YAAA,QAAA,GAAA,EAAA;;AACA,YAAA,MAAA,CAAA,OAAA,IAAA,CAAA,EAAA;AACA,UAAA,QAAA,kBAAA,GAAA,CAAA,IAAA,CAAA,GAAA,CAAA,IAAA,CAAA,MAAA,GAAA,CAAA,EAAA,EAAA,CAAA;AACA,SAFA,MAEA;AACA,UAAA,QAAA,kBAAA,MAAA,CAAA,UAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AACA;;AACA,QAAA,MAAA,CAAA,UAAA,gCAAA,GAAA,CAAA,IAAA,sBAAA,MAAA,CAAA,UAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,GAAA,CAAA,IAAA,CAAA,MAAA,GAAA,CAAA,GAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,EAAA,GAAA,CAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA,QAAA,MAAA,CAAA,QAAA,GAAA,GAAA,CAAA,IAAA,CAAA,MAAA,GAAA,MAAA,CAAA,KAAA;;AACA,QAAA,MAAA,CAAA,SAAA,CAAA,YAAA;AACA,eAAA,eAAA,CAAA,QAAA;AACA,SAFA;AAGA,OAzBA,EAyBA,KAzBA,CAyBA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,CAAA,GAAA;;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA,OA5BA;AA6BA,KAnIA;AAoIA;AACA,IAAA,eArIA,2BAqIA,QArIA,EAqIA;AAAA;;AACA,WAAA,SAAA,CAAA,YAAA;AACA,YAAA,QAAA,EAAA;AACA,UAAA,UAAA,CAAA,YAAA;AACA,gBAAA,GAAA,GAAA,UAAA,CAAA,QAAA,CAAA,cAAA,CAAA,QAAA,EAAA,SAAA,CAAA,GAAA,EAAA;AACA,YAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,SAAA,GAAA,GAAA;AACA,WAHA,EAGA,CAHA,CAAA;AAIA,SALA,MAKA;AACA,cAAA,SAAA,GAAA,QAAA,CAAA,aAAA,CAAA,cAAA,CAAA;AACA,UAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,SAAA,GAAA,SAAA,CAAA,YAAA;AACA,UAAA,UAAA,CAAA,UAAA,GAAA,EAAA;AACA,gBAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,SAAA,IAAA,MAAA,CAAA,KAAA,CAAA,SAAA,CAAA,YAAA,EAAA;AACA,cAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,SAAA,GAAA,QAAA,CAAA,aAAA,CAAA,cAAA,EAAA,YAAA;AACA;AACA,WAJA,EAIA,GAJA,CAAA;AAKA;AACA,OAfA;AAgBA,KAtJA;AAuJA;AACA,IAAA,WAxJA,yBAwJA;AACA,WAAA,SAAA,GAAA,CAAA,KAAA,SAAA;AACA,KA1JA;AA2JA;AACA,IAAA,WA5JA,yBA4JA;AACA,WAAA,OAAA,CAAA,KAAA,QAAA,EAAA,CAAA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,KA/JA;AAgKA,IAAA,IAhKA,gBAgKA,IAhKA,EAgKA;AAAA;;AACA,UAAA,IAAA,CAAA,GAAA,IAAA,KAAA,KAAA,CAAA,IAAA,CAAA,GAAA,IAAA,KAAA,KAAA,EAAA;AACA,aAAA,KAAA,CAAA,IAAA;AACA;;AACA,WAAA,UAAA,CAAA,IAAA,CAAA,IAAA;AACA,WAAA,SAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,SAAA,GACA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,YAAA,GAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,YADA;AAEA,OAHA;AAIA,KAzKA;AA0KA,IAAA,SA1KA,uBA0KA;AAAA;;AACA,UAAA,KAAA,WAAA,CAAA,OAAA,EAAA;AACA,QAAA,MAAA,CAAA,IAAA,CAAA,UAAA,EAAA,EAAA;AACA,UAAA,EAAA,CAAA,IAAA,CAAA;AACA,YAAA,IAAA,EAAA;AACA,cAAA,GAAA,EAAA,MAAA,CAAA,WAAA,CAAA,OADA;AAEA,cAAA,IAAA,EAAA,CAFA;AAGA,cAAA,MAAA,EAAA,MAAA,CAAA;AAHA,aADA;AAMA,YAAA,IAAA,EAAA;AANA,WAAA;AAQA,SATA;AAUA;AACA,KAvLA;AAwLA,IAAA,SAxLA,uBAwLA;AAAA;;AACA,UAAA,KAAA,WAAA,CAAA,OAAA,EAAA;AACA,QAAA,MAAA,CAAA,IAAA,CAAA,UAAA,EAAA,EAAA;AACA,UAAA,EAAA,CAAA,IAAA,CAAA;AACA,YAAA,IAAA,EAAA;AACA,cAAA,GAAA,EAAA,MAAA,CAAA,WAAA,CAAA,OADA;AAEA,cAAA,IAAA,EAAA,CAFA;AAGA,cAAA,MAAA,EAAA,MAAA,CAAA;AAHA,aADA;AAMA,YAAA,IAAA,EAAA;AANA,WAAA;AAQA,SATA;AAUA;AACA,KArMA;AAsMA,IAAA,OAtMA,qBAsMA;AACA,UAAA,SAAA,CAAA,SAAA,CAAA,OAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,YAAA,SAAA,CAAA,SAAA,CAAA,OAAA,CAAA,UAAA,IAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,MAAA,GAAA,IAAA;AACA,UAAA,MAAA,CAAA,KAAA;AACA,SAHA,MAGA;AACA,UAAA,MAAA,CAAA,IAAA,CAAA,EAAA,EAAA,MAAA;AACA,UAAA,MAAA,CAAA,GAAA,CAAA,KAAA;AACA;AACA,OARA,MASA,IAAA,SAAA,CAAA,SAAA,CAAA,OAAA,CAAA,SAAA,IAAA,CAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,IAAA,GAAA,cAAA;AACA,OAFA,MAEA;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,IAAA;AACA,QAAA,MAAA,CAAA,IAAA,CAAA,EAAA,EAAA,OAAA,EAAA,EAAA;AACA,QAAA,MAAA,CAAA,KAAA;AACA;AACA,KAvNA;AAwNA;AACA,IAAA,SAzNA,uBAyNA;AAAA;;AACA,MAAA,SAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,GAAA,CAAA,IAAA,CAAA,OAAA;AACA,OAFA;AAGA,KA7NA;AA8NA,IAAA,YA9NA,wBA8NA,IA9NA,EA8NA;AAAA;;AACA,WAAA,UAAA,GAAA;AACA,QAAA,QAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA,KAAA;AAFA,OAAA;AAIA,UAAA,OAAA,GAAA,IAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,QAAA,OAAA,CAAA,SAAA,CAAA,YAAA;AACA,UAAA,OAAA,CAAA,IAAA,CAAA;AACA,SAFA;AAGA,OAJA,CAAA;AAKA,aAAA,OAAA;AACA,KAzOA;AA0OA,IAAA,iBA1OA,6BA0OA,IA1OA,EA0OA;AACA,WAAA,QAAA,CAAA,KAAA,CAAA,8BAAA;AACA,KA5OA;AA6OA,IAAA,aA7OA,yBA6OA,GA7OA,EA6OA;AACA,WAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,GAAA,EAAA,CAAA;AACA,KA/OA;AAgPA,IAAA,WAhPA,uBAgPA,KAhPA,EAgPA;AACA,WAAA,QAAA,CAAA,KAAA,CAAA,KAAA;AACA;AAlPA;AAvKA,CAAA","sourcesContent":["<template>\n    <div class=\"chat-room\">\n        <div\n                class=\"room\"\n                :class=\"{ win: !chatOptions.popup }\"\n                @click=\"roomClick\"\n        >\n            <div v-drag class=\"head\">\n                <div class=\"image\">\n                    <img v-lazy=\"serviceData && serviceData.avatar\" />\n                </div>\n                <div class=\"name\">{{ serviceData && serviceData.nickname }}</div>\n                <div :class=\"['iconfont', muted ? 'icon-shengyinjingyinxianxing' : 'icon-shengyinyinliang']\" @click.stop=\"muted = !muted\"></div>\n                <div class=\"iconfont icon-guanbi5\" @click.stop=\"close\"></div>\n            </div>\n            <div class=\"main\">\n                <div class=\"chat\">\n                    <div class=\"record\" @scroll=\"onScroll\" ref=\"record\">\n                        <div id=\"chat_scroll\" ref=\"scrollBox\">\n                            <Spin v-show=\"loading\">\n                                <Icon type=\"ios-loading\" size=18 class=\"demo-spin-icon-load\"></Icon>\n                                <div>Loading</div>\n                            </Spin>\n                            <ul>\n                                <template v-for=\"item in records\">\n                                    <li :key=\"item.id\" :class=\"{ right: item.uid === serviceData.tourist_uid }\" :id=\"`chat_${item.id}`\">\n                                        <div v-if=\"item.show\" class=\"time-tag\">\n                                            {{ item.add_time }}\n                                        </div>\n                                        <div class=\"avatar\">\n                                            <img v-lazy=\"item.avatar\" />\n                                        </div>\n                                        <div class=\"content\" ref=\"chatContent\">\n                                            <div v-if=\"item.msn_type === 1\" class=\"text\"  v-html=\"item.msn\"></div>\n                                            <div v-if=\"item.msn_type === 2\" class=\"image\">\n                                                <div class=\"text\">\n                                                    <i :class=\"`em ${item.msn}`\"></i>\n                                                </div>\n                                            </div>\n                                            <div v-if=\"item.msn_type === 3\" class=\"image\" v-viewer>\n                                                <img v-lazy=\"item.msn\" />\n                                            </div>\n                                            <div v-if=\"item.msn_type === 5\" class=\"goods\">\n                                                <div class=\"thumb\">\n                                                    <img v-lazy=\"item.productInfo.image\" />\n                                                </div>\n                                                <div class=\"intro\">\n                                                    <div class=\"name\">\n                                                        {{ item.productInfo.store_name }}\n                                                    </div>\n                                                    <div class=\"attr\">\n                                                        <span>库存：{{ item.productInfo.stock }}</span>\n                                                        <span>销量：{{ item.productInfo.sales }}</span>\n                                                    </div>\n                                                    <div class=\"group\">\n                                                        <div class=\"money\">\n                                                            ￥{{ item.productInfo.price }}\n                                                        </div>\n                                                        <span style=\"cursor: pointer\" @click.stop=\"onLook(item.productInfo.id)\">查看商品 ></span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <template v-if=\"item.msn_type === 6\">\n                                                <div\n                                                        v-for=\"itm in item.orderInfo.cartInfo\"\n                                                        :key=\"itm.id\"\n                                                        class=\"order\"\n                                                >\n                                                    <div class=\"thumb\">\n                                                        <img :src=\"itm.productInfo.image\" />\n                                                    </div>\n                                                    <div class=\"intro\">\n                                                        <div class=\"name\">\n                                                            订单ID：{{ item.orderInfo.order_id }}\n                                                        </div>\n                                                        <div class=\"attr\">商品数量：{{ itm.cart_num }}</div>\n                                                        <div class=\"group\">\n                                                            <div class=\"money\">\n                                                                ￥{{ itm.productInfo.price }}\n                                                            </div>\n                                                            <nuxt-link\n                                                                    target=\"_blank\"\n                                                                    :to=\"{\n                                path: '/order_detail',\n                                query: { orderId: item.orderInfo.order_id },\n                              }\"\n                                                            >查看订单 ></nuxt-link\n                                                            >\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </template>\n                                        </div>\n                                    </li>\n                                </template>\n                            </ul>\n                        </div>\n\n                    </div>\n                    <div class=\"editor\">\n                        <div class=\"editor-hd\">\n                            <div>\n                                <button class=\"emoji-btn\" title=\"表情\" @click.stop=\"emojiSwitch\">\n                                    <span class=\"iconfont iconbiaoqing1\"></span>\n                                </button>\n                                <button title=\"图片\" v-if=\"kufuToken\">\n                                    <Upload :show-upload-list=\"false\" :action=\"uploadAction\"\n                                            :before-upload=\"beforeUpload\"\n                                            :format=\"['jpg','jpeg','png','gif']\"\n                                            :on-format-error=\"handleFormatError\"\n                                            :data=\"uploadData\"\n                                            :on-success=\"uploadSuccess\"\n                                            :on-error=\"uploadError\"\n                                            >\n                                        <span class=\"iconfont icontupian1\"></span>\n                                    </Upload>\n                                </button>\n                            </div>\n<!--                            <div>-->\n<!--                                <button class=\"end\" @click=\"chatEnd\">-->\n<!--                                    <i class=\"iconfont icon-guanji\"></i>结束-->\n<!--                                </button>-->\n<!--                            </div>-->\n                            <!-- 表情 -->\n                            <div class=\"emoji-panel\" v-if=\"emojiShow\">\n                                <i class=\"em\" :class=\"emoji\" @click.stop=\"selectEmoji(emoji)\" v-for=\"(emoji, index) in emojiList\" :key=\"index\"></i>\n                            </div>\n                        </div>\n                        <div class=\"editor-bd\">\n              <textarea\n                      v-model=\"chatCont\"\n                      placeholder=\"请输入文字内容\"\n                      @keydown.enter=\"ctrlEnter\"\n              ></textarea>\n                        </div>\n                        <div class=\"editor-ft\">\n                            <button :disabled=\"!chatCont\" @click.stop=\"sendMessage\">发送</button>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"notice\">\n                    <div v-if=\"notice\" class=\"rich\" v-html=\"notice\"></div>\n                    <div class=\"copy\">\n                        <a href=\"https://www.csyongyi.com/\" target=\"_blank\">永益科技提供技术支持</a>\n                    </div>\n                </div>\n            </div>\n            <audio ref=\"audio\" :src=\"audioSrc\"></audio>\n        </div>\n        <feed-back   @closeChange=\"closeChange($event)\"  v-if=\"change\" :change=\"change\"></feed-back>\n    </div>\n</template>\n\n<script>\n    import \"emoji-awesome/dist/css/google.min.css\";\n    import emojiList from \"@/utils/emoji\";\n    import {Socket} from \"@/libs/socket\";\n    import Setting from \"@/setting\";\n    import Cookies from 'js-cookie';\n    import { chatListApi, serviceListApi, getAdvApi, serviceList, getOrderApi,productApi } from '@/api/kefu';\n    import feedBack from './feedback';\n    const chunk = function(arr, num) {\n        num = num * 1 || 1;\n        var ret = [];\n        arr.forEach(function(item, i) {\n            if (i % num === 0) {\n                ret.push([]);\n            }\n            ret[ret.length - 1].push(item);\n        });\n        return ret;\n    };\n    export default {\n        name: \"ChatRoom\",\n        auth: false,\n        components:{\n            feedBack\n        },\n        props: {\n            chatOptions: {\n                type: Object,\n                default: function () {\n                    return {\n                        show: false,\n                    };\n                },\n            },\n        },\n        directives: {\n            drag: {\n                inserted: function (el) {\n                    let x = 0;\n                    let y = 0;\n                    let l = 0;\n                    let t = 0;\n                    let isDown = false;\n                    el.onmousedown = function (e) {\n                        x = e.clientX;\n                        y = e.clientY;\n                        l = el.parentNode.offsetLeft;\n                        t = el.parentNode.offsetTop;\n                        isDown = true;\n                        el.style.cursor = \"move\";\n                        window.onmousemove = function (e) {\n                            if (isDown == false) {\n                                return;\n                            }\n                            let nx = e.clientX;\n                            let ny = e.clientY;\n                            let nl = nx - (x - l);\n                            let nt = ny - (y - t);\n                            el.parentNode.style.left = nl + \"px\";\n                            el.parentNode.style.top = nt + \"px\";\n                        };\n                        window.onmouseup = function () {\n                            isDown = false;\n                            el.style.cursor = \"default\";\n                            window.onmousemove = null;\n                            window.onmouseup = null;\n                        };\n                        return false;\n                    };\n                },\n            },\n        },\n        data() {\n            return {\n                locations: `${location.origin}`,\n                change: false,\n                emojiGroup: chunk(emojiList, 20), // 表情列表\n                emojiList: emojiList,\n                emojiShow: false,\n                recordList: [],\n                limit: 20,\n                loading: false,\n                finished: false,\n                chatCont: \"\",\n                service: null,\n                serviceData: {},\n                uploadAction: '',\n                notice: \"\",\n                audio: null,\n                muted: false,\n                audioSrc: '',\n                upperId: 0,\n                uploadData: {},\n                is_tourist: 1, // 0登录状态，1未登录状态游客\n                text:'',\n                isLoad: false,\n                page: 1,\n                tourist_avatar: '', //游客头像\n                tourist_uid: '', //游客id\n                toUid: '', //客服id\n                kufuToken: '' // token\n            };\n        },\n        watch: {\n            muted(value) {\n                this.audio.muted = value;\n            }\n        },\n        computed: {\n            records() {\n                return this.recordList.map((item, index) => {\n                    if (index) {\n                        if (\n                            new Date(item.add_time) -\n                            new Date(this.recordList[index - 1].add_time) >=\n                            300000\n                        ) {\n                            item.show = true;\n                        } else {\n                            item.show = false;\n                        }\n                    } else {\n                        item.show = false;\n                    }\n                    return item;\n                });\n            },\n        },\n        created() {\n            if(location.href.indexOf('kefu')!=-1) this.uploadAction = Setting.apiBaseURL.replace(/adminapi/, \"kefuapi\")+'/tourist/upload';\n            let token = Cookies.get('auth._token.local1');\n            this.kufuToken = token?token.split(\"Bearer \")[1]: '';\n        },\n        mounted() {\n            let that = this\n            window.addEventListener('click',function(){\n                that.emojiShow = false\n            });\n            if (this.$wechat._isMobile()) this.$router.replace('/kefu/mobile_user_chat');\n            this.getNotice();\n            Socket.then(ws=>{\n                if(this.kufuToken){\n                    ws.send({\n                        type: 'login',\n                        data: this.kufuToken\n                    })\n                }\n                this.getService();\n                ws.$on([\"reply\", \"chat\"], data => {\n                    if(data.msn_type == 1){\n                        data.msn = this.replace_em(data.msn)\n                    }\n                    this.recordList.push(data)\n                    setTimeout(res=>{\n                        this.$nextTick(function () {\n                            this.$refs.record.scrollTop = this.$refs.record.scrollHeight - this.$refs.record.clientHeight;\n                        });\n                    },300)\n\n                });\n                // 监听客服转接\n                ws.$on('to_transfer', data => {\n                    this.toUid = data.toUid;\n                    ws.send({\n                        data: {\n                            id: this.toUid\n                        },\n                        type: 'to_chat'\n                    });\n                });\n                ws.$on(\"socket_error\", () => {\n                    this.$Message.error('连接失败')\n                });\n                ws.$on(\"err_tip\", data => {\n                    this.$Message.error(data.msg)\n                });\n                ws.$on(\"success\", data => {\n                    this.is_tourist = 0;\n                });\n\n            });\n            this.text = this.replace_em('[em-smiling_imp]')\n        },\n        beforeDestroy() {\n            this.socket.close();\n        },\n        methods: {\n            onLook(id){\n                window.open(`${location.origin}/home/goods_detail/${id}`);\n            },\n            // 关闭\n            closeChange(msg){\n                this.change = msg;\n            },\n            // 统一发送处理\n            sendMsg(msn,type) {\n                let obj = {\n                    type:'chat',\n                    data:{\n                        msn,\n                        type,\n                        is_tourist: this.is_tourist,\n                        to_uid: this.toUid,\n                        tourist_uid: this.tourist_uid,\n                        tourist_avatar: this.tourist_avatar,\n                        form_type: this.$wechat.isWeixin() ? 1 : 3,\n                    }\n                }\n                Socket.then(ws=> {\n                    ws.send(obj)\n                })\n            },\n            // 随机客服\n            getService() {\n                serviceListApi({token: this.kufuToken || ''}).then((res) => {\n                    this.serviceData = res.data;\n                    this.upperId = 0\n                    this.toUid = res.data.uid;\n                    this.tourist_uid = res.data.tourist_uid;\n                    this.tourist_avatar = res.data.tourist_avatar;\n                    let obj = {\n                        data: {\n                            id: res.data.uid,\n                            tourist_uid: this.tourist_uid\n                        },\n                        type: 'to_chat'\n                    }\n                    Socket.then(ws=> {\n                        ws.send(obj)\n                    })\n                    if(this.kufuToken){\n                       this.getRecordList();\n                    }\n                }).catch((err) => {\n                    this.$Message.error(err.msg);\n                    this.change = true;\n                });\n            },\n            roomClick(event) {\n                // if (\n                //     !event.target.classList.contains(\"emoji-panel\") &&\n                //     !event.target.classList.contains(\"emoji-btn\") &&\n                //     !event.target.classList.contains(\"icon-biaoqing\") &&\n                //     this.emojiShow\n                // ) {\n                //     this.emojiShow = false;\n                // }\n            },\n            // enter 发送\n            ctrlEnter(e) {\n                if (e.keyCode == 13) {\n                    e.preventDefault();\n                }\n                if (this.chatCont.trim()) {\n                    this.sendMessage();\n                }\n            },\n            // 关闭聊天窗口\n            close() {\n                this.$emit(\"chat-close\");\n            },\n            // 选择表情\n            selectEmoji(data) {\n                let val = `[${data}]`\n                this.chatCont += val\n                this.emojiShow = false;\n            },\n            // 聊天表情转换\n            replace_em(str) {\n                str = str.replace(/\\[em-([a-z_]*)\\]/g, \"<span class='em em-$1'/></span>\");\n                return str;\n            },\n            onScroll(event) {\n                if (event.target.scrollTop <=30) {\n                    if(this.kufuToken){\n                        this.getRecordList();\n                    }\n                }\n            },\n            // 聊天记录\n            getRecordList() {\n                if (this.loading) {\n                    return;\n                }\n                if (this.finished) {\n                    return;\n                }\n                this.loading = true;\n                chatListApi({\n                    uid: this.serviceData.uid,\n                    limit: this.limit,\n                    upperId:this.upperId,\n                    token: this.kufuToken\n                }).then((res) => {\n                   if(res.data.length === 0) return this.loading = false;\n                    res.data.forEach(el=>{\n                        if(el.msn_type == 1){\n                            el.msn = this.replace_em(el.msn)\n                        }\n                    })\n                    let selector = ''\n                    if(this.upperId == 0){\n                        selector = `chat_${res.data[res.data.length-1].id}`;\n                    }else{\n                        selector = `chat_${this.recordList[0].id}`;\n                    }\n                    this.recordList = [...res.data,...this.recordList];\n                    this.upperId = res.data.length>0?res.data[0].id : 0\n                    this.loading = false;\n                    this.finished = res.data.length < this.limit;\n                    this.$nextTick(function () {\n                        this.setPageScrollTo(selector)\n                    });\n                }).catch((err) => {\n                    this.$Message.error(err.msg);\n                    this.loading = false;\n                })\n            },\n            // 设置页面滚动位置\n            setPageScrollTo(selector){\n                this.$nextTick(()=>{\n                    if(selector){\n                        setTimeout(()=>{\n                            let num = parseFloat(document.getElementById(selector).offsetTop)-60\n                            this.$refs.record.scrollTop = num\n                        },0)\n                    }else{\n                        var container =document.querySelector(\"#chat_scroll\");\n                        this.$refs.record.scrollTop = container.offsetHeight\n                        setTimeout(res=>{\n                            if( this.$refs.record.scrollTop != this.$refs.scrollBox.offsetHeight){\n                                this.$refs.record.scrollTop = document.querySelector(\"#chat_scroll\").offsetHeight\n                            }\n                        },300)\n                    }\n                })\n            },\n            // 表情包显示隐藏\n            emojiSwitch() {\n                this.emojiShow = !this.emojiShow;\n            },\n            // 发送消息\n            sendMessage() {\n                this.sendMsg(this.chatCont, 1)\n                this.chatCont = \"\";\n            },\n            chat(data) {\n                if (data.uid != this.$auth.user.uid && this.audio) {\n                    this.audio.play();\n                }\n                this.recordList.push(data);\n                this.$nextTick(() => {\n                    this.$refs.record.scrollTop =\n                        this.$refs.record.scrollHeight - this.$refs.record.clientHeight;\n                });\n            },\n            sendGoods() {\n                if (this.chatOptions.goodsId) {\n                    Socket.then(ws => {\n                        ws.send({\n                            data: {\n                                msn: this.chatOptions.goodsId,\n                                type: 5,\n                                to_uid: this.toUid,\n                            },\n                            type: \"to_chat\"\n                        })\n                    })\n                }\n            },\n            sendOrder() {\n                if (this.chatOptions.orderId) {\n                    Socket.then(ws=> {\n                        ws.send({\n                                data: {\n                                    msn: this.chatOptions.orderId,\n                                    type: 6,\n                                    to_uid: this.toUid,\n                                },\n                            type: \"to_chat\"\n                        })\n                    })\n                }\n            },\n            chatEnd() {\n                if (navigator.userAgent.indexOf(\"MSIE\") > 0) {\n                    if (navigator.userAgent.indexOf(\"MSIE 6.0\") > 0) {\n                        window.opener = null;\n                        window.close();\n                    } else {\n                        window.open('', '_top');\n                        window.top.close();\n                    }\n                }\n                else if (navigator.userAgent.indexOf(\"Firefox\") > 0) {\n                    window.location.href = 'about:blank ';\n                } else {\n                    window.opener = null;\n                    window.open('', '_self', '');\n                    window.close();\n                }\n            },\n            // 广告\n            getNotice() {\n                getAdvApi().then((res) => {\n                    this.notice = res.data.content;\n                });\n            },\n            beforeUpload(file) {\n                this.uploadData = {\n                    filename: file,\n                    token: this.kufuToken\n                }\n                let promise = new Promise((resolve) => {\n                    this.$nextTick(function () {\n                        resolve(true);\n                    });\n                });\n                return promise;\n            },\n            handleFormatError (file) {\n                this.$Message.error(\"上传图片只能是 jpg、jpg、jpeg、gif 格式!\");\n            },\n            uploadSuccess(res) {\n                this.sendMsg(res.data.url,3)\n            },\n            uploadError(error) {\n                this.$Message.error(error);\n            }\n        }\n    };\n</script>\n\n<style lang=\"less\" scoped>\n    @import \"../../../styles/emoji-awesome/css/google.min.css\";\n    li{\n        list-style-type:none;\n    }\n    .chat-room {\n        .room {\n            border-radius:10px;\n            position: fixed;\n            top: calc(50% - 327px);\n            left: calc(50% - 365px);\n            z-index: 999;\n            display: flex;\n            flex-direction: column;\n            width: 730px;\n            height: 654px;\n            background-color: #ffffff;\n            overflow: hidden;\n            box-shadow: 1px 1px 15px 0 rgba(0, 0, 0, 0.1);\n\n            &.win {\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n            }\n\n            .head {\n                display: flex;\n                align-items: center;\n                height: 50px;\n                padding-right: 15px;\n                padding-left: 20px;\n                background: linear-gradient(270deg, #1890ff 0%, #3875ea 100%);\n\n                .image {\n                    width: 36px;\n                    height: 36px;\n                    border-radius: 50%;\n                    overflow: hidden;\n\n                    img {\n                        display: block;\n                        width: 100%;\n                        height: 100%;\n                        object-fit: cover;\n                    }\n                }\n\n                .name {\n                    flex: 1;\n                    min-width: 0;\n                    margin-left: 15px;\n                    font-size: 16px;\n                    color: #ffffff;\n                }\n\n                .iconfont {\n                    width: 25px;\n                    height: 25px;\n                    font-size: 16px;\n                    line-height: 25px;\n                    text-align: center;\n                    color: #ffffff;\n                    cursor: pointer;\n                }\n            }\n\n            .main {\n                flex: 1;\n                display: flex;\n                min-height: 0;\n\n                .chat {\n                    flex: 1;\n                    display: flex;\n                    flex-direction: column;\n                    min-width: 0;\n                }\n\n                .record {\n                    flex: 1;\n                    min-height: 0;\n                    overflow-x: hidden;\n                    overflow-y: auto;\n\n                    &::-webkit-scrollbar {\n                        display: none;\n                    }\n\n                    ul {\n                        padding: 20px;\n                    }\n\n                    li {\n                        ~ li {\n                            margin-top: 20px;\n                        }\n\n                        &::after {\n                            content: \"\";\n                            display: block;\n                            height: 0;\n                            clear: both;\n                            visibility: hidden;\n                        }\n\n                        &.right {\n                            .avatar {\n                                float: right;\n                            }\n\n                            .content {\n                                text-align: right;\n\n                                > div {\n                                    text-align: left;\n                                }\n                            }\n                        }\n                    }\n\n                    .time-tag {\n                        padding-top: 10px;\n                        padding-bottom: 30px;\n                        text-align: center;\n                        color: #999999;\n                    }\n\n                    .avatar {\n                        float: left;\n                        width: 40px;\n                        height: 40px;\n                        border-radius: 50%;\n                        overflow: hidden;\n\n                        &.right {\n                            float: right;\n                        }\n\n                        img {\n                            display: block;\n                            width: 100%;\n                            height: 100%;\n                            object-fit: cover;\n                        }\n                    }\n\n                    .content {\n                        margin-right: 56px;\n                        margin-left: 56px;\n                    }\n\n                    .text {\n                        display: inline-block;\n                        min-height: 41px;\n                        padding: 10px 12px;\n                        border-radius: 10px;\n                        background-color: #f5f5f5;\n                        font-size: 15px;\n                        line-height: 21px;\n                        color: #000000;\n                    }\n\n                    .image {\n                        display: inline-block;\n                        max-width: 50%;\n                        border-radius: 10px;\n                        overflow: hidden;\n\n                        img {\n                            display: block;\n                            max-width: 100%;\n                        }\n                    }\n\n                    .goods,\n                    .order {\n                        display: inline-flex;\n                        align-items: center;\n                        width: 320px;\n                        padding: 10px 13px;\n                        border-radius: 10px;\n                        background-color: #f5f5f5;\n                    }\n\n                    .thumb {\n                        width: 60px;\n                        height: 60px;\n                        border-radius: 5px;\n                        overflow: hidden;\n\n                        img {\n                            display: block;\n                            width: 100%;\n                            height: 100%;\n                        }\n                    }\n\n                    .intro {\n                        flex: 1;\n                        min-width: 0;\n                        margin-left: 10px;\n\n                        .name {\n                            overflow: hidden;\n                            white-space: nowrap;\n                            text-overflow: ellipsis;\n                            font-size: 15px;\n                            color: #000000;\n                        }\n\n                        .attr {\n                            margin-top: 5px;\n                            font-size: 12px;\n                            color: #999999;\n\n                            span {\n                                vertical-align: middle;\n\n                                ~ span {\n                                    margin-left: 10px;\n                                }\n                            }\n                        }\n\n                        .group {\n                            display: flex;\n                            justify-content: space-between;\n                            align-items: center;\n                            margin-top: 5px;\n\n                            .money {\n                                font-size: 14px;\n                                color: #ff0000;\n                            }\n\n                            a {\n                                font-size: 12px;\n                                color: #1890ff;\n                            }\n                        }\n                    }\n                }\n\n                .editor {\n                    display: flex;\n                    flex-direction: column;\n                    height: 162px;\n                    border-top: 1px solid #ececec;\n\n                    > div {\n                        &:first-child {\n                            font-size: 0;\n                        }\n                    }\n\n                    button {\n                        border: none;\n                        background: none;\n                        outline: none;\n\n                        ~ button {\n                            margin-left: 20px;\n                        }\n\n                        &.end {\n                            font-size: 15px;\n                        }\n\n                        &:hover {\n                            color: #1890ff;\n\n                            .iconfont {\n                                color: #1890ff;\n                            }\n                        }\n                    }\n\n                    .editor-hd {\n                        position: relative;\n                        display: flex;\n                        justify-content: space-between;\n                        align-items: center;\n                        height: 50px;\n                        padding-right: 20px;\n                        padding-left: 20px;\n\n                        .iconfont {\n                            line-height: 1;\n                            color: #333333;\n                        }\n\n                        .emoji-panel {\n                            position: absolute;\n                            bottom: 100%;\n                            left: 5px;\n                            width: 390px;\n                            padding-bottom: 10px;\n                            border: 1px solid #ececec;\n                            margin-bottom: 5px;\n                            background-color: #ffffff;\n                            box-shadow: 1px 0 16px 0 rgba(0, 0, 0, 0.05);\n\n                            .em {\n                                width: 28px;\n                                height: 28px;\n                                padding: 4px;\n                                margin-top: 10px;\n                                margin-left: 10px;\n                                box-sizing: border-box;\n\n                                &:hover {\n                                    background-color: #ececec;\n                                }\n                            }\n                        }\n                    }\n\n                    .icon-biaoqing1,\n                    .icon-tupian1 {\n                        font-size: 22px;\n                    }\n\n                    .icon-guanji {\n                        margin-right: 5px;\n                        font-size: 15px;\n                    }\n\n                    .editor-bd {\n                        flex: 1;\n                        min-height: 0;\n\n                        textarea {\n                            display: block;\n                            width: 100%;\n                            height: 100%;\n                            padding-right: 20px;\n                            padding-left: 20px;\n                            border: none;\n                            outline: none;\n                            resize: none;\n                            white-space: pre-wrap;\n                            overflow-wrap: break-word;\n\n                            &::-webkit-scrollbar {\n                                display: none;\n                            }\n                        }\n                    }\n\n                    .editor-ft {\n                        display: flex;\n                        justify-content: flex-end;\n                        align-items: center;\n                        padding-right: 20px;\n                        padding-bottom: 20px;\n\n                        button {\n                            width: 68px;\n                            height: 26px;\n                            border: none;\n                            border-radius: 3px;\n                            background-color: #3875ea;\n                            outline: none;\n                            font-size: 13px;\n                            color: #ffffff;\n\n                            &:disabled {\n                                background-color: #cccccc;\n                            }\n                        }\n                    }\n                }\n\n                .notice {\n                    display: flex;\n                    flex-direction: column;\n                    width: 260px;\n                    border-left: 1px solid #ececec;\n\n                    .rich {\n                        flex: 1;\n                        min-height: 0;\n                        padding: 18px 18px 0;\n                        overflow-x: hidden;\n                        overflow-y: auto;\n\n                        &::-webkit-scrollbar {\n                            display: none;\n                        }\n\n                        /deep/ img {\n                            width: 100%;\n                        }\n\n                        /deep/ video {\n                            width: 100%;\n                        }\n                    }\n\n                    .copy {\n                        padding-top: 15px;\n                        padding-bottom: 15px;\n                        font-size: 12px;\n                        text-align: center;\n                        a {\n                            color: #cccccc!important;\n                            text-decoration: none;\n                        }\n                    }\n                }\n            }\n        }\n    }\n</style>\n"],"sourceRoot":"src/pages/kefu/appChat"}]}