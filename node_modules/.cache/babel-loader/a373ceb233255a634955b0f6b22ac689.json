{"remainingRequest":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js!/Users/hujun/Downloads/永益科技后端/src/directive/module/draggable.js","dependencies":[{"path":"/Users/hujun/Downloads/永益科技后端/src/directive/module/draggable.js","mtime":1610587844000},{"path":"/Users/hujun/Downloads/永益科技后端/.babelrc","mtime":1610587842000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hujun/Downloads/永益科技后端/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC5zcGxpdCI7CmltcG9ydCB7IG9uIH0gZnJvbSAnQC9saWJzL3Rvb2xzJzsKZXhwb3J0IGRlZmF1bHQgewogIGluc2VydGVkOiBmdW5jdGlvbiBpbnNlcnRlZChlbCwgYmluZGluZywgdm5vZGUpIHsKICAgIHZhciB0cmlnZ2VyRG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihiaW5kaW5nLnZhbHVlLnRyaWdnZXIpOwogICAgdHJpZ2dlckRvbS5zdHlsZS5jdXJzb3IgPSAnbW92ZSc7CiAgICB2YXIgYm9keURvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYmluZGluZy52YWx1ZS5ib2R5KTsKICAgIHZhciBwYWdlWCA9IDA7CiAgICB2YXIgcGFnZVkgPSAwOwogICAgdmFyIHRyYW5zZm9ybVggPSAwOwogICAgdmFyIHRyYW5zZm9ybVkgPSAwOwogICAgdmFyIGNhbk1vdmUgPSBmYWxzZTsKCiAgICB2YXIgaGFuZGxlTW91c2Vkb3duID0gZnVuY3Rpb24gaGFuZGxlTW91c2Vkb3duKGUpIHsKICAgICAgdmFyIHRyYW5zZm9ybSA9IC9cKC4qXCkvLmV4ZWMoYm9keURvbS5zdHlsZS50cmFuc2Zvcm0pOwoKICAgICAgaWYgKHRyYW5zZm9ybSkgewogICAgICAgIHRyYW5zZm9ybSA9IHRyYW5zZm9ybVswXS5zbGljZSgxLCB0cmFuc2Zvcm1bMF0ubGVuZ3RoIC0gMSk7CiAgICAgICAgdmFyIHNwbGl0eHkgPSB0cmFuc2Zvcm0uc3BsaXQoJ3B4LCAnKTsKICAgICAgICB0cmFuc2Zvcm1YID0gcGFyc2VGbG9hdChzcGxpdHh5WzBdKTsKICAgICAgICB0cmFuc2Zvcm1ZID0gcGFyc2VGbG9hdChzcGxpdHh5WzFdLnNwbGl0KCdweCcpWzBdKTsKICAgICAgfQoKICAgICAgcGFnZVggPSBlLnBhZ2VYOwogICAgICBwYWdlWSA9IGUucGFnZVk7CiAgICAgIGNhbk1vdmUgPSB0cnVlOwogICAgfTsKCiAgICB2YXIgaGFuZGxlTW91c2Vtb3ZlID0gZnVuY3Rpb24gaGFuZGxlTW91c2Vtb3ZlKGUpIHsKICAgICAgdmFyIHhPZmZzZXQgPSBlLnBhZ2VYIC0gcGFnZVggKyB0cmFuc2Zvcm1YOwogICAgICB2YXIgeU9mZnNldCA9IGUucGFnZVkgLSBwYWdlWSArIHRyYW5zZm9ybVk7CiAgICAgIGlmIChjYW5Nb3ZlKSBib2R5RG9tLnN0eWxlLnRyYW5zZm9ybSA9ICJ0cmFuc2xhdGUoIi5jb25jYXQoeE9mZnNldCwgInB4LCAiKS5jb25jYXQoeU9mZnNldCwgInB4KSIpOwogICAgfTsKCiAgICB2YXIgaGFuZGxlTW91c2V1cCA9IGZ1bmN0aW9uIGhhbmRsZU1vdXNldXAoZSkgewogICAgICBjYW5Nb3ZlID0gZmFsc2U7CiAgICB9OwoKICAgIG9uKHRyaWdnZXJEb20sICdtb3VzZWRvd24nLCBoYW5kbGVNb3VzZWRvd24pOwogICAgb24oZG9jdW1lbnQsICdtb3VzZW1vdmUnLCBoYW5kbGVNb3VzZW1vdmUpOwogICAgb24oZG9jdW1lbnQsICdtb3VzZXVwJywgaGFuZGxlTW91c2V1cCk7CiAgfSwKICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShlbCwgYmluZGluZywgdm5vZGUpIHsKICAgIGlmICghYmluZGluZy52YWx1ZS5yZWNvdmVyKSByZXR1cm47CiAgICB2YXIgYm9keURvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYmluZGluZy52YWx1ZS5ib2R5KTsKICAgIGJvZHlEb20uc3R5bGUudHJhbnNmb3JtID0gJyc7CiAgfQp9Ow=="},{"version":3,"sources":["/Users/hujun/Downloads/永益科技后端/src/directive/module/draggable.js"],"names":["on","inserted","el","binding","vnode","triggerDom","document","querySelector","value","trigger","style","cursor","bodyDom","body","pageX","pageY","transformX","transformY","canMove","handleMousedown","e","transform","exec","slice","length","splitxy","split","parseFloat","handleMousemove","xOffset","yOffset","handleMouseup","update","recover"],"mappings":";AAAA,SAASA,EAAT,QAAmB,cAAnB;AACA,eAAe;AACbC,EAAAA,QAAQ,EAAE,kBAACC,EAAD,EAAKC,OAAL,EAAcC,KAAd,EAAwB;AAChC,QAAIC,UAAU,GAAGC,QAAQ,CAACC,aAAT,CAAuBJ,OAAO,CAACK,KAAR,CAAcC,OAArC,CAAjB;AACAJ,IAAAA,UAAU,CAACK,KAAX,CAAiBC,MAAjB,GAA0B,MAA1B;AACA,QAAIC,OAAO,GAAGN,QAAQ,CAACC,aAAT,CAAuBJ,OAAO,CAACK,KAAR,CAAcK,IAArC,CAAd;AACA,QAAIC,KAAK,GAAG,CAAZ;AACA,QAAIC,KAAK,GAAG,CAAZ;AACA,QAAIC,UAAU,GAAG,CAAjB;AACA,QAAIC,UAAU,GAAG,CAAjB;AACA,QAAIC,OAAO,GAAG,KAAd;;AACA,QAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,CAAC,EAAI;AAC3B,UAAIC,SAAS,GAAG,SAASC,IAAT,CAAcV,OAAO,CAACF,KAAR,CAAcW,SAA5B,CAAhB;;AACA,UAAIA,SAAJ,EAAe;AACbA,QAAAA,SAAS,GAAGA,SAAS,CAAC,CAAD,CAAT,CAAaE,KAAb,CAAmB,CAAnB,EAAsBF,SAAS,CAAC,CAAD,CAAT,CAAaG,MAAb,GAAsB,CAA5C,CAAZ;AACA,YAAIC,OAAO,GAAGJ,SAAS,CAACK,KAAV,CAAgB,MAAhB,CAAd;AACAV,QAAAA,UAAU,GAAGW,UAAU,CAACF,OAAO,CAAC,CAAD,CAAR,CAAvB;AACAR,QAAAA,UAAU,GAAGU,UAAU,CAACF,OAAO,CAAC,CAAD,CAAP,CAAWC,KAAX,CAAiB,IAAjB,EAAuB,CAAvB,CAAD,CAAvB;AACD;;AACDZ,MAAAA,KAAK,GAAGM,CAAC,CAACN,KAAV;AACAC,MAAAA,KAAK,GAAGK,CAAC,CAACL,KAAV;AACAG,MAAAA,OAAO,GAAG,IAAV;AACD,KAXD;;AAYA,QAAMU,eAAe,GAAG,SAAlBA,eAAkB,CAAAR,CAAC,EAAI;AAC3B,UAAIS,OAAO,GAAGT,CAAC,CAACN,KAAF,GAAUA,KAAV,GAAkBE,UAAhC;AACA,UAAIc,OAAO,GAAGV,CAAC,CAACL,KAAF,GAAUA,KAAV,GAAkBE,UAAhC;AACA,UAAIC,OAAJ,EAAaN,OAAO,CAACF,KAAR,CAAcW,SAAd,uBAAuCQ,OAAvC,iBAAqDC,OAArD;AACd,KAJD;;AAKA,QAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAAX,CAAC,EAAI;AACzBF,MAAAA,OAAO,GAAG,KAAV;AACD,KAFD;;AAGAlB,IAAAA,EAAE,CAACK,UAAD,EAAa,WAAb,EAA0Bc,eAA1B,CAAF;AACAnB,IAAAA,EAAE,CAACM,QAAD,EAAW,WAAX,EAAwBsB,eAAxB,CAAF;AACA5B,IAAAA,EAAE,CAACM,QAAD,EAAW,SAAX,EAAsByB,aAAtB,CAAF;AACD,GAjCY;AAkCbC,EAAAA,MAAM,EAAE,gBAAC9B,EAAD,EAAKC,OAAL,EAAcC,KAAd,EAAwB;AAC9B,QAAI,CAACD,OAAO,CAACK,KAAR,CAAcyB,OAAnB,EAA4B;AAC5B,QAAIrB,OAAO,GAAGN,QAAQ,CAACC,aAAT,CAAuBJ,OAAO,CAACK,KAAR,CAAcK,IAArC,CAAd;AACAD,IAAAA,OAAO,CAACF,KAAR,CAAcW,SAAd,GAA0B,EAA1B;AACD;AAtCY,CAAf","sourcesContent":["import { on } from '@/libs/tools'\nexport default {\n  inserted: (el, binding, vnode) => {\n    let triggerDom = document.querySelector(binding.value.trigger);\n    triggerDom.style.cursor = 'move';\n    let bodyDom = document.querySelector(binding.value.body);\n    let pageX = 0;\n    let pageY = 0;\n    let transformX = 0;\n    let transformY = 0;\n    let canMove = false;\n    const handleMousedown = e => {\n      let transform = /\\(.*\\)/.exec(bodyDom.style.transform);\n      if (transform) {\n        transform = transform[0].slice(1, transform[0].length - 1);\n        let splitxy = transform.split('px, ');\n        transformX = parseFloat(splitxy[0]);\n        transformY = parseFloat(splitxy[1].split('px')[0])\n      }\n      pageX = e.pageX;\n      pageY = e.pageY;\n      canMove = true\n    };\n    const handleMousemove = e => {\n      let xOffset = e.pageX - pageX + transformX;\n      let yOffset = e.pageY - pageY + transformY;\n      if (canMove) bodyDom.style.transform = `translate(${xOffset}px, ${yOffset}px)`\n    };\n    const handleMouseup = e => {\n      canMove = false\n    };\n    on(triggerDom, 'mousedown', handleMousedown);\n    on(document, 'mousemove', handleMousemove);\n    on(document, 'mouseup', handleMouseup)\n  },\n  update: (el, binding, vnode) => {\n    if (!binding.value.recover) return;\n    let bodyDom = document.querySelector(binding.value.body);\n    bodyDom.style.transform = ''\n  }\n}\n"]}]}